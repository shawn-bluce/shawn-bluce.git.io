<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>With Xxx as Xxx ä¸ä¸Šä¸‹æ–‡ç®¡ç†å™¨</title>
      <link href="/2020/07/18/python-contextmanager/"/>
      <url>/2020/07/18/python-contextmanager/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä½¿ç”¨-with-as-è¯­æ³•"><a href="#0X00-ä½¿ç”¨-with-as-è¯­æ³•" class="headerlink" title="0X00 ä½¿ç”¨ with as è¯­æ³•"></a>0X00 ä½¿ç”¨ with as è¯­æ³•</h1><p>æˆ‘ä»¬å†™ç¨‹åºç»å¸¸ä¼šæ“ä½œæ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“å†™æ–‡ä»¶è¦ <code>open/write/close</code> ï¼Œå°¤å…¶æ˜¯ <code>close</code> ï¼Œæ²¡æœ‰çš„è¯æ–‡ä»¶å°±ä¼šå‡ºé—®é¢˜ï¼ˆæœ‰äº›å†…å®¹åœ¨ç¼“å­˜é‡Œï¼Œæ²¡å†™å…¥ç£ç›˜ï¼‰ã€‚ä¸è¿‡æˆ‘ä»¬ç°åœ¨å†™æ–‡ä»¶åº”è¯¥æ²¡ä»€ä¹ˆäººè¿™æ ·å†™äº†ï¼Œéƒ½æ˜¯ç”¨<code>with open(&#39;filename&#39;, &#39;w&#39;) as f</code>çš„æ–¹å¼æ¥æ“ä½œæ–‡ä»¶äº†ã€‚å¦‚æœè¯´è¿™æ ·åšçš„å¥½å¤„ï¼Œé‚£å¤šæ•°äººéƒ½ä¼šè¯´â€œä¸ç”¨æ‰‹åŠ¨å…³é—­æ–‡ä»¶äº†â€ï¼Œé”™è‚¯å®šæ²¡é”™çš„ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200718142750.png" alt></p><p>ä¸Šä¸‹æ¯”èµ·æ¥ï¼Œä¸Šé¢çš„æ–¹å¼ä¸ä»…å¤šäº†ä¸€ç‚¹ç‚¹ä»£ç ï¼Œè€Œä¸”éšç€ä¸­é—´é€»è¾‘ä»£ç å˜å¤šï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´æœ€åå¿˜è®° <code>close</code>ï¼Œä»è€Œå¼•å‘ bugã€‚</p><h1 id="0X01-è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨"><a href="#0X01-è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨" class="headerlink" title="0X01 è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨"></a>0X01 è¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h1><p>ä¸Šé¢ <code>with xxx as xxx</code> çš„è°ƒç”¨æ–¹å¼å°±æ˜¯åœ¨è°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚ç®€å•æ¥è¯´ä¸Šä¸‹æ–‡ç®¡ç†å™¨å°±æ˜¯ï¼šåœ¨æ‰§è¡Œä½ ç¼–å†™çš„ä»£ç ï¼ˆwith xxx as xxxåé¢é‚£å¨ï¼‰ä¹‹å‰ï¼Œ<strong>æ“ä½œä¸€æ³¢</strong>ï¼›å†åœ¨ä½ ç¼–å†™çš„ä»£ç æ‰§è¡Œå®Œåï¼Œ<strong>æ“ä½œä¸€æ³¢</strong>ã€‚æˆ‘ä»¬ç®€å•ç†è§£ä¸€ä¸‹å°±æ˜¯åœ¨ <code>with open(&#39;file_name&#39;, &#39;w&#39;) as f</code> å†…å±‚ç¼©è¿›çš„ä»£ç æ‰§è¡Œå®Œæˆåè‡ªåŠ¨å¸®ä½ æ‰§è¡Œäº†<code>f.close()</code>ï¼ˆå½“ç„¶æ²¡è¿™ä¹ˆç®€å•ï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹ä¸€ä¸‹ open çš„æºç ï¼Œä½†æ˜¯å¤§ä½“é€»è¾‘æ˜¯è¿™æ ·çš„ï¼‰ã€‚</p><a id="more"></a><h1 id="0X02-è‡ªå·±å®ç°ä¸€ä¸ª"><a href="#0X02-è‡ªå·±å®ç°ä¸€ä¸ª" class="headerlink" title="0X02 è‡ªå·±å®ç°ä¸€ä¸ª"></a>0X02 è‡ªå·±å®ç°ä¸€ä¸ª</h1><p>è¯´äº†åŠå¤©ï¼Œå’±ä»¬è‡ªå·±æ¥å®ç°ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨å¥½äº†ã€‚è‡ªå·±å®ç°ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨è·Ÿå®ç°ä¸€ä¸ªå…¶ä»–ä¸œè¥¿ä¸å¤ªä¸€æ ·ï¼Œä¸ç”¨ç»§æ‰¿ä»»ä½•ä¸œè¥¿ï¼Œå°±åƒå®ç°ä¸€ä¸ªè¿­ä»£å™¨ä¸€æ ·ï¼Œåªéœ€è¦æ»¡è¶³è‡ªå·±çš„åè®®ï¼ˆä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼‰å°±å¯ä»¥ã€‚è€Œä¸”å¥½åœ¨è¿™ä¸ªåè®®æå…¶ç®€å•ï¼Œå®ç°ä¸€ä¸ªç±»åªéœ€è¦æ»¡è¶³æ»¡è¶³ä¸¤ä¸ªæ–¹æ³•å°±å¯ä»¥ï¼š<code>__enter__</code> å’Œ <code>__exit__</code>ã€‚æˆ‘ä»¬å…ˆæ¥å†™ä¸ª demo è¯•è¯•çœ‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomProtocolConnection</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, host, port)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…å¼€å§‹è¿æ¥, '</span>, host, port)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'è¿›å…¥äº† __enter__'</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exception_type, exception_value, exception_traceback)</span>:</span>   <span class="comment"># è¿™ä¸ªå®šä¹‰æ˜¯å›ºå®šçš„ï¼Œå¿…ç„¶æ¥æ”¶ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line">        print(<span class="string">'è¿›å…¥äº† __exit__'</span>)</span><br><span class="line">        self.close()    <span class="comment"># æ²¡æœ‰å®šä¹‰ï¼Œåªæ˜¯æ–­å¼€è¿æ¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push_data</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…åœ¨æ¨æ•°æ®ï¼š'</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pull_data</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…æ”¶åˆ°äº†æ•°æ®ï¼š'</span>, <span class="string">'hello,world'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">with</span> CustomProtocolConnection(<span class="string">'127.0.0.1'</span>, <span class="string">'2333'</span>) <span class="keyword">as</span> conn:</span><br><span class="line">        conn.push_data(<span class="string">'hello, world'</span>)</span><br><span class="line">        conn.pull_data()</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ‰§è¡Œç»“æœ<br><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200718142514.png" alt></p><p>é¦–å…ˆè¿›è¡Œäº†å¸¸è§„çš„å®ä¾‹åŒ–ï¼›å®ä¾‹åŒ–ä¹‹åæ‰§è¡Œäº†<code>__enter__</code>ï¼›ç„¶åæ‰§è¡Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç å—ï¼›é€€å‡ºä»£ç å—ä¹‹åæ‰§è¡Œäº†<code>__exit__</code>ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢å®šä¹‰<code>__exit__</code>çš„æ—¶å€™å¸¦äº†ä¸‰ä¸ªå‚æ•°ï¼Œçœ‹åå­—ä¹Ÿçœ‹å‡ºæ¥äº†ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¼‚å¸¸ç±»å‹ã€ç¬¬äºŒä¸ªæ˜¯å¼‚å¸¸çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯é”™è¯¯æ¶ˆæ¯ï¼‰ã€ç¬¬ä¸‰ä¸ªæ˜¯å¼‚å¸¸çš„é”™è¯¯æ ˆã€‚å¦‚æœæˆ‘ä»¬åœ¨ <code>with xxx as xxx</code> ä¸‹é¢çš„ä»£ç å—ä¸­å‡ºç°å¼‚å¸¸äº†ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«æ•è·å¹¶ä¼ é€’åˆ°<code>__exit__</code>è¿™é‡Œæ¥ï¼Œä½ å¯ä»¥æ ¹æ®æƒ…å†µæ¥å¤„ç†ã€‚è¿™é‡Œä¸å†å±•ç¤ºå…·ä½“å¦‚ä½•å¤„ç†å¼‚å¸¸äº†ï¼Œå¤§å®¶å¯ä»¥æ‰‹åŠ¨è§¦å‘å¼‚å¸¸ç„¶ååœ¨<code>__exit__</code>é‡Œæ‰“ä¸Šæ–­ç‚¹æ¥è°ƒè¯•ä¸€ä¸‹ï¼Œå¾ˆå®¹æ˜“å°±èƒ½çŸ¥é“è¿™é‡Œæ˜¯æ€ä¹ˆç”¨çš„äº†ã€‚</p><p>å®ç°ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ä¸€å®šéè¦æ˜¯ç±»ï¼Œä¸€ä¸ªå‡½æ•°ç…§æ ·å¯ä»¥ï¼ˆåºŸè¯ï¼Œ<code>with open() as f</code> ä¸å°±æ˜¯ä¸€ä¸ªå‡½æ•°å˜›ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥æ¥ç¼–å†™è¿™æ ·ä¸€ä¸ªå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomProtocolConnection</span>:</span>     <span class="comment"># ä¸€ä¸ªæœ¬æ¥å°±æœ‰çš„ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, host, port)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…å¼€å§‹è¿æ¥, '</span>, host, port)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push_data</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…åœ¨æ¨æ•°æ®ï¼š'</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pull_data</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'å‡è£…æ”¶åˆ°äº†æ•°æ®ï¼š'</span>, <span class="string">'hello, world'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager      # ç”¨ contextmanager è£…é¥°å™¨ä½¿è¿™ä¸ªæ–¹æ³•æˆä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect_2_server</span><span class="params">(host, port)</span>:</span></span><br><span class="line">    conn = CustomProtocolConnection(host, port)</span><br><span class="line">    print(<span class="string">'è¿›å…¥äº† __enter__'</span>)  <span class="comment"># å¹¶ä¸æ˜¯çœŸæ­£çš„ __enter__ æ–¹æ³•ï¼Œä½†æ˜¯æœ‰åŒæ ·çš„æ•ˆæœ</span></span><br><span class="line">    <span class="keyword">yield</span> conn</span><br><span class="line">    print(<span class="string">'è¿›å…¥äº† __exit__'</span>)   <span class="comment"># åŒç†ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„ __exit__ æ–¹æ³•ï¼Œä½†æ˜¯åˆç›¸åŒçš„æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> connect_2_server(<span class="string">'127.0.0.1'</span>, <span class="string">'2333'</span>) <span class="keyword">as</span> conn:</span><br><span class="line">    conn.push_data(<span class="string">'hello, world'</span>)</span><br><span class="line">    conn.pull_data()</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå¸¦æœ‰ <code>yield</code> çš„å‡½æ•°æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œä¸è¿‡å› ä¸º <code>contentlib.contentmanager</code> è£…é¥°å™¨çš„ä½œç”¨ï¼Œä½¿å®ƒç°åœ¨æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨äº†ã€‚ä»¥ <code>yield</code> ä¸ºç•Œé™ï¼Œ<code>yield</code> ä¹‹å‰çš„å†…å®¹å¯ä»¥ç†è§£æˆæ˜¯ <code>__enter__</code> æ–¹æ³•ï¼Œåé¢çš„å¯ä»¥ç†è§£æˆæ˜¯ <code>__exit__</code> æ–¹æ³•ï¼Œç”± <code>yield</code> è¿”å›çš„é‚£ä¸ªå€¼å°±æ˜¯æˆ‘ä»¬ <code>with connect_2_server as conn</code> çš„ conn äº†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™å¨ä»£ç çš„è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°è·Ÿä¸Šé¢çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸¤ç§æ–¹å¼å…¶å®æ˜¯é€‚ç”¨äºä¸åŒçš„åœºæ™¯çš„ï¼Œç¬¬ä¸€ç§ç›´æ¥ç¼–å†™ class çš„æ–¹å¼é€‚ç”¨äºä»é›¶å¼€å§‹å®ç°ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™ç§å°±å¯ä»¥ç›´æ¥å°†å…¶å®šä¹‰ä¸ºä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼›ç¬¬äºŒç§é€šè¿‡è£…é¥°å™¨å®ç°ä¸€ä¸ªé¢å¤–çš„ function çš„æ–¹å¼é€‚ç”¨äºåœ¨ç°æœ‰çš„ä»£ç å—åŸºç¡€ä¸Šå®ç°ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œå¯ä»¥åšåˆ°ä¸ä¾µå…¥ç°æœ‰ä»£ç è¿˜å®ç°æ‰€éœ€åŠŸèƒ½çš„éœ€æ±‚ã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200719105451.png" alt></p><h1 id="0X03-ä»€ä¹ˆæ—¶å€™ç”¨"><a href="#0X03-ä»€ä¹ˆæ—¶å€™ç”¨" class="headerlink" title="0X03 ä»€ä¹ˆæ—¶å€™ç”¨"></a>0X03 ä»€ä¹ˆæ—¶å€™ç”¨</h1><p>ç°åœ¨ææ˜ç™½ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ˜¯ä»€ä¹ˆäº†ï¼Œä¹ŸçŸ¥é“è‡ªå·±æ€ä¹ˆæ‰èƒ½å®ç°ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨äº†ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ‰ä¼šç”¨åˆ°è¿™ç§ä¸œè¥¿å‘¢ï¼Ÿå…¶å®æˆ‘ä»¬çš„æ“ä½œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯å¯ä»¥ç”¨åˆ°çš„ï¼Œåªä¸è¿‡è¿™ä¸ªä¸œè¥¿ä»æ¥éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¤§å®¶éƒ½ç»•å¼€æˆ–è€…ç”¨äº†æ›´éº»çƒ¦ä¸€ç‚¹çš„æ–¹å¼å®ç°äº†ã€‚</p><p>é¦–å…ˆï¼Œå°±åƒä¸Šé¢çš„è‡ªå®šä¹‰åè®®çš„é€šä¿¡ä¸€æ ·ï¼Œå…ˆè¦è¿æ¥æœ€åæ–­å¼€çš„æƒ…å†µå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ï¼›æ¯”å¦‚è¦å‘èµ·ä¸€å¤§æ³¢ HTTP è¯·æ±‚ï¼Œä½†æ˜¯éœ€è¦ç™»å½•ï¼Œå°±å¯ä»¥ç”¨è¿™ç§æ–¹å¼å®ç°è‡ªåŠ¨ç™»å½•å’Œè‡ªåŠ¨æ³¨é”€ï¼›å†æ¯”å¦‚åšæ•°æ®ç»Ÿè®¡æˆ–è€…å¯¼å‡ºï¼Œå¼€å§‹å‰è¦å°†æ•°æ®æ•´ç†ä¸€æ³¢ï¼Œç»Ÿè®¡å¯¼å‡ºç»“æŸåå†å°†ç»“æœé‚®ä»¶å‘é€åˆ°æŒ‡å®šé‚®ç®±ï¼Œè¿™ç§ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> with </tag>
            
            <tag> contentmanager </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django ä¸­çš„ Objects</title>
      <link href="/2020/07/14/django-manager/"/>
      <url>/2020/07/14/django-manager/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-objects-æ˜¯ä¸ªå•¥"><a href="#0X00-objects-æ˜¯ä¸ªå•¥" class="headerlink" title="0X00 objects æ˜¯ä¸ªå•¥"></a>0X00 objects æ˜¯ä¸ªå•¥</h1><p>æƒ³å¿…æ‰€æœ‰ç”¨è¿‡ Django çš„äººéƒ½ä¼šç”¨åˆ° Django è‡ªå¸¦çš„ ORM è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚é‚£æ—¢ç„¶ç”¨è¿‡ Django çš„ ORM å°±æ¥çœ‹ä¸€ä¸‹è¿™æ®µä»£ç å¥½äº†ï¼Œ <code>models.Stuent.objects.filter(name=&#39;Shawn&#39;)</code> è¿™æ®µä»£ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æŸ¥è¯¢åˆ°åå­—ä¸ºâ€Shawnâ€çš„å­¦ç”Ÿä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œ <code>models</code> åº”è¯¥æ˜¯ä¸€ä¸ªæ”¾äº†å¤šä¸ª model çš„æ–‡ä»¶ï¼Œ<code>Student</code> æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¨¡å‹ï¼Œ<code>filter</code> æ˜¯ç­›é€‰ï¼Œ<code>name=&#39;Shawn&#39;</code> åˆ™æ˜¯ç­›é€‰æ¡ä»¶ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸­é—´é‚£ä¸ª <code>objects</code> æ˜¯ä¸ªå•¥å‘¢ï¼Ÿï¼ˆä½ çŸ¥é“ï¼ŸçŸ¥é“è¿˜åœ¨è¿™å„¿çœ‹å•¥ï¼Œæœ‰è¿™ç©ºçœ‹çœ‹å…¶ä»–æ–‡ç« ï¼Œæ‰“æ‰“æ¸¸æˆçœ‹çœ‹ç”µå½±ä¸å¥½å—ğŸ¤£ï¼‰</p><p>é€šè¿‡ <code>type</code> å¯çŸ¥ï¼Œè¿™ä¸ª <code>objects</code> æ˜¯ä¸€ä¸ª <code>django.db.models.manager.Manager</code> çš„å®ä¾‹ï¼ˆæˆ–è€…æ˜¯ä»–å­ç±»çš„å®ä¾‹ï¼‰ã€‚ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ª<code>Manager</code>æ˜¯ä¸ªä»€ä¹ˆâ“</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200714212410.png" alt="Django ORM"></p><blockquote><p>A Manager is the interface through which database query operations are provided to Django models. At least one Manager exists for every model in a Django application.</p></blockquote><p>ä» Django æ–‡æ¡£å¾—çŸ¥â€œManager æ˜¯ Django ç”¨æ¥è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢çš„ä¸€ä¸ªæ¥å£ï¼Œåœ¨ Django åº”ç”¨ä¸­æ¯ä¸ª model éƒ½éœ€è¦è‡³å°‘æœ‰ä¸€ä¸ª Managerâ€ã€‚</p><a id="more"></a><h1 id="0X01-Manager-çš„ç”¨æ³•ä¸è‡ªå®šä¹‰"><a href="#0X01-Manager-çš„ç”¨æ³•ä¸è‡ªå®šä¹‰" class="headerlink" title="0X01 Manager çš„ç”¨æ³•ä¸è‡ªå®šä¹‰"></a>0X01 Manager çš„ç”¨æ³•ä¸è‡ªå®šä¹‰</h1><p>æˆ‘ä»¬æ­£å¸¸æ¥è¯´ç”¨çš„ <code>filter/exclude/first/last</code> è¿™ç§æŸ¥è¯¢éƒ½æ˜¯ç”¨çš„ Managerï¼Œç”¨æ³•å¤§å®¶æ˜¯éƒ½ä¼šç”¨çš„ï¼Œä¸è¿‡è‡ªå®šä¹‰çš„è¯å°±æ˜¯å¦ä¸€å›äº‹å„¿äº†ã€‚æˆ‘ä»¬å‡è®¾æœ‰ä¸‹é¢è¿™ä¸ª model</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField()</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line">    gender = models.CharField()</span><br><span class="line">    birthday = models.DateField()</span><br><span class="line">    height = models.DecimalField()</span><br><span class="line">    weight = models.DecimalField()</span><br><span class="line">    remark = models.TextField()</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'å­¦ç”Ÿ'</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨æŒ‡å®š <code>objects</code>ï¼Œä½†æ˜¯å…¶å®å·²ç»ä» <code>models.Model</code> ç»§æ‰¿æ¥äº†ã€‚å¦‚æœæˆ‘ä»¬éè¦æ‰‹åŠ¨æŒ‡å®šçš„è¯ï¼Œå¯ä»¥<code>objects = models.Manager()</code>ã€‚<strong>å€¼å¾—æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šäº† Manager çš„è¯ï¼ŒDjango å°±ä¸ä¼šå†ç»™æˆ‘ä»¬ä¸€ä¸ªå¯ç”¨çš„ objects äº†ã€‚</strong> </p><p>ä¸‹é¢æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹å…³äºè‡ªå®šä¹‰ Manager çš„æ–¹æ³•ï¼Œå’Œä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ Managerã€‚é€šå¸¸æ¥è¯´ï¼Œæ²¡æœ‰å¿…é¡»è¦ç”¨ Manager æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™åˆ©ç”¨è‡ªå®šä¹‰ Manager ä¼šå¸®æˆ‘ä»¬èŠ‚çœå¾ˆå¤šæ—¶é—´å’Œä»£ç ã€‚æˆ‘ä»¬è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œä¸Šé¢é‚£ä¸ª model å®šä¹‰äº†ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œæˆ‘ä»¬åœ¨ç³»ç»Ÿé‡Œéœ€è¦éå¸¸ç»å¸¸åœ°ä½¿ç”¨â€œèº«é«˜è¶…è¿‡ 180ï¼Œä¸”ä½“é‡åœ¨ 70 åˆ° 80 ä¹‹é—´ï¼Œä¸”æˆå¹´çš„ç”·ç”Ÿï¼›èº«é«˜è¶…è¿‡ 170ï¼Œä¸”ä½“é‡åœ¨ 55 åˆ° 65 ä¹‹é—´ï¼Œä¸”æˆå¹´çš„å¥³ç”Ÿï¼›å½“å¤©è¿‡ç”Ÿæ—¥çš„æ‰€æœ‰åŒå­¦â€è¿™ä¸‰ç§ç­›é€‰æ¡ä»¶ã€‚å½“ç„¶ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½å» <code>filter</code> ä¸€éï¼Œè¿™ä¹Ÿæ²¡é”™ï¼Œä¸è¿‡è¿™æ ·å°±å¤ªå¥‡æ€ªäº†ã€‚ç¨å¾®æœ‰ç‚¹ç¼–ç¨‹ç»éªŒçš„å¯èƒ½ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™å‡½æ•°åç¡®å®å¤ªé•¿äº†ï¼Œå°±ä¸ä¹±ç¼–äº†ï¼Œä¸‰ä¸ªå‡½æ•°å¯¹åº”ä¸Šé¢ä¸‰ä¸ªæŸ¥è¯¢</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_student_1</span><span class="params">()</span>:</span>   </span><br><span class="line">    <span class="keyword">return</span> Student.objects.filter(gender=<span class="string">'M'</span>, height__gt=<span class="number">180</span>, weight__range=(<span class="number">70</span>, <span class="number">80</span>), age__gte=<span class="number">18</span>)</span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_student_2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> Student.object.filter(gender=<span class="string">'M'</span>, height__gt=<span class="number">170</span>, weight__range=(<span class="number">55</span>, <span class="number">65</span>), age__gte=<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_student_3</span><span class="params">()</span>:</span></span><br><span class="line">    today = datetime.date.today()</span><br><span class="line">    <span class="keyword">return</span> Student.objects.filter(birthday__month=today.month, birthday__day=today.day)</span><br></pre></td></tr></table></figure><p>è°ƒç”¨çš„æ—¶å€™æ¯æ¬¡éƒ½æ˜¯ <code>studnet_1_queryset = get_student_1()</code>ã€‚å°¤å…¶æ˜¯å¦‚æœè¦åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¢åŠ æ–°çš„ç­›é€‰æ¡ä»¶ï¼Œç”»é£å°±ä¼šå˜æˆè¿™æ ·ï¼š<code>student_x_queryset = get_student_1().filter(xxxx).exclude(yyyyy)</code>ã€‚å°±â€¦â€¦.ä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä¸è¿‡çœ‹èµ·æ¥ç¡®å®å¾ˆå¥‡æ€ªï¼Œè€Œä¸”è·Ÿä½¿ç”¨ Manager çš„æ–¹å¼æ¯”èµ·æ¥ä¹Ÿéå¸¸ä¸ Pythonicã€‚</p><p>å¦‚æœä½¿ç”¨ä½¿ç”¨ Manager çš„æ–¹å¼ç¼–å†™çš„è¯å°±å¯ä»¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpecialStudentManager</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line">    <span class="comment"># è‡ªå®šä¹‰ä¸€ä¸ªæ–¹ä¾¿è·å–è¿™ä¸‰ç§æ•°æ®çš„ Manager</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">student_1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.filter(gender=<span class="string">'M'</span>, height__gt=<span class="number">180</span>, weight__range=(<span class="number">70</span>, <span class="number">80</span>), age__gte=<span class="number">18</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stuent_2</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.filter(gender=<span class="string">'M'</span>, height__gt=<span class="number">170</span>, weight__range=(<span class="number">55</span>, <span class="number">65</span>), age__gte=<span class="number">18</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">student_3</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.filter(birthday__month=today.month, birthday__day=today.day)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField()</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line">    gender = models.CharField()</span><br><span class="line">    birthday = models.DateField()</span><br><span class="line">    height = models.DecimalField()</span><br><span class="line">    weight = models.DecimalField()</span><br><span class="line">    remark = models.TextField()</span><br><span class="line">    </span><br><span class="line">    objects = SpecialStudentManager()   <span class="comment"># model è¿™é‡Œå°±æ”¹äº†è¿™ä¸€è¡Œ</span></span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">'å­¦ç”Ÿ'</span></span><br></pre></td></tr></table></figure><blockquote><p>è™½ç„¶æ”¹åŠ¨äº† Model ä½†æ˜¯æ²¡æœ‰æ”¹åŠ¨æ•°æ®åº“è¡¨ï¼Œæ‰€ä»¥ä¸éœ€è¦<code>migrations</code>ã€‚</p></blockquote><p>ç°åœ¨æˆ‘ä»¬å°è¯•è°ƒç”¨ä¸€ä¸‹ä¸Šé¢å®šä¹‰çš„å‡ ä¸ªæŸ¥è¯¢ï¼š<code>Student.objects.student_1()</code>è¿™æ ·å°±å¯ä»¥äº†ï¼Œè€Œä¸”å¦‚æœç”¨<code>@property</code>è£…é¥°ä¸Šé¢çš„æ–¹æ³•çš„è¯ï¼Œä¼šæ›´å¥½ä¸€äº›ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‰©å±•ä¸€ä¸‹ç”¨æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpecialStudentManager</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">student_count</span><span class="params">(self)</span>:</span>    <span class="comment"># æ‰€æœ‰å­¦ç”Ÿäººæ•°</span></span><br><span class="line">        <span class="keyword">return</span> self.all().count()</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">student_name_list</span><span class="params">(self)</span>:</span>    <span class="comment"># æ‰€æœ‰å­¦ç”Ÿäººååˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">return</span> list(self.all().values_list(<span class="string">'name'</span>, flat=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure><p>ä¸è¿‡å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ­£å¦‚ä¸Šé¢æ‰€è¯´â€œä¸€åˆ‡ç”¨è‡ªå®šä¹‰ Manager å®ç°çš„åŠŸèƒ½ï¼Œéƒ½å¯ä»¥ä¸ç”¨è‡ªå®šä¹‰ Manager å®ç°â€ï¼Œä½†æ˜¯è‡ªå®šä¹‰ Manager çš„åšæ³•ä¹Ÿç¡®å®è®©æˆ‘ä»¬çš„ä»£ç æ›´æ¸…æ™°æ˜äº†ï¼Œåé¢æ”¹èµ·æ¥ä¹Ÿæ›´èˆ’æœï¼ˆä¸ç”¨ä¸ºäº†ä¸€ä¸ªå¸¸ç”¨çš„ç­›é€‰å»æ”¹å¤šå¤„ä»£ç ï¼‰ï¼Œå¯è¯»æ€§ä¹Ÿæ›´é«˜äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> manager </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡ Django Save å¯¼è‡´çš„æ•°æ®å¼‚å¸¸</title>
      <link href="/2020/07/11/django-save/"/>
      <url>/2020/07/11/django-save/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æŒ‰æƒ¯ä¾‹å¾—æœ‰ä¸€ä¸ªæ ‡é¢˜"><a href="#0X00-æŒ‰æƒ¯ä¾‹å¾—æœ‰ä¸€ä¸ªæ ‡é¢˜" class="headerlink" title="0X00 æŒ‰æƒ¯ä¾‹å¾—æœ‰ä¸€ä¸ªæ ‡é¢˜"></a>0X00 æŒ‰æƒ¯ä¾‹å¾—æœ‰ä¸€ä¸ªæ ‡é¢˜</h1><p>ä¼—æ‰€å‘¨çŸ¥<code>save</code>æ˜¯ Django ä¸­æœ€å¸¸ç”¨çš„ä¿å­˜æ•°æ®çš„æ–¹æ³•ã€‚ä½†æ˜¯ä¸€èˆ¬æ¥è¯´å¤§å®¶ç»å¸¸ä¼šæŠŠâ€œå¸¸ç”¨â€œç†è§£æˆâ€œä¸‡èƒ½â€œï¼Œç„¶åèƒ½ç”¨çš„æ—¶å€™å°±å…¨ç”¨è¿™ä¸€ç§æ–¹å¼ã€‚ä¸è¿‡ç¼–ç¨‹ ä¸­æ˜¯æ²¡æœ‰æ‰€è°“çš„â€œä¸€æ‹›é²œåƒéå¤©â€œçš„ï¼ŒDjango ä¹‹æ‰€ä»¥æä¾›äº†é‚£ä¹ˆå¤šä¸­ä¿å­˜æ•°æ®çš„æ–¹æ³•ä¹Ÿä¾§é¢è¯å®äº†è¿™ä¸€ç‚¹ã€‚</p><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹æˆ‘é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Student</span><br><span class="line"><span class="keyword">from</span> .utils <span class="keyword">import</span> calculate_score</span><br><span class="line"></span><br><span class="line">queryset = Student.objects.all()</span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">    student.score = calculate_score(student)    <span class="comment"># è°ƒç”¨ä¸€ä¸ªå·¥å…·å‡½æ•°è®¡ç®—è¯¥å­¦ç”Ÿçš„æˆç»©</span></span><br><span class="line">    student.save()</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¹ä¸€çœ‹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºè®¡ç®—çš„å€¼æ˜¯é€šè¿‡<code>calculate_score</code>è¿™ä¸ªå‡½æ•°è¿›è¡Œçš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨<code>queryset.update(xxx)</code>çš„æ–¹æ³•ã€‚ç„¶åå’±ä»¬çœ‹ä¸€ä¸‹ Django æ–‡æ¡£æ˜¯å¦‚ä½•æè¿° queryset çš„ã€‚</p><blockquote><p>QuerySets are lazy â€“ the act of creating a QuerySet doesnâ€™t involve any database activity. You can stack filters together all day long, and Django wonâ€™t actually run the query until the QuerySet is evaluated. </p><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL2VuLzIuMi90b3BpY3MvZGIvcXVlcmllcy8jcXVlcnlzZXRzLWFyZS1sYXp5" title="https://docs.djangoproject.com/en/2.2/topics/db/queries/#querysets-are-lazy">QuerySets are lazy<i class="fa fa-external-link"></i></span></p></blockquote><blockquote><p>nternally, a QuerySet can be constructed, filtered, sliced, and generally passed around without actually hitting the database. No database activity actually occurs until you do something to evaluate the queryset.</p><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL2VuLzIuMi9yZWYvbW9kZWxzL3F1ZXJ5c2V0cy8jd2hlbi1xdWVyeXNldHMtYXJlLWV2YWx1YXRlZA==" title="https://docs.djangoproject.com/en/2.2/ref/models/querysets/#when-querysets-are-evaluated">When QuerySets are evaluated<i class="fa fa-external-link"></i></span></p></blockquote><p>QuerySets are lazy å†…å®¹æ€»ç»“æ¥è¯´å°±æ˜¯â€œDjango ä¸­çš„ QuerySet åªæœ‰åœ¨ç”¨çš„æ—¶å€™æ‰ä¼šçœŸçš„å»æ•°æ®åº“é‡ŒæŸ¥ï¼Œè€Œä¸æ˜¯ç”Ÿæˆ QuerySet çš„æ—¶å€™â€œã€‚åé¢çš„ When QuerySet are evaluated åˆ™æ ‡æ˜äº†ä»€ä¹ˆå«åšâ€œçœŸæ­£åœ¨ä½¿ç”¨â€œï¼Œç»™å‡ºäº†ä¸‹é¢å‡ ä¸ªæ¡ä»¶ï¼Œå½“ä½ åšè¿™äº›äº‹æƒ…çš„æ—¶å€™å°±æ˜¯â€œçœŸæ­£åœ¨ä½¿ç”¨â€œäº†ã€‚è¿™äº›æ¡ä»¶åŒ…æ‹¬ï¼šè¿­ä»£ã€ åˆ‡ç‰‡ã€åˆ—è¡¨ç­‰ï¼ˆæˆ‘è‹±æ–‡æ°´å¹³å°å­¦ä¸‰å¹´çº§ï¼Œè§£è¯»åœ°ä¸å¯¹çš„åœ°æ–¹è¿˜å¸Œæœ›å¤§å®¶æŒ‡å‡ºï¼‰ã€‚ æ‰€ä»¥æ˜¾ç„¶æˆ‘ä»¬å¯¹è¿™ä¸ª queryset æ¥äº†ä¸ª <code>for</code> å¾ªç¯å°±æ»¡è¶³äº†ä¸Šè¿°çš„â€œè¿­ä»£â€œï¼Œæ‰€ä»¥è¿™æ—¶å€™æ•° Django å°±ä¼šçœŸæ­£çš„ä»æ•°æ®åº“ä¸­å°†æ•°æ®çœŸæ­£çš„ <strong>å–å‡ºæ¥</strong>ã€‚</p><p>ç°åœ¨é—®é¢˜æ¥äº†ã€‚æˆ‘ä»¬æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä¸€ç§’é’Ÿèƒ½è®¡ç®—10 ä¸ªå­¦ç”Ÿçš„æˆç»©ï¼Œç„¶åæ•´ä¸ª<code>Student</code>è¡¨æœ‰ 3W å­¦ç”Ÿï¼Œå¾—å‡ºâ€œå¤„ç†æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯éœ€è¦æ¶ˆè€— 50 åˆ†é’Ÿçš„æ—¶é—´â€œè¿™æ ·çš„ç»“è®ºï¼ˆæ¯ç§’ 10 æ¡å’Œä¸€å…± 3W æ˜¯ä¹±å†™çš„ï¼ŒçœŸå®æ•°æ®é€šå¸¸æ¯”è¿™ä¸ªå¤§å¾—å¤šï¼‰ã€‚</p><p><strong>å¦‚æœåœ¨æ‰§è¡Œè¿™ä¸ªå¾ªç¯çš„æ—¶å€™ï¼ŒæŸä½åŒå­¦ä¿®æ”¹äº†è‡ªå·±çš„çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ‰‹æœºå·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong> æœ‰ä¸¤ç§å¯èƒ½ï¼šç¬¬ä¸€ç§å¯èƒ½æ˜¯è¿™ä½åŒå­¦ä¿®æ”¹è‡ªå·±æ‰‹æœºå·çš„æ—¶å€™è®¡ç®—åˆ†æ•°çš„å¾ªç¯å·²ç»æŠŠä»–çš„åˆ†æ•°è®¡ç®—å®Œäº†ï¼Œé‚£ä¹ˆä»–çš„æ‰‹æœºå·ä¿®æ”¹ä¹Ÿç”Ÿæ•ˆäº†ï¼ˆè¿™ç§æœ€å¥½ï¼‰ã€‚ä½†æ˜¯å¦‚æœä»–æ”¹æ‰‹æœºå·çš„æ—¶å€™å¾ªç¯è¿˜æ²¡åˆ°ä»–å‘¢ï¼Ÿå‡è®¾ä»–æŠŠæ‰‹æœºå·ä»åŸæ¥çš„ 123 æ”¹æˆäº† 456ï¼Œé‚£ä¹ˆä»–æ”¹å®Œæ‰‹æœºå·çš„ä¸€ç¬é—´æ•°æ®åº“é‡Œå­˜è¿›å»çš„ç¡®å®æ˜¯ 456ï¼Œæ²¡æœ‰é—®é¢˜ã€‚<strong>ä½†æ˜¯ queryset é‡Œæ˜¯ä»–æ”¹æ‰‹æœºå·ä»¥å‰å–å‡ºæ¥çš„ 123</strong>ï¼Œè¿™æ—¶å€™å¾ªç¯åˆ°ä»–äº†ï¼Œè®¡ç®—å®Œä¹‹åæ¥äº†ä¸€ä¸ª<code>student.save()</code>ï¼Œå¦‚æ­¤ä¸€æ¥ä»–åˆšåˆšæ”¹å¥½çš„æ‰‹æœºå·ç å°±åˆå›åˆ°äº† 123ã€‚</p><p>æ‰€ä»¥è¯´è¿™ç§å†™æ³•å¹¶ä¸ä¼š 100% å‡ºç°é—®é¢˜ã€‚æ•´ä¸ªå¾ªç¯è€—æ—¶è¶Šä¹…ï¼Œå‡ºç°é—®é¢˜çš„å¯èƒ½æ€§è¶Šå¤§ï¼›ç³»ç»Ÿä¸­æ•°æ®å˜æ›´è¶Šé¢‘ç¹ï¼Œå‡ºç°é—®é¢˜çš„å¯èƒ½æ€§è¶Šå¤§ã€‚å½“ç„¶äº†ï¼Œbug å°±æ˜¯ bugï¼Œä¸èƒ½å› ä¸º bug æ²¡è§¦å‘å°±æ— æ‰€ç•æƒ§äº†ï¼Œè¿˜æ˜¯å¾—è§£å†³çš„ã€‚é€šå¸¸æ¥è¯´æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œä¸‹é¢æ˜¯ç¬¬ä¸€ç§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">    new_score = calculate_score(student)</span><br><span class="line">    Student.objects.filter(id=student.id).update(score=new_score)</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä»ç„¶æ¯”è¾ƒ young æ¯”è¾ƒ simple æ¯”è¾ƒ naiveï¼Œä¸è¿‡<strong>åˆä¸æ˜¯ä¸èƒ½ç”¨</strong>ã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200711151128.jpeg" alt></p><p>ä½†æ˜¯è¿™ç§ç”¨æ³•æ˜¾ç„¶æ˜¯ä¸å¥½çš„ï¼Œè€Œä¸” <code>update</code> æœ¬æ¥ä¹Ÿä¸æ˜¯è®©æˆ‘ä»¬è¿™ä¹ˆç”¨çš„ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å¾—å›åˆ°<code>save</code>ä¸Šï¼ŒDjango å…¶å®å·²ç»æä¾›äº†ä¸€ä¸ªå‚æ•°ç»™ <code>save</code> äº†ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ç§æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">    student.score = calculate_score(student)</span><br><span class="line">    student.save(update_fields=[<span class="string">'score'</span>])</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯åœ¨ <code>save</code> çš„æ—¶å€™å¸¦ä¸Šå…·ä½“éœ€è¦æ›´æ–°å“ªä¸ªå­—æ®µï¼Œå…¶ä»–çš„å°±ä¸æ›´æ–°äº†ã€‚è€Œä¸”é€šè¿‡ä¼ é€’çš„å‚æ•°ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒæŒ‡å®šçš„æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæœ‰éœ€è¦ä¿®æ”¹å¤šä¸ªå­—æ®µçš„è¯ï¼Œå°±åªä¿®æ”¹è¿™ä¸€ä¸ªå°±å¥½äº†ã€‚</p><p>ä¸è¿‡å…¶å®è¿™é‡Œè¿˜æ˜¯æœ‰ä¸€ä¸ªæ½œåœ¨é—®é¢˜çš„ï¼Œé‚£å°±æ˜¯è¯´ï¼šæ°å¥½æˆ‘ä»¬åœ¨æ›´æ–° score çš„æ—¶å€™ï¼Œå…¶ä»–åœ°æ–¹ä¹Ÿåœ¨æ›´æ–°è¿™ä¸ªã€‚ä¸è¿‡è¿™ä¸ªæ›´å¤šçš„æ—¶å€™å°±æ˜¯æˆ‘ä»¬ç¨‹åºé€»è¾‘çš„é—®é¢˜äº†ï¼Œå› ä¸ºåœ¨å‡ ä¹åŒä¸€æ—¶é—´å¯¹ä¸€ä¸ªå­—æ®µè¿›è¡Œä¿®æ”¹ï¼Œç„¶åä¿®æ”¹çš„åŒæ–¹åˆäº’ç›¸ä¸çŸ¥é“çš„è¯ï¼Œæ€»æ˜¯ä¼šå‡ºé—®é¢˜çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨ Django ä¸ DRF ä¸­ä¼˜é›…åœ°æ ¡éªŒæƒé™</title>
      <link href="/2020/07/05/drf-permission/"/>
      <url>/2020/07/05/drf-permission/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Django-ä¸­çš„æƒé™ç»“æ„ã€å®šä¹‰"><a href="#0X00-Django-ä¸­çš„æƒé™ç»“æ„ã€å®šä¹‰" class="headerlink" title="0X00 Django ä¸­çš„æƒé™ç»“æ„ã€å®šä¹‰"></a>0X00 Django ä¸­çš„æƒé™ç»“æ„ã€å®šä¹‰</h1><p>æˆ‘ä»¬çŸ¥é“åœ¨åˆ›å»ºäº†ä¸€ä¸ª Django é¡¹ç›®ä¹‹åï¼Œé»˜è®¤å°±æœ‰ä¸¤ä¸ªå…¬å¼€å¯ç”¨çš„ modelï¼šUser å’Œ Groupï¼Œè¿™ä¸¤ä¸ª model çš„ä¸€é¡¹åŠŸèƒ½å°±æ˜¯ç”¨æ¥åšæƒé™ç®¡ç†çš„ã€‚ç³»ç»Ÿä¸­ä¼šæœ‰å¾ˆå¤šé¡¹æƒé™ï¼Œå•ä¸ª user å¯ä»¥é…ç½®æ‹¥æœ‰å“ªäº›æƒé™ï¼Œä¹Ÿå¯ä»¥å°†æƒé™é…ç½®ç»™ groupã€‚ç„¶åæ ¡éªŒå•ä¸ªæƒé™çš„æ—¶å€™å…¶å®å°±æ˜¯å°† user æœ¬èº«çš„æƒé™ï¼Œå’Œ user æ‰€åœ¨çš„æ‰€æœ‰ç»„çš„æƒé™åšä¸€ä¸ªå¹¶é›†ï¼Œçœ‹æœ¬æ¬¡æ“ä½œçš„æƒé™æ˜¯å¦åœ¨è¿™ä¸ªå¹¶é›†é‡Œã€‚åœ¨ï¼Œé‚£å°±æ ¡éªŒé€šè¿‡ï¼›ä¸åœ¨ï¼Œé‚£å°±åªæœ‰ HTTP 403 äº†ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200705173202.png" alt></p><blockquote><p>HTTP 401 å’Œ HTTP 403 çš„åŒºåˆ«ï¼š401 çš„æè¿°æ˜¯ Forbiddenï¼Œè€Œ 401 æ˜¯ Unauthorizedï¼Œå‰è€…æ˜¯æ²¡æœ‰æƒé™ï¼Œè€Œåè€…å¹²è„†æ²¡é€šè¿‡è®¤è¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ æƒ³æŸ¥çœ‹å…¬å¸è´¢åŠ¡çš„è¯¦ç»†æŠ¥è¡¨ï¼Œè´¢åŠ¡ç»ç†ä¸€çœ‹ä½ å°±æ˜¯ä¸ªä¸€çº¿å°ç¨‹åºå‘˜ï¼Œå°±ç»™ä½ ä¸€ä¸ª 401ï¼Œå‘Šè¯‰ä½ è¿™ä¸æ˜¯ä½ å¯ä»¥çœ‹çš„ä¸œè¥¿ã€‚å¦‚æœä½ æƒ³çœ‹åˆ«çš„å…¬å¸è´¢åŠ¡çš„è¯¦ç»†æŠ¥è¡¨ï¼Œåˆ«äººå…¬å¸è´¢åŠ¡ç»ç†ä¸€çœ‹ä½ æ ¹æœ¬ä¸æ˜¯ä»–ä»¬å…¬å¸çš„äººï¼Œå°±ç›´æ¥ç»™ä½ äº†ä¸ª 401 äº†ã€‚ï¼ˆä¿—è¯è¯´åä¸ªæ¯”å–»ä¹ä¸ªä¸å‡†ï¼Œæˆ‘è¿™ä¸ªæ¯”å–»å½“ç„¶ä¹Ÿå¹¶ä¸éå¸¸å‡†ç¡®ï¼Œä¸è¿‡å¯¹äºåˆ†ä¸æ¸… 401 å’Œ 403 çš„åŒå­¦è€Œè¨€åº”è¯¥ä¹Ÿé—®é¢˜ä¸å¤§ğŸ¤£ï¼‰</p></blockquote><p>Django è‡ªå·±å¯¹æ¯ä¸€ä¸ª model éƒ½åˆ›å»ºäº† createï¼Œupdateï¼Œdelete çš„æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ·»åŠ æ–°æƒé™ã€‚Django è‡ªå·±æ˜¯é’ˆå¯¹å„ä¸ª model åšçš„æƒé™ï¼Œæ‰€ä»¥æœ€ç®€å•çš„æƒé™å»ºç«‹æ˜¯åœ¨ model å±‚è¿›è¡Œçš„ã€‚å°±æ¯”å¦‚ä¸‹é¢è¿™ç§ï¼Œå¦‚æœæˆ‘æƒ³è¦ä¸º Student è¿™ä¸ª model å»ºç«‹ç›¸å…³çš„æƒé™ï¼Œå°±å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>Meta</code> ç±»é‡Œçš„ <code>permissions</code> æ¥å®ç°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">  user = models.OneToOneField(<span class="string">'django.contrib.auth.models.User'</span>)</span><br><span class="line">  name = models.CharField() <span class="comment"># çº¯å±•ç¤ºï¼Œå°±ä¸è¯¦ç»†å®šä¹‰äº†</span></span><br><span class="line">    birthday = models.DatetimeField()</span><br><span class="line">    phone = models.CharField()</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">verbose_name = <span class="string">'å­¦ç”Ÿ'</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">        permissions = (</span><br><span class="line">        <span class="comment"># ('æƒé™å', 'æƒé™æè¿°'),</span></span><br><span class="line">          (<span class="string">'check_classmate_score'</span>, <span class="string">'æŸ¥çœ‹åŒç­åŒå­¦çš„æˆç»©'</span>),</span><br><span class="line">          (<span class="string">'send_class_notify'</span>, <span class="string">'å‘é€ç­çº§é€šçŸ¥'</span>),</span><br><span class="line">        )</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™é‡Œä¹Ÿçœ‹åˆ°äº†ï¼Œæ¯æ¬¡å¯¹æƒé™è¿›è¡Œ CUD çš„æ—¶å€™éƒ½æ˜¯åœ¨æ”¹ model çš„ï¼Œæ‰€ä»¥æ¯æ¬¡æ”¹åŠ¨å®Œ model è®°å¾—éƒ½è¦è¿›è¡Œä¸€æ¬¡<code>migrate</code>æ“ä½œæ‰è¡Œã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒæ€§èƒ½é—®é¢˜ï¼Œè¿™ä¸ª migrate åªå¯¹ Permission è¡¨è¿›è¡Œ CUD æ“ä½œï¼Œè€Œå¹¶éæ”¹è¡¨ï¼Œæ‰€ä»¥éå¸¸å¿«å°±æå®šäº†ã€‚æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸ç®¡ä½ æŠŠè¿™äº› permissions å†™åœ¨å“ªä¸ª model ä¸‹ï¼Œæœ€ç»ˆä»–ä»¬åˆ›å»ºå¥½çš„æ•°æ®éƒ½è¿˜æ˜¯åœ¨ Permission è¡¨é‡Œï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“ï¼ˆæˆ‘è¿™é‡Œç”¨çš„æ˜¯ MySQLï¼‰é‡Œçš„<code>auth_permission</code>è¡¨äº†ï¼Œè¿™ä¸ªè¡¨ç»“æ„å’Œæ•°æ®æ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-----------------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field           | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+-----------------+--------------+------+-----+---------+----------------+</span><br><span class="line">| id              | int(11)      | NO   | PRI | &lt;null&gt;  | auto_increment |</span><br><span class="line">| name            | varchar(255) | NO   |     | &lt;null&gt;  |                |</span><br><span class="line">| content_type_id | int(11)      | NO   | MUL | &lt;null&gt;  |                |</span><br><span class="line">| codename        | varchar(100) | NO   |     | &lt;null&gt;  |                |</span><br><span class="line">+-----------------+--------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">+-----+------------------------------------+-----------------+-------------------------------+</span><br><span class="line">| id  | name                               | content_type_id | codename                      |</span><br><span class="line">+-----+------------------------------------+-----------------+-------------------------------+</span><br><span class="line">| 1   | Can add log entry                  | 1               | add_logentry                  |</span><br><span class="line">| 2   | Can change log entry               | 1               | change_logentry               |</span><br><span class="line">| 3   | Can delete log entry               | 1               | delete_logentry               |</span><br><span class="line">| 4   | Can add group                      | 2               | add_group                     |</span><br><span class="line">| 5   | Can change group                   | 2               | change_group                  |</span><br><span class="line">| 6   | Can delete group                   | 2               | delete_group                  |</span><br><span class="line">| 7   | Can add permission                 | 3               | add_permission                |</span><br><span class="line">| 8   | Can change permission              | 3               | change_permission             |</span><br><span class="line">| 9   | Can delete permission              | 3               | delete_permission             |</span><br><span class="line">| 10  | Can add user                       | 4               | add_user                      |</span><br><span class="line">| 11  | Can change user                    | 4               | change_user                   |</span><br><span class="line">| 12  | Can delete user                    | 4               | delete_user                   |</span><br><span class="line">+-----+------------------------------------+-----------------+-------------------------------+</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="0X01-åœ¨-Django-ä¸­æ ¡éªŒä¸åˆ†é…æƒé™"><a href="#0X01-åœ¨-Django-ä¸­æ ¡éªŒä¸åˆ†é…æƒé™" class="headerlink" title="0X01 åœ¨ Django ä¸­æ ¡éªŒä¸åˆ†é…æƒé™"></a>0X01 åœ¨ Django ä¸­æ ¡éªŒä¸åˆ†é…æƒé™</h1><p>æƒé™åœ¨è¡¨é‡Œä¹‹åâ€œå”¯ä¸€â€ç”Ÿæ•ˆçš„åœ°æ–¹å°±æ˜¯ django-admin äº†ï¼Œå°±æ˜¯è¯´å¦‚æœç™»å½• django-admin çš„ç”¨æˆ·æ²¡æœ‰<code>add_user</code>çš„æƒé™ï¼Œé‚£ä½ åˆ›å»ºç”¨æˆ·çš„æ—¶å€™å°±ä¼šè¢«æ‹’ç»ã€‚ä½†æ˜¯æˆ‘ä»¬å¹³æ—¶æ›´å¤šçš„æ—¶å€™å¹¶ä¸æ˜¯åœ¨ django-admin é‡Œï¼Œè€Œæ˜¯è‡ªå·±å®ç°çš„å‰å°é¡µé¢ï¼Œé‚£è¯¥æ€ä¹ˆè‡ªå·±æ ¡éªŒæƒé™å‘¢ï¼ŸDjango ä¸­ç»™ user å®ä¾‹äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>user.has_perm</code>å’Œ<code>user.has_perms</code>ã€‚æ˜¾ç„¶ï¼Œå‰è€…æ ¡éªŒå•ä¸ªæƒé™ï¼Œåè€…æ ¡éªŒå¤šä¸ªæƒé™ã€‚å’±ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•æ ¡éªŒçš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: shawn = User.objects.create(username=<span class="string">'shawn'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: shawn.has_perm(<span class="string">'auth.add_user'</span>)<span class="comment"># å•ä¸ªæƒé™æ ¡éªŒç›´æ¥ä¼ æƒé™çš„ code_name</span></span><br><span class="line">Out[<span class="number">3</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: shawn.has_perms([<span class="string">'auth.add_user'</span>, <span class="string">'auth.del_user'</span>])  <span class="comment"># å¤šä¸ªå…¨çº¿åŒæ—¶æ£€éªŒæ—¶å°†å¤šä¸ª code_name æ”¾åœ¨åˆ—è¡¨ä¸­</span></span><br><span class="line">Out[<span class="number">4</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: admin = User.objects.create(username=<span class="string">'admin'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: admin.is_superuser = <span class="literal">True</span><span class="comment"># è®¾ç½® admin ç”¨æˆ·ä¸ºè¶…çº§ç®¡ç†å‘˜</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: admin.save()</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: admin.has_perm(<span class="string">'auth.add_user'</span>)</span><br><span class="line">Out[<span class="number">8</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: admin.has_perms([<span class="string">'auth.add_user'</span>, <span class="string">'auth.del_user'</span>])</span><br><span class="line">Out[<span class="number">9</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä» Django æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæ­£åœ¨æ ¡éªŒçš„ç”¨æˆ·æ˜¯â€œæ´»è·ƒçš„â€è€Œä¸”æ˜¯â€œè¶…çº§ç®¡ç†å‘˜â€ï¼Œé‚£å°±ç›´æ¥ä¸æ ¡éªŒäº†ï¼Œé€šè¿‡ã€‚å¦åˆ™å°±å»æ ¡éªŒä¸€æ³¢ã€‚åŒæ—¶æ ¡éªŒå¤šä¸ªæƒé™çš„æ—¶å€™ç”¨äº†<code>all</code>å»é€ä¸ªæ ¡éªŒï¼Œé‡åˆ°ä¸€ä¸ªæ²¡æœ‰çš„æƒé™ä¹Ÿå°± False äº†ã€‚å…·ä½“çš„ç»†èŠ‚è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹ä¸€ä¸‹æºç ï¼Œåœ¨<code>django.contrib.auth.models.User</code>ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_perm</span><span class="params">(self, perm, obj=None)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Return True if the user has the specified permission. Query all</span></span><br><span class="line"><span class="string">    available auth backends, but return immediately if any backend returns</span></span><br><span class="line"><span class="string">    True. Thus, a user who has permission from a single auth backend is</span></span><br><span class="line"><span class="string">    assumed to have permission in general. If an object is provided, check</span></span><br><span class="line"><span class="string">    permissions for that object.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># Active superusers have all permissions.</span></span><br><span class="line">    <span class="keyword">if</span> self.is_active <span class="keyword">and</span> self.is_superuser:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Otherwise we need to check the backends.</span></span><br><span class="line">    <span class="keyword">return</span> _user_has_perm(self, perm, obj)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_perms</span><span class="params">(self, perm_list, obj=None)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Return True if the user has each of the specified permissions. If</span></span><br><span class="line"><span class="string">    object is passed, check if the user has all required perms for it.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">return</span> all(self.has_perm(perm, obj) <span class="keyword">for</span> perm <span class="keyword">in</span> perm_list)</span><br></pre></td></tr></table></figure><p>ç„¶åè¦è€ƒè™‘çš„å°±æ˜¯å¦‚ä½•å°†æƒé™åˆ†ç»™ç”¨æˆ·äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Django æºç ä¸­çœ‹åˆ° user å’Œ permission çš„å…³è”å…³ç³»æ˜¯ï¼šManyToMany ï¼Œæ‰€ä»¥ç›´æ¥ä¿®æ”¹ç”¨æˆ·çš„<code>user_permissions</code>å­—æ®µå°±å¯ä»¥äº†ã€‚é’ˆå¯¹ group ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">36</span>]: shawn = User.objects.get(username=<span class="string">'shawn'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: perm = Permission.objects.get(codename=<span class="string">'add_user'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: shawn.user_permissions.add(perm)</span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: shawn.save()</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: shawn.has_perm(<span class="string">'auth.add_user'</span>)</span><br><span class="line">Out[<span class="number">40</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¹²æ‰°äººçš„é—®é¢˜ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘çš„ codename æ˜æ˜æ˜¯ add_user ä½†æ˜¯æ ¡éªŒçš„æ—¶å€™å´è¦ç”¨<code>auth.add_user</code>ã€‚å½“æ˜¯è¿™ä¸ªé—®é¢˜ä¹Ÿæ˜¯å›°æ‰°äº†æˆ‘æ¯”è¾ƒä¹…ï¼Œè¿˜å› ä¸ºè¿™ä¸ªé—®é¢˜å¯¼è‡´äº†æˆ‘ç¨‹åºå‡ºç° bugï¼ˆæ¯”å¦‚æœ¬æ¥è¯¥æ ¡éªŒ<code>car.open_door</code>çš„åœ°æ–¹æˆ‘æ ¡éªŒäº†<code>open_door</code>ï¼‰ã€‚æ¯”è¾ƒæ˜æ˜¾çš„ä¸€å¤„æ˜¯å› ä¸ºâ€œé‡åâ€œï¼Œå› ä¸ºæˆ‘ä»¬ model å¤šäº†ä¹‹åä¼šå‡ºç°å¥½å¤šå¤„é‡åçš„æƒé™åï¼Œæ‰€ä»¥æ ¡éªŒçš„æ—¶å€™åº”è¯¥åœ¨codename å‰é¢åŠ ä¸Š app_nameã€‚å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ settings é‡Œé¢çš„ INSTALLED_APPS é…ç½®ï¼Œæœ‰ä¸€æ¡å°±æ˜¯<code>django.contrib.auth</code>ã€‚</p></blockquote><h1 id="0X02-DRF-ä¸­çš„æƒé™è®¾è®¡"><a href="#0X02-DRF-ä¸­çš„æƒé™è®¾è®¡" class="headerlink" title="0X02 DRF ä¸­çš„æƒé™è®¾è®¡"></a>0X02 DRF ä¸­çš„æƒé™è®¾è®¡</h1><p>æˆ‘ä»¬åœ¨é…ç½® DRF çš„æ—¶å€™é€šå¸¸ä¼šåœ¨ settings é‡Œå†™ä¸‹ç±»ä¼¼è¿™æ ·çš„é…ç½®ï¼Œè¿™æ„å‘³ç€ç»™é»˜è®¤çš„ permission_class è®¾ç½®æˆäº†<code>IsAuthenticated</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ç™»å½•å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_PERMISSION_CLASSES'</span>: (</span><br><span class="line">        <span class="string">'rest_framework.permissions.IsAuthenticated'</span>,</span><br><span class="line">    ),</span><br><span class="line">  <span class="comment">#..............</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¹Ÿåªæ˜¯ä¸€ä¸ªé»˜è®¤çš„æƒé™é…ç½®ï¼Œä½ ç”¨ DRF çš„<code>ViewSet</code>åˆ›å»ºçš„æ–° API é»˜è®¤æ˜¯ç™»å½•å³å¯ï¼Œä½†æ˜¯æ€»ä¼šæœ‰å…¶ä»–çš„æƒ…å†µï¼Œè¿™ç§æ—¶å€™é€šå¸¸æ¥è¯´æˆ‘æˆ‘ä»¬ä¼šé‡å†™ ViewSet ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼š<code>get_permissions</code>å’Œ<code>get_queryset</code>ã€‚å…ˆè¯´æ­£ç»çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯<code>get_permissions</code>å¥½äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIView</span><span class="params">(View)</span>:</span></span><br><span class="line">    permission_classes = api_settings.DEFAULT_PERMISSION_CLASSES</span><br><span class="line">    <span class="comment"># .........</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_permissions</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Instantiates and returns the list of permissions that this view requires.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> [permission() <span class="keyword">for</span> permission <span class="keyword">in</span> self.permission_classes]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_permissions</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Check if the request should be permitted.</span></span><br><span class="line"><span class="string">        Raises an appropriate exception if the request is not permitted.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> permission <span class="keyword">in</span> self.get_permissions():</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> permission.has_permission(request, self):</span><br><span class="line">                self.permission_denied(</span><br><span class="line">                    request, message=getattr(permission, <span class="string">'message'</span>, <span class="literal">None</span>)</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_object_permissions</span><span class="params">(self, request, obj)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Check if the request should be permitted for a given object.</span></span><br><span class="line"><span class="string">        Raises an appropriate exception if the request is not permitted.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">for</span> permission <span class="keyword">in</span> self.get_permissions():</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> permission.has_object_permission(request, self, obj):</span><br><span class="line">                self.permission_denied(</span><br><span class="line">                    request, message=getattr(permission, <span class="string">'message'</span>, <span class="literal">None</span>)</span><br><span class="line">                )</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»æºç ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•å…¶å®å¾ˆå¾ˆç®€å•ï¼Œå°±åªæ˜¯æŠŠ<code>self.permission_classesä¸€éï¼Œé€šè¿‡ codename è¿›è¡Œå®ä¾‹åŒ–ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªå®ä¾‹åŒ–çš„ permission åˆ—è¡¨ã€‚ç„¶ååœ¨</code>check_permissions<code>æˆ–è€…</code>check_object_permissions<code>çš„æ—¶å€™å¯¹è¿™ä¸ªåˆ—è¡¨è½®è¯¢ä¸€éï¼Œè°ƒç”¨ permission å®ä¾‹çš„</code>has_object_permission(request, view)`æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦æœ‰æƒé™æ‰§è¡Œæœ¬æ¬¡è¯·æ±‚ï¼Œæœ€ç»ˆé€šè¿‡è¿”å›çš„ True/False æ¥ç¡®å®šæ˜¯å¦æœ‰æƒé™ç»§ç»­æ“ä½œï¼Œå¦‚æœæ²¡æœ‰æƒé™å°±ç›´æ¥ç»ˆæ­¢è¯·æ±‚äº†ã€‚</p><p>æ ¹æ®ä¸Šè¿°æ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªæƒé™æ ¡éªŒç±»äº†ï¼Œä¸€ä¸ªç®€å•çš„å®ç°æ—¶ä¸‹é¢è¿™ç§æ ·å­çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> permissions</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PermsRequired</span><span class="params">(permissions.BasePermission)</span>:</span></span><br><span class="line"><span class="string">"""éœ€è¦æœ‰å¤šä¸ªæƒé™ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰å…¶ä¸­ä¸€ä¸ªæƒé™å³å¯"""</span></span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *perms)</span>:</span></span><br><span class="line">        self.perms = perms<span class="comment"># æ¥å—å¤šä¸ªå‚æ•°ï¼Œå…¨éƒ¨éƒ½æ˜¯æƒé™</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self  <span class="comment"># è¢« callï¼ˆå‰æœŸå¯ä»¥ç†è§£æˆè¢«å½“æˆå‡½æ•°è°ƒç”¨ï¼‰ çš„æ—¶å€™è¿”å›è‡ªèº«</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_permission</span><span class="params">(self, request, view)</span>:</span></span><br><span class="line">        user = request.user<span class="comment"># æ—¢ç„¶ä¼ è¿›æ¥äº† requestï¼Œé‚£å°±å¯ä»¥æ‹¿åˆ° user äº†</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> user.is_superuser:<span class="comment"># superuser æ‹¥æœ‰ä¸€åˆ‡æƒé™</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        user_perms = user.get_all_permissions() <span class="comment"># å–å¾—ç”¨æˆ·æ‰€æ‹¥æœ‰çš„çš„æ‰€æœ‰æƒé™</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å–æœ¬æ¬¡éœ€è¦çš„æƒé™å’Œç”¨æˆ·æ‰€æœ‰çš„æƒé™çš„äº¤é›†ï¼Œå¦‚æœæœ‰äº¤é›†åˆ™æ ¡éªŒé€šè¿‡ï¼ˆä¹Ÿå°±æ˜¯ â€œæˆ–â€ æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span> <span class="keyword">if</span> user_perms &amp; set(self.perms) <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment"># å¦‚æœæƒ³è¦â€œä¸â€æ ¡éªŒï¼Œå¯ä»¥æ”¹æˆä¸‹é¢è¿™ç§</span></span><br><span class="line">        <span class="comment"># return all([perm in user_perms for perm in set(self.perms)])</span></span><br></pre></td></tr></table></figure><h1 id="0X03-DRF-å¦‚ä½•æ ¡éªŒæƒé™"><a href="#0X03-DRF-å¦‚ä½•æ ¡éªŒæƒé™" class="headerlink" title="0X03 DRF å¦‚ä½•æ ¡éªŒæƒé™"></a>0X03 DRF å¦‚ä½•æ ¡éªŒæƒé™</h1><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“ Django å’Œ DRF ä¸­çš„æƒé™å¤§æ¦‚æ˜¯æ€ä¹ˆå®ç°çš„äº†ï¼Œé‚£ä¹ˆå…·ä½“æ€ä¹ˆç”¨åœ¨ DRF æ¡†æ¶çš„ web ç¨‹åºä¸­å‘¢ï¼Ÿä¸‹é¢çœ‹ä¸€æ®µå®ä¾‹ä»£ç ã€‚è¿™å¨ä»£ç å°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ä¸€ä¸ª DRF å¼€å‡ºæ¥çš„ ViewSet äº†ï¼ŒåŒæ—¶æ”¯æŒ<code>GET/POST/PUT/PATCH/DELETE</code>äº”ç§ HTTP æ–¹æ³•ã€‚</p><blockquote><p>åœ¨ DRF çš„ ViewSet ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ self.action æ¥è®¿é—®åˆ°å½“å‰è¯·æ±‚çš„ functionã€‚é»˜è®¤æƒ…å†µä¸‹çš„ CRUD å¯¹åº”çš„æ–¹æ³•åæ˜¯ï¼š<code>list/create/retrieve/partial_update/update/delete</code>è¿™äº”ä¸ªï¼Œåˆ†åˆ«å¯¹åº”äº†<code>GET /</code>,<code>POST /</code>,<code>GET /id/</code>,<code>PATCH /id/</code>,<code>PUT /id/</code>,<code>DELETE /id/</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentViewSet</span><span class="params">(viewsets.ModelViewSet)</span>:</span></span><br><span class="line">  queryset = models.Student.objects.all()</span><br><span class="line">  <span class="comment"># ...........</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_permissions</span><span class="params">(self)</span>:</span></span><br><span class="line">      <span class="keyword">if</span> self.action == <span class="string">'list'</span>:<span class="comment"># å¦‚æœæ˜¯å¯¹æ ¹ç›®å½•è¿›è¡Œ GET åˆ™éœ€è¦åˆ—è¡¨æƒé™</span></span><br><span class="line"> self.permission_classes = (</span><br><span class="line">                perms.PermsRequired(<span class="string">'student.list_student'</span>),</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">if</span> self.action == <span class="string">'create'</span>:<span class="comment"># å¦‚æœå¯¹æ ¹ç›®å½•è¿›è¡Œ POST åˆ™éœ€è¦åˆ›å»ºæƒé™</span></span><br><span class="line">            self.permission_classes = (</span><br><span class="line">                perms.PermsRequired(<span class="string">'student.create_student'</span>),</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> super(StudentViewSet, self).get_permissions()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span><span class="params">(self)</span>:</span></span><br><span class="line">      <span class="comment"># ........</span></span><br><span class="line">        <span class="keyword">return</span> self.serializer_class</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        user = self.request.user</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœç”¨æˆ·æ‹¥æœ‰æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯çš„æƒé™ï¼Œåˆ™è¿”å›æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> user.has_perm(<span class="string">'student.query_all_students'</span>):</span><br><span class="line">            <span class="keyword">return</span> self.queryset</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœç”¨æˆ·æœ‰æŸ¥çœ‹è‡ªå·±ç­é‡Œå­¦ç”Ÿä¿¡æ¯çš„æƒé™ï¼Œåˆ™è¿”å›è‡ªå·±ç­é‡Œçš„å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> user.has_perm(<span class="string">'ratel.query_self_class_students'</span>):</span><br><span class="line">            <span class="keyword">return</span> self.queryset.filter(</span><br><span class="line">                student_class=user.student.student_class</span><br><span class="line">            )</span><br><span class="line">        <span class="comment"># ...è¿˜æœ‰å…¶ä»–æ ¡éªŒ</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœä»€ä¹ˆæƒé™éƒ½æ²¡æ‰¾åˆ°ï¼Œé‚£å°±åªèƒ½è¿”å›è‡ªå·±çš„æ•°æ®äº†</span></span><br><span class="line">        <span class="keyword">return</span> models.Student.objects.filter(id=user.student.id)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢çœ‹åˆ°æœ‰ä¸¤ä¸ªåœ°æ–¹åœ¨æ ¡éªŒæƒé™ï¼Œä¸€ä¸ªæ˜¯<code>get_permissions()</code>ï¼Œå¦ä¸€ä¸ªæ˜¯<code>get_queryset()</code>ã€‚å‰è€…æ˜¯ä¸¥è°¨çš„â€œæƒé™â€ï¼Œä¹Ÿå°±æ˜¯è¯´â€œä½ æƒ³è¦æ‰§è¡ŒæŸæŸæŸæ“ä½œï¼Œä½ å°±éœ€è¦æ‹¥æœ‰æŸæŸæŸæƒé™ï¼Œæ²¡æœ‰å°±ä¸ä¿¡â€ï¼›åè€…æ˜¯å¹¿ä¹‰çš„â€œæƒé™â€ï¼Œä¼šä»å¤§åˆ°å°æ¥æ ¡éªŒï¼Œæ¯”å¦‚è¿™é‡Œå¯ä»¥å…ˆåˆ¤æ–­ä½ æ˜¯å¦æ‹¥æœ‰æŸ¥çœ‹æ‰€æœ‰äººä¿¡æ¯çš„æƒé™ï¼Œæœ‰ï¼Œå°±ç»™ä½ æ‰€æœ‰äººçš„ä¿¡æ¯ï¼›æ²¡æœ‰ï¼Œå°±çœ‹ä½ èƒ½ä¸èƒ½çœ‹ç­é‡Œäººçš„ä¿¡æ¯ï¼Œæœ‰ï¼Œå°±ç»™ä½ ç­é‡Œäººçš„ä¿¡æ¯ï¼›æ²¡æœ‰ï¼Œå°±åªè¿”å›ç»™ä½ è‡ªå·±çš„æ•°æ®ã€‚</p><p>è¿™ä¸¤ç§ç”¨æ³•æ˜¯åœ¨æ—¥å¸¸å·¥ä½œä¸­ç”¨æ³•æœ€å¤šçš„äº†ã€‚å…¶ä»–å†æœ‰çš„è¯å°±æ˜¯åœ¨ serializer çš„ validate ä¸­è¿›è¡Œçš„æ ¡éªŒï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªåŠŸèƒ½å«åšâ€œå¼ºåˆ¶åˆ é™¤â€ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥è·³è¿‡ä¸€åˆ‡æ£€æµ‹ï¼ˆæ¯”å¦‚æ£€æµ‹å­¦ç”Ÿæ˜¯å¦åœ¨æ ¡ï¼Œå­¦ç”Ÿæ˜¯å¦æ¯•ä¸šè¶…è¿‡3 å¹´ï¼Œå­¦ç”Ÿé¥­å¡æ˜¯å¦è¿˜æœ‰é’±ï¼‰ï¼Œå°±ç›´æ¥åˆ é™¤ã€‚è¿™ç§æƒé™å¯èƒ½åªä¼šåˆ†é…ç»™é«˜çº§åˆ«ç®¡ç†å‘˜ä½¿ç”¨ï¼Œä½†æ˜¯åˆä¸å¯èƒ½é’ˆå¯¹è¿™ç§åŠŸèƒ½å†å•ç‹¬å¼€æ–°çš„ API æ¥åšï¼Œè¿™æ ·å¤ªå¥‡æ€ªäº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå‚æ•°æ¥æ§åˆ¶å‰ç½®åˆ é™¤ï¼Œæ¯”å¦‚<code>force_delete</code>ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å†™å‡ºç±»ä¼¼ä¸‹é¢çš„ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate</span><span class="params">(self, validated_data)</span>:</span></span><br><span class="line">  user = self.context[<span class="string">'request'</span>].user</span><br><span class="line">    force_delete = validated_data.get(<span class="string">'force_delete'</span>, <span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> force_delete:</span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> user.has_perm(<span class="string">'student.force_delete'</span>):</span><br><span class="line">        <span class="keyword">raise</span> serializers.ValidationError(<span class="string">'ä½ æ²¡æœ‰å¼ºåˆ¶åˆ é™¤ç”¨æˆ·çš„æƒé™'</span>)</span><br><span class="line">      </span><br><span class="line">  <span class="keyword">return</span> validated_data</span><br></pre></td></tr></table></figure><h1 id="0X04-THE-END"><a href="#0X04-THE-END" class="headerlink" title="0X04 THE END"></a>0X04 THE END</h1><p>ä»Šå¤©æ˜¯ä¸ªç¾å¥½çš„å‘¨æ—¥ï¼Œä¸­åˆçš„æ—¶å€™æƒ³è¦å–äº†å’–å•¡å†™ç¯‡åšå®¢å°±å»ç© <em>ç«ç„°çº¹ç« </em> çš„çš„ï¼Œç„¶è€Œè¶Šçœ‹è¿™ä¸ªæƒé™è¶Šè¶Šè§‰å¾—è‡ªå·±ä¸æ‡‚ï¼Œä¹‹å‰ä¸€åº¦ä»¥ä¸ºè‡ªå·±æŒºæ˜ç™½çš„ï¼Œç»“æœä¸€ç›´æ˜¯å¤„åœ¨çŸ¥å…¶ç„¶çš„çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ˆè™½ç„¶ç°åœ¨çŸ¥é“ä¹Ÿä¹Ÿä¸å½»åº•ï¼‰ã€‚ç„¶åå°±ä¸€ç‚¹ç‚¹çœ‹ä¹‹å‰çš„ä»£ç ï¼Œçœ‹å®ç°æ–¹æ¡ˆï¼Œçœ‹ç€çœ‹ç€åˆå¾—è¿›å»çœ‹æºç ï¼Œç»“æœè®¡åˆ’ä¸€ä¸ªå¤šå°æ—¶æå®šçš„ä¸œè¥¿æäº†å¿«å››ä¸ªå°æ—¶ã€‚ä¸è¿‡è¿˜å¥½ï¼Œä¹Ÿä¸äºï¼Œæ”¶è·é¢‡ä¸°~</p>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> Django REST framework </tag>
            
            <tag> Permission </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSO ä¸ CAS</title>
      <link href="/2020/07/04/cas-sso/"/>
      <url>/2020/07/04/cas-sso/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ç½‘ç«™æ€ä¹ˆç™»é™†"><a href="#0X00-ç½‘ç«™æ€ä¹ˆç™»é™†" class="headerlink" title="0X00 ç½‘ç«™æ€ä¹ˆç™»é™†"></a>0X00 ç½‘ç«™æ€ä¹ˆç™»é™†</h1><p>å›å¿†ä¸€ä¸‹ä½ ç”¨è¿‡çš„ç½‘ç«™ä»¬ï¼Œä¸€èˆ¬éƒ½æ˜¯æ€ä¹ˆç™»é™†çš„ï¼Ÿ â€œå°±è¾“å…¥ç”¨æˆ·åå¯†ç ç™»é™†å‘—ï¼Œè¦ä¹ˆå°±æ‰«ç ç™»å½•ï¼Œè¦ä¹ˆæ‰‹æœºéªŒè¯ç ç™»å½•ï¼Œè¿˜èƒ½æœ‰å•¥â€ã€‚ç¡®å®æ²¡å•¥ï¼Œå’±ä»¬å¹³æ—¶ç”¨åˆ°çš„ç™»å½•æ–¹å¼ä¹Ÿå°±éƒ½æ˜¯è¿™æ ·çš„ï¼Œè€Œä¸”è¿™äº›å…¶å®ä»åŸç†ä¸Šæ¥è¯´éƒ½æ˜¯ <strong>è¯æ˜ä½ æ˜¯ä½ </strong> çš„æ‰‹æ®µï¼Œç”¨æˆ·åå¯†ç æ˜¯é€šè¿‡â€œå¯†ç åªæœ‰ä½ è‡ªå·±çŸ¥é“â€ä¸ºå‰æçš„ï¼Œæ‰«ç å’ŒéªŒè¯ç æ˜¯ä»¥â€œæ‰‹æœºä¸€å®šåœ¨ä½ è‡ªå·±æ‰‹ä¸Šï¼Œå¹¶ä¸”åªæœ‰ä½ è‡ªå·±èƒ½è§£é”â€ä¸ºå‰æçš„ã€‚æ‰€ä»¥å…¶å®ç”¨æˆ·åå¯†ç å¹¶ä¸æ˜¯ç™»å½•çš„å”¯ä¸€æ–¹æ³•ï¼Œç†è®ºä¸Šèƒ½è¯æ˜ä½ æ˜¯ä½ çš„ä¸€åˆ‡æ–¹æ³•éƒ½å¯ä»¥ç”¨æ¥åšæˆæƒè®¤è¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é™¤äº†å¯†ç ï¼Œå‡ºç°äº†æ‰«ç ã€çŸ­ä¿¡é‚®ç®±éªŒè¯ç ã€æŒ‡çº¹ã€äººè„¸ã€å£°çº¹ã€è™¹è†œå·´æ‹‰å·´æ‹‰çš„ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/ab-blog-2fa2.webp" alt="auth"></p><p>ä¸Šé¢è¿™äº›éƒ½æ˜¯ç¨³å®šé è°±çš„ç™»å½•æ–¹å¼ï¼Œæˆ‘ä»¬æ¥æƒ³å¦ä¸€ä¸ªé—®é¢˜ï¼Œä½ ä»¬æœ‰ä¸€ä¸ªç½‘ç«™é€‰ç”¨äº†ç”¨æˆ·åå¯†ç çš„æ–¹å¼ç™»å½•ï¼Œä½ å’Œç”¨æˆ·å¼€å¼€å¿ƒå¿ƒç™»å½•ã€‚åæ¥ä½ ä¸Šçº¿äº†å¦ä¸€ä¸ªç½‘ç«™ï¼Œä½ è§‰å¾—ç”¨æˆ·è¯¥æ€ä¹ˆç™»é™†è¿™ä¸ªæ–°ç½‘ç«™å‘¢ï¼Ÿâ€œæ–°ç½‘ç«™å°±å†æ³¨å†Œä¸€æ¬¡å‘€ï¼â€å¥½çš„ï¼Œç”¨æˆ·åˆæ³¨å†Œäº†ä¸€æ¬¡ã€‚éšç€ä½ ä»¬å…¬å¸ä¸šåŠ¡é€æ¸å£®å¤§ï¼Œä¸Šçº¿äº† 100 ä¸ªç½‘ç«™ï¼Œé‚£ç”¨æˆ·è¦æ³¨å†Œä¸€ç™¾æ¬¡å—ï¼Ÿä¸‡ä¸€è‡ªå·±å¸¸ç”¨çš„ç”¨æˆ·åè¢«å ç”¨äº†å‘¢ï¼Œå²‚ä¸æ˜¯ 100 ä¸ªç½‘ç«™å¯èƒ½ä¼šç”¨ 100 å¥—ä¸åŒçš„ç”¨æˆ·åå¯†ç ï¼Ÿé‚£ç”¨æˆ·å¯èƒ½å°±è¦éª‚å¨˜äº†å‘¦ã€‚</p><p>èªæ˜çš„ä½ å¯èƒ½ä¼šæƒ³åˆ°ï¼Œæ—¢ç„¶ç°åœ¨è¿™ä¹ˆæµè¡Œå¾®æœåŠ¡ï¼Œæˆ‘ä»¬æŠŠç™»å½•åšä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ‰€æœ‰ç³»ç»Ÿçš„ç™»é™†éƒ½ç”¨è¿™ä¸€å¥—ä¸å°±å¥½äº†ï¼Ÿ</p><h1 id="0X01-è¿™å°±æ˜¯-SSO"><a href="#0X01-è¿™å°±æ˜¯-SSO" class="headerlink" title="0X01 è¿™å°±æ˜¯ SSO"></a>0X01 è¿™å°±æ˜¯ SSO</h1><p>é‚£æœ‰ä¸€ä¸ªå¥½æ¶ˆæ¯å’Œä¸€ä¸ªåæ¶ˆæ¯ï¼Œåæ¶ˆæ¯æ˜¯ï¼Œä½ ä»¥ä¸ºçš„è¿™ä¸ªå¤©æ‰æƒ³æ³•å°±æ˜¯<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU1JTk2JUFFJUU0JUI4JTgwJUU3JTk5JUJCJUU1JTg1JUE1" title="https://zh.wikipedia.org/wiki/%E5%96%AE%E4%B8%80%E7%99%BB%E5%85%A5"> SSOï¼ˆSingle Sign Onï¼‰<i class="fa fa-external-link"></i></span>å•ç‚¹ç™»å½•ï¼Œæ—©å°±è¢«äººæƒ³åˆ°è€Œä¸”å®ç°äº†å¾ˆå¤šéäº†ï¼›å¥½æ¶ˆæ¯æ˜¯ï¼Œè½®å­å¾ˆå¤šï¼Œå®Œå…¨ä¸ç”¨è‡ªå·±é€ ï¼ŒæŒ‘ä¸€ä¸ªæ‹¿æ¥ç”¨å°±å¥½ã€‚</p><blockquote><p>å•ç‚¹ç™»å½•ï¼ˆè‹±è¯­ï¼šSingle sign-onï¼Œç¼©å†™ä¸º SSOï¼‰ï¼Œåˆè¯‘ä¸ºå•ä¸€ç­¾å…¥ï¼Œä¸€ç§å¯¹äºè®¸å¤šç›¸äº’å…³è¿ï¼Œä½†æ˜¯åˆæ˜¯å„è‡ªç‹¬ç«‹çš„è½¯ä»¶ç³»ç»Ÿï¼Œæä¾›è®¿é—®æ§åˆ¶çš„å±æ€§ã€‚å½“æ‹¥æœ‰è¿™é¡¹å±æ€§æ—¶ï¼Œå½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œå°±å¯ä»¥è·å–æ‰€æœ‰ç³»ç»Ÿçš„è®¿é—®æƒé™ï¼Œä¸ç”¨å¯¹æ¯ä¸ªå•ä¸€ç³»ç»Ÿéƒ½é€ä¸€ç™»å½•ã€‚è¿™é¡¹åŠŸèƒ½é€šå¸¸æ˜¯ä»¥è½»å‹ç›®å½•è®¿é—®åè®®ï¼ˆLDAPï¼‰æ¥å®ç°ï¼Œåœ¨æœåŠ¡å™¨ä¸Šä¼šå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°LDAPæ•°æ®åº“ä¸­ã€‚ç›¸åŒçš„ï¼Œå•ä¸€é€€å‡ºï¼ˆsingle sign-offï¼‰å°±æ˜¯æŒ‡ï¼Œåªéœ€è¦å•ä¸€çš„é€€å‡ºåŠ¨ä½œï¼Œå°±å¯ä»¥ç»“æŸå¯¹äºå¤šä¸ªç³»ç»Ÿçš„è®¿é—®æƒé™ã€‚  â€“ç»´åŸºç™¾ç§‘</p></blockquote><a id="more"></a><p>SSO ç®€å•æ¥è¯´å°±æ˜¯å½“ä½ æœ‰ä¸€å †ç³»ç»Ÿéœ€è¦ç™»å½•çš„æ—¶å€™ï¼Œé€šè¿‡ä¸€ä¸ªç™»å½•æœåŠ¡å°†æ‰€æœ‰ç³»ç»Ÿç»Ÿç­¹èµ·æ¥çš„æ–¹æ¡ˆã€‚åœ¨ä¸ç”¨ SSO çš„æ—¶å€™ï¼Œç™»å½•ä¸€ä¸ªç³»ç»Ÿæ˜¯è¿™æ ·çš„ï¼š</p><ol><li>æ‰“å¼€ç½‘ç«™ A </li><li>A ç½‘ç«™å‘ç°ä½ æ²¡æœ‰ token æˆ–è€… cookieï¼Œè¦æ±‚ä½ ç™»å½•</li><li>ä½ è¾“å…¥ç”¨æˆ·åå¯†ç ä¼ é€’ç»™ A ç½‘ç«™</li><li>A ç½‘ç«™é€šè¿‡æ ¸å¯¹å‘ç°ç”¨æˆ·åå¯†ç æ­£ç¡®ï¼Œç»™ä½ ä¸‹å‘ä¸€ä¸ª token æˆ–è€… cookie</li><li>ä½ å¸¦ç€ token æˆ–è€… cookie å°±å¯ä»¥æ­£å¸¸è®¿é—®äº†</li></ol><p>å¦‚æœä½ è¦ç™»å½•ä¸€å®¶å…¬å¸çš„ 3 ä¸ªç³»ç»Ÿï¼Œé‚£å°±å¾—é‡å¤ä¸Šé¢æµç¨‹ä¸‰æ¬¡ï¼Œå¦‚æœå¯†ç è¾“å…¥é”™äº†æˆ–è€…è®°æ··äº†ç”¨æˆ·åå¯†ç å’Œç½‘ç«™çš„è”ç³»å¯èƒ½è¿˜ä¼šç™»å½•å¥½å¤šæ¬¡ã€‚SSO çš„å­˜åœ¨ä¸èƒ½è§£å†³ä½ ç™»é™†ä¸€ä¸ªç³»ç»Ÿçš„é—®é¢˜ï¼Œä½†æ˜¯èƒ½è§£å†³ä½ ç™»å½•å¤šä¸ªç³»ç»Ÿçš„é—®é¢˜ã€‚</p><p>é€šå¸¸æ¥è¯´ SSO çš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„</p><ol><li>æ‰“å¼€ç½‘ç«™ A</li><li>A ç½‘ç«™å‘ç°ä½ æ²¡æœ‰ token æˆ–è€… cookieï¼Œè¦æ±‚ä½ ç™»å½•ï¼Œç»™ä½ ä¸€ä¸ª 302 è·³è½¬åˆ° SSO ç«™ç‚¹</li><li>ä½ æŠŠç”¨æˆ·åå¯†ç å‘ç»™ SSO</li><li>SSO è®¤è¯é€šè¿‡åå‘ç»™ä½  tokenï¼Œå¹¶ä¸”å†é€šè¿‡ 302 ç»™ä½ è·³å›åˆšæ‰çš„ç½‘ç«™</li><li>åé¢ä½ å°±å¯ä»¥å¸¦ç€ token æ­£å¸¸è®¿é—®äº†</li></ol><p>ä¹ä¸€çœ‹å¥½åƒä¸€æ­¥éƒ½æ²¡æœ‰å°‘ï¼Œåè€Œç¨‹åºä¸Šçš„å®ç°è¿˜æ›´å¤æ‚äº†ï¼Œä½†æ˜¯ SSO çš„ä¼˜åŠ¿å°±åœ¨äºå†ç™»å½•æ–°ç³»ç»Ÿçš„æ—¶å€™ã€‚å¦‚æœè¿™æ—¶å€™ä½ è¦ç™»å½•è¿™å®¶å…¬å¸çš„ B ç³»ç»Ÿï¼Œåœ¨æ²¡æœ‰ SSO çš„æƒ…å†µä¸‹å°±å¾—é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œè€Œä¸”ä½ è¿˜å¾—é‡æ–°è¾“å…¥ç”¨æˆ·åå¯†ç ã€‚ä½†æ˜¯åœ¨æœ‰ SSO çš„æƒ…å†µä¸‹æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>ä½ æ‰“å¼€ç½‘ç«™ B</li><li>B ç½‘ç«™å‘ç°ä½ æ²¡æœ‰ tokenï¼Œè¦æ±‚ä½ ç™»å½•ï¼Œç»™ä½ ä¸€ä¸ª 302 è·³è½¬åˆ° SSO ç«™ç‚¹</li><li>SSO ç«™ç‚¹æ˜¯åŒä¸€ä¸ªï¼Œæ‰€ä»¥ä½ ä¼šå¸¦ç€ token è®¿é—® SSOï¼Œè¿™æ—¶å€™ SSO å°±çŸ¥é“ä½ ç™»é™†è¿‡äº†ï¼Œå°±ä¼šç»™ä½ ä¸€ä¸ªç”¨äºç½‘ç«™ B çš„ tokenï¼Œå¹¶ä¸” 302 è·³è½¬è¿‡å»</li><li>ä½ å¸¦ç€ token æ­£å¸¸è®¿é—® B ç½‘ç«™</li></ol><p>ä»æ¡æ•°ä¸Šçœ‹æ²¡å°‘ä»€ä¹ˆï¼Œä½†æ˜¯ä½ ä¼šå‘ç°çœŸæ­£ä½ äººå·¥åœ¨æ“ä½œçš„å°±åªæ˜¯â€œæ‰“å¼€ B ç½‘ç«™â€è€Œå·²ï¼Œåé¢çš„éƒ½æ˜¯ç¨‹åºåœ¨è·³è½¬ã€‚è¿™æ ·ä¸ä»…æˆåŠŸå®ç°äº†ä¸€å¥—ç”¨æˆ·åé¢èµ°å¤©ä¸‹çš„æ–¹æ¡ˆï¼Œè¿˜æˆåŠŸåœ°ç»™ç”¨æˆ·å‡å°äº†ç™»å½•å¤šä¸ªç³»ç»Ÿçš„éº»çƒ¦ã€‚</p><h1 id="0X02-CAS-SSO-å¦‚ä½•å·¥ä½œ"><a href="#0X02-CAS-SSO-å¦‚ä½•å·¥ä½œ" class="headerlink" title="0X02 CAS-SSO å¦‚ä½•å·¥ä½œ"></a>0X02 CAS-SSO å¦‚ä½•å·¥ä½œ</h1><p>é‚£ä¹ˆ <span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU5JTlCJTg2JUU0JUI4JUFEJUU1JUJDJThGJUU4JUFFJUE0JUU4JUFGJTgxJUU2JTlDJThEJUU1JThBJUEx" title="https://zh.wikipedia.org/wiki/%E9%9B%86%E4%B8%AD%E5%BC%8F%E8%AE%A4%E8%AF%81%E6%9C%8D%E5%8A%A1">CAS<i class="fa fa-external-link"></i></span> åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><p>é›†ä¸­å¼è®¤è¯æœåŠ¡ï¼ˆè‹±è¯­ï¼šCentral Authentication Serviceï¼Œç¼©å†™CASï¼‰æ˜¯ä¸€ç§é’ˆå¯¹ä¸‡ç»´ç½‘çš„å•ç‚¹ç™»å½•åè®®ã€‚å®ƒçš„ç›®çš„æ˜¯å…è®¸ä¸€ä¸ªç”¨æˆ·è®¿é—®å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œè€Œåªéœ€å‘è®¤è¯æœåŠ¡å™¨æä¾›ä¸€æ¬¡å‡­è¯ï¼ˆå¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ã€‚è¿™æ ·ç”¨æˆ·ä¸ä»…ä¸éœ€åœ¨ç™»é™†webåº”ç”¨ç¨‹åºæ—¶é‡å¤è®¤è¯ï¼Œè€Œä¸”è¿™äº›åº”ç”¨ç¨‹åºä¹Ÿæ— æ³•è·å¾—å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ã€‚â€œCASâ€ä¹ŸæŒ‡å®ç°äº†è¯¥åè®®çš„è½¯ä»¶åŒ…ã€‚     â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒCAS æ˜¯ SSO çš„ä¸€ç§å®ç°æ–¹å¼ã€‚å®ƒçš„å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200704145125.jpeg" alt="CAS"></p><ol><li>ç”¨æˆ·è®¿é—®ç«™ç‚¹ A</li><li>ç½‘ç«™ A å°†è¯·æ±‚é‡å®šå‘ CAS æœåŠ¡å™¨</li><li>ç”¨æˆ·åœ¨ CAS å¤„è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œæäº¤</li><li>CAS è®¤è¯é€šè¿‡ï¼Œç»™ç”¨æˆ·å‘ä¸€ä¸ª tokenï¼Œå¹¶é‡å®šå‘å›ç«™ç‚¹ A</li><li>ç”¨æˆ·å°† CAS ç»™çš„ token å¸¦åˆ°ç«™ç‚¹ A</li><li>ç«™ç‚¹ A å°† token æ‹¿å» CAS æœåŠ¡å™¨æ ¸æŸ¥ï¼ˆå› ä¸º ç«™ç‚¹ A ç°åœ¨ä¸çŸ¥é“ç”¨æˆ·æ˜¯è°ï¼Œè‡ªå·±ä¹Ÿè¯†åˆ«ä¸äº† tokenï¼‰</li><li>CAS æœåŠ¡å™¨æ ¸æŸ¥é€šè¿‡ï¼Œå¹¶å°†ç”¨æˆ· A çš„ä¿¡æ¯è¿”å›ç»™ç«™ç‚¹ Aï¼ˆè¿™æ—¶å€™ç«™ç‚¹ A çŸ¥é“ç”¨æˆ·æ˜¯è°äº†ï¼‰</li><li>ç™»å½•æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ token è®¿é—®ç«™ç‚¹äº†</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> SSO </tag>
            
            <tag> CAS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆ Django éœ€è¦uWSGI</title>
      <link href="/2020/06/30/why-django-need-uwsgi/"/>
      <url>/2020/06/30/why-django-need-uwsgi/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-è¿è¡Œä¸€ä¸ª-Django-ç¨‹åº"><a href="#0X00-è¿è¡Œä¸€ä¸ª-Django-ç¨‹åº" class="headerlink" title="0X00 è¿è¡Œä¸€ä¸ª Django ç¨‹åº"></a>0X00 è¿è¡Œä¸€ä¸ª Django ç¨‹åº</h1><p>è¿è¡Œä¸€ä¸ª Django ç¨‹åºå¯å¤ªç®€å•äº†ï¼Œä»åˆ›å»ºé¡¹ç›®åˆ°è¿è¡Œèµ·æ¥æ€»å…±ä¹Ÿä¸è¶…è¿‡ 5 è¡Œä»£ç ã€‚é¡¹ç›®è¿è¡Œèµ·æ¥äº†å°±å¯ä»¥æ‰“å¼€æˆ‘ä»¬çš„ vim æˆ–è€… IDE ä¹‹ç±»çš„ä¸€é¡¿ coding äº†ã€‚ä½œä¸ºæœ€æœ€æœ€å¼€å§‹å†™ Django çš„åŒå­¦æ¥è¯´åˆ°è¿™é‡Œä¹Ÿå°±äº†è§£çš„å·®ä¸å¤šäº†ï¼Œå› ä¸ºå¤§å®¶éƒ½æ˜¯è‡ªå·±å†™å¥½ä»£ç æœ¬åœ°æµ‹è¯•ä¸€ä¸‹å°±æ Pul Request åˆ°ä¸Šæ¸¸ä»“åº“äº†ï¼Œç„¶åä»€ä¹ˆå•å…ƒæµ‹è¯•ã€æ•°æ®åº“è¿ç§»ã€æµ‹è¯•ç¯å¢ƒç‰ˆæœ¬å‘å¸ƒç”šè‡³å¯èƒ½åŒ…å« docker é•œåƒæ›´æ–°å°±å…¨éƒ½äº¤ç»™ CI æ¥åšäº†ã€‚è‡ªå·±å°±è¿™ä¹ˆå¼€å¼€å¿ƒå¿ƒçš„å†™äº†ä¸€æ®µæ—¶é—´çš„ä»£ç ï¼Œä¸€åˆ‡éƒ½åœ¨æœç€å¥½çš„æ–¹å‘å‘å±•ã€‚çªç„¶æœ‰ä¸€å¤©éƒ¨é—¨ä¸»ç®¡æˆ–è€…è€å¤§å‘Šè¯‰ä½ æœ‰ä¸€ä¸ªæ–°é¡¹ç›®è¦ä½ æ¥å¼€ä¸ªå¤´ï¼Œå…ˆæ­å¥½è„šæ‰‹æ¶ç„¶åå‘å¸ƒä¸Šå»ï¼Œåé¢å†æ¥äººä¸€èµ·åšåŠŸèƒ½è¿­ä»£ã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200630214416.png" alt="è¿è¡Œä¸€ä¸ª Django ç¨‹åº"></p><p>ç„¶åä½ å¼€å¼€å¿ƒå¿ƒåœ°<code>django-admin startproject xxxx</code>ã€å¼€å¼€å¿ƒå¿ƒåœ°<code>django-admin startapp xxxxx</code>ï¼Œä¸€é¡¿ coding ä¹‹åæ‡µé€¼äº†ï¼Œæ²¡æœ‰éƒ¨ç½²è¿‡æµ‹è¯•ç¯å¢ƒï¼Œæ²¡æœ‰éƒ¨ç½²è¿‡ç”Ÿäº§ç¯å¢ƒï¼ŒåªçŸ¥é“ CI ç»™åšäº†ï¼Œå´å®Œå…¨ä¸çŸ¥é“åšäº†ä»€ä¹ˆã€‚ç„¶åä½ è·‘å»çœ‹ CI è„šæœ¬ï¼Œå»é—®å…¶ä»–åŒäº‹åŒå­¦ï¼Œå¾—åˆ°äº†ä¸€å † Nginx å’Œ uWSGI ä¹‹ç±»çš„ç­”å¤ã€‚ä½ ä¹Ÿç…§ç€åšäº†ï¼Œä½†æ˜¯å®Œå…¨ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå› ä¸ºä½ è§‰å¾—<code>python manage.py runserver</code>æ˜æ˜å°±å¯ä»¥å¯åŠ¨é¡¹ç›®äº†ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦æä»€ä¹ˆ Nginx å’Œ uWSGI å‘¢ï¼Ÿ</p><a id="more"></a><h1 id="0X01-éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"><a href="#0X01-éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="0X01 éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"></a>0X01 éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</h1><p>æŒ‰æˆ‘ç°åœ¨æ‰‹ä¸Šçš„é¡¹ç›®æ¥è¯´ï¼Œéƒ¨ç½²é˜¶æ®µç”¨åˆ°äº†ï¼šdockerã€uWSGIã€supervisorã€Nginxã€fabricã€gitlab-ci è¿™ 5 ç§æŠ€æœ¯ã€‚å…¶ä¸­ docker æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶çš„ç”Ÿäº§ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒé«˜åº¦ä¸€è‡´çš„ï¼›uWSGI å’Œ Nginx åé¢å•ç‹¬è¯´ï¼›supervisor æ˜¯ç”¨æ¥ä¿æ´»çš„ï¼Œæœ‰æ—¶å€™è¿›ç¨‹æŒ‚äº†éœ€è¦æœ‰äººæ¥é‡å¯å®ƒï¼›fabric æ˜¯ç”¨æ¥å°†å¸¸ç”¨çš„å‘½ä»¤ç»„æ•´åˆçš„ï¼›gitlab-ci æ˜¯ç”¨æ¥æ–¹ä¾¿è¿è¡Œå•å…ƒæµ‹è¯•ã€æµ‹è¯•ç¯å¢ƒå‘å¸ƒå’Œç”Ÿäº§ç¯å¢ƒå‘å¸ƒçš„ã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200630221308.png" alt="ç®€å•éƒ¨ç½² Django ç¨‹åº"></p><p>ä¸‹é¢å°±é‡ç‚¹æ¥è§£ç­”ä¸€ä¸‹è¿™ä¸ªæ–°æ‰‹ç¾¤ä½“ä¸­å¾ˆå®¹æ˜“å‡ºç°çš„ç–‘é—®ï¼š</p><blockquote><p>ä¸ºä»€ä¹ˆæ˜æ˜<code>python manage.py runserver</code>å°±èƒ½è¿è¡Œçš„ Django é¡¹ç›®éè¦ç”¨ Nginx å’Œ uWSGI è¿è¡Œå‘¢ï¼Ÿ</p></blockquote><h1 id="0X02-ä¸ºä»€ä¹ˆéœ€è¦-uWSGI"><a href="#0X02-ä¸ºä»€ä¹ˆéœ€è¦-uWSGI" class="headerlink" title="0X02 ä¸ºä»€ä¹ˆéœ€è¦ uWSGI"></a>0X02 ä¸ºä»€ä¹ˆéœ€è¦ uWSGI</h1><p>å…·ä½“ä¸ºä»€ä¹ˆè¦ç”¨ uWSGI å…¶å®å¶é‡å¥½å¤šä¸ªåŸå› ï¼Œä¸‹é¢ä¼šé€ä¸ªæåˆ°ã€‚</p><p>é¦–å…ˆæœ€å¸¸è§çš„ä¸€ç§è¯´æ³•æ˜¯ï¼šâ€œ<code>python manage.py runserver</code>æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸€ä¸ªè¯·æ±‚ä¸ç»“æŸå…¶ä»–çš„è¯·æ±‚å°±å¾—é˜»å¡ï¼Œæ‰€ä»¥æ€§èƒ½å·®â€ï¼Œè¿™ç§è¯´æ³•å½»å¤´å½»å°¾æ˜¯é”™è¯¯çš„ã€‚è€Œä¸”éªŒè¯èµ·æ¥ä¹ŸåŠå…¶å®¹æ˜“ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªä½ çš„ Django é¡¹ç›®ç„¶åæ‰¾ä¸ª api ç”¨ ipdb æ‰“ä¸ªæ–­ç‚¹ï¼Œé€šè¿‡ runserver æŠŠå®ƒè·‘èµ·æ¥ã€‚ç„¶åå…ˆè°ƒç”¨æ‰“äº†æ–­ç‚¹çš„ apiï¼Œå‘ç°å®ƒå¡åœ¨æ–­ç‚¹å¤„äº†ï¼Œç„¶åå†è°ƒå¦ä¸€ä¸ª apiï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥å¾—åˆ° response çš„ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ‰€è°“å•çº¿ç¨‹å¯¼è‡´çš„ã€‚ä¸å…¶è¯´æ˜¯å› ä¸ºå•çº¿ç¨‹å¯¼è‡´æ€§èƒ½ä½ä¸‹å€’ä¸å¦‚è¯´æ˜¯å› ä¸ºâ€œå•è¿›ç¨‹â€ï¼Œä¼—æ‰€å‘¨çŸ¥ Python ä¸­æœ‰ä¸€ä¸ª GIL å…¨å±€è§£é‡Šé”ï¼Œè¿™ä¸œè¥¿çš„å­˜åœ¨å¯¼è‡´çœŸæ­£æ„ä¹‰ä¸Šçš„å•è¿›ç¨‹å¤šçº¿ç¨‹ Python ç¨‹åºå¹¶ä¸å¾—è¡Œï¼Œæ‰€ä»¥ uWSGI å¯ä»¥é€šè¿‡å¯åŠ¨å¤šä¸ªè¿›ç¨‹çš„æ–¹å¼æ¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­<code>processes = 8</code>çš„éƒ¨åˆ†ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">chdir</span>     = /code</span><br><span class="line"><span class="attr">pp</span>        = /code</span><br><span class="line"><span class="attr">module</span>    = ratel.wsgi</span><br><span class="line"><span class="attr">master</span>    = <span class="literal">true</span></span><br><span class="line"><span class="attr">processes</span> = <span class="number">8</span></span><br><span class="line"><span class="attr">vacuum</span>    = <span class="literal">true</span></span><br><span class="line"><span class="attr">http</span>      = <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">7701</span></span><br><span class="line"><span class="attr">stats</span> = /tmp/xxxxx_stats.socket</span><br><span class="line"></span><br><span class="line"><span class="attr">env</span> = LANG=en_US.utf8</span><br><span class="line"><span class="attr">env</span> = DJANGO_SETTINGS_MODULE=xxxxx.settings</span><br><span class="line"></span><br><span class="line"><span class="attr">harakiri</span>  = <span class="number">60</span></span><br><span class="line"><span class="attr">http-timeout</span>   = <span class="number">60</span></span><br><span class="line"><span class="attr">socket-timeout</span> = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max-requests</span> = <span class="number">8192</span></span><br><span class="line"><span class="attr">listen</span>       = <span class="number">8192</span></span><br><span class="line">no-orphans</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œè¯´åˆ°å¤šè¿›ç¨‹ï¼Œæœ‰ä¸ªé¢˜å¤–è¯å¯ä»¥è¯´ä¸€ä¸‹ï¼šâ€œä½ è§‰å¾— Django ä¸­ä½¿ç”¨å…¨å±€å˜é‡æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„å—ï¼Ÿâ€ã€‚é€šå¸¸æƒ…å†µæ¥è¯´ç¼–ç¨‹ä¸­ä½¿ç”¨å…¨å±€å˜é‡æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹å°±éœ€è¦å¤šå¤šæ³¨æ„äº†ã€‚æ¯”å¦‚æŒ‰ä¸Šé¢çš„é…ç½®ï¼Œä¸€ä¸ªé¡¹ç›®ç”¨äº† 8 ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ¥åˆ°äº†ä¸€ä¸ª request å¹¶ä¸”æŠŠ<code>CURRENT_COUNT</code>ä» 80 æ”¹åˆ°äº† 100ï¼Œä½†æ˜¯å…¶ä»–è¿›ç¨‹åœ¨è®¿é—®è‡ªå·±è¿›ç¨‹é‡Œçš„<code>CURRENT_COUNT</code>çš„æ—¶å€™è¿˜æ˜¯ 80ï¼Œè¿™å°±æ˜¯å› ä¸ºå¤šä¸ªè¿›ç¨‹ä¸­å…¨å±€å˜é‡ä¸å¤Ÿâ€œå…¨å±€â€å¯¼è‡´çš„é—®é¢˜ã€‚é‚£ä¹ˆæ€ä¹ˆè§£å‘¢ï¼Ÿå…¶å®ä¹Ÿç®€å•ã€‚æˆ‘ä»¬è¿˜æ˜¯ç”¨<code>CURRENT_COUNT</code>ï¼Œä½†æ˜¯ä¸ç”¨å®ƒåšå˜é‡åäº†ï¼Œè€Œæ˜¯ MySQL çš„é…ç½®è¡¨ä¸­çš„ä¸€æ¡æ•°æ®ï¼Œæˆ–è€… Redis ä¸­çš„ key å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚</p></blockquote><p>æ€§èƒ½é—®é¢˜å½“ç„¶æ˜¯ä¸ªå¤§é—®é¢˜ï¼Œä¸ç”¨ runserver è€Œæ˜¯æ”¹ç”¨ uWSGI çš„ä¸€å¤§åŸå› å°±æ˜¯æ€§èƒ½é—®é¢˜ï¼Œæˆ‘ä»¬ç”¨ <code>ab</code> æ¥æµ‹è¯•ä¸€ä¸‹ runserver å’Œ uWSGI ä¸¤ç§æ–¹å¼å¯åŠ¨é¡¹ç›®çš„æ€§èƒ½å·®è·ï¼Œ<code>ab -n 1000 -c 100 -p data -T application/json http://127.0.0.1:7070/remit_verify/fetch_order/</code>æ„æ€ä¸ºæ€»å…± 1000 æ¬¡è¯·æ±‚ï¼Œå¹¶å‘ 100ï¼Œè®¿é—®åé¢çš„ç™»é™†æ¥å£ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹ä½¿ç”¨ runserver æ–¹å¼è¿è¡Œçš„ Django æˆç»©ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken for tests:   53.702 seconds</span><br><span class="line">Complete requests:      1000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Non-2xx responses:      1000</span><br><span class="line">Total transferred:      269000 bytes</span><br><span class="line">Total body sent:        167000</span><br><span class="line">HTML transferred:       63000 bytes</span><br><span class="line">Requests per second:    18.62 [#/sec] (mean)</span><br><span class="line">Time per request:       5370.198 [ms] (mean)</span><br><span class="line">Time per request:       53.702 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          4.89 [Kbytes/sec] received</span><br><span class="line">                        3.04 kb/s sent</span><br><span class="line">                        7.93 kb/s total</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        0    0   0.6      0       3</span><br><span class="line">Processing:    18 1574 6329.8    113   53693</span><br><span class="line">Waiting:        6 1567 6330.6    107   53691</span><br><span class="line">Total:         18 1575 6330.2    114   53695</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%    114</span><br><span class="line">  66%    133</span><br><span class="line">  75%    147</span><br><span class="line">  80%    177</span><br><span class="line">  90%   1543</span><br><span class="line">  95%   7727</span><br><span class="line">  98%  27565</span><br><span class="line">  99%  53662</span><br><span class="line"> 100%  53695 (longest request)</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨ uWSGI çš„æˆç»©ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken for tests:   2.223 seconds</span><br><span class="line">Complete requests:      1000</span><br><span class="line">Failed requests:        0</span><br><span class="line">Non-2xx responses:      1000</span><br><span class="line">Total transferred:      231000 bytes</span><br><span class="line">Total body sent:        167000</span><br><span class="line">HTML transferred:       63000 bytes</span><br><span class="line">Requests per second:    449.93 [#/sec] (mean)</span><br><span class="line">Time per request:       222.258 [ms] (mean)</span><br><span class="line">Time per request:       2.223 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          101.50 [Kbytes/sec] received</span><br><span class="line">                        73.38 kb/s sent</span><br><span class="line">                        174.87 kb/s total</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:        0    0   0.8      0       4</span><br><span class="line">Processing:    10  213  30.9    222     298</span><br><span class="line">Waiting:        6  213  31.0    222     297</span><br><span class="line">Total:         10  214  30.5    222     300</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%    222</span><br><span class="line">  66%    225</span><br><span class="line">  75%    226</span><br><span class="line">  80%    227</span><br><span class="line">  90%    229</span><br><span class="line">  95%    231</span><br><span class="line">  98%    250</span><br><span class="line">  99%    274</span><br><span class="line"> 100%    300 (longest request)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä½¿ç”¨ runserver æ–¹å¼è¿è¡Œå‹åŠ›æµ‹è¯•æ€»å…±è€—æ—¶ 53.7 ç§’ï¼ŒuWSGI è€—æ—¶ 2.2 ç§’ã€‚ä½¿ç”¨ uWSGI åååç‡æ˜¯ 24 å€ï¼Œç”¨æˆ·å¹³å‡ç­‰å¾…æ—¶é—´æ˜¯ 1/24ï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶é•¿ä¹Ÿæ˜¯ 1/24 çš„æ ·å­ã€‚ç»¼åˆæ¥è¯´åœ¨æˆ‘è‡ªå·±é…ç½®æƒ…å†µä¸‹å¾—åˆ°äº†ç­”æ›° 24 å€çš„æ€§èƒ½æå‡ï¼Œæˆ‘è¿™å„¿è¿˜æ˜¯åªæœ‰åŒæ ¸åŒè¿›ç¨‹çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ç»™ docker é…ç½®å…è®¸ä½¿ç”¨æ‰€æœ‰ 12 ä¸ªé€»è¾‘å¤„ç†å™¨ï¼Œæƒ…å†µä¼šæ›´æ˜¾è‘—ã€‚</p><h1 id="0X03-ä¸ºä»€ä¹ˆéœ€è¦-Nginx"><a href="#0X03-ä¸ºä»€ä¹ˆéœ€è¦-Nginx" class="headerlink" title="0X03 ä¸ºä»€ä¹ˆéœ€è¦ Nginx"></a>0X03 ä¸ºä»€ä¹ˆéœ€è¦ Nginx</h1><p>è‡³äºä¸ºä»€ä¹ˆè¦ç”¨ Nginx å°±æ›´ç®€å•äº†ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªåŸå› ï¼šé™æ€èµ„æºã€HTTPSã€ç«¯å£ã€å¤šæœåŠ¡éƒ¨ç½²ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>é¦–å…ˆæ˜¯é™æ€èµ„æºï¼Œweb æœåŠ¡æ— å¯é¿å…çš„ä¼šç”¨åˆ°é™æ€èµ„æºï¼Œå°±ç®—å‰åç«¯åˆ†ç¦»å¾—å†å½»åº•ä¹Ÿä¸å…æœ‰ä¸€äº›ä»åç«¯æœåŠ¡ä¸Šè·å–ä¸€äº›é™æ€èµ„æºï¼Œå°¤å…¶æ˜¯ç”¨æˆ·ä¸Šä¼ ä¸‹è½½çš„æ–‡ä»¶ã€‚Python çš„æ€§èƒ½å’±ä»¬ä¹ŸæŠ–åŠ¨ï¼Œå¦‚æœä¸éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œæƒé™é™åˆ¶çš„è¯ï¼Œçš„ç¡®æ²¡å¿…è¦è®©è¿™äº›è¯·æ±‚å†èµ°ä¸€é Django äº†ã€‚</p><p>ç„¶åæ˜¯ HTTPSï¼Œè¿™ä¸ªä¸œè¥¿å¦‚æœä¸åœ¨ Nginx æˆ–è€… Apache ä¸Šé…ç½®çš„è¯ï¼Œå°±ä¼šå¾ˆéº»çƒ¦ï¼Œæ²¡è¿™ä¸ªå¿…è¦ã€‚</p><p>ç«¯å£é—®é¢˜ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æ‰“ç®—è®©æœåŠ¡æš´éœ²çš„æ˜¯ 80 æˆ–è€… 443ï¼Œå°¤å…¶æ˜¯å½“æœåŠ¡åœ¨å®¹å™¨ä¸­çš„æ—¶å€™ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ Nginx æ¥åšä»£ç†è½¬å‘äº†ã€‚</p><p>å¤šæœåŠ¡éƒ¨ç½²å°±æ›´æ˜¯éœ€è¦ Nginx äº†ï¼Œå¦‚æœä½ åªæœ‰ä¸€å°æœåŠ¡å™¨ä½†æ˜¯éœ€è¦éƒ¨ç½²å››äº”ä¸ª web æœåŠ¡æ€ä¹ˆåŠï¼Ÿæ€»ä¸èƒ½è¯´æ¯ä¸ªæœåŠ¡æš´éœ²ä¸åŒçš„ç«¯å£ç„¶åè®©ç”¨æˆ·æ ¹æ®ä¸åŒçš„ç«¯å£æ¥å†³å®šè®¿é—®å“ªä¸ªæœåŠ¡å§ã€‚æ‰€ä»¥è¿˜æ˜¯éœ€è¦ç”¨ Nginx æ¥åšï¼Œæ ¹æ®ä¸åŒçš„åŸŸåæ¥æ§åˆ¶è½¬å‘åˆ°æœ¬åœ°çš„å“ªä¸ªç«¯å£ä¸Šå»ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> uWSGI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django ç›¸å¯¹ä¼˜é›…åœ°å¯¼å‡º CSV</title>
      <link href="/2020/06/28/django-export-csv/"/>
      <url>/2020/06/28/django-export-csv/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><blockquote><p>ä¸€è§ç¨‹åºå‘˜ï¼Œç«‹åˆ»æƒ³åˆ° web å¼€å‘ï¼Œç«‹åˆ»æƒ³åˆ°åå°ç®¡ç†ç³»ç»Ÿï¼Œç«‹åˆ»æƒ³åˆ°æ•°æ®å±•ç¤ºï¼Œç«‹åˆ»æƒ³åˆ°æ•°æ®ç­›é€‰ç­›é€‰ï¼Œç«‹åˆ»æƒ³åˆ°æ•°æ®ç»Ÿè®¡ï¼Œç«‹åˆ»æƒ³åˆ°å¯¼å‡º Excel è¡¨æ ¼ã€‚äº§å“ç»ç†çš„æƒ³è±¡æƒŸåœ¨è¿™ä¸€å±‚èƒ½å¤Ÿå¦‚æ­¤è·ƒè¿›ã€‚      â€“é²è¿…ï¼šæˆ‘ä¸æ˜¯ï¼Œæˆ‘æ²¡æœ‰ï¼Œåˆ«çè¯´</p></blockquote><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200628225253.jpg" alt="æˆ‘ä¸æ˜¯ï¼Œæˆ‘æ²¡æœ‰ï¼Œåˆ«çè¯´å•Š"></p><p>è™½ç„¶ä¸Šé¢è¿™ç§è¯´æ³•æœ‰ç‚¹å¤¸å¼ äº†ï¼Œä¸è¿‡ç¡®å®å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šäººåœ¨å·¥ä½œä¸­é‡åˆ°è¿‡ä¸æ­¢ä¸€æ¬¡çš„éœ€è¦åœ¨ä¸€ä¸ª web ç³»ç»Ÿé‡Œæ·»åŠ ä¸€ä¸ªâ€æ•°æ®å¯¼å‡ºâ€çš„åŠŸèƒ½ï¼Œè€Œä¸”é€šå¸¸éƒ½æ˜¯å¯¼å‡ºæˆ csv è¿™ç§æ–‡ä»¶ã€‚è‡ªç„¶æˆ‘ä¹Ÿé‡åˆ°äº†å¾ˆå¤šå¾ˆå¤šå¾ˆå¤šæ¬¡ï¼Œä¹Ÿå†™è¿‡é‚£ç§æœ€è ¢çš„æ‰‹æ‹¼é€—å·çš„ csv å¯¼å‡ºï¼Œè¿˜çœ‹è¿‡åˆ«äººæ•ˆæœæ›´å¥½ä»£ç é‡æ›´å°‘çš„ç‰ˆæœ¬ã€‚ä¹Ÿå°±åœ¨æ­¤æ€»ç»“ä¸€ä¸‹å…·ä½“è¿™ä¸ª csv å¯¼å‡ºè¯¥æ€ä¹ˆææ‰å¥½ã€‚</p><p>æœ€è ¢çš„æ–¹æ¡ˆå¯èƒ½å°±æ˜¯æˆ‘æœ€æ—©å®ä¹ çš„æ—¶å€™å†™å‡ºæ¥çš„é‚£ç§æ‰‹æ‹¼é€—å·çš„æ–¹æ¡ˆäº†ï¼Œä¸ºäº†å¤§å®¶åˆšåƒçš„æ—©åˆæ™šé¥­ç€æƒ³ï¼Œå°±ä¸ç»™å¤§å®¶çœ‹äº†ï¼Œçœå¾—åå‡ºæ¥æµªè´¹ç²®é£Ÿã€‚çœŸæ­£ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯è¿™ä¹ˆä¸¤ç§ï¼šä¸€ç§æ˜¯ä¼ ç»Ÿçš„æ‹¼æ¥äºŒç»´æ•°ç»„çš„æ–¹å¼æ¥æ¨¡æ‹Ÿè¡¨æ ¼ï¼Œç„¶åé€šè¿‡ Python çš„ csv åº“ç›´æ¥å¯¼å‡ºï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨ djcsv æ¥è¿›è¡Œå¯¼å‡ºã€‚ä¸‹é¢æ¥ç®€å•çœ‹ä¸€ä¸‹å˜ã€‚</p><a id="more"></a><h1 id="0X01-åŸå§‹-csv-å¯¼å‡º"><a href="#0X01-åŸå§‹-csv-å¯¼å‡º" class="headerlink" title="0X01 åŸå§‹ csv å¯¼å‡º"></a>0X01 åŸå§‹ csv å¯¼å‡º</h1><p>å…¶å®ç®€å•çš„å¯¼å‡ºåŸå§‹çš„æ–¹æ³•å°±å¯ä»¥è§£å†³é—®é¢˜äº†ï¼Œä¸‹é¢åªåˆ—å‡ºé‡ç‚¹ä»£ç ã€‚é¦–å…ˆå¯¼å…¥ csv æ¨¡å—ï¼›ç„¶åæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨æ¥ä¿å­˜è¿™æ¬¡å¯¼å‡ºçš„å†…å®¹ï¼›æ¥ä¸‹æ¥æŒ‰è¡Œå†™å…¥è¡¨å¤´ï¼›ç„¶åå¾ªç¯æ•´ä¸ª queryset æ„å»ºä¸€è¡Œè¡Œçš„æ•°æ®ä»è€Œå†™å…¥ï¼›æœ€ç»ˆå¯¼å‡ºå°±æˆåŠŸç»“æŸäº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'export.csv'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f: <span class="comment"># æ‰“å¼€å¾…ç”¨çš„æ–‡ä»¶</span></span><br><span class="line">    csv_writer = csv.writer(f)  <span class="comment"># ç”Ÿæˆä¸€ä¸ª csvwriter</span></span><br><span class="line"></span><br><span class="line">    table_title = [<span class="string">'å§“å'</span>, <span class="string">'æ€§åˆ«'</span>, <span class="string">'ç”Ÿæ—¥'</span>]  <span class="comment"># å‡†å¤‡è¡¨å¤´</span></span><br><span class="line">    csv_writer.write_row(table_title)</span><br><span class="line"></span><br><span class="line">    queryset = Student.objects.all().only(<span class="string">'name'</span>, <span class="string">'gender'</span>, <span class="string">'birthday'</span>)</span><br><span class="line">    <span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">        line = [</span><br><span class="line">            student.name,</span><br><span class="line">            student.gender,</span><br><span class="line">            student.birthday.strftime(<span class="string">'%Y-%m-%d'</span>),</span><br><span class="line">        ]</span><br><span class="line">        csv_writer.write_row(line)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯¼å‡ºæ¥çš„æ–‡ä»¶å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å†…å®¹äº†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€çœ¼æˆæœï¼ˆä¸æ˜¯è¯¸è‘›å¤§åŠ›ï¼Œæ˜¯æˆ‘ä»¬å¯¼å‡ºæ¥çš„ csv æ–‡ä»¶ğŸ¤£ï¼‰ï¼š å‘ç°é—®é¢˜äº†æ²¡ï¼Ÿæˆ‘ä»¬çš„æ€§åˆ«å‡ºç°äº†ä¸€ä¸¢ä¸¢é—®é¢˜ï¼Œæœ¬æ¥æ˜¯ç”¨ M/F æ¥å½“åšç”·å¥³æ¥å­˜çš„ï¼ˆè¿™ç§æƒ…å†µå…¶å®éå¸¸å¤šçš„ï¼Œæ¯”å¦‚ä½ çš„ç±»å‹å¯èƒ½ç”¨äº† integer ç„¶åç”¨ä¸€ä¸ª map å»æ˜ å°„åˆ°ä¸åŒçš„ä¸­æ–‡åä¸Šå»ï¼‰ï¼Œç°åœ¨å´æŠŠæ•°æ®åº“ä¸­çœŸå®çš„å†…å®¹å¯¼å‡ºæ¥äº†ã€‚</p><table><thead><tr><th>å§“å</th><th>æ€§åˆ«</th><th>ç”Ÿæ—¥</th></tr></thead><tbody><tr><td>Kevin Armstrong</td><td>F</td><td>1988-01-02</td></tr><tr><td>Patricia Robinson</td><td>F</td><td>1988-01-02</td></tr><tr><td>Michael Duffy</td><td>F</td><td>1988-01-02</td></tr><tr><td>Kathryn Hodge</td><td>M</td><td>1988-01-02</td></tr><tr><td>Justin Carlson</td><td>F</td><td>1988-01-02</td></tr><tr><td>Larry Jones</td><td>F</td><td>1988-01-02</td></tr><tr><td>Peter Palmer</td><td>F</td><td>1988-01-02</td></tr><tr><td>William Smith</td><td>F</td><td>1988-01-02</td></tr><tr><td>Karen Garcia</td><td>M</td><td>1988-01-02</td></tr><tr><td>Eric Williams</td><td>F</td><td>1988-01-02</td></tr><tr><td>Eduardo Bell</td><td>F</td><td>1988-01-02</td></tr><tr><td>Cynthia Lee</td><td>M</td><td>1988-01-02</td></tr><tr><td>Brandy Hoffman</td><td>F</td><td>1988-01-02</td></tr><tr><td>Emily Jones</td><td>F</td><td>1988-01-02</td></tr><tr><td>Kelly Perry</td><td>M</td><td>1988-01-02</td></tr><tr><td>Jamie Nixon</td><td>F</td><td>1988-01-02</td></tr><tr><td>Jeffrey Vega</td><td>F</td><td>1988-01-02</td></tr><tr><td>John Chen</td><td>M</td><td>1988-01-02</td></tr><tr><td>Laura Stevens</td><td>M</td><td>1988-01-02</td></tr><tr><td>Linda Robinson</td><td>M</td><td>1988-01-02</td></tr></tbody></table><p>å¦‚æœä½ è¯´è¿™ç§é—®é¢˜ä¸å¤§ï¼Œé‚£ç°åœ¨æˆ‘ä»¬è¦æ±‚åŠ ä¸€åˆ— â€æ˜¯å¦æˆå¹´â€œ ï¼Œç„¶åè¿™ä¸ªæ˜¯å¦æˆå¹´åˆæ²¡æœ‰å­˜ï¼Œåªæœ‰ç”¨ç”Ÿæ—¥æ¥è®¡ç®—ï¼Œé‚£å’‹æï¼Ÿå¯èƒ½åªæœ‰åœ¨<code>line = [xxxxx]</code>çš„åœ°æ–¹å†åŠ ä¸€è¡Œ<code>&#39;æˆå¹´&#39; if (datetime.datetime.now() - student.birthday).days / 365 &gt;= 18 else &#39;æœªæˆå¹´&#39;</code>æ‰è¡Œäº†ã€‚å½“ç„¶è¿™åªæ˜¯ç†æƒ³æƒ…å†µï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸€å¼ ä¸šåŠ¡è¡¨å¯èƒ½ä¼šæœ‰ 100 å¤šä¸ªå­—æ®µï¼Œå¯¼å‡ºçš„æ—¶å€™å¯èƒ½è¦ä»è¿™ 100 å¤šä¸ªå­—æ®µä¸­é€‰æ‹© 80 å¤šä¸ªå¯¼å‡ºæ¥ç„¶åè¿˜è¦å¯¼å‡ºä»–ä»¬å¤–é”®å…³è”çš„å…¶ä»–è¡¨çš„æ•°æ®ã€‚è¿™æ˜¯ç”±ä¸Šé¢è¿™ç§å†™æ³•å°±ä¼šè¶Šæ¥è¶Šé•¿ï¼Œè€Œä¸”å°¤å…¶æ˜¯å½“â€ä¸èƒ½ä»æ•°æ®åº“ä¸­ç›´æ¥å–â€œçš„æ•°æ®è¶Šæ¥è¶Šå¤šçš„æ—¶å€™å°±ä¼šéº»çƒ¦äº†ã€‚ä¸‹é¢ä»‹ç»çš„è¿™ç§ä½¿ç”¨ djcsv å¯¼å‡ºçš„æ–¹æ³•å°±å¾ˆå¥½ç”¨äº†ã€‚</p><h1 id="0X02-ä½¿ç”¨-djcsv-å¯¼å‡º"><a href="#0X02-ä½¿ç”¨-djcsv-å¯¼å‡º" class="headerlink" title="0X02 ä½¿ç”¨ djcsv å¯¼å‡º"></a>0X02 ä½¿ç”¨ djcsv å¯¼å‡º</h1><p>è¿™ç§æ–¹æ³•éœ€è¦å®‰è£…ä¸€ä¸ªä¸‰æ–¹åº“ djcsv ï¼Œé¡¾åæ€ä¹‰å®ƒå°±æ˜¯ç”¨æ¥æ–¹ä¾¿ Django å¯¼å‡º csv æ–‡ä»¶çš„ã€‚è¿™å¨ä»£ç çš„å…·ä½“è§£é‡Šå°±ç›´æ¥å†™åœ¨ä¸‹é¢æ³¨é‡Šé‡Œäº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> djcsv <span class="keyword">import</span> write_csv</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">export_csv</span><span class="params">()</span>:</span></span><br><span class="line">    queryset = Student.objects.all()</span><br><span class="line">    queryset_values = queryset.values(</span><br><span class="line">        <span class="string">'name'</span>,</span><br><span class="line">        <span class="string">'gender'</span>,</span><br><span class="line">        <span class="string">'birthday'</span>,</span><br><span class="line">        <span class="string">'teacher__name'</span>,    <span class="comment"># è·¨è¡¨ä¹Ÿæ˜¯å¯ä»¥çš„</span></span><br><span class="line">        <span class="string">'teacher__gender'</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¼å‡ºå­—æ®µè¡¨å¤´</span></span><br><span class="line">    field_header_map = &#123;</span><br><span class="line">        <span class="string">'name'</span>: <span class="string">'å§“å'</span>,</span><br><span class="line">        <span class="string">'gender'</span>: <span class="string">'æ€§åˆ«'</span>,</span><br><span class="line">        <span class="string">'birthday'</span>: <span class="string">'ç”Ÿæ—¥'</span>,</span><br><span class="line">        <span class="string">'teacher__name'</span>: <span class="string">'è€å¸ˆå§“å'</span>,</span><br><span class="line">        <span class="string">'teacher__gender'</span>: <span class="string">'è€å¸ˆæ€§åˆ«'</span>,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ ¼å¼åŒ–æ•°æ®</span></span><br><span class="line">    gender_dict = dict(Student.GENDER_CHOICES)</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Student.GENDER_CHOICES = (</span></span><br><span class="line"><span class="string">        ('M', 'ç”·'),</span></span><br><span class="line"><span class="string">        ('F', 'å¥³),</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    field_serializer_map = &#123;    <span class="comment"># æŠ˜é¡µæœºå°±æ˜¯ä¸ºä»€ä¹ˆè¦å« serializer çš„æ–¹æ³•äº†ï¼Œå› ä¸ºç¡®å®æœ‰ä¸€ä¸ªç¿»è¯‘åœ¨è¿™å„¿</span></span><br><span class="line">        <span class="string">'gender'</span>: (<span class="keyword">lambda</span> x: gender_dict.get(x, <span class="string">'å…¶ä»–'</span>)),</span><br><span class="line">        <span class="string">'teacher_gender'</span>: (<span class="keyword">lambda</span> x: gender_dict.get(x, <span class="string">'å…¶ä»–'</span>)),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'export.csv'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> csv_file:</span><br><span class="line">        write_csv(</span><br><span class="line">            queryset_values,</span><br><span class="line">            csv_file,</span><br><span class="line">            field_header_map=field_header_map,</span><br><span class="line">            field_serializer_map=field_serializer_map</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Django </tag>
            
            <tag> djcsv </tag>
            
            <tag> export </tag>
            
            <tag> csv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®© Django API å†å¿«ä¸€ç‚¹ (2)</title>
      <link href="/2020/06/06/django-fast-2/"/>
      <url>/2020/06/06/django-fast-2/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><blockquote><p>å•Šï¼Œè¿™ä¸ªç ´ç³»ç»Ÿæ€ä¹ˆè¿™ä¹ˆæ…¢ã€‚ -ä½ å†™çš„ç¨‹åºçš„ç”¨æˆ·</p></blockquote><p>æ˜¯çš„æˆ‘å†™è¿‡ä¸€ç¯‡<a href="https://blog.just666.com/2020/05/14/django-fast/">ç±»ä¼¼çš„åšå®¢</a>ï¼Œä½†æ˜¯ä¸€ç¯‡è‚¯å®šè¯´ä¸å®Œï¼Œæ¯•ç«Ÿå½±å“æ€§èƒ½çš„ä¸œè¥¿å¤ªå¤šäº†ï¼šæ•°æ®é‡å·¨å¤§ã€æœºå™¨é…ç½®å·®ã€æŸ¥è¯¢SQLæ•ˆç‡ä½ã€é¢å¤–çš„å¤šä½™çš„æŸ¥è¯¢ã€ä½è´¨é‡çš„ä»£ç balabalaçš„ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ä»DjangoæŸ¥è¯¢å’ŒORMå±‚é¢æ¥åˆ†æä¸€ä¸‹APIå˜æ…¢çš„åŸå› ã€‚</p><p>å…¶ä¸­å¯èƒ½æ€§æ¯”è¾ƒå¤šï¼Œæˆ‘è¿™é‡Œå…ˆæŒ‘å‡ ä¸ªæˆ‘ç»å¸¸é‡åˆ°çš„æƒ…å†µæ¥è¯´ï¼šä¸ç®¡è‡ªå·±çš„éœ€æ±‚ç›´æ¥æŸ¥è¯¢æ‰€æœ‰å­—æ®µã€å®Œå…¨ä¸åœ¨æ„ç´¢å¼•ã€ç–¯ç‹‚ä½¿ç”¨<code>in</code>ã€å¾ªç¯åˆ›å»º/æ›´æ–°æ•°æ®ã€ä¸å–„äºä½¿ç”¨ç¼“å­˜ã€‚è¿™å‡ ä¸ªé—®é¢˜å…¶å®éƒ½ä¼šå¯¹æˆ‘ä»¬çš„APIå“åº”é€Ÿåº¦é€ æˆæ¯”è¾ƒå¤§çš„å½±å“ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸ªä¸ªä»‹ç»ä¸€ä¸‹ã€‚</p><a id="more"></a><h1 id="0X01-SELECT"><a href="#0X01-SELECT" class="headerlink" title="0X01 SELECT *"></a>0X01 SELECT *</h1><p>é¦–å…ˆæˆ‘ä»¬ä¸€å®šçŸ¥é“ï¼Œä»æ•°æ®åº“é‡ŒæŸ¥è¯¢çš„æ•°æ®è¶Šå¤šé‚£ååº”ä¹Ÿå°±è¶Šæ…¢ã€‚æˆ‘è¿™é‡Œæ‹¿ä¸€ä¸ªåªæœ‰500æ¡æ•°æ®çš„è¡¨æ¥å±•ç¤ºä¸€ä¸‹ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡çš„è€—æ—¶è™½ç„¶éƒ½å¾ˆçŸ­ï¼ˆé‚£å¯ä¸å˜›ï¼Œå°±500æ¡æ•°æ®ï¼‰ï¼Œä½†æ˜¯æ¯”ä¾‹ä¸Šè¿˜æ˜¯å·®äº†ä¸‰å€è¿˜å¤šï¼Œå¦‚æœéšç€æ•°æ®é‡å˜å¤§å’Œå­—æ®µå˜å¤šè¿™ä¸ªå·®è·å°±ä¼šæ›´åŠ æ˜æ˜¾ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨å¾ªç¯é‡Œåªéœ€è¦<code>name</code>è¿™ä¸ªå­—æ®µï¼Œå¤šä½™çš„æ˜¯ç”¨ä¸åˆ°çš„ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200606154947_mini.png" alt></p><p>å®é™…ä¸Šè¿™ä¸¤ä¸ªæŸ¥è¯¢æ‰§è¡Œçš„æ˜¯ä¸åŒçš„ä¸¤ä¸ªSQLï¼ˆå½“ç„¶äº†è¿™æ˜¯åºŸè¯ï¼‰ï¼Œé‚£å…·ä½“åŒºåˆ«å‘¢ï¼Ÿå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ˜¯<code>SELECT *</code> ä¸€ä¸ªæ˜¯å•ç‹¬å–äº†ä¸¤ä¸ªå­—æ®µã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="string">`main_staffprofile`</span>;      <span class="comment">-- å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ª*ï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰å­—æ®µéƒ½åˆ—åœ¨è¿™å„¿äº†ï¼Œè¿™é‡Œæ–¹ä¾¿å±•ç¤ºå°±ä¸éƒ½è´´å‡ºæ¥äº†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`main_staffprofile`</span>.<span class="string">`id`</span>, <span class="string">`main_staffprofile`</span>.<span class="string">`name`</span> <span class="keyword">FROM</span> <span class="string">`main_staffprofile`</span>;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¯´ï¼Œå½“æˆ‘ä»¬ç¡®å®šçŸ¥é“è‡ªå·±ä¸‹é¢è¦ç”¨åˆ°ä»€ä¹ˆå­—æ®µçš„æ—¶å€™ï¼Œå°±ç»™<code>queryset</code>åŠ ä¸Š<code>only(&#39;xxx&#39;, &#39;xxx&#39;, &#39;xxx&#39;)</code>çš„å‚æ•°ï¼Œä»æ•°æ®åº“é‡Œå–çš„æ—¶å€™å°½å¯èƒ½å°‘çš„å–æ•°æ®ï¼Œè¿™æ ·å°±èƒ½åŠ å¿«æŸ¥è¯¢äº†ã€‚å°¤å…¶æ˜¯åœ¨æŸ¥å¾—çš„æ•°æ®å¾ˆå¤§å’Œå­—æ®µå¾ˆå¤šçš„æ—¶å€™ï¼Œæ¯”å¦‚åœ¨è¡¨é‡Œå–10000æ¡æ•°æ®ä½†æ˜¯åªç”¨åˆ°30åˆ—ä¸­çš„3åˆ—çš„æ—¶å€™å°±éå¸¸åº”è¯¥åŠ ä¸Š<code>only</code>ã€‚</p><h1 id="0X02-Index-index-together"><a href="#0X02-Index-index-together" class="headerlink" title="0X02 Index/index_together"></a>0X02 Index/index_together</h1><p>å¥½å§ï¼Œè¯´èµ·ä¼˜åŒ–é€Ÿåº¦å°±ç»•ä¸å¼€ç´¢å¼•ï¼Œè¿™æ˜¯å¿…ç„¶çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨æ•°æ®åº“é‡Œç»™å­—æ®µåŠ ç´¢å¼•å¯ä»¥å¤§å¹…æå‡æŸ¥è¯¢æ•ˆç‡ï¼Œå…·ä½“åœ¨Djangoé‡Œå»ºç«‹æ™®é€šç´¢å¼•ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œç›´æ¥åœ¨å­—æ®µå®šä¹‰é‡ŒåŠ ä¸€ä¸ªå‚æ•°<code>index=True</code>å°±å¥½äº†ã€‚ä½†æ˜¯å¯èƒ½å¤§å®¶ä¼šå¿½è§†è”åˆç´¢å¼•çš„å»ºç«‹ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">    verbose_name = <span class="string">u'éšä¾¿ä¸€ä¸ªä»€ä¹ˆè¡¨'</span></span><br><span class="line">    verbose_name_plural = verbose_name</span><br><span class="line">    index_together = [</span><br><span class="line">        [<span class="string">'gender'</span>, <span class="string">'age'</span>],</span><br><span class="line">        [<span class="string">'gender'</span>, <span class="string">'address'</span>],</span><br><span class="line">        [<span class="string">'city'</span>, <span class="string">'gender'</span>, <span class="string">'name'</span>],</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure><p>Djangoä¸­çš„æ¯ä¸ªModelç±»æˆ‘ä»¬éƒ½ä¼šåˆ›å»ºä¸€ä¸ªMetaå­ç±»ï¼Œå­ç±»é‡Œæœ‰ä¸€ä¸ªå±æ€§å«åš<code>index_together</code>é¡¾åæ€ä¹‰è¿™å°±æ˜¯å®šä¹‰è”åˆç´¢å¼•çš„åœ°æ–¹äº†ã€‚<code>index_together</code>æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç¬¬ä¸€ç»´åº¦ä¸‹é¢çš„æ¯ä¸ªiteméƒ½æ˜¯ä¸€ä¸ªè”åˆç´¢å¼•ï¼Œç¬¬äºŒä¸ªç»´åº¦ä¸‹é¢çš„æ¯ä¸ªitemå°±æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå°±æ˜¯æ„æˆè”åˆç´¢å¼•çš„å­—æ®µï¼ˆæ³¨æ„è”åˆç´¢å¼•æ˜¯è®²ç©¶é¡ºåºçš„å–”ï¼‰ã€‚å…·ä½“ç´¢å¼•å’Œè”åˆç´¢å¼•åº”è¯¥æ€ä¹ˆå»ºæ‰ä¼šè®©æ•°æ®æŸ¥è¯¢æ›´å¿«å¯ä»¥çœ‹<a href="https://blog.just666.com/2019/09/15/database-index/">æˆ‘ä¸Šä¸€ç‰‡åšå®¢</a>æˆ–è€…æœç´¢å…¶ä»–èµ„æ–™ã€‚</p><p>æ³¨æ„ï¼šç´¢å¼•/è”åˆç´¢å¼•å®šä¹‰å¥½ä¹‹åéœ€è¦è¿›è¡Œæ•°æ®åº“è¿ç§»</p><h1 id="0X03-IN-balabala"><a href="#0X03-IN-balabala" class="headerlink" title="0X03 IN balabala"></a>0X03 IN balabala</h1><p>æˆ‘ä»¬åœ¨Djangoçš„æŸ¥è¯¢ä¸­æ— å¤„ä¸è§è¿™ç§<code>User.objects.filter(user_type__in=(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4,&#39;, &#39;5&#39;))</code>çš„ç”¨æ³•ï¼Œè¿™ç§ç”¨æ³•åœ¨ä¸šåŠ¡ä¸Šç¡®å®æœ‰éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯é¿å…ä¸æ‰çš„ã€‚ä¸è¿‡è¿˜æ˜¯å¯ä»¥é€šè¿‡ä¸€äº›å…¶ä»–çš„æ–¹æ³•æ¥å°è¯•è§„é¿ï¼Œæ¯”å¦‚ä»ä¸šåŠ¡ä¸Šçœ‹çœ‹è¿™äº›é€‰é¡¹ç»„åˆåˆ°ä¸€èµ·çš„æ—¶å€™æ˜¯ä¸æ˜¯æ„å‘³ç€ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ï¼Œæ¯”å¦‚<code>User.objects.filter(city__in=(&#39;æˆéƒ½&#39;, &#39;ç»µé˜³&#39;, &#39;è‡ªè´¡&#39;........))</code>å¯ä»¥å‘ç°æ˜¯åœ¨æŸ¥è¯¢å››å·çœï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘æ¢æˆ<code>User.objects.filter(province=&#39;å››å·&#39;&#39;)</code>è¿™ç§ã€‚æˆ–è€…<code>User.objects.filter(level__in=(&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;))</code>æ˜¯ä¸æ˜¯æ„å‘³ç€<code>User.objects.exclude(level=&#39;S&#39;)</code>ã€‚</p><p>è¿™ç§æƒ…å†µå› ä¸ºä¸šåŠ¡ä¸Šçš„ä¸¥æ ¼éœ€æ±‚ï¼Œå¯èƒ½å¹¶æ²¡æœ‰å¤ªå¥½çš„è°ƒèŠ‚æ–¹æ³•ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²¡æƒ³åˆ°ï¼Œå¦‚æœå¤§å®¶æœ‰æ–¹æ³•çš„è¯æ¬¢è¿åé¦ˆç»™æˆ‘ï¼Œè°¢è°¢æŒ‡æ•™ğŸ™ï¼‰ï¼Œä¸è¿‡é‡åˆ°äº†çš„è¯è¿˜æ˜¯å¯ä»¥å°è¯•ä¸Šé¢ä¸¤ç§æ–¹æ¡ˆï¼Œç©æ„èƒ½è¡Œçš„è¯è¿˜æ˜¯å¯ä»¥è°ƒèŠ‚ä¸€ä¸‹æ€§èƒ½çš„ã€‚</p><h1 id="0X04-ç–¯ç‹‚å…³è”"><a href="#0X04-ç–¯ç‹‚å…³è”" class="headerlink" title="0X04 ç–¯ç‹‚å…³è”"></a>0X04 ç–¯ç‹‚å…³è”</h1><blockquote><p>æ¡æ¡å¤§è·¯é€šç½—é©¬ã€‚</p></blockquote><p>ç–¯ç‹‚å…³è”ä¹Ÿæ¯”è¾ƒå®¹æ˜“å‡ºç°ï¼Œæ­£æ‰€è°“æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œä½†æ˜¯æ€»ä¼šæœ‰ä¸€æ¡æ›´è¿‘ä¸€ç‚¹çš„è·¯ã€‚æ¯”å¦‚è¿™ç§<code>User.objects.filter(father__father__name=&#39;shawn&#39;&#39;)</code>å®Œå…¨å°±å¯ä»¥ç”¨<code>User.objects.filter(grandfather__name=&#39;shawn&#39;&#39;)</code>è¿™ç§æ¥æ›¿ä»£ã€‚è¿™ä¸ªå…¶å®å¤§å®¶éƒ½ä¼šæ¯”è¾ƒæ¸…æ¥šï¼Œå¯¹æŠ€æœ¯æ²¡ä»€ä¹ˆè€ƒéªŒï¼Œä½†æ˜¯æ¯”è¾ƒè€ƒéªŒå¯¹ç¨‹åºçš„ç†è§£ç¨‹åº¦å°¤å…¶æ˜¯æ•°æ®åº“çš„ç†è§£ç¨‹åº¦ã€‚æœ‰æ—¶å€™æˆ‘ä»¬æ¥æ‰‹ä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶å€™å¯èƒ½å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªé¡¹ç›®çš„æ•°æ®åº“æœ‰å……åˆ†çš„äº†è§£ï¼Œæ‰€ä»¥å¯ä»¥å°è¯•åœ¨å†™è¿™ç§å¤šå±‚çš„å…³è”æŸ¥è¯¢ä¹‹å‰å–è°ƒç ”ä¸€ä¸‹æ˜¯ä¸æ˜¯æœ‰æ›´è¿‘çš„é€šå‘ç½—é©¬çš„è·¯ã€‚</p><h1 id="0X05-bulk-create"><a href="#0X05-bulk-create" class="headerlink" title="0X05 bulk_create"></a>0X05 bulk_create</h1><p>è¿™ç§é—®é¢˜åº”è¯¥æ˜¯æœ€å¸¸é‡åˆ°çš„äº†ã€‚æˆ‘ä»¬ä»å‰ç«¯æ¥æ”¶åˆ°äº†è¿™ä¹ˆä¸€æ³¢æ•°æ®è¦å†™åˆ°æ•°æ®åº“é‡Œï¼ˆæ•°æ®å“ªå„¿æ¥çš„å¹¶ä¸é‡è¦ï¼Œä¹Ÿå¯èƒ½æ˜¯csvæ¥çš„æˆ–è€…å…¶ä»–ä»€ä¹ˆé¬¼åœ°æ–¹ï¼‰</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[&#123;'name': 'shawn_0'&#125;,</span><br><span class="line"> &#123;'name': 'shawn_1'&#125;,</span><br><span class="line"> &#123;'name': 'shawn_2'&#125;,</span><br><span class="line">...............................</span><br><span class="line"> &#123;'name': 'shawn_998'&#125;,</span><br><span class="line"> &#123;'name': 'shawn_999'&#125;]</span><br></pre></td></tr></table></figure><p>æ–°æ‰‹åŒå­¦å¾ˆæœ‰å¯èƒ½å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> user <span class="keyword">in</span> user_list:</span><br><span class="line">        User.objects.create(**user)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘ä»¬æ¥çœ‹çœ‹é€Ÿåº¦ï¼Œè€—æ—¶4ç§’ï¼Œå†çœ‹ä¸€ä¸‹æ‰¹é‡åˆ›å»ºçš„æ—¶é—´ï¼Œè€—æ—¶0.13ç§’ï¼Œæ€§èƒ½æå‡äº†å¾ˆå¤šå€ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200606163344_mini.png" alt></p><p>æ‰¹é‡åˆ›å»ºè™½å¥½ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å°±éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æœä½ è¦åˆ›å»ºçš„æ•°æ®æ¯”è¾ƒå¤æ‚å¹¶ä¸”é‡éå¸¸å¤§ï¼Œè¯·ä¸è¦ä¸€æ¬¡æ€§å…¨éƒ¨åˆ›å»ºå®Œæˆï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¹æ•°æ®åº“é€ æˆè¾ƒå¤§çš„å‹åŠ›ï¼Œå¯ä»¥å°è¯•å°†æ¯”å¦‚10000æ¡æ•°æ®åˆ†æˆ10ä¸ª1000æˆ–è€…100ä¸ª100æ¥åˆ›å»ºã€‚</p><h1 id="0X06-cache-cached-property"><a href="#0X06-cache-cached-property" class="headerlink" title="0X06 cache/cached_property"></a>0X06 cache/cached_property</h1><p>ç¼“å­˜å¯èƒ½æ˜¯æå‡æ€§èƒ½æœ€æ˜æ˜¾çš„æ–¹æ¡ˆäº†ï¼ŒåŒæ ·æ•°æ®é‡çš„æ•°æ®ä»MySQLé‡Œå–å‡ºæ¥å’Œä»Redisé‡Œå–å‡ºæ¥ï¼Œè€—æ—¶æ ¹æœ¬ä¸åœ¨ä¸€ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å–„ç”¨ç¼“å­˜ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå·¨å¤§çš„å…³é”®è¯é…ç½®æ”¾åœ¨æ•°æ®åº“é‡Œå­˜èµ·æ¥äº†ï¼Œå¤§æ¦‚æœ‰10Wæ¡æ•°æ®ï¼Œå¹³æ—¶åˆå¾ˆå°‘æ›´æ–°ï¼Œä½†æ˜¯ç»å¸¸ä¼šæŸ¥ï¼Œé‚£å°±éå¸¸é€‚åˆä½¿ç”¨ç¼“å­˜ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_keyword_config</span><span class="params">()</span>:</span></span><br><span class="line">    result = cache.get(KEYWORD_CONFIG_KEY)</span><br><span class="line">    <span class="keyword">if</span> result:</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        queryset = Keyword.objects.all()</span><br><span class="line">        result = handle_keywords(queryset)</span><br><span class="line">        cache.set(KEYWORD_CONFIG_KEY, result)</span><br><span class="line">        <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ›´æ–°å…³é”®è¯åº“çš„æ—¶å€™å†åŒæ—¶åˆ·æ–°ä¸€æ¬¡ç¼“å­˜å°±å¥½äº†ã€‚å¦ä¸€ç§ä½¿ç”¨ç¼“å­˜çš„æ–¹å¼æ˜¯Djangoä¸­å¸¦çš„<code>cached_property</code>ã€‚æˆ‘ä»¬çŸ¥é“Djangoä¸­æœ‰ä¸€ä¸ª<code>property</code>å¯ä»¥æŠŠfunctionä½œä¸ºå±æ€§æ¥ç”¨ï¼Œç›´æ¥é€šè¿‡ç‚¹å°±èƒ½è·å–å€¼ï¼Œè¿™ä¸ªé¡¾åæ€ä¹‰å°±æ˜¯åŠ äº†ç¼“å­˜çš„<code>property</code>ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨<code>student_count</code>çš„æ—¶å€™éƒ½è¦è®¡ç®—ä¸€éï¼Œä½†æ˜¯è°ƒç”¨<code>cached_student_count</code>çš„æ—¶å€™åªæœ‰ç¬¬ä¸€æ¬¡ä¼šè®¡ç®—ï¼Œåé¢å°±æ˜¯ç¼“å­˜çš„å€¼äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">        xxxxxx</span><br><span class="line"></span><br><span class="line"><span class="meta">        @property</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">student_count</span><span class="params">(self)</span>:</span></span><br><span class="line">                <span class="keyword">return</span> self.student_set.all().count()</span><br><span class="line"></span><br><span class="line"><span class="meta">        @cached_property</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">cached_student_count</span><span class="params">(self)</span>:</span></span><br><span class="line">                <span class="keyword">return</span>  self.student_set.all().count()</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å®˜æ–¹æ–‡æ¡£å…³äº<code>cached_property</code>çš„è§£é‡Šï¼Œç®€å•æ˜äº†ï¼š <strong>æ³¨æ„é‡Œé¢æåˆ°çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°å¿ƒç”¨åˆ°å·²ç»å¤±æ•ˆçš„æ•°æ®</strong></p><blockquote><p>å°†ä¸€ä¸ªç±»æ–¹æ³•è½¬æ¢ä¸ºç‰¹å¾å±æ€§ï¼Œä¸€æ¬¡æ€§è®¡ç®—è¯¥ç‰¹å¾å±æ€§çš„å€¼ï¼Œç„¶åå°†å…¶ç¼“å­˜ä¸ºå®ä¾‹ç”Ÿå‘½å‘¨æœŸå†…çš„æ™®é€šå±æ€§ã€‚ ç±»ä¼¼äº property() ä½†å¢åŠ äº†ç¼“å­˜åŠŸèƒ½ã€‚ å¯¹äºåœ¨å…¶ä»–æƒ…å†µä¸‹å®é™…ä¸å¯å˜çš„é«˜è®¡ç®—èµ„æºæ¶ˆè€—çš„å®ä¾‹ç‰¹å¾å±æ€§æ¥è¯´è¯¥å‡½æ•°éå¸¸æœ‰ç”¨ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataSet</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, sequence_of_numbers)</span>:</span></span><br><span class="line">        self._data = sequence_of_numbers</span><br><span class="line"></span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">stdev</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> statistics.stdev(self._data)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">variance</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> statistics.variance(self._data)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Index </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„filterä¸map/reduceæ–¹æ³•</title>
      <link href="/2020/05/25/python-filter-map-reduce/"/>
      <url>/2020/05/25/python-filter-map-reduce/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€-amp-Pythonic"><a href="#0X00-å‰è¨€-amp-Pythonic" class="headerlink" title="0X00 å‰è¨€ &amp; Pythonic"></a>0X00 å‰è¨€ &amp; Pythonic</h1><p>Pythonç®¡<code>filter/map/reduce</code>è¿™äº›å«é«˜é˜¶å‡½æ•°ï¼Œå¬èµ·æ¥æœ‰ç‚¹é«˜çº§æœ‰ç‚¹éš¾æçš„æ„æ€ï¼Œå®é™…ä¸Šæ˜¯è´¼ç®€å•çš„ä¸œè¥¿ã€‚ä¸‹é¢é€šè¿‡å‡ ä¸ªç®€å•çš„ä¾‹å­æ¥å¸®åŠ©å¤§å®¶äº†è§£ä¸€ä¸‹<code>filter/map/reduce</code>è¿™ä¸‰ä¸ªé«˜é˜¶å‡½æ•°çš„ç®€å•ç”¨æ³•ã€‚</p><p>äº‹å…ˆå£°æ˜ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯æ‰©å±•æ€§è´¨çš„ä¸œè¥¿ï¼Œä»æ¥ä¸ç”¨è¿™ä¸‰ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥æ­£å¸¸çš„ç¼–å†™ç¨‹åºï¼Œæ²¡æœ‰ä»€ä¹ˆåŠŸèƒ½æ˜¯æ²¡äº†è¿™ä¸‰ä¸ªå‡½æ•°å°±å†™ä¸å‡ºæ¥çš„ã€‚åªä¸è¿‡æ˜¯è¿™ä¸‰ä¸ªå‡½æ•°çš„å‡ºç°èƒ½è®©ä¹‹å‰å¾ˆä¸‘é™‹çš„ä»£ç å˜å¾—ç²¾ç®€æ˜“è¯»äº†è€Œå·²ã€‚</p><p>è¿™ä¸‰ä¸ªå‡½æ•°éå¸¸é€‚åˆæ­é…<code>lambda</code>æ¥ä½¿ç”¨ï¼Œç¼–å†™éå¸¸Pythonicçš„ä»£ç ï¼Œå…·ä½“ä»€ä¹ˆæ˜¯Pythonicå…¶å®å¾ˆéš¾å®šä¹‰ï¼Œå…¶å®å°±æ˜¯æŠŠPythonç¼–ç¨‹ä¸€ä¸ªå½¢å®¹è¯äº†ï¼Œæ¯”å¦‚ä½ çœ‹åˆ°ä¸€ä¸ªäººâ€œç©¿äº†è¿åŠ¨é‹ç‰›ä»”è£¤å¸½è¡«åŒè‚©åŒ…é»‘æ¡†çœ¼é•œç”µå­è¡¨â€å°±ä¼šè¯´ä»–â€œå¤ªç¨‹åºå‘˜äº†â€ï¼Œå¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€ã€‚æ€»ç»“æ¥è¯´å‘¢å°±æ˜¯ <strong>éå¸¸å…·æœ‰Pythonç‰¹è‰²çš„Pythonä»£ç </strong>ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç æ˜æ˜¾å°±ä¸Pythonic</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(len(name_list)):</span><br><span class="line">    print(name_list[index])</span><br></pre></td></tr></table></figure><p>è€Œè¿™ç§ä»£ç å°±æ˜¯Pythonicçš„å†™æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> name_list:</span><br><span class="line">    print(name)</span><br></pre></td></tr></table></figure><p>å°¤å…¶æ˜¯ç»“åˆäº†<code>lambda</code>ä¹‹åï¼Œå°±èƒ½å†™å‡ºæ›´Pythonicçš„ä»£ç äº†ï¼Œä¾‹å¦‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_boy</span><span class="params">(student)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> student.gender == <span class="string">'M'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥ç›´æ¥ç”¨<code>lambda</code>æ”¹å†™æˆè¿™ä¸ªæ ·å­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">is_boy = <span class="keyword">lambda</span> studnet: student.gender == <span class="string">'M'</span></span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="0X01-filter"><a href="#0X01-filter" class="headerlink" title="0X01 filter"></a>0X01 filter</h1><p><code>filter</code>é¡¾åæ€ä¹‰ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªç­›é€‰å™¨ã€‚å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ—è¡¨æƒ³è¦æ‰¾å‡ºè¿™ä¸ªåˆ—è¡¨ä¸­æ»¡è¶³æŸäº›æ¡ä»¶çš„æ•°æ®ï¼Œåœ¨ä¸æ˜¯ç”¨<code>filter</code>çš„æƒ…å†µä¸‹å¾ˆæœ‰å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">number_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(input_number)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> input_number == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'ä¸è€ƒè™‘0çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯ç ”ç©¶filter'</span>)</span><br><span class="line">    <span class="keyword">return</span> input_number % <span class="number">2</span></span><br><span class="line"></span><br><span class="line">odd_list = []</span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> number_list:</span><br><span class="line">    <span class="keyword">if</span> is_odd(number):<span class="comment"># æŠŠå¥‡æ•°æ€¼åˆ°æ–°åˆ—è¡¨é‡Œ</span></span><br><span class="line">        odd_list.append(number)</span><br><span class="line"></span><br><span class="line">print(odd_list)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å€ŸåŠ©<code>filter</code>å°±å¯ä»¥å°†æ–°åˆ—è¡¨çš„ç”Ÿæˆå˜å¾—å¾ˆç®€å•ï¼Œæœ¬è´¨ä¸Šåªè¦äº†ä¸€è¡Œä»£ç ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">odd_list = filter(is_odd, number_list)</span><br><span class="line"></span><br><span class="line">print(list(odd_list))</span><br></pre></td></tr></table></figure><p><code>filter</code>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ªåªæ¥å—ä¸€ä¸ªå‚æ•°çš„<code>function</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªåˆ—è¡¨ã€‚å·¥ä½œåŸç†å°±æ˜¯å°†åˆ—è¡¨ä¸­çš„å¯¹è±¡ä¸€ä¸ªä¸ªå¡åˆ°ç¬¬ä¸€ä¸ªå‚æ•°çš„<code>function</code>ä¸­å–å¾—è¿”å›å€¼ï¼Œå°†è¿”å›å€¼ä¸º<code>True</code>çš„ä¿å­˜åˆ°æ–°åˆ—è¡¨ä¸­ï¼Œæœ€ç»ˆè¿”å›ã€‚</p><blockquote><p>  Python2ä¸­<code>filter</code>è¿”å›çš„ç›´æ¥æ˜¯åˆ—è¡¨ï¼Œè€ŒPython3ä¸­è¿”å›çš„åˆ™æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚</p></blockquote><h1 id="0X02-map"><a href="#0X02-map" class="headerlink" title="0X02 map"></a>0X02 map</h1><p><code>map</code>å¯ä»¥ç”¨æ¥æ‰¹é‡å¤„ç†æ•°æ®ï¼Œæ‰¹é‡ä¼ å‚ã€‚<code>map</code>æ¥å—ä¸å®šé•¿åº¦çš„å‚æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°å›ºå®šä¸ºä¸€ä¸ªâ€œæ¥å—nä¸ªå‚æ•°â€çš„functionï¼Œç„¶ååé¢ç´§è·ŸçœŸå°±æ˜¯nä¸ªå¯è¿­ä»£çš„å‚æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥å—nä¸ªå‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">join_name</span><span class="params">(first_name, middle_name, last_name)</span>:</span></span><br><span class="line">    <span class="string">"""æ‹¼æ¥ä¸‰ä¸ªå­—ç¬¦ä¸²"""</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&#123;&#125;_&#123;&#125;_&#123;&#125;'</span>.format(first_name, middle_name, last_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    first_name_list = [<span class="string">'zhang'</span>, <span class="string">'li'</span>, <span class="string">'wang'</span>, <span class="string">'zhao'</span>]</span><br><span class="line">    middle_name_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">    last_name_list = [<span class="string">'san'</span>, <span class="string">'si'</span>, <span class="string">'wu'</span>, <span class="string">'liu'</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ–¹æ³•1ï¼Œä½¿ç”¨mapä¼ é€’n+1ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯functionå¯¹è±¡ï¼Œåé¢çš„æ˜¯å‚æ•°åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> result <span class="keyword">in</span> map(join_name, first_name_list, middle_name_list, last_name_list):</span><br><span class="line">        print(result)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="comment"># æ–¹æ³•2ï¼Œä¸ä½¿ç”¨mapï¼Œç›¸å½“äºä¸‹é¢è¿™ç§</span></span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> range(len(first_name_list)):</span><br><span class="line">        result = join_name(first_name_list[index], middle_name_list[index], last_name_list[index])</span><br><span class="line">        print(result)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„å†…å®¹éƒ½æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200525234648.png" alt></p><p>ä½¿ç”¨äº†<code>map</code>ä¹‹åä¸ä»…åœ¨foré‚£é‡Œä¸ç”¨éå¸¸è ¢å¾—ç”¨<code>range(len(first_name_list))</code>äº†ï¼Œä¹Ÿä¸ç”¨æ‹¿åˆ°ä¸‹æ ‡ä¹‹ååˆ°å¤„è·‘ç€ç”¨ä¸‹æ ‡å–å€¼äº†ã€‚è€Œä¸”æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹æ˜¯ï¼š<code>map</code>è‡ªåŠ¨ä½¿ç”¨å¤šä¸ªå‚æ•°åˆ—è¡¨ä¸­æœ€çŸ­çš„é‚£ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå‡ºç°<code>IndexError: list index out of range</code>çš„æ•°ç»„è¶Šç•Œé—®é¢˜äº†ã€‚</p><h1 id="0X03-reduce"><a href="#0X03-reduce" class="headerlink" title="0X03 reduce"></a>0X03 reduce</h1><p><code>reduce</code>æ–¹æ³•ä»Python 3å¼€å§‹å°±ä¸æ˜¯å…¨å±€å‘½åç©ºé—´é‡Œçš„functionäº†ï¼ˆè¯´äººè¯å°±æ˜¯æŒªåˆ°å®˜æ–¹åŒ…é‡Œå»äº†ï¼Œéœ€è¦å¯¼å…¥ï¼Œä¸èƒ½ç›´æ¥ç”¨äº†ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦<code>from functools import reduce</code>æ‰èƒ½ç”¨åˆ°ã€‚<code>reduce</code>ç›¸å¯¹æ›´ç®€å•ä¸€äº›ï¼Œå›ºå®šæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªâ€œå›ºå®šæ¥å—ä¸¤ä¸ªå‚æ•°çš„â€functionï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚å…·ä½“ç”¨æ³•å¯ä»¥çœ‹ç¤ºä¾‹ï¼Œéå¸¸é€šä¿—æ˜“æ‡‚ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">join_chars</span><span class="params">(char_a, char_b)</span>:</span></span><br><span class="line">    <span class="string">"""æ‹¼æ¥ä¸¤ä¸ªå­—ç¬¦ä¸², reduceçš„ç¬¬ä¸€ä¸ªå‚æ•°åªèƒ½æ˜¯ä¸€ä¸ªæ¥å—ä¸¤ä¸ªå‚æ•°çš„function"""</span></span><br><span class="line">    <span class="keyword">return</span> char_a + char_b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    char_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>, <span class="string">'h'</span>, <span class="string">'i'</span>, <span class="string">'j'</span>, <span class="string">'k'</span>, <span class="string">'l'</span>, <span class="string">'m'</span>, <span class="string">'n'</span>]</span><br><span class="line">    print(reduce(join_chars, char_list))<span class="comment"># ä½¿ç”¨reduce</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…¶å®è¿™ä¸ªreduceå°±ç±»ä¼¼äºä¸‹é¢è¿™ç§å†™æ³•</span></span><br><span class="line">    res = join_chars(char_list[<span class="number">0</span>], char_list[<span class="number">1</span>])</span><br><span class="line">    res = join_chars(res, char_list[<span class="number">2</span>])</span><br><span class="line">    res = join_chars(res, char_list[<span class="number">3</span>])</span><br><span class="line">    res = join_chars(res, char_list[<span class="number">4</span>])</span><br><span class="line">    res = join_chars(res, char_list[<span class="number">5</span>])</span><br><span class="line">    res = join_chars(res, char_list[<span class="number">6</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æˆ–è€…ç±»ä¼¼è¿™ç§</span></span><br><span class="line">    res = join_chars(</span><br><span class="line">        join_chars(</span><br><span class="line">            join_chars(</span><br><span class="line">                join_chars(</span><br><span class="line">                    char_list[<span class="number">0</span>],</span><br><span class="line">                    char_list[<span class="number">1</span>]</span><br><span class="line">                ),</span><br><span class="line">                char_list[<span class="number">2</span>]</span><br><span class="line">            ),</span><br><span class="line">            char_list[<span class="number">3</span>]</span><br><span class="line">        ),</span><br><span class="line">        char_list[<span class="number">4</span>]</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h1 id="0X04-ç»“åˆlambda"><a href="#0X04-ç»“åˆlambda" class="headerlink" title="0X04 ç»“åˆlambda"></a>0X04 ç»“åˆlambda</h1><p>ç»“åˆ<code>lambda</code>ä¹‹åå¯ä»¥å°†ä¸Šé¢çš„<code>is_odd</code>æ”¹å†™æˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line">number_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">odd_list = filter(<span class="keyword">lambda</span> number: number % <span class="number">2</span>, number_list)</span><br><span class="line"></span><br><span class="line">print(list(odd_list))</span><br></pre></td></tr></table></figure><p>å¯ä»¥å°†ä¸Šé¢<code>map</code>ä¸­çš„ä»£ç æ”¹å†™æˆè¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    first_name_list = [<span class="string">'zhang'</span>, <span class="string">'li'</span>, <span class="string">'wang'</span>, <span class="string">'zhao'</span>]</span><br><span class="line">    middle_name_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">    last_name_list = [<span class="string">'san'</span>, <span class="string">'si'</span>, <span class="string">'wu'</span>, <span class="string">'liu'</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ–¹æ³•1ï¼Œä½¿ç”¨mapä¼ é€’n+1ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯functionå¯¹è±¡ï¼Œåé¢çš„æ˜¯å‚æ•°åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> result <span class="keyword">in</span> map(</span><br><span class="line">        <span class="keyword">lambda</span> a, b, c: <span class="string">'&#123;&#125;_&#123;&#125;_&#123;&#125;'</span>.format(a, b, c), first_name_list, middle_name_list, last_name_list</span><br><span class="line">    ):</span><br><span class="line">        print(result)</span><br></pre></td></tr></table></figure><p>å¯ä»¥å°†ä¸Šé¢<code>reduce</code>ä¸­çš„ä»£ç æ”¹æˆè¿™æ ·ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    char_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>, <span class="string">'h'</span>, <span class="string">'i'</span>, <span class="string">'j'</span>, <span class="string">'k'</span>, <span class="string">'l'</span>, <span class="string">'m'</span>, <span class="string">'n'</span>]</span><br><span class="line">    print(reduce(<span class="keyword">lambda</span> a, b: a + b, char_list))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> filter </tag>
            
            <tag> map </tag>
            
            <tag> reduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªæ§&amp;ç›®æ ‡</title>
      <link href="/2020/05/14/self-control-and-target/"/>
      <url>/2020/05/14/self-control-and-target/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-GTD"><a href="#0X00-GTD" class="headerlink" title="0X00 GTD"></a>0X00 GTD</h1><blockquote><p>   <strong>å°½ç®¡å»åš</strong>ï¼ˆè‹±è¯­ï¼š<strong>Getting Things Done</strong> / <strong>GTD</strong>ï¼‰ï¼Œæ˜¯ä¸€ç§è¡Œä¸ºç®¡ç†çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3cvaW5kZXgucGhwP3RpdGxlPeaItOe7tMK36Im+5LymJmFtcDthY3Rpb249ZWRpdCZhbXA7cmVkbGluaz0x" title="https://zh.wikipedia.org/w/index.php?title=æˆ´ç»´Â·è‰¾ä¼¦&amp;action=edit&amp;redlink=1">æˆ´ç»´Â·è‰¾ä¼¦<i class="fa fa-external-link"></i></span>å†™çš„ä¸€æœ¬ä¹¦çš„ä¹¦åã€‚</p><p>  GTDçš„ä¸»è¦åŸåˆ™åœ¨äºä¸€ä¸ªäººéœ€è¦é€šè¿‡è®°å½•çš„æ–¹å¼æŠŠå¤´è„‘ä¸­çš„å„ç§ä»»åŠ¡ç§»å‡ºæ¥ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå¤´è„‘å¯ä»¥ä¸ç”¨å¡æ»¡å„ç§éœ€è¦å®Œæˆçš„äº‹æƒ…ï¼Œè€Œé›†ä¸­ç²¾åŠ›åœ¨æ­£åœ¨å®Œæˆçš„äº‹æƒ…ã€‚</p><p>  â€‹                                                                                                     â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>GTDè¯´ç™½äº†å°±æ˜¯æŠŠè‡ªå·±è¦åšçš„äº‹é¡¹ä»è„‘å­é‡Œæ‹¿å‡ºæ¥ï¼Œå†™åˆ°çº¸ä¸Šæˆ–è€…è®°åˆ°ä»€ä¹ˆé¬¼åœ°æ–¹ï¼Œæˆ‘æœ€å–œæ¬¢çš„å°±æ˜¯â€æ»´ç­”æ¸…å•â€äº†ã€‚</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200514225226_mini.png" alt></p><p>æœ€æ—©çš„æ—¶å€™æˆ‘ç”¨çš„æ˜¯Googleæ—¥å†ï¼Œåœ¨å­¦æ ¡é‡Œçš„æ—¶å€™è¿™æ ·ç”¨äº†ä¸€ä¸¤å¹´è¿˜ä¸é”™ã€‚åæ¥å¤§å››å‡ºæ¥å®ä¹ ï¼Œé‚£æ®µæ—¶é—´å·¥ä½œå“ªå„¿å“ªå„¿éƒ½ä¸é¡ºåˆ©ï¼Œä¹Ÿå°±æ²¡å¿ƒæƒ…å®‰æ’è‡ªå·±çš„ç”Ÿæ´»å’Œå­¦ä¹ äº†ï¼Œæ‰€ä»¥å®ä¹ çš„é‚£ä¸€å¹´åŸºæœ¬å°±æ˜¯ä¸‹ç­äº†å°±è¶´åœ¨åºŠä¸Šç©æ‰‹æœºï¼Œä»€ä¹ˆéƒ½æ²¡å¹²æˆã€‚ä¸åªæ˜¯æ²¡å­¦ä¹ ï¼Œè€Œæ˜¯æ²¡ç©æ¸¸æˆæ²¡çœ‹ç”µå½±ï¼Œå®æ‰“å®çš„ä»€ä¹ˆéƒ½æ²¡å¹²æˆã€‚åé¢åˆé‡æ‹¾äº†GTDï¼ŒæŠŠè‡ªå·±å®‰æ’çš„æ˜æ˜ç™½ç™½çš„ï¼Œå¯¹æˆ‘æ¥è¯´æ•ˆæœè¿˜æ˜¯ç«‹ç«¿è§å½±çš„ã€‚æˆ‘å®‰æ’è‡ªå·±ä¸åªæ˜¯å­¦ä¹ ï¼Œä¹ŸåŒ…æ‹¬ç¤¾äº¤å’Œå¨±ä¹ï¼Œçº¦å¥½ä»€ä¹ˆæ—¶é—´å’Œè°åœ¨å“ªå„¿åƒé¥­æˆ–è€…å¹²å˜›çš„ï¼›è‡ªå·±ç»™è‡ªå·±è§„å®šä»€ä¹ˆæ—¶é—´ç©æ¸¸æˆï¼Œç»™è‡ªå·±è§„å®šä»€ä¹ˆæ—¶é—´çœ‹ç”µå½±ã€‚</p><p>è¿™æ ·ä¸€å¥—æµç¨‹ä¸‹æ¥ï¼Œæœ‰ä¸¤ä¸ªæ˜æ˜¾çš„å¥½å¤„ï¼šè‡ªå·±çš„æ—¶é—´åˆ©ç”¨ç‡æå¤§çš„æå‡äº†ï¼Œä¸ä¼šå‡ºç°ååœ¨æ¡Œå­å‰é¢è€ƒè™‘æ¥ä¸‹æ¥è¦å¹²ä»€ä¹ˆçš„äº‹æƒ…ï¼›å¦ä¸€ä¸ªå°±æ˜¯æ–¹ä¾¿è‡ªå·±å›é¡¾ç”Ÿæ´»ï¼Œæ¯•ç«Ÿä¸å†™æ—¥è®°çš„è¯è‡ªå·±ä¹Ÿæä¸æ¸…æ¥šå“ªå¤©å“ªå¤©å¹²äº†ä»€ä¹ˆäº‹å„¿äº†ã€‚è¿™é‡Œç»™å¤§å®¶çœ‹ä¸€ä¸‹æˆ‘æ»´ç­”æ¸…å•é‡Œçš„ä»»åŠ¡åˆ†ç±»ï¼š</p><p><img src="https://raw.githubusercontent.com/shawn-bluce/pics_home/master/20200514230004_mini.png" alt></p><p>è¿™é‡Œä¸»è¦æ˜¯å­¦ä¹ ç±»ã€ä¸ªäººæ—¥å¸¸ç”Ÿæ´»ç±»ã€å·¥ä½œå’Œå¹´åº¦è§„åˆ’ã€‚é™¤äº†æ¯å¹´å¹´åº•ä¼šå¯¹æ–°ä¸€å¹´è¿›è¡Œè§„åˆ’ä»¥å¤–ï¼Œè¿˜ä¼šåœ¨æ¯ä¸ªæœˆå¯¹ä¸‹ä¸ªæœˆè¿›è¡Œè§„åˆ’ã€‚ä¸è¿‡æ­£æ‰€è°“â€å–æ³•å…¶ä¸Šï¼Œä»…å¾—å…¶ä¸­ï¼›å–æ³•å…¶ä¸­ï¼Œä»…å¾—å…¶ä¸‹â€ï¼Œæ‰€ä»¥ä¹Ÿä¸è¦å› ä¸ºè‡ªå·±æ²¡æœ‰å®Œæˆæœˆå†…æ‰€æœ‰è®¡åˆ’æˆ–è€…å¹´åº¦è®¡åˆ’è€Œè‡ªæˆ‘å¦å®šï¼Œåªè¦åœ¨æ²¡æœ‰çªå‘äº‹ä»¶çš„æƒ…å†µä¸‹éƒ½æŒ‰éƒ¨å°±ç­å®Œæˆäº†è‡ªå·±çš„ä»»åŠ¡å®‰æ’ï¼Œé‚£æŸå¤±çš„é‚£ä¸€ç‚¹ç‚¹è·Ÿå…¨å±€æ¯”èµ·æ¥éƒ½æ˜¯å°é—®é¢˜äº†ã€‚</p><p>å®‰æ’æ—¶é—´çš„æ—¶å€™æœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼šç»™è‡ªå·±ä¸€å®šçš„ç¼“å†²æ—¶é—´ï¼Œæ¯”å¦‚æ•´æ•´ä¸€å‘¨ä¸è¦å°è¯•å°†å‘¨ä¸€è‡³å‘¨äº”çš„æ™šä¸Šéƒ½å®‰æ’ä¸Šå­¦ä¹ ï¼Œç„¶åå‘¨å…­å‘¨æ—¥åˆå®‰æ’ä¸‰å››éƒ¨ç”µå½±å’Œæ¸¸æˆæ—¶é—´ã€‚å› ä¸ºå¾ˆå¤§å¯èƒ½ä½ å‘¨äº”æ™šä¸Šä¸‹ç­æ˜¯è¦è·Ÿæœ‹å‹çº¦å‡ºå»åƒåƒå–å–çš„ï¼Œå¾ˆå¤§å¯èƒ½å‘¨æœ«ä¼šè¢«å«å‡ºå»ç©æˆ–è€…è‡ªå·±ç¡è¿‡äº†ä¹‹ç±»çš„ã€‚è€Œä¸”å³ä½¿æ²¡æœ‰è¿™äº›å¤–åœ¨å› ç´ ï¼Œä¹Ÿä¸åº”è¯¥ç»™è‡ªå·±å®‰æ’çš„æ»¡æ»¡å½“å½“çš„ã€‚æˆ‘è‡ªå·±çš„å»ºè®®æ˜¯è¿™æ ·ï¼šå‘¨ä¸€åˆ°å‘¨å››çš„æ™šä¸Šå®‰æ’ä¸‰æ¬¡å­¦ä¹ ï¼Œç©ºå‡ºæ¥ä¸€å¤©ç”¨æ¥ç¼“å†²ï¼›å‘¨äº”æ™šä¸Šä¸å®‰æ’ï¼Œå³ä½¿æ²¡æœ‰çº¦ä¹Ÿå¯ä»¥è‡ªå·±ç»™è‡ªå·±æ”¾ä¸ªå‡ï¼›å‘¨å…­å‘¨æ—¥ç»™è‡ªå·±å®‰æ’ä¸€å¤©åŠçš„æ—¶é—´ï¼Œè€Œä¸”ç„¶åå‘¨å…­æ™šä¸Šä¸å®‰æ’å­¦ä¹ ï¼Œå¯ä»¥çš„è¯ç»™å‘¨æ—¥æ™šä¸Šå®‰æ’ä¸€æ³¢å­¦ä¹ ã€‚</p><p>ä»…ä»æˆ‘è‡ªå·±çš„è§’åº¦æ¥è¯´ï¼Œè¿™ç±»GTDæ–¹æ¡ˆè®©æˆ‘éå¸¸å—ç”¨ï¼Œä¸ä»…æ—¶é—´å˜å¤šäº†ï¼Œä¹Ÿæ›´æœ‰èŠ‚å¥äº†ã€‚è‡ªå·±çŸ¥é“å‘¨ä¸€åˆ°å‘¨å››æ™šä¸Šä¸è¯¥ç©æ¸¸æˆï¼Œå‘¨æœ«åˆå¯ä»¥ç©ä¸€æ•´å¤©ã€‚æ—¶é—´æ‹èµ·æ¥ä¹‹åçš„ç”Ÿæ´»é‡Œæˆ‘ç©åˆ°äº†å¾ˆå¤šä»¥å‰è§‰å¾—æ²¡æ—¶é—´ç©çš„ä¼˜ç§€æ¸¸æˆï¼Œæ¯”å¦‚<em>æˆ˜ç¥</em> <em>å¡å°”è¾¾</em>  <em>GTA5</em>  <em>å’Œä¸€ä¼—ä¼˜ç§€æ¸¸æˆ</em>ï¼Œä¹Ÿçœ‹äº†å¾ˆå¤šä»¥å‰è§‰å¾—æ²¡æ—¶é—´çœ‹çš„è±†ç“£Top250ç”µå½±ã€‚</p><a id="more"></a><h1 id="0X01-å¸è½½"><a href="#0X01-å¸è½½" class="headerlink" title="0X01 å¸è½½"></a>0X01 å¸è½½</h1><p>æˆ‘ä¸çŸ¥é“å…¶ä»–äººï¼Œåæ­£æˆ‘è‡ªå·±å…¥æ‰‹ä¸€ä¸ªæ–°çš„ç”µå­äº§å“å°¤å…¶æ˜¯ï¼šæ‰‹æœºã€å¹³æ¿ã€ç”µè„‘çš„æ—¶å€™ï¼Œå°±ä¼šç–¯ç‹‚çš„é…ç½®ï¼Œç„¶åç–¯ç‹‚å®‰è£…è½¯ä»¶ï¼Œä¸€åº¦è§‰å¾—ä¸å¤šè£…å‡ ä¸ªè½¯ä»¶æ–°ç”µè„‘ã€æ‰‹æœºå°±ç™½ä¹°äº†ä¼¼çš„ã€‚è¿™é‡Œç»™å‡ºçš„æ–¹æ¡ˆæ°æ°ä¸ä¹‹ç›¸åï¼š<strong>å¸è½½</strong>ã€‚</p><p>é’ˆå¯¹ç”µè„‘æ¥è¯´ï¼Œè¿™ä¸ªå…¶å®æ²¡æ‰€è°“ï¼Œä¸»è¦è¿˜æ˜¯åœ¨æ‰‹æœºå’Œå¹³æ¿ä¸Šã€‚å‡è®¾ä½ æƒ³æ§åˆ¶è‡ªå·±å°‘ç©æ‰‹æœºå°‘ç©å¹³æ¿ï¼Œå…¶å®å¾ˆç®€å•å‘ï¼Œå¹³æ—¶ç©ä»€ä¹ˆå°±å¸è½½ä»€ä¹ˆå°±å¾—äº†ã€‚æˆ‘æœ¬æ¥å°±å¯¹æ‰‹æœºæ¸¸æˆæ²¡æœ‰å…´è¶£ï¼Œä½†æ˜¯ä»¥å‰æ‰‹æœºä¸Šæœ‰çš„æ—¶å€™å¶å°”è¿˜æ˜¯ä¼šç©ä¸€ç©ï¼Œç°åœ¨ç›´æ¥å¸è½½æ‰å°±ä¸ç©äº†ï¼Œä¹Ÿå®Œå…¨ä¸æƒ³ç©ã€‚</p><p>æœ€åº”è¯¥å¸è½½çš„å…¶å®æ˜¯æ‰‹æœºé‡Œçš„é‚£äº›â€ç¤¾åŒºâ€ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸¤ä¸ªè‡ªå·±ç‰¹åˆ«å–œæ¬¢çš„ç¤¾åŒºï¼Œä¸ç®¡æ˜¯çŸ¥ä¹è¿˜æ˜¯è±†ç“£ï¼Œé‚£éƒ½åº”è¯¥ç•™ç€ã€‚ä¸è¿‡å¦‚æœä½ æ‰‹æœºé‡Œè£…äº†ä¸€å¤§å †ç¤¾åŒºç±»çš„appï¼Œé‚£å®Œå…¨å¯ä»¥è€ƒè™‘å¸è½½ä¸€æ³¢ï¼Œè¿™æ ·å°±çœçš„è®©ä½ æ‹¿èµ·æ‰‹æœºä¸€é¡¿çœ‹ä¹‹åå•çº¯çš„å› ä¸ºæ— èŠè€Œç‚¹å¼€ä¸€ä¸ªappã€‚å½“ç„¶äº†ï¼Œå¸è½½æ˜¯ä¸€ä¸ªéå¸¸æç«¯çš„åšæ³•ï¼Œè¿˜æœ‰ä¸é‚£ä¹ˆæç«¯çš„åšé¥­ï¼šä¿®æ”¹é€šçŸ¥&amp;æ¨é€ã€‚</p><h1 id="0X02-é€šçŸ¥-amp-æ¨é€"><a href="#0X02-é€šçŸ¥-amp-æ¨é€" class="headerlink" title="0X02 é€šçŸ¥&amp;æ¨é€"></a>0X02 é€šçŸ¥&amp;æ¨é€</h1><p>ç°åœ¨æ‹¿èµ·æ¥ä½ çš„æ‰‹æœºï¼Œçœ‹ä¸€çœ‹æœ‰å¤šå°‘æœªè¯»çš„æ¨é€å’Œé€šçŸ¥å‘¢ï¼Ÿå†æƒ³æƒ³ä½ æœ‰å¤šå°‘æ¬¡æ˜¯æ­£åœ¨å¼€å¿ƒçš„å­¦ä¹ ã€ç©æ¸¸æˆã€çœ‹ç”µå½±çš„æ—¶å€™å¬åˆ°äº†æ‰‹æœºâ€å®å’šâ€ä¸€å£°æ¨é€ï¼Œç„¶åæ‹¿èµ·æ¥çœ‹äº†çœ‹ï¼Œå…³æ‰äº†æ— å…³çš„æ¨é€ï¼Œç„¶ååˆç‚¹å¼€äº†å¾®åšçŸ¥ä¹å§å•¦å§å•¦ï¼Ÿ</p><p>æ‰€ä»¥è¯´å¦‚æœåšä¸åˆ°å¸è½½ï¼Œé‚£å°±å…³æ‰ä»–çš„æ¨é€ã€‚å…¶å®ä½ ä»”ç»†æƒ³æƒ³ï¼Œä½ å¾ˆéœ€è¦å¾®åšç»™ä½ æ¨é€é‚£äº›ä¹±ä¸ƒå…«ç³Ÿçš„æµé‡æ˜æ˜Ÿå‡ºè½¨æ‹çˆ±å¤šäººè¿åŠ¨çš„æ¶ˆæ¯å—ï¼Ÿä½ å¾ˆéœ€è¦çŸ¥ä¹ç»™ä½ æ¨é€çš„äººåœ¨å†…è’™åˆšä¸‹èˆªæ¯å—ï¼Ÿä½ å¾ˆéœ€è¦bilibiliç»™ä½ æ¨é€çš„é»‘äººæŠ¬æ£ºäº¤å“ä¹ç‰ˆå—ï¼Ÿå…¶å®å¹¶ä¸ï¼Œåè€Œæ˜¯ä»–ä»¬ç»™ä½ æ¨é€ä¹‹åä½ å¯èƒ½ä¼šå› ä¸ºå¥½å¥‡ç‚¹å¼€ï¼Œå°±ç®—æ²¡ç‚¹å¼€ä¹Ÿæœ‰å¯èƒ½ä¼šç‚¹å¼€å…¶ä»–çš„appç„¶åä¸­æ–­è‡ªå·±æ­£åœ¨åšçš„äº‹å„¿ã€‚</p><p>æ‰€ä»¥ç°åœ¨æˆ‘æ‰‹æœºä¸Šé™¤äº†å¾®ä¿¡ã€QQè¿™ç±»å·¥å…·ä»¥å¤–ï¼Œå¤§å¤šæ•°ç¨‹åºçš„æ¨é€æˆ‘éƒ½å…³æ‰äº†ï¼Œå› ä¸ºæˆ‘å¹¶ä¸æ˜¯å¾ˆå…³å¿ƒä»–ä»¬çš„æ¨é€ï¼Œåè€Œè¿™äº›æ¨é€ä¼šä¸¥é‡å¹²æ‰°åˆ°æˆ‘ã€‚å½“ç„¶å¦‚æœä½ å®åœ¨ä¸æƒ³å…³æ‰æ¨é€ï¼Œé‚£ä¹Ÿå¯ä»¥æŠŠæ¨é€çš„å£°éŸ³å’Œâ€é€šçŸ¥äº®å±â€è¿™ç§å…³æ‰ï¼Œé˜²æ­¢ä½ ä¸“å¿ƒå·¥ä½œå­¦ä¹ ç©æ¸¸æˆçš„æ—¶å€™è¢«æ‰‹æœºä¸­æ–­ã€‚</p><h1 id="0X03-è®¾å¤‡ç‹¬ç«‹"><a href="#0X03-è®¾å¤‡ç‹¬ç«‹" class="headerlink" title="0X03 è®¾å¤‡ç‹¬ç«‹"></a>0X03 è®¾å¤‡ç‹¬ç«‹</h1><p>è®¾å¤‡ç‹¬ç«‹å°±å¾ˆç®€å•äº†ï¼Œè¯•æƒ³ä½ æ­£åœ¨ç”¨æ‰‹æœºçœ‹ä¸€ç¯‡æŠ€æœ¯æ–‡ç« æˆ–è€…ä¸€ç¯‡å…¶ä»–çš„é•¿æ–‡ï¼Œçœ‹äº†ä¸‰åˆ†é’Ÿå°±æ”¶åˆ°äº†æœ‹å‹åœ¨å¾®ä¿¡ç¾¤é‡Œatä½ ç»™ä½ çœ‹æ²™é›•è§†é¢‘çš„é€šçŸ¥ï¼Œä½ åšæŒä½æ²¡ç‚¹ï¼›äº”åˆ†é’Ÿååˆæ”¶åˆ°åŒäº‹å‘ç»™ä½ çš„â€ç‹è€…å³¡è°·é‚€è¯·å‡½â€ï¼Œä½ åˆåšæŒä½äº†ï¼›åå‡ åˆ†é’Ÿååˆæ”¶åˆ°äº†UCæ¨æ¥çš„â€éœ‡æƒŠğŸ¤¯ä¸ƒæ—¬è€äººç«Ÿå’Œå­™å­åœ¨å®¶ä¸­åšè¿™ç§äº‹æƒ…ï¼â€ï¼Œå¥½å§ï¼Œè¿™æ¬¡ä½ å¯èƒ½æ²¡åšæŒä½ï¼Œç‚¹è¿›å»äº†ã€‚è¿™æ ·ç®—ä¸‹æ¥ä½ ä¸€å…±çœ‹äº†åŠä¸ªå°æ—¶æ–‡ç« ï¼Œä¸­é—´è¢«æ‰“æ–­äº†å¥½å‡ æ¬¡ã€‚</p><p>å¦‚æœä½ ç”¨Kindleçœ‹ä¹¦ï¼Œæˆ–è€…å¹²è„†æ‹¿çº¸è´¨ä¹¦ï¼Œé‚£è‚¯å®šå°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜äº†ã€‚å¦‚æœä½ ç”¨walkmanå¬æ­Œï¼Œé‚£å°±ä¸ä¼šå‡ºç°æ‰‹åŠ¨åˆ‡æ­Œçš„æ—¶å€™é¡ºä¾¿åˆ·ä¸ŠåŠä¸ªå°æ—¶å¾®åšçš„é—®é¢˜ã€‚å¦‚æœä½ ç”¨switch/PS4/XBoxç©æ¸¸æˆå°±ä¸ä¼šé‡åˆ°æ¸¸æˆä¸­è¢«ä¸€ä¸ªçªå¦‚å…¶æ¥çš„ç³»ç»Ÿæ›´æ–°æ‰“æ–­æˆ–è€…è¢«è§†é¢‘èŠå¤©æ‰“æ–­çš„é—®é¢˜ã€‚</p><p>æ‰€ä»¥è¯´åœ¨å¯ä»¥çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½è®©è‡ªå·±çš„è®¾å¤‡ç‹¬ç«‹ï¼Œæ¯ä¸ªè®¾å¤‡åšæ¯ä¸ªè®¾å¤‡æœ€æ“…é•¿çš„äº‹æƒ…ï¼Œè¿™æ ·ä¹Ÿæœ€ä¸å®¹æ˜“è¢«æ‰“æ–­ã€‚ï¼ˆæ¯ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹ï¼Œå¹¶å°†å…¶åšåˆ°æè‡´ã€‚  å…¶å®è¿™ä¹Ÿæ˜¯ç»å…¸çš„UNIXæ€æƒ³ï¼‰</p><h1 id="0X04-é”å®š"><a href="#0X04-é”å®š" class="headerlink" title="0X04 é”å®š"></a>0X04 é”å®š</h1><p>æˆ‘ä¹‹å‰çš„ä¸€åŠ æ‰‹æœºæœ‰â€ç¦…å®šæ¨¡å¼â€ï¼Œç°åœ¨çš„å°ç±³æ‰‹æœºæœ‰â€ä¸“æ³¨æ¨¡å¼â€ï¼Œè¿™ä¸ªåŠŸèƒ½å¾ˆæ£’ã€‚æ‰‹æœºæ‰“å¼€ç¦…å®šæ¨¡å¼å‰ä¼šè®©ä½ é€‰æ‹©æ—¶é—´ï¼Œæ¯”å¦‚30åˆ†é’Ÿã€60åˆ†é’Ÿã€90åˆ†é’Ÿè¿™ç§ã€‚é€‰å¥½ä¹‹åå°±å¼€å§‹è¿›å…¥ç¦…å®šæ¨¡å¼äº†ï¼Œç¦…å®šæ¨¡å¼æœŸé—´æ‰‹æœºåªèƒ½çœ‹æ—¶é—´ã€æ¥ç”µè¯å’Œæ‹¨æ‰“ç´§æ€¥ç”µè¯ï¼Œå…¶ä»–ä¸€åˆ‡çš„é€šçŸ¥ã€æ¨é€ã€çŸ­ä¿¡ã€atã€å…¨éƒ½æ²¡äº†ã€‚è¿™ç§æƒ…å†µä¸‹ä½ çš„å·¥ä½œå­¦ä¹ æ•ˆç‡ä¼šé«˜å¾ˆå¤šï¼Œèµ·ç ä¸ä¼šè¢«æ‰‹æœºæ‰“æ‰°åˆ°ã€‚</p><p>åœ¨iPadä¸Šä¹Ÿæœ‰ç±»ä¼¼çš„ï¼Œå«â€å‹¿æ‰°æ¨¡å¼â€ï¼ŒmacOSå’ŒWindowsä¸Šä¹Ÿæœ‰ï¼Œè¿Linuxä¸Šéƒ½æœ‰ã€‚è™½ç„¶åŠŸèƒ½æ²¡æœ‰æ‰‹æœºé‚£ä¹ˆå¤¸å¼ ï¼Œä½†æ˜¯ä¹Ÿä¼šå¸®ä½ æ‹¦æˆªç»å¤§å¤šæ•°é€šçŸ¥ï¼Œç„¶åè®©ä½ è‡ªå·±æ²‰æµ¸åˆ°å½“å‰çš„å·¥ä½œå’Œå­¦ä¹ å½“ä¸­å»ã€‚å¼ºçƒˆæ¨èåœ¨ç”µè„‘ä¸Šä½¿ç”¨å‹¿æ‰°æ¨¡å¼çš„æ—¶å€™å°†å½“å‰çª—å£å…¨å±ï¼Œè¿™æ ·å°±å¯ä»¥å°†å¹²æ‰°æ”¾åˆ°æœ€ä½ã€‚</p><h1 id="0X05-ç«‹flag"><a href="#0X05-ç«‹flag" class="headerlink" title="0X05 ç«‹flag"></a>0X05 ç«‹flag</h1><p>ç«‹flagæ˜¯ä¸ªå¥½åŠæ³•ï¼ŒæŠŠè‡ªå·±çš„è®¡åˆ’ç–¯ç‹‚å¾—è¯´å‡ºæ¥ã€‚æ¯”å¦‚ä½ æ‰“ç®—ä¸€å¹´å‡è‚¥20æ–¤ï¼Œé‚£å°±å‘Šè¯‰å…¨ä¸–ç•Œï¼Œè™½ç„¶ä½ è°éƒ½ä¸å‘Šè¯‰è‡ªå·±æ‚„æ‚„å‡å¤±è´¥äº†ä¹Ÿä¸ä¸¢è„¸ï¼Œä½†æ˜¯ä¹Ÿä¼šç»™è‡ªå·±åŸ‹ä¸‹ä¸€ä¸ªè¯´è¾â€ä¸æˆåŠŸä¹Ÿæ²¡äººçŸ¥é“çš„ï¼Œé—®é¢˜å¥€â€ã€‚æ‰€ä»¥åº”è¯¥å¤§èƒ†çš„å‘Šè¯‰å‘¨å›´äººä½ çš„è®¡åˆ’ï¼ˆå½“ç„¶äº†ï¼Œç§å¯†çš„é—®é¢˜å°±åˆ«è¯´äº†ï¼Œåˆ«è€è¯´äº‰å–ä¸‹æ¬¡äº‰å–æ¶¨ä¸ª xx%  çš„å·¥èµ„è¿™ç§ï¼‰ã€‚å½“æ‰€æœ‰äººéƒ½çŸ¥é“ä½ è¦å‡è‚¥20æ–¤çš„æ—¶å€™ï¼Œä¸‹æ¬¡ä½ å†è·Ÿä»–ä»¬åƒé¥­è¿˜åƒé‚£ä¹ˆå¤šï¼Œä½ çš„æœ‹å‹å°±ä¼šæ—¶ä¸æ—¶æé†’ä½ ç”šè‡³â€å˜²è®½â€ä½ ï¼Œç»™ä½ ä¸€äº›åŠ¨åŠ›ã€‚è€Œä¸”ä½ è‡ªå·±ä¹Ÿä¼šç»™è‡ªå·±å¿ƒç†æš—ç¤ºï¼šâ€NBéƒ½å¹å‡ºå»äº†ï¼Œä¸èƒ½ä¸€ç‚¹åŠ¨é™éƒ½æ²¡æœ‰å§ï¼Œè¿˜æ˜¯å¾—åŠªåŠªåŠ›æ‰è¡Œâ€ã€‚</p><p>æˆ‘è‡ªå·±ä¹Ÿæ˜¯åœ¨æœ‹å‹åœˆé‡Œç«‹è¿‡flagçš„ï¼Œè¯´ä»€ä¹ˆâ€å®Œæˆä¸äº†å°±è¯·æœ‹å‹åœˆå…¨åœˆåƒç«é”…â€è¿™ç§å¬èµ·æ¥å°±ä¸é è°±çš„è¯ã€‚å¤§å®¶ä¹Ÿéƒ½çŸ¥é“æ˜¯åœ¨å¼€ç©ç¬‘ï¼Œä½†æ˜¯é‡åˆ°ä½ åšäº†å’Œè®¡åˆ’ç›¸åçš„äº‹å„¿è¿˜æ˜¯ä¼šæé†’ä½ çš„ã€‚è™½ç„¶æˆ‘æœ€åæ²¡æœ‰å½»åº•å®Œæˆï¼Œä¹Ÿæ²¡æœ‰è¯·å…¨åœˆåƒç«é”…ã€‚ä¼°è®¡çœŸè¯·çš„è¯æ€•æ˜¯ä¸¤ä¸ªæœˆå·¥èµ„éƒ½ä¸å¤ŸğŸ¤£</p><h1 id="0X06-æœ€å"><a href="#0X06-æœ€å" class="headerlink" title="0X06 æœ€å"></a>0X06 æœ€å</h1><p>æœ€åç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œè¿™äº›æŠ€å·§ä¹Ÿå¥½æ–¹æ³•ä¹Ÿç½¢éƒ½æ˜¯æˆ‘è‡ªå·±æ€»ç»“åˆ°çš„ï¼Œå¯¹æˆ‘è‡ªå·±æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä½†æ˜¯ä¸ç¡®å®šå¯¹å¤§å®¶æ˜¯ä¸æ˜¯æœ‰ç”¨ã€‚å¦‚æœæœ‰å…´è¶£çš„è¯ä¹Ÿå¯ä»¥è¯•ä¸€ä¸‹ï¼Œæ¯•ç«Ÿå¤§å®¶éƒ½æ˜¯æ²™é›•ç½‘å‹ï¼Œå—ç”¨çš„æ–¹æ³•åº”è¯¥ä¹Ÿä¸ä¼šå·®å¤ªå¤šå§å“ˆå“ˆå“ˆå“ˆå“ˆğŸ¤ª</p>]]></content>
      
      
      
        <tags>
            
            <tag> GTD </tag>
            
            <tag> Target </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®©Django APIå†å¿«ä¸€ç‚¹</title>
      <link href="/2020/05/14/django-fast/"/>
      <url>/2020/05/14/django-fast/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><blockquote><p>  å•Šï¼Œè¿™ä¸ªç ´ç³»ç»Ÿæ€ä¹ˆè¿™ä¹ˆæ…¢ã€‚  â€“ä½ å†™çš„ç¨‹åºçš„ç”¨æˆ·</p></blockquote><p>æ˜¯çš„ï¼Œæˆ‘ç”¨Djangoå†™çš„ç¨‹åºç»å¸¸ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼Œæœ‰æ—¶å€™æ˜¯é€»è¾‘é—®é¢˜ã€æœ‰æ—¶å€™æ˜¯æ•°æ®åº“é—®é¢˜ã€æœ‰æ—¶å€™åˆæ˜¯æœºå™¨é—®é¢˜ã€‚æˆ‘å°±ç°åœ¨è¿™å„¿æ€»ç»“ä¸€æ³¢æˆ‘è‡ªå·±çš„ç»éªŒå¥½äº†ï¼ˆè¿™é‡Œéƒ½æ˜¯åŸºäºæˆ‘è‡ªå·±çš„ç»éªŒæ¥çš„ï¼Œå¯èƒ½ä¼šç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰å¤ªéªšå¤ªå¤æ‚å¤ªé«˜çº§çš„ä¸œè¥¿ï¼‰ã€‚è¿™å„¿é»˜è®¤å¤§å®¶éƒ½æ˜¯ç”¨çš„Django + Django REST frameworkäº†ï¼Œå› ä¸ºæˆ‘è‡ªå·±æ˜¯ç”¨çš„è¿™å¥—æŠ€æœ¯æ ˆï¼Œè€Œä¸”è¿™å¥—æŠ€æœ¯æ ˆä¹Ÿç®—æ˜¯Djangoç”Ÿæ€ä¸‹å‰åç«¯åˆ†ç¦»çš„æœ€å¸¸è§çš„äº†ã€‚</p><h1 id="0X01-é—®é¢˜å‡ºåœ¨å“ªå„¿å‘¢"><a href="#0X01-é—®é¢˜å‡ºåœ¨å“ªå„¿å‘¢" class="headerlink" title="0X01 é—®é¢˜å‡ºåœ¨å“ªå„¿å‘¢"></a>0X01 é—®é¢˜å‡ºåœ¨å“ªå„¿å‘¢</h1><p>ä¼—æ‰€å‘¨çŸ¥â€æƒ³è¦è§£å†³é—®é¢˜ï¼Œé¦–å…ˆå°±è¦æ‰¾åˆ°é—®é¢˜åœ¨å“ªå„¿â€ã€‚é‚£æ€ä¹ˆåˆ¤æ–­é—®é¢˜åœ¨å“ªå„¿å‘¢ï¼Ÿ</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ger78bhmijj32qg07s7b9.jpg" alt="htopæˆªå›¾"></p><ol><li>é¦–å…ˆç™»åˆ°æœåŠ¡å™¨ä¸Šçœ‹<code>htop</code>ï¼Œæœ‰é¢æœ‰ä¸€ä¸ª<code>Load average</code>å°±æ˜¯ç»¼åˆè´Ÿè½½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯næ ¸å¿ƒçš„ï¼Œé‚£è´Ÿè½½åœ¨n-2ä»¥ä¸‹å°±ç®—æ˜¯æ­£å¸¸çš„ï¼Œå¿«åˆ°näº†ä¹Ÿä¸æ˜¯ä¸èƒ½ç”¨ï¼Œä½†æ˜¯å°±è¦è€ƒè™‘å‡çº§äº†ã€‚è¿™é‡Œç»™å‡ºæ¥äº†ä¸‰ä¸ªè´Ÿè½½å€¼ï¼Œä»å·¦åˆ°å³ä¾æ¬¡æ˜¯1åˆ†é’Ÿã€5åˆ†é’Ÿã€10åˆ†é’Ÿçš„è´Ÿè½½æƒ…å†µã€‚ï¼ˆä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€èˆ¬æƒ…å†µå‘¢ï¼Œå¦‚æœä½ å°±åªæœ‰ä¸€ä¸¤ä¸ªæ ¸å¿ƒï¼Œé‚£è¿™ä¸ªç®—æ³•è‚¯å®šä¸ç”Ÿæ•ˆï¼›å¦‚æœä½ æœ‰128æ ¸ï¼Œé‚£è´Ÿè½½åˆ°126äº†å°±æ„å‘³ç€é©¬ä¸Šå°±ç‚¸ğŸ¤£ã€‚æ‰€ä»¥è¯´ä¸€åŠåŒæ ¸å¿ƒä¸è¶…è¿‡1.5ã€4æ ¸ä¸è¶…è¿‡3ï¼Œ8æ ¸ä¸è¶…è¿‡6è¿™ç§ï¼‰</li><li>å¦‚æœç¡®å®šäº†å°±æ˜¯æœºå™¨æ€§èƒ½çš„é—®é¢˜ï¼Œé‚£å°±å¥½åŠäº†ï¼Œå‡çº§æœåŠ¡å™¨å°±å¥½ï¼ˆå½“ç„¶ä¸æ˜¯ä¸å¤Ÿä¹…å‡çº§ï¼Œè¿˜æ˜¯è¦è§‰å¾—å½“å‰çš„æ•°æ®é‡å•Šå¹¶å‘å•Šå·²ç»æŒºé«˜äº†å†è€ƒè™‘ã€‚è¦ä¸ç„¶ä¸€æ…¢å°±å‡çº§æœåŠ¡å™¨ï¼Œé‚£å²‚ä¸æ˜¯å¤ªå¥¢ä¾ˆäº†ï¼Œè€Œä¸”å¯¹è‡ªå·±çš„ä»£ç è´¨é‡ä¹Ÿæ²¡æœ‰ä¸€ç‚¹å¥½å¤„ï¼‰</li><li>æˆ‘ä»¬å‡è®¾ä¸éœ€è¦å‡çº§æœåŠ¡å™¨é…ç½®ï¼Œé‚£å°±ä»ç¨‹åºå’Œæ•°æ®åº“ä¸¤ä¸ªæ–¹é¢æ¥è¯´ã€‚ä¸€èˆ¬æ˜¯å…ˆæ‰“å¼€MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç„¶åæ ¹æ®æ…¢æŸ¥è¯¢æ—¥å¿—æ¥é€æ¸ä¼˜åŒ–è¡¨ç»“æ„ï¼Œä¼˜åŒ–æŸ¥è¯¢ï¼Œä¼˜åŒ–ç¨‹åºé€»è¾‘ã€‚</li></ol><a id="more"></a><h1 id="0X02-ä»£ç è´¨é‡ä½oré€»è¾‘é—®é¢˜"><a href="#0X02-ä»£ç è´¨é‡ä½oré€»è¾‘é—®é¢˜" class="headerlink" title="0X02 ä»£ç è´¨é‡ä½oré€»è¾‘é—®é¢˜"></a>0X02 ä»£ç è´¨é‡ä½oré€»è¾‘é—®é¢˜</h1><p>ä»£ç è´¨é‡ä½æ˜¯ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬æ¥è¯´å‘ˆç°åœ¨è¿™å‡ ä¸ªåœ°æ–¹ï¼šå¤šä½™çš„å¾ªç¯æ¬¡æ•°ã€æŸ¥äº†å®Œå…¨æ²¡åµç”¨çš„æ•°æ®ã€è¿›è¡Œé¢å¤–çš„æ“ä½œã€‚æˆ‘ä»¬éƒ½çŸ¥é“è®¡ç®—æœºé‡Œå‡ ç§å¤„ç†é€Ÿåº¦çš„å·®è·æ˜¯å·¨å¤§çš„<code>CPUç¼“å­˜&gt;&gt;å†…å­˜&gt;&gt;ç¡¬ç›˜&gt;&gt;ç½‘ç»œ</code>ï¼Œè¿™å››ä¸ªä¹‹é—´çš„æ€§èƒ½å·®å¼‚ä¸¤ä¸¤ä¹‹é—´å¾€å¾€å¯ä»¥å·®å‡ºè‡³å°‘ä¸€ä¸ªæ•°é‡çº§ï¼ˆå…¶å®éšç€ç½‘ç»œå‘å±•ï¼Œç°åœ¨ç½‘ç»œé€Ÿåº¦å·²ç»å¯ä»¥èµ¶ä¸Šæœºæ¢°ç¡¬ç›˜äº†ï¼‰ã€‚è€Œå…¶ä¸­æœ€æ…¢çš„å°±æ˜¯I/Oäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½ä¸€åˆ‡å¯èƒ½é¿å…I/Oï¼Œè€Œä¸”æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯â€è¯»å†™æ•°æ®åº“â€å½“ç„¶ä¹Ÿç®—I/Oã€‚ä¸‹é¢åˆ—ä¸¾ä¸¤ç§å¸¸è§çš„é—®é¢˜</p><h2 id="å¤šä½™çš„I-O"><a href="#å¤šä½™çš„I-O" class="headerlink" title="å¤šä½™çš„I/O"></a>å¤šä½™çš„I/O</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> student_data <span class="keyword">in</span> studnet_list:</span><br><span class="line">    token = get_token_from_another_system_with_http_api()</span><br><span class="line">    response = requests.post(url, student_data, headers=&#123;<span class="string">'token'</span>: token&#125;)</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚è¯´è¿™éƒ¨åˆ†ä»£ç ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€ä¸ªtokenä¸åº”è¯¥æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œé‚£æŠŠè¿™ä¸ªå¤šä½™çš„å–tokençš„æ–¹æ³•æ”¾åœ¨å¾ªç¯å¤–é¢å°±å¥½äº†ã€‚å…¶å®å¦‚æœ<code>get_token_from_another_system_with_http_api()</code>ä¸æ˜¯ä»å…¶ä»–çš„webæœåŠ¡ä¸Šå–tokenè€Œæ˜¯<code>get_token_from_local_cache()</code>çš„è¯ï¼Œè™½ç„¶ä¹Ÿè¿˜æ˜¯æ‰§è¡Œäº†å¤šä½™çš„æ“ä½œï¼Œä½†æ˜¯å°±å¥½å¾—å¤šäº†ã€‚</p><h2 id="æŸ¥äº†å®Œå…¨æ²¡åµç”¨çš„ä¸œè¥¿"><a href="#æŸ¥äº†å®Œå…¨æ²¡åµç”¨çš„ä¸œè¥¿" class="headerlink" title="æŸ¥äº†å®Œå…¨æ²¡åµç”¨çš„ä¸œè¥¿"></a>æŸ¥äº†å®Œå…¨æ²¡åµç”¨çš„ä¸œè¥¿</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">queryset = Student.objects.filter(age__gte=<span class="number">20</span>, gender=<span class="string">'F'</span>)</span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">    send_mail(studnet.email, <span class="string">'ä¸€ä¸ªæ ‡é¢˜'</span>, <span class="string">'hello,world'</span>)</span><br></pre></td></tr></table></figure><p>è¿™éƒ¨åˆ†ä»£ç çœ‹èµ·æ¥é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å‡è®¾æˆ‘ä»¬æœ‰10Wçš„å­¦ç”Ÿï¼Œå¹¶ä¸”<code>Student</code>è¡¨æœ‰å¤§å‡ åä¸ªå­—æ®µï¼Œé‚£åˆ°<code>for student in queryset</code>çš„æ—¶å€™ï¼Œå°±ä¼šå¡ä½ä¸€ä¼šå„¿ï¼ˆå¦‚æœæœºå™¨ä¸å¤ªè¡Œçš„è¯å¯èƒ½ä¼šå¡å¾ˆä¹…ï¼‰ã€‚å…¶å®æˆ‘ä»¬çŸ¥é“ï¼Œé»˜è®¤è¿™æ ·çš„æŸ¥è¯¢æ˜¯<code>SELECT * FROM student WHERE xxxx</code>æ¥çš„ï¼ŒæŠŠæ‰€æœ‰æ•°æ®éƒ½å–å‡ºæ¥äº†ã€‚å¦‚æœæˆ‘ä»¬ç¨åŠ æ”¹åŠ¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">queryset = Student.objects.filter(age__gte=<span class="number">20</span>, gender=<span class="string">'F'</span>).only(<span class="string">'email'</span>)</span><br><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> queryset:</span><br><span class="line">    send_mail(studnet.email, <span class="string">'ä¸€ä¸ªæ ‡é¢˜'</span>, <span class="string">'hello,world'</span>)</span><br></pre></td></tr></table></figure><p>ä»”ç»†çœ‹ï¼Œå…¶å®å°±åªæ˜¯åœ¨<code>filter()</code>åé¢åŠ äº†<code>only(&#39;email&#39;)</code>ï¼Œè¿™å°±ç›¸å½“äºæ˜¯<code>SELECT email FROM student WHERE xxxxx</code>äº†ï¼Œæ•ˆç‡æ˜æ˜¾é«˜äº†å¥½å¤šã€‚æˆ–è€…ç›´æ¥æ”¹æˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">email_list = Student.objects.filter(age__gte=<span class="number">20</span>, gender=<span class="string">'F'</span>).values_list(<span class="string">'email'</span>, flat=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> email <span class="keyword">in</span> email_list:</span><br><span class="line">    send_mail(email, <span class="string">'ä¸€ä¸ªæ ‡é¢˜'</span>, <span class="string">'hello,world'</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ ·è¿”å›æ¥çš„<code>queryset</code>é‡Œçš„å…ƒç´ å°±æ˜¯emailäº†ã€‚</p><h1 id="0X03-æ•°æ®åº“ç“¶é¢ˆï¼ˆMySQLï¼‰"><a href="#0X03-æ•°æ®åº“ç“¶é¢ˆï¼ˆMySQLï¼‰" class="headerlink" title="0X03 æ•°æ®åº“ç“¶é¢ˆï¼ˆMySQLï¼‰"></a>0X03 æ•°æ®åº“ç“¶é¢ˆï¼ˆMySQLï¼‰</h1><p><strong>æ•°æ®åº“ä¸€å®šè¦å¤šå å†…å­˜ï¼Œæ•°æ®åº“ä¸€å®šè¦å¤šå å†…å­˜ï¼Œæ•°æ®åº“ä¸€å®šè¦å¤šå å†…å­˜ã€‚</strong>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨Linuxç³»ç»Ÿä¸‹æ˜¯ç”¨å¤šå°‘å†…å­˜åˆ†é…å¤šå°‘ï¼Œä½†æ˜¯æˆ‘ä»¬MySQLé€šå¸¸éƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²çš„ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªMySQLï¼Œæ‰€ä»¥å°±ç›´æ¥ä¸€æ¬¡æ€§ç»™MySQLåˆ†é…å¤Ÿå†…å­˜ï¼Œè¿™æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚è®°å¾—å†…å­˜å°±æ˜¯ä¹°æ¥ç”¨çš„ï¼Œä¹°å†…å­˜å›æ¥ç»“æœä¸€å¹´åˆ°å¤´éƒ½æ˜¯30%çš„å ç”¨ï¼Œé‚£å²‚ä¸æ˜¯äºäº†å—å“ˆå“ˆå“ˆå“ˆå“ˆğŸ¤“</p><p><strong>æ•°æ®åº“æœºå™¨ä¸è¦å¼€swapï¼Œæ•°æ®åº“æœºå™¨ä¸è¦å¼€swapï¼Œæ•°æ®åº“æœºå™¨ä¸è¦å¼€swap</strong>ã€‚æ•°æ®åº“çš„æœºå™¨å†…å­˜ä¸å¤Ÿäº†ï¼Œå°±åŠ å†…å­˜æˆ–è€…ä¼˜åŒ–æŸ¥è¯¢ï¼Œä¸‡ä¸‡ä¸å¯ä½¿ç”¨äº¤æ¢åˆ†åŒºã€‚åªè¦ä½ çš„æ•°æ®åº“æœºå™¨ä¸€å¼€swapåˆ†åŒºï¼Œå†ç»“åˆä¸Šé¢çš„åŸåˆ™ï¼Œå°±æ„å‘³ç€<strong>ç¬é—´çˆ†ç‚¸</strong>ã€‚å› ä¸ºå†…å­˜ä¸€ç›´éƒ½æ˜¯å‡ ä¹å æ»¡çš„æƒ…å†µï¼Œä½ ä¸€æ‰“å¼€äº¤æ¢åˆ†åŒºï¼ŒLinuxå°±ä¼šç–¯ç‹‚å¼€å§‹ç”¨å†…å­˜å’Œç¡¬ç›˜è¿›è¡Œäº¤æ¢ï¼Œæœ¬æ¥ä½ MySQLé‡Œæœ‰å¾ˆå¤šä¸œè¥¿æ”¾å†…å­˜é‡Œå°±æ˜¯å›¾ä¸ªå¿«çš„ï¼Œç»“æœåˆç»™åœ¨swapçš„æœºåˆ¶ä¸‹æ”¾å›ç£ç›˜äº†ï¼Œå†æŠ˜è…¾ä¸€åœˆä¸‹æ¥ç”šè‡³æ¯”ç›´æ¥åœ¨ç£ç›˜é‡Œè¿˜è¦æ…¢ã€‚</p><h2 id="ç´¢å¼•é—®é¢˜"><a href="#ç´¢å¼•é—®é¢˜" class="headerlink" title="ç´¢å¼•é—®é¢˜"></a>ç´¢å¼•é—®é¢˜</h2><p>å› ä¸ºæŠŠä¼˜åŒ–æŸ¥è¯¢æ”¹æˆäº†ä¼˜åŒ–<code>ORM</code>ï¼Œæ‰€ä»¥ä¹Ÿå°±ç†æ‰€å½“ç„¶æ”¾åˆ°ä¸Šä¸€ä¸ªæ®µè½é‡Œäº†ï¼Œé‚£è¿™é‡Œå°±åªå‰©ä¸‹ç´¢å¼•ä¸ºé¢˜äº†ã€‚ç´¢å¼•ç®€å•æ¥è¯´å°±æ˜¯ï¼šâ€é’ˆå¯¹æŸäº›å­—æ®µï¼Œç‰ºç‰²å†…å­˜å’Œå†™å…¥é€Ÿåº¦æ¢å–æŸ¥è¯¢é€Ÿåº¦â€ã€‚æ‰€ä»¥è¯´å¦‚æœæœ‰äº›å­—æ®µä½ å¾ˆå°‘æ”¹ï¼Œç”šè‡³å†™è¿›å»å°±ä¸ä¼šå†å˜äº†ï¼Œç„¶ååˆè¦ç–¯ç‹‚çš„ä»¥å®ƒä¸ºæ¡ä»¶æŸ¥è¯¢ï¼Œé‚£å°±ç»™ä»–åŠ ä¸ªç´¢å¼•ã€‚ä¸è¿‡åŠ ç´¢å¼•ä¹‹å‰æœ‰å‡ ä¸ªæ³¨æ„çš„ç‚¹ï¼š</p><ol><li>è¿™ä¸ªå­—æ®µä¸€å®šæ˜¯è¯»å–é¢‘ç‡è¿œé«˜äºå†™å…¥é¢‘ç‡çš„ï¼›</li><li>è¿™ä¸ªå­—æ®µçš„â€å”¯ä¸€æ€§â€è¦é«˜ï¼Œæ¯”å¦‚å­¦ç”Ÿè¡¨çš„èº«ä»½è¯å·è¿™ç§ï¼Œæ¯æ¡æ•°æ®éƒ½æœ‰ä¸åŒçš„èº«ä»½è¯å·ï¼›</li><li>è¿™ä¸ªå­—æ®µè¦åœ¨SQLä¸­çš„<code>WHERE</code>å­å¥åé¢ï¼Œè€Œä¸æ˜¯<code>SELECT</code>åé¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šåº”è¯¥æ˜¯æ¡ä»¶ï¼Œè€Œééœ€è¦å¾—åˆ°çš„æ•°æ®ï¼›</li></ol><p>å…·ä½“çš„å¯ä»¥çœ‹æˆ‘çš„<a href="https://blog.just666.com/2019/09/15/database-index/">å¦ä¸€ç¯‡åšå®¢]</a>ã€‚</p><h1 id="0X04-æœºå™¨ç“¶é¢ˆï¼ˆLinuxï¼‰"><a href="#0X04-æœºå™¨ç“¶é¢ˆï¼ˆLinuxï¼‰" class="headerlink" title="0X04 æœºå™¨ç“¶é¢ˆï¼ˆLinuxï¼‰"></a>0X04 æœºå™¨ç“¶é¢ˆï¼ˆLinuxï¼‰</h1><p>æœºå™¨ç“¶é¢ˆï¼Œè¿™é‡Œç»™å‡ ç§ç®€å•çš„æ’æŸ¥ã€ç»“è§£å†³æ–¹æ³•ï¼Œä¸»è¦è¿˜æ˜¯å¾—é è¿ç»´åŒäº‹äº†ã€‚</p><h2 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h2><p>htopå°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´åˆ°çš„çœ‹CPU/å†…å­˜/è¿›ç¨‹å’Œè´Ÿè½½çš„å·¥å…·ï¼Œä¾¿äºä½ æ‰¾åˆ°ç–¯ç‹‚æ¶ˆè€—CPUæˆ–è€…å†…å­˜çš„ç¨‹åºã€‚</p><blockquote><p>  è¿™ä¸ªhtopæ’åºé‚£é‡Œæ˜¯å¯ä»¥ç”¨é¼ æ ‡ç‚¹çš„å–”</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ger9ndnd8gj31gy0u0u0x.jpg" alt></p><h2 id="swap"><a href="#swap" class="headerlink" title="swap"></a>swap</h2><p>å¦‚æœä½ æœºå™¨å†…å­˜çˆ†ç‚¸ğŸ’¥äº†ï¼Œè¿˜ä¸èƒ½ç¬¬ä¸€æ—¶é—´åŠ å†…å­˜ä¸Šå»ï¼Œé‚£å°±åªæœ‰å…ˆç”¨äº¤æ¢åˆ†åŒºç¼“ä¸€ä¸‹ã€‚<code>swapon</code>å’Œ<code>swapoff</code>ä¸¤ä¸ªå‘½ä»¤å¯ä»¥å¸®åˆ°ä½ ï¼Œå…·ä½“çš„å¯ä»¥æœç´¢ä¸€ä¸‹ï¼Œæ˜¯å¯ä»¥åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹åŠ å…¥æ–°çš„äº¤æ¢åˆ†åŒºå’Œå…³é—­äº¤æ¢åˆ†åŒºã€‚</p><p>ä¸€ä¸ªå¥‡æŠ€æ·«å·§ï¼šå¯ä»¥ä½¿ç”¨<code>dd</code>å‘½ä»¤æä¸€ä¸ªå—æ–‡ä»¶ï¼Œç„¶åæ ¼å¼åŒ–æˆ<code>swap</code>æ ¼å¼ï¼Œæœ€åæŒ‚æˆäº¤æ¢åˆ†åŒºå–”ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ger9v07ilqj31gy0u0twy.jpg" alt></p><h2 id="df-du"><a href="#df-du" class="headerlink" title="df/du"></a>df/du</h2><p><code>df</code>å¯ä»¥çœ‹åˆ°å½“å‰æŒ‚è½½çš„ç£ç›˜ï¼Œå“ªäº›å¿«è¦æ»¡äº†ã€‚<code>du</code>å¯ä»¥æ–¹ä¾¿å¾—çœ‹ç›®å½•çš„å¤§å°ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>ncdu</code>æ˜¯<code>du</code>çš„è¿›é˜¶ç‰ˆï¼Œæ˜¯ä¸€ä¸ªç±»ä¼¼å›¾å½¢åŒ–çš„ç•Œé¢ï¼Œç”¨èµ·æ¥æ›´èˆ’æœã€‚èƒ½ç¡®è®¤åˆ°å“ªä¸ªç›®å½•å ç”¨çš„ç©ºé—´å¤šï¼Œç„¶åæŒ‡å‘æ€§å¾—æ¸…ç†ä¸€äº›æ•°æ®ã€‚æœ‰æ—¶å€™ç£ç›˜æ»¡äº†éƒ½ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿å äº†ç©ºé—´ï¼Œè¿™æ—¶å€™duå’Œncduå°±å¾ˆå¥½ç”¨äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»ä¹¦ç¬”è®°ï¼Ÿï¼Ÿ</title>
      <link href="/2020/05/05/read-note/"/>
      <url>/2020/05/05/read-note/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä¸ºä»€ä¹ˆè¦è®°è¯»ä¹¦ç¬”è®°"><a href="#0X00-ä¸ºä»€ä¹ˆè¦è®°è¯»ä¹¦ç¬”è®°" class="headerlink" title="0X00 ä¸ºä»€ä¹ˆè¦è®°è¯»ä¹¦ç¬”è®°"></a>0X00 ä¸ºä»€ä¹ˆè¦è®°è¯»ä¹¦ç¬”è®°</h1><p>æœ¬æ¥æˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªä»æ¥ä¸è®°è¯»ä¹¦ç¬”è®°çš„äººï¼Œæ€»è§‰å¾—å¼ æ— å¿Œå¸ˆå‚…çš„é‚£ä¸ªâ€éƒ½å¿˜äº†å—ï¼Ÿå¿˜äº†å°±å»å§â€çš„ç¥å¥‡æ•™è¯²å¾ˆæœ‰é“ç†ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ç›´éƒ½æ˜¯çœ‹ä¹¦çœ‹å¤šå°‘ç®—å¤šå°‘ï¼Œè®°ä½çš„å°±è®°ä½äº†ï¼Œå¿˜äº†ä¹Ÿå°±å¿˜äº†ã€‚å³ä½¿è¿™æ¬¡å¼€å§‹è®°ç¬”è®°ä¹Ÿä¸æ˜¯å› ä¸ºæˆ‘è¦æŠŠçœ‹è¿‡çš„å†…å®¹éƒ½è®°ä½ï¼Œè¿™å®Œå…¨ä¸å¯èƒ½ã€‚</p><p>é‚£åˆ°åº•æ˜¯ä»€ä¹ˆåŸå› è®©æˆ‘å¼€å§‹è®°è¯»ä¹¦ç¬”è®°äº†å‘¢ï¼Ÿâ€èµ°ç¥â€ã€‚æ²¡é”™ï¼Œå°±æ˜¯èµ°ç¥ã€‚æˆ‘çœ‹ä¹¦çš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯è‡ªå·±æ²¡æœ‰é‚£ä¹ˆå¤§å…´è¶£çš„ä¹¦ï¼Œæˆ‘ç»å¸¸æœºæ¢°çš„è¯»ç€ä¹¦ç„¶åæ€è·¯å°±é£åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†ï¼Œå¯èƒ½æ˜¯å…¶ä»–ç›¸å…³çš„çŸ¥è¯†ã€å¯èƒ½æ˜¯æµ·æ‹‰é²å¤§é™†ã€å¯èƒ½æ˜¯ä¹ç•Œæ¹–ã€ä¹Ÿå¯èƒ½å¹»æƒ³ç€è‡ªå·±å»æ‚¬å´–è¾¹ä¸Šçš„éº¦ç”°é‡ŒæŠ“é‚£äº›å¿«è¦æ‰åˆ°æ‚¬å´–ä¸‹çš„å°å­©å„¿äº†ã€‚</p><p>æ‰€ä»¥ä¸ºäº†è®©è‡ªå·±ä¸å†ç»§ç»­èµ°ç¥ä¸‹å»ï¼Œæˆ‘å†³å®šåšç‚¹ä»€ä¹ˆã€‚æœ€å¼€å§‹çš„æ—¶å€™æ˜¯å°è¯•æŠŠè‡ªå·±çœ‹åˆ°çš„ä¸€åˆ‡å†…å®¹éƒ½çœŸæ­£çš„â€è¯»â€å‡ºæ¥ï¼Œè¯»å‡ºå£°æ¥ï¼Œä½†æ˜¯åæ¥å‘ç°è¿™ç§æ–¹å¼ä¸å¤ªé€‚åˆæˆ‘ï¼Œæ¯æ¬¡ä¸€æœ¬æ­£ç»å¾—æŠŠä¹¦é‡Œçš„å†…å®¹ä¸€ä¸ªå­—ä¸€ä¸ªå­—å¿µå‡ºæ¥éƒ½è§‰å¾—å¾ˆå¥‡æ€ªï¼Œåƒæ˜¯å°å­¦ç”Ÿåœ¨ä¸Šè¯­æ–‡è¯¾ä¸€æ ·ã€‚æ”¾å¼ƒè¯»å‡ºå£°æ¥çš„æ“ä½œä¹‹åå°±æƒ³åˆ°äº†è®°ç¬”è®°ï¼Œç›®å‰çœ‹èµ·æ¥è¿™ç§æ–¹æ¡ˆè¿˜æ˜¯ä¸é”™çš„ã€‚</p><h1 id="0X01-æˆ‘å¹³æ—¶æ€ä¹ˆè®°"><a href="#0X01-æˆ‘å¹³æ—¶æ€ä¹ˆè®°" class="headerlink" title="0X01 æˆ‘å¹³æ—¶æ€ä¹ˆè®°"></a>0X01 æˆ‘å¹³æ—¶æ€ä¹ˆè®°</h1><p>æˆ‘è¿™é‡Œç»™å‡ºçš„æ–¹æ¡ˆåªé€‚ç”¨äºè·Ÿæˆ‘ç±»ä¼¼çš„æœ‹å‹ï¼Œå¦‚æœä½ æ˜¯è®¤è®¤çœŸçœŸè¯»ä¹¦ç„¶åæƒ³è¦æ•´ç†å¤§çº²å‘€æ•´ç†çŸ¥è¯†ç‚¹å‘€ä¹‹ç±»çš„ï¼Œé‚£æˆ‘çš„æ–¹æ¡ˆåº”è¯¥æ˜¯å¸®ä¸åˆ°ä½ ï¼ˆä¸è¿‡ä¹Ÿå¯ä»¥çœ‹çœ‹ï¼Œä¸‡ä¸€å‘¢ï¼‰ã€‚æˆ‘ä»‹ç»çš„æ–¹æ¡ˆæ˜¯æˆ‘è‡ªå·±ç”¨è¿‡çš„ï¼Œä¹Ÿå°±ä¸¤ç§ï¼Œå¾ˆç®€å•çš„ã€‚</p><p>é¦–å…ˆæ˜¯å®ä½“ç¬”è®°ï¼Œä¹Ÿå°±æ˜¯åƒåœ¨å­¦æ ¡é‡Œé‚£æ ·ï¼Œå·¦å³å„ä¸€æœ¬ï¼Œä¸€è¾¹çœ‹ä¸€è¾¹è®°ï¼›ç›®å‰æˆ‘æ˜¯ç”¨iPadæ¥ç»Ÿç­¹äº†çœ‹ä¹¦å’Œè®°ç¬”è®°ï¼Œä¹Ÿå°±æ”¾ä¸‹äº†çº¸è´¨ç¬”è®°æœ¬å’Œç”¨äº†å¥½å‡ å¹´çš„kindleï¼ˆç°åœ¨ä»–å¯ä»¥å»åšä»–çš„ä¸“èŒå·¥ä½œï¼šæ³¡é¢ äº†ï¼‰ã€‚æˆ‘è‡ªå·±ç”¨ç”µè„‘çš„æ—¶å€™ä¸ç®¡æ˜¾ç¤ºå™¨å¤šå¤§æˆ‘éƒ½å¾ˆå°‘åˆ†å±ï¼Œä½†æ˜¯åˆ°äº†iPadä¸Šå¼€ä¸ªåˆ†å±ä¸€è¾¹æ˜¯Kindle appä¸€è¾¹æ˜¯godnotesï¼Œæ•ˆç‡è¿˜æ˜¯æŒºé«˜çš„ï¼ˆè¿™é‡Œåº†å¹¸ä¸€ä¸‹ä¹‹å‰çº ç»“è¿‡åè¿˜æ˜¯ä¹°äº†iPad Airï¼Œè¦æ˜¯å½“æ—¶é€‰æ‹©äº†iPad miniçš„è¯åˆ†å±è®°ç¬”è®°æ€•ä¸æ˜¯è®°ç¬”è®°å¾—ç´¯æ­»ä¸ªäººï¼‰ã€‚è¿™å¼ å›¾å°±æ˜¯æˆ‘å¹³æ—¶è®°ç¬”è®°çš„æ—¶å€™ï¼ˆä¸è¦åœ¨æ„å¥½ä¸å¥½çœ‹ã€‚ä»€ä¹ˆï¼Ÿä½ è¯´çœ‹ä¸æ‡‚ï¼Ÿæˆ‘çš„ç¬”è®°æ˜¯ç»™è‡ªå·±çœ‹çš„ï¼Œä½ çœ‹ä¸çœ‹å¾—æ‡‚é—®é¢˜ä¸å¤§ğŸ¤£ï¼‰</p><a id="more"></a><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gehuhyuz0lj31400u0npd.jpg" alt></p><p>å½“ä½ å‡†å¤‡å¥½æ‰€æœ‰è®¾å¤‡äº†ï¼Œè®°å¾—è¦åšå‡ ä»¶äº‹å„¿ï¼š</p><ol><li>æ‹¿å‡ºæ‰‹æœºï¼Œæ‰“å¼€â€ç¦…å®šæ¨¡å¼â€æˆ–è€…â€å†¥æƒ³æ¨¡å¼â€æˆ–è€…ä»€ä¹ˆé¬¼çš„ï¼Œåæ­£å°±æ˜¯é‚£ç§ç±»ä¼¼ç›´æ¥é”å®šä½ æ‰‹æœºï¼Œè®©ä½ ä»€ä¹ˆéƒ½å¹²ä¸äº†çš„æ¨¡å¼ï¼›</li><li>å¦‚æœæ˜¯ç”¨iPadçœ‹ä¹¦ï¼Œæ‰“å¼€ä½ çš„â€å‹¿æ‰°æ¨¡å¼â€ï¼›</li><li>å»ä¸€ä¸ªå®‰é™çš„åœ°æ–¹ï¼Œæ¡Œå­ä¸Šçš„ä¸œè¥¿å°½å¯èƒ½çš„å°‘ï¼Œæœ€å¥½åªæœ‰ä¹¦ã€ç¬”è®°æœ¬å’Œä¸€æ”¯ç¬”ï¼›</li><li>è®©ä½ çš„å°çˆ±åŒå­¦æˆ–è€…Siriæˆ–è€…è°åœ¨ä¸€ä¸ªå°æ—¶åå«ä½ ï¼›</li></ol><p>æˆ‘å¹³æ—¶è®°ç¬”è®°æ€ä¹ˆè¯´å‘¢ã€‚ã€‚ã€‚å«â€æ„è¯†æµâ€å§ã€‚å‡¡äº‹éƒ½å¯ä»¥ç±»æ¯”æˆè½¯ä»¶å¼€å‘ï¼Œæˆ‘æœ€äº†è§£è‡ªå·±çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘çŸ¥é“æ€ä¹ˆåšæ‰å¯¹ã€‚æ­£å› ä¸ºæˆ‘æœ€æ¸…æ¥šè‡ªå·±çš„éœ€æ±‚â€é€šè¿‡æ‘˜æŠ„ä¹¦ä¸Šçš„é‡è¦å†…å®¹å’Œè®°å½•è‡ªå·±çš„æƒ³æ³•æ¥å¼ºåˆ¶è‡ªå·±ä¸èµ°ç¥â€ï¼Œæ‰€ä»¥æˆ‘ä»æ¥ä¸åœ¨ä¹è‡ªå·±çš„ç¬”è®°æ˜¯ä¸æ˜¯çŸ¥è¯†ç‚¹å®Œæ•´ï¼Œæ˜¯ä¸æ˜¯æ’ç‰ˆæ–¹ä¾¿äºŒæ¬¡é˜…è¯»ï¼Œæ˜¯ä¸æ˜¯ä¾¿äºåæœŸæŸ¥æ‰¾ã€‚</p><p>æ‰€ä»¥è¯´æˆ‘è®°ç¬”è®°çš„åŸåˆ™å¾ˆç®€å•ï¼š</p><ol><li>é‡åˆ°ä¹¦ä¸Šå†™çš„â€éå¸¸æœ‰é“ç†ï¼Œéå¸¸å€¼å¾—æ‘˜æŠ„â€çš„å†…å®¹ï¼ŒæŠ„ä¸‹æ¥ï¼Œé€‚å½“å†åŠ ç¬¦å·åŠ é‡ä¸€ä¸‹ï¼›</li><li>é‡åˆ°ä¹¦ä¸Šæå‡ºçš„é—®é¢˜ï¼Œæ¯”å¦‚â€ä»”ç»†æƒ³æƒ³ä½ èº«è¾¹çš„ä¸“å®¶æ˜¯å¦‚ä½•è§£å†³å·¥ä½œä¸­ä»–äººçš„æ‰“æ–­çš„â€ï¼Œæˆ‘å°±ä¼šæŠŠæˆ‘æƒ³åˆ°çš„ç­”æ¡ˆå†™ä¸Šå»ã€‚å› ä¸ºä¸€æ—¦æˆ‘ä¸éœ€è¦è¾“å‡ºå†…å®¹çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½å·æ‡’ä¸å»æ€è€ƒäº†ï¼›</li><li>é‡åˆ°é€»è¾‘å…³ç³»å¤æ‚çš„å†…å®¹ï¼Œç”»ä¸ªå›¾æ•´ç†ï¼›</li><li>çœ‹åˆ°ä¸è®¤åŒçš„è§‚ç‚¹ï¼Œå°†ä¹¦ä¸Šçš„è§‚ç‚¹å’Œæˆ‘è‡ªå·±çš„è§‚ç‚¹éƒ½å†™ä¸Šå»ï¼Œå¹¶ä¸”æ ‡ä¸ªé—®å·ï¼›</li></ol><p>å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œæ•´ä½“æ¥è¯´éå¸¸ç®€å•ï¼Œå¹¶ä¸æ˜¯ä»€ä¹ˆâ€æ­£ç»â€çš„è¯»ä¹¦ç¬”è®°è®°å½•æ³•ï¼Œä¸è¿‡è¿™ç§æ–¹å¼å¯¹æˆ‘æ¥è¯´éå¸¸å¥æ•ˆã€‚</p><h1 id="0X03-èµ„æºå’Œå·¥å…·"><a href="#0X03-èµ„æºå’Œå·¥å…·" class="headerlink" title="0X03 èµ„æºå’Œå·¥å…·"></a>0X03 èµ„æºå’Œå·¥å…·</h1><p>å…ˆä»èµ„æºè¯´èµ·å§ï¼Œç›®å‰æˆ‘çš„ä¹¦ä¸»è¦åˆ†ä¸¤ç§ï¼šäº¬ä¸œå’Œæ·˜å®ä¹°çš„çº¸è´¨ä¹¦ã€äºšé©¬é€Šä¹°çš„ç”µå­ä¹¦ã€‚ä»¥å‰ç”¨Kindleçš„æ—¶å€™åªä¹°ä¸ä¸“ä¸šæŠ€æœ¯æ— å…³æˆ–è€…å…³ç³»ç”šå°çš„ä¹¦ï¼Œå› ä¸ºKindleç¡®å®å¤ªå°äº†è€Œä¸”å‰åç¿»é¡µä¹Ÿå¾ˆä¸æ–¹ä¾¿ã€‚ç°åœ¨ç”¨iPad Airæ›¿æ¢Kindleä¹‹åæ˜æ˜¾ä¹°ç”µå­ä¹¦çš„æ„æ„¿æ¯”åŸæ¥æ›´å¤§äº†ï¼Œç°åœ¨å‡ºäº†ç‰¹åˆ«ç¡¬æ ¸çš„æå…¶ç‰¹æ®Šçš„ä¹¦ï¼Œæˆ‘éƒ½ä¹°ç”µå­ç‰ˆäº†ã€‚ï¼ˆç»å†äº†æ¬å®¶å’Œå¤§åˆ€é˜”æ–§æ•´ç†æˆ¿é—´ä¹‹åï¼Œæ‰å‘ç°çº¸è´¨ä¹¦çœŸçš„å¤ªé‡å¤ªå åœ°æ–¹äº†ï¼‰</p><p>å·¥å…·æ–¹é¢æˆ‘åœ¨iPadä¸Šå‡ ä¹åªç”¨è¿™ä¸¤ä¸ªï¼šKindle appå’ŒGoodnotesã€‚å…¶ä¸­Kindleæ˜¯å› ä¸ºç”µå­ä¹¦å¸‚åœºçš„ä¹¦æ¯”è¾ƒå¤šï¼Œè™½ç„¶ç°åœ¨å¥½å¤šç”µå­ä¹¦å¹³å°ï¼Œä¸è¿‡ä»–ä»¬å¸‚åœºé‡Œçš„ä¹¦éƒ½æ¯”è¾ƒå°‘ï¼Œä¸»è¦è¿˜æ˜¯ä»¥ç•…é”€ä¹¦ä¸ºä¸»ã€‚Goodnotesæ˜¯ç”¨æ¥çœ‹PDFå’Œè®°ç¬”è®°ç”¨çš„ï¼ŒNotabilityä¹Ÿä¹°äº†ï¼Œä¸è¿‡ä¸å¤ªç”¨çš„æƒ¯ã€‚å¦å¤–çš„å·¥å…·å…¶å®ä¹Ÿæœ‰ï¼Œæ¯”å¦‚ç”¨æ¥ç”»æ€ç»´å¯¼å›¾çš„MindNodeï¼Œåœ¨ç”µè„‘ä¸Šç”»å¥½ç›´æ¥ä¼ åˆ°iPadä¸Šç²˜è´´åˆ°Goodnotesï¼Œä½“éªŒå¾ˆæ£’ã€‚ç›®å‰ç”¨ç€ä¸èˆ’æœçš„ä¸€ç‚¹å°±æ˜¯Kindle appå¥½åƒå¹¶ä¸èƒ½æŠŠå›¾ç‰‡æ‹–å‡ºæ¥ï¼Œåœ¨iPadä¸Šå·¦å³åˆ†å±çš„æ—¶å€™å¯ä»¥è½»æ¾å°†Safarié‡Œçš„å›¾é•¿æŒ‰æ‹–åŠ¨åˆ°Goodnotesé‡Œï¼Œå…¶ä»–å¥½å¤šç¨‹åºä¹Ÿéƒ½æ”¯æŒï¼Œä½†æ˜¯Kindleæ˜¯ä¸å¯ä»¥çš„ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯ç‰ˆæƒçš„é—®é¢˜æœ‰é™åˆ¶ï¼Œæå¾—æˆ‘æ¯æ¬¡éƒ½æ˜¯åˆ‡è¿‡å»æˆªå›¾ç„¶åæŠŠæˆªå›¾å‰ªå‡ºæ¥ç²˜è´´ä¸Šå»ï¼Œå¹¸äºè¿™ç§éœ€æ±‚ä¸ç®—é¢‘ç¹ã€‚</p><p>ç¡¬ä»¶å·¥å…·é™¤äº†iPadä»¥å¤–å°±æ˜¯Apple Pencilå’Œä¸€å¼ è†œäº†ã€‚Apple Pencilè·ŸiPadä¸€èµ·è®°ç¬”è®°çœŸçš„è¿˜æŒºèˆ’æœçš„ï¼Œä½†æ˜¯æœ€å¥½ç»™iPadè´´ä¸€å¼ â€ç±»çº¸è†œâ€ï¼Œè¦ä¸ç„¶iPadçš„å±å¹•å¤ªå…‰æ»‘äº†ï¼Œå†™å­—æ€»æ˜¯ä¸å¤ªèˆ’æœã€‚</p><h1 id="0X02-çœŸçš„æœ‰ç”¨å—"><a href="#0X02-çœŸçš„æœ‰ç”¨å—" class="headerlink" title="0X02 çœŸçš„æœ‰ç”¨å—"></a>0X02 çœŸçš„æœ‰ç”¨å—</h1><p>æœ‰æ²¡æœ‰ç”¨è¿˜çœŸä¸å¥½è¯´ï¼Œåæ­£æˆ‘è‡ªå·±çš„ç»¼åˆä½“éªŒæ¥è¯´æœ‰è¿™ä¹ˆå‡ ç‚¹</p><ol><li>çœ‹ä¹¦çš„æ•ˆç‡æ˜æ˜¾ä¸‹é™ï¼Œå› ä¸ºè¦ä¸“å¿ƒï¼Œè¿˜è¦åšç¬”è®°ã€‚ä¼°è®¡æ˜¯ä¹‹å‰çš„ä¸€åŠå·¦å³ï¼›</li><li>å³ä½¿æ˜¯è‡ªå·±çœ‹è¿‡äº†ä¸å¤ªè®°å¾—çš„åœ°æ–¹ï¼Œå›å¤´ä¹±ç¿»ç¿»è‡ªå·±ä¹±è®°çš„ç¬”è®°ä¹Ÿèƒ½å›å¿†èµ·æ¥ä¸å°‘ä¸œè¥¿ï¼›</li><li>ä»¥å‰çœ‹äº†å®ä½“ä¹¦ï¼Œåšåšä¸€æœ¬å°±ä¼šæœ‰æˆå°±æ„Ÿï¼Œåé¢çœ‹äº†ç”µå­ä¹¦å°±æ²¡æœ‰é‚£ä¹ˆå¤§æˆå°±æ„Ÿäº†ã€‚ç°åœ¨å¼€å§‹è®°ç¬”è®°ä¹‹åï¼Œçœ‹çœ‹è‡ªå·±çš„ç¬”è®°ï¼ˆå³ä½¿æ˜¯ç”µå­ç¬”è®°ï¼‰æˆå°±æ„Ÿåˆå›æ¥äº†</li></ol><p>å¦‚æœå„ä½ä¹Ÿæœ‰è·Ÿæˆ‘ç±»ä¼¼çš„å›°æ‰°ï¼Œé‚£ä¹Ÿå¯ä»¥è¯•è¯•æˆ‘çš„æ–¹æ³•ã€‚ä¸ç®¡ç”¨ä¸æ”¶é’±ï¼Œç®¡ç”¨ä¹Ÿä¸æ”¶é’±ğŸ¤©</p>]]></content>
      
      
      
        <tags>
            
            <tag> Read </tag>
            
            <tag> Note </tag>
            
            <tag> Notebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸­è¯¡å¼‚çš„æƒé™ï¼ˆå¥‡æ€ªçš„æƒé™å¢åŠ äº†ï¼‰</title>
      <link href="/2020/04/23/linux-permission/"/>
      <url>/2020/04/23/linux-permission/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><blockquote><p>Linuxè¯¡å¼‚çš„æƒé™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼ŸLinuxç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼Œ ä½†æ˜¯è¯¡å¼‚çš„æƒé™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿä¸‹é¢å°±è®©å°ç¼–å¸¦å¤§å®¶ä¸€èµ·äº†è§£å§ã€‚</p><p>Linuxè¯¡å¼‚çš„æƒé™ï¼Œå…¶å®å°±æ˜¯è¯¡å¼‚çš„æƒé™äº†ã€‚é‚£ä¹ˆLinuxä¸ºä»€ä¹ˆä¼šè¯¡å¼‚çš„æƒé™ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¾ˆå¥½å¥‡æ˜¯æ€ä¹ˆå›äº‹ã€‚å¤§å®¶å¯èƒ½ä¼šæ„Ÿåˆ°å¾ˆæƒŠè®¶ï¼ŒLinuxæ€ä¹ˆä¼šè¯¡å¼‚çš„æƒé™å‘¢ï¼Ÿä½†äº‹å®å°±æ˜¯è¿™æ ·ï¼Œå°ç¼–ä¹Ÿæ„Ÿåˆ°éå¸¸æƒŠè®¶ã€‚ é‚£ä¹ˆè¿™å°±æ˜¯å…³äºLinuxè¯¡å¼‚çš„æƒé™çš„äº‹æƒ…äº†ï¼Œå¤§å®¶æœ‰æ²¡æœ‰è§‰å¾—å¾ˆç¥å¥‡å‘¢ï¼Ÿ</p><p>çœ‹äº†ä»Šå¤©çš„å†…å®¹ï¼Œå¤§å®¶æœ‰ä»€ä¹ˆæƒ³æ³•å‘¢ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰å°ç¼–ä¸€èµ·è®¨è®ºå“¦ã€‚</p></blockquote><p>è¯´æ­£äº‹è¯´æ­£äº‹å„¿ã€‚è¯´èµ·Linuxæƒé™å¤§å®¶è‚¯å®šï¼šâ€è¿™æˆ‘çŸ¥é“å•Šï¼Œä¸å°±æ˜¯rwxå—ï¼Œræ˜¯è¯»ã€wæ˜¯å†™ã€xæ˜¯æ‰§è¡Œã€‚å°±è¿™ï¼Ÿâ€å½“ç„¶ä¸åªæ˜¯è¿™ä¸ªï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯è¦ä»æœ€åŸºç¡€çš„å¼€å§‹è¯´èµ·æ¥ã€‚</p><a id="more"></a><h1 id="0X01-åŸºç¡€æƒé™éƒ¨åˆ†"><a href="#0X01-åŸºç¡€æƒé™éƒ¨åˆ†" class="headerlink" title="0X01 åŸºç¡€æƒé™éƒ¨åˆ†"></a>0X01 åŸºç¡€æƒé™éƒ¨åˆ†</h1><p>é¦–å…ˆæœ€åŸºç¡€çš„æƒé™å°±æ˜¯ <code>rwx</code> è¿™ç§ï¼Œä¸‰ç»„æƒé™é’ˆå¯¹:æ‰€ å±ç”¨æˆ·ã€æ‰€å±ç”¨æˆ·çš„ç»„ã€å…¶ä»–ç”¨æˆ·ï¼Œæ¯ç»„3ä½(å¯¹åº” äºŒè¿›åˆ¶ä½)ã€‚æ­£å› ä¸ºå¯¹åº”äºŒè¿›åˆ¶ä½æ‰€ä»¥<code>rwx</code>å°±æ˜¯ä¸‰ä¸ª äºŒè¿›åˆ¶ä½å‡ä¸º1çš„7;<code>r-x</code>å°±æ˜¯å¯¹åº”çš„101ä¹Ÿå°±æ˜¯5;<code>r-</code> å°±æ˜¯100ä¹Ÿå°±æ˜¯4</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43ddofakj315g0iu16s.jpg" alt="LinuxåŸºç¡€æƒé™"></p><p>æœ€åŸºç¡€çš„rwxæƒé™å°±ä¸å¤šè¯´äº†ï¼Œè¯´ä¸€ä¸ªä¸æ˜¯æ‰€æœ‰äººéƒ½ çŸ¥é“çš„ï¼Œçœ‹ä¸‹é¢è¿™å¼ æˆªå›¾:è¿™ä¸ªå«åšlinux.pdfçš„æ–‡ ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„æƒé™æ˜¯777ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è¯•å›¾åˆ é™¤å®ƒçš„æ—¶å€™ï¼Œå‘ç°å®Œå…¨ä¸èƒ½è¡Œï¼Œé‚£æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¾ˆè‡ªç„¶çš„è®¤ä¸ºå¯¹ä¸€ä¸ªæ–‡ä»¶æœ‰rwxçš„æƒé™å°±æ˜¯æœ‰æ‰€æœ‰æƒé™äº†ï¼Œå…¶å®è¿™ä¹ˆç†è§£é—®é¢˜ä¸å¤§ã€‚ä½†æ˜¯è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œåˆ é™¤ä¸€ä¸ª ç›®å½•é‡Œçš„æ–‡ä»¶ï¼Œå®é™…ä¸Šæ˜¯ä¸æ˜¯åœ¨å¯¹è¿™ä¸ªç›®å½•è¿›è¡Œwæ“ ä½œå‘¢?<br><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43jtgw7xj30py06yq73.jpg" alt></p><p>è¿”å›æ¥å†çœ‹è¿™ä¸ªç›®å½•çš„æƒé™å°±æ˜ç™½äº†ã€‚æ˜¯çš„ï¼ŒåŸºäºLinuxä¸­â€ä¸‡ç‰©çš†æ–‡ä»¶â€çš„æ€è·¯ï¼Œå¯ä»¥çŸ¥é“ç›®å½•å…¶å®ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œæ‰€ä»¥åˆ é™¤ç›®å½•é‡Œçš„æ–‡ä»¶å°±æ˜¯åœ¨ä¿®æ”¹è¿™ä¸ªç›®å½•ï¼Œè¿›è€Œå¾—åˆ°ç»“è®ºï¼šåˆ é™¤æ–‡ä»¶æ˜¯éœ€è¦æ‹¥æœ‰å¯¹æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„wæƒé™æ‰è¡Œçš„ã€‚<br><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43gladatj30v605agt8.jpg" alt></p><h1 id="0X02-ACL"><a href="#0X02-ACL" class="headerlink" title="0X02 ACL"></a>0X02 ACL</h1><p>ç°åœ¨å†æ¥çœ‹å¦ä¸€ä¸ªé—®é¢˜:æˆ‘ä»¬çœ‹è¿™ä¸ªå«<code>macOS.txt</code>çš„æ–‡ä»¶ï¼Œåˆæ˜¯ä¸€ä¸ª777æƒé™çš„æ–‡ä»¶ã€‚æŒ‰ç…§ä¸Šé¢æåˆ°çš„å†…å®¹ï¼Œæˆ‘ä»¬å°±ç®—ä¸èƒ½åˆ äº†å®ƒèµ·ç ä¹Ÿèƒ½ç»™å®ƒå†™æˆç©ºæ–‡ä»¶æ˜¯å§ï¼Œå› ä¸ºæ¯•ç«Ÿæœ‰wæƒé™ã€‚ä½†æ˜¯ä½ çœŸçš„æœ‰è¿™ä¸ªæ–‡ä»¶çš„wæƒ é™å—?å½“ä½ å°è¯•ç»™è¿™ä¸ªæ–‡ä»¶å†™å…¥å†…å®¹çš„æ—¶å€™ç›´æ¥å°±æŠ¥é”™äº†ï¼Œå®Œå…¨æ²¡æœ‰æƒé™ã€‚æ˜¯çš„ï¼Œä¹Ÿè®¸æœºæ™ºçš„ä½ æ³¨æ„åˆ°äº†ï¼Œé—®é¢˜å°±å‡ºç°åœ¨ <code>-rwxrwxrwx+</code> ä¸­æœ€åçš„<code>+</code>é‚£é‡Œã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43o1s5o6j30za08c7fp.jpg" alt></p><p>å®é™…ä¸Šæ˜¯å› ä¸ºLinuxä¸Šè¿˜æœ‰ä¸€ä¸ªå«åšACLçš„æœºåˆ¶ã€‚ç³»ç»Ÿç”¨æˆ·è‚¯å®šä¸èƒ½å•çº¯é€šè¿‡ç”¨æˆ·å’Œç»„æ¥å®Œæˆçš„ï¼Œæ­£æ˜¯é€šè¿‡ ACLçš„è¿™ä¸ªæœºåˆ¶å¯ä»¥åœ¨ä¼ ç»Ÿçš„rwxæƒé™çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰© å±•ã€‚å¯ä»¥ä½¿ç”¨ACLåœ¨rwxä¹‹å¤–ç»™å•ç‹¬ä¸€ä¸ª/å¤šä¸ªç”¨æˆ·/ç»„ æŒ‡å®šæƒé™ã€‚æ¯”å¦‚ä¸‹é¢è¿™ç§ç”¨æ³•:<code>setfacl -m u:shawn:--- macOS.txt</code>æ‹†åˆ†å¼€çœ‹è¿™ä¸ªå‘½ä»¤ï¼Œç¬¬ä¸€ä¸ªå‚æ•° -mæŒ‡ çš„æ˜¯(modify)ï¼Œåé¢çš„<code>u:shawn:---</code>å°±æ˜¯è¯´ <code>ç”¨æˆ·: shawn:ä¸‰æ— æƒé™</code> ã€‚å†ä½¿ç”¨getfaclçœ‹ä¸€ä¸‹æ–‡ä»¶å…·ä½“æƒé™ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰€å±äººå’Œç»„éƒ½æ˜¯rootï¼Œç”¨æˆ·ã€ç»„å’Œå…¶ ä»–äººçš„æƒé™éƒ½æ˜¯777ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ª<code>user:shawn:---</code>ï¼Œè¿™ä¸ªå°±æ„å‘³ç€åªæœ‰è¿™ä¸ªç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™çš„ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43oxve6sj30yq0cy4ai.jpg" alt></p><h1 id="0X03-éšè—å±æ€§"><a href="#0X03-éšè—å±æ€§" class="headerlink" title="0X03 éšè—å±æ€§"></a>0X03 éšè—å±æ€§</h1><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªDELETE_MEçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ä»ç„¶è¿˜æ˜¯æœ‰777çš„æƒé™ï¼Œä¹Ÿæ²¡æœ‰é€šè¿‡ACLé™åˆ¶å•ä¸ªç”¨æˆ·çš„æƒé™ï¼Œè€Œä¸”å½“å‰ç›®å½•æˆ‘ä¹Ÿæœ‰wæƒé™ã€‚é‚£æˆ‘ä»¬æ¥å°è¯•åˆ é™¤æˆ–è€…é‡å†™ä¸€ä¸‹å†…å®¹å¥½äº†ï¼Œå‘ç°è¿˜æ˜¯è¿˜æ˜¯è¿˜æ˜¯è¿˜æ˜¯æ²¡æœ‰æƒé™ã€‚ã€‚ã€‚ã€‚é‚£è¿™å›åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43pp3dfuj310i0pm1kx.jpg" alt></p><p>æ˜¯çš„ï¼Œåˆæ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ä¸œâ»„:<code>attr</code>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>lsattr filename</code>æ¥æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„éšè—å±æ€§ï¼Œæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°çš„æ˜¯iå’Œeã€‚å…¶ä¸­eæ˜¯ç³»ç»Ÿåº•å±‚çš„è‡ªå¸¦çš„ï¼Œ æœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªå·±æŸ¥é˜…ä¸€ä¸‹èµ„æ–™ã€‚åˆšåˆšæ–‡ä»¶åˆ ä¸æ‰ æ”¹ä¸äº†æ˜¯å› ä¸ºè¿™ä¸ªiã€‚è¿™ä¸ªiçš„åŠŸèƒ½å°±æ˜¯: <strong>immutable ä¸å¯æ”¹å˜çš„</strong> ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åˆ é™¤ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹å†…å®¹ã€‚ ä½¿ç”¨<code>chattr -I filename</code>å°±å¯ä»¥å°†è¿™ä¸ªæ ‡è®°åˆ é™¤äº†ï¼Œç„¶ åè¿™ä¸ªæ–‡ä»¶ä¹Ÿå°±å¯ä»¥æ”¹åŠ¨äº†ã€‚å¦‚æœéœ€è¦å¢åŠ è¿™ä¸ªæ ‡è®° çš„è¯æ˜¯<code>chattr +I filename</code>ä¹Ÿå°±æ˜¯è¯´ç”¨åŠ å‡å·æ¥æ§åˆ¶éš è—çš„æ ‡è®°ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ç­‰å·<code>chattr =I filename</code>çš„æ–¹å¼æ¥ç›´æ¥é‡å†™æ‰€æœ‰çš„æ ‡è®°ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43qbpmjij30zw08cn6h.jpg" alt></p><p>å…³äºè¿™ä¸ªattrçš„æ‰€æœ‰å‚æ•°å†…å®¹<span class="exturl" data-url="aHR0cHM6Ly9saW51eC5kaWUubmV0L21hbi8xL2NoYXR0cg==" title="https://linux.die.net/man/1/chattr">éƒ½åœ¨è¿™é‡Œ<i class="fa fa-external-link"></i></span></p><h1 id="0X04-å¥‡æ€ªçš„æƒé™çŸ¥è¯†å¢åŠ äº†"><a href="#0X04-å¥‡æ€ªçš„æƒé™çŸ¥è¯†å¢åŠ äº†" class="headerlink" title="0X04 å¥‡æ€ªçš„æƒé™çŸ¥è¯†å¢åŠ äº†"></a>0X04 å¥‡æ€ªçš„æƒé™çŸ¥è¯†å¢åŠ äº†</h1><p>åˆ°æ­¤ä¸ºæ­¢è¿™äº›éšè—åœ¨æœ€åŸºç¡€çš„rwxæƒé™ä¹‹å¤–çš„å¥‡æ€ªçš„æƒé™ï¼ˆå¹¶ä¸å…¨ï¼Œå…¶å®è¿˜æœ‰å…¶ä»–çš„ï¼‰å°±è¯´å®Œäº†ï¼Œå¸Œæœ›å¤§å®¶èƒ½æœ‰æ‰€æ”¶è·ï½</p><p>å¤‡æ³¨1:æœ‰äº›Linuxå‘è¡Œç‰ˆæœ¬æ²¡æœ‰é»˜è®¤é™„å¸¦è¿™ä¸ªï¼Œæˆ‘å±• ç¤ºæ˜¯ç”¨çš„Fedoraæ‰€ä»¥è¦é€šè¿‡dnfè£…ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1ge43t8b5fvj32hc0quu0x.jpg" alt></p><p>å¤‡æ³¨2:é™¤äº†rwxçš„åŸºç¡€æƒé™éƒ¨åˆ†ä»¥å¤–ï¼ŒACLå’Œatträ¸¤ éƒ¨åˆ†å†…å®¹æ˜¯ä»…é€‚ç”¨äºLinuxå‘è¡Œç‰ˆæœ¬çš„ï¼ŒmacOSå¹¶ä¸ é€‚ç”¨ï¼Œå¦‚æœéœ€è¦å­¦ä¹ æˆ–è€…æµ‹è¯•çš„è¯è¦æä¸€å°Linuxæ‰ è¡Œã€‚</p><p>å¤‡æ³¨3:ACLå’Œattrçš„ç›¸å…³èµ„æ–™:</p><ol><li><span class="exturl" data-url="aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvc2V0ZmFjbA==" title="https://man.linuxde.net/setfacl">https://man.linuxde.net/setfacl<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvbHNhdHRy" title="https://man.linuxde.net/lsattr">https://man.linuxde.net/lsattr<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvY2hhdHRy" title="https://man.linuxde.net/chattr">https://man.linuxde.net/chattr<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9saW51eC5kaWUubmV0L21hbi8xL2NoYXR0cg==" title="https://linux.die.net/man/1/chattr">https://linux.die.net/man/1/chattr<i class="fa fa-external-link"></i></span></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Permission </tag>
            
            <tag> ACL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®©è‡ªå·±çš„Linux/macOSç»ˆç«¯æ›´å¥½ç”¨</title>
      <link href="/2020/04/19/terminal/"/>
      <url>/2020/04/19/terminal/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-è§†é¢‘åœ¨è¿™é‡Œ-ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶"><a href="#0X00-è§†é¢‘åœ¨è¿™é‡Œ-ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶" class="headerlink" title="0X00 è§†é¢‘åœ¨è¿™é‡Œ ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶"></a>0X00 <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUpBNDExYjdkcC8=" title="https://www.bilibili.com/video/BV1JA411b7dp/">è§†é¢‘åœ¨è¿™é‡Œ<i class="fa fa-external-link"></i></span> ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶</h1><p>è¿™ç¯‡åšå®¢è¦é…åˆ<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUpBNDExYjdkcC8=" title="https://www.bilibili.com/video/BV1JA411b7dp/">å‘åœ¨bilibiliçš„è§†é¢‘<i class="fa fa-external-link"></i></span>æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨<code>~/.zshrc</code>çš„ã€‚å¤§å®¶æœ‰é—®é¢˜ç›´æ¥åœ¨è§†é¢‘ä¸‹é¢ç•™è¨€æˆ–è€…ç›´æ¥ç»™æˆ‘ç§ä¿¡å¥½äº†ï½</p><a id="more"></a><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># system env</span></span><br><span class="line"><span class="built_in">export</span> ZSH=<span class="string">"/Users/shawn/.oh-my-zsh"</span></span><br><span class="line"><span class="built_in">export</span> LANGUAGE=en_US</span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"><span class="comment"># ZSH_THEME="agnoster"</span></span><br><span class="line">ZSH_THEME=<span class="string">"powerlevel10k/powerlevel10k"</span></span><br><span class="line">EDITOR=/usr/bin/vim</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/Library/Python/3.7/bin</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/Library/Python/2.7/bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HIST_STAMPS=<span class="string">"yyyy-mm-dd"</span></span><br><span class="line">HISTFILESIZE=100000</span><br><span class="line">HISTFILE=~/.zsh_history</span><br><span class="line"></span><br><span class="line"><span class="comment"># zsh plugin</span></span><br><span class="line">plugins=(</span><br><span class="line">    z</span><br><span class="line">    git</span><br><span class="line">    docker</span><br><span class="line">    fabric</span><br><span class="line">    extract</span><br><span class="line">    thefuck</span><br><span class="line">    fzf-zsh</span><br><span class="line">    git-open</span><br><span class="line">    colored-man-pages</span><br><span class="line">    zsh-autosuggestions</span><br><span class="line">    zsh-syntax-highlighting</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># alias for simple command</span></span><br><span class="line"><span class="built_in">alias</span> py2=<span class="string">'/Users/shawn/Library/Python/2.7/bin/ipython2'</span></span><br><span class="line"><span class="built_in">alias</span> py=<span class="string">'/Users/shawn/Library/Python/3.7/bin/ipython3'</span></span><br><span class="line"><span class="built_in">alias</span> cat=<span class="string">'/usr/local/bin/bat'</span></span><br><span class="line"><span class="built_in">alias</span> down=<span class="string">'aria2c -x16 -j4'</span></span><br><span class="line"><span class="built_in">alias</span> me=<span class="string">"cd <span class="variable">$HOME</span>/Workstadion/ &amp;&amp; ls"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># alias to source command</span></span><br><span class="line"><span class="built_in">alias</span> _cat=<span class="string">'/bin/cat'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ctrl + n autosuggest</span></span><br><span class="line"><span class="built_in">bindkey</span> <span class="string">'^n'</span> autosuggest-accept</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker</span></span><br><span class="line"><span class="function"><span class="title">attach</span></span>() &#123;</span><br><span class="line">  docker <span class="built_in">exec</span> -it `docker ps | grep $* | awk -F <span class="string">' '</span> <span class="string">'&#123;print $1&#125;'</span>` bash</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">attach_django</span></span>() &#123;</span><br><span class="line">  docker <span class="built_in">exec</span> -it `docker ps | grep $* | awk -F <span class="string">' '</span> <span class="string">'&#123;print $1&#125;'</span>` python manage.py shell</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">git_set_proxy</span></span>() &#123;</span><br><span class="line">  git config --global http.proxy <span class="string">'socks5://127.0.0.1:1080'</span></span><br><span class="line">  git config --global https.proxy <span class="string">'socks5://127.0.0.1:1080'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">git_unset_proxy</span></span>() &#123;</span><br><span class="line">  git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">  git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">json</span></span>() &#123;</span><br><span class="line">    <span class="comment"># echo `xclip -o` | jq   # Linux</span></span><br><span class="line">    <span class="built_in">echo</span> `pbpaste` | jq    <span class="comment"># macOS</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.</span></span><br><span class="line">[[ ! -f ~/.p10k.zsh ]] || <span class="built_in">source</span> ~/.p10k.zsh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
            <tag> macOS </tag>
            
            <tag> Terminal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¹´åº¦æ€»ç»“</title>
      <link href="/2019/12/31/2019-bye/"/>
      <url>/2019/12/31/2019-bye/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>2020å¹´è¦æ¥äº†ï¼Œå¬èµ·æ¥è¿™æ˜¯ä¸ªå¤šç§‘å¹»çš„å¹´å·å•Šã€‚ã€Šé“¶ç¿¼æ€æ‰‹ã€‹é‡Œè¯´2019å¹´åº•äººç±»å°±æœ‰å¼ºäººå·¥æ™ºèƒ½äº†ï¼Œå¯ä»¥ç©¿æ¢­å®‡å®™äº†ï¼Œç”šè‡³å¯ä»¥æ˜Ÿé™…æ®–æ°‘äº†ã€‚ç„¶è€Œç°åœ¨å°±æ˜¯2019å¹´æœ€åä¸€å¤©äº†ï¼Œæˆ‘çš„å°çˆ±åŒå­¦è¿˜æ˜¯åƒæ™ºéšœä¸€æ ·ç»å¸¸å¬ä¸æ‡‚æˆ‘è¯´è¯ã€‚</p><p>æ¢ä¸ªè§’åº¦æƒ³ä¸€æƒ³ï¼Œ90åæ˜¯ä¸æ˜¯ä¼šè§‰å¾—60åå·²ç»ç®—æ˜¯è€å¹´äººäº†ï¼›é‚£ä¹ˆç›¸åŒæ—¶é—´å·®ç®—ä¸‹æ¥20åä¹Ÿä¼šè§‰å¾—æˆ‘ä»¬90åæ˜¯è€äººï¼Œç„¶è€Œç¬¬ä¸€ä¸ª20åè¿˜æœ‰ä¸€ä¸ªå¤šå°æ—¶å°±å‡ºç”Ÿäº†å‘¢ã€‚</p><h1 id="0X01-2019å¹´åº¦åˆ†æ"><a href="#0X01-2019å¹´åº¦åˆ†æ" class="headerlink" title="0X01 2019å¹´åº¦åˆ†æ"></a>0X01 2019å¹´åº¦åˆ†æ</h1><p>2019å¹´æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åšæ•´å¹´çš„è§„åˆ’ï¼Œå¤§æ¦‚è¿›åº¦æ˜¯è¿™æ ·çš„ã€‚æ­£æ‰€è°“â€œå–æ³•å…¶ä¸Šï¼Œä»…å¾—å…¶ä¸­ï¼›å–æ³•å…¶ä¸­ï¼Œä»…å¾—å…¶ä¸‹â€ï¼Œæ‰€ä»¥ç»™è‡ªå·±çš„ç›®æ ‡å®šé«˜ä¸€äº›ç”šè‡³è¶…å‡ºè‡ªå·±çš„èƒ½åŠ›ä¹Ÿæ²¡ä»€ä¹ˆä¸å¥½çš„ï¼Œè¿™æ ·å¯ä»¥è®©è‡ªå·±å®Œæˆç›®æ ‡çš„åŠ¨åŠ›æœ€å¤§åŒ–çš„å˜›ï¼ˆå…¶å®ä¹Ÿç®—æ˜¯ç»™è‡ªå·±æ²¡å®Œæˆç›®æ ‡æ‰¾ä¸€ä¸ªå€Ÿå£ï¼Œå“ˆå“ˆå“ˆï¼‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é˜…è¯»20æœ¬ä¹¦ã€å®Œæˆã€‘</span><br><span class="line">ä¸“ä¸šè¿›é˜¶ï¼ˆå­¦ä¹ äº†è§£æ–°æŠ€æœ¯ï¼‰ã€5/7ã€‘</span><br><span class="line">äº†è§£äº”ä¸ªæ–°é¢†åŸŸã€4/5ã€‘</span><br><span class="line">æ’°å†™30ç¯‡åšå®¢ï¼ˆåŒ…å«20ç¯‡æŠ€æœ¯ç±»ï¼‰ã€27/30ã€‘</span><br><span class="line">è§‚çœ‹50éƒ¨ç”µå½±ï¼ˆåŒ…å«25éƒ¨è±†ç“£top250ï¼‰ã€47/50ã€‘</span><br><span class="line">å‡é‡è‡³75KGï¼ˆå…±å‡10KGï¼‰ã€5/10ã€‘</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒå–œæ¬¢å¯¹è‡ªå·±ç”Ÿæ´»åšè®¡åˆ’çš„äººï¼Œä¹‹å‰æˆ‘æ²¡æœ‰è®¡åˆ’çš„æ—¶å€™å°±è‡ªå·±è¶´åœ¨åºŠä¸Šç©æ‰‹æœºç”šè‡³éƒ½èƒ½ç©ä¸€ä¸‹åˆã€‚æ‰€ä»¥ä»Šå¹´å¹´åˆçš„æ—¶å€™å°±ç»™è‡ªå·±å®šäº†ä¸€ç³»åˆ—çš„ç›®æ ‡ï¼Œè¯•ç€æ‰“å¡å¼è¿‡è¿™ä¸ª2019ï¼Œç»“æœå‘ç°æ•ˆæœè¿˜æ˜¯æŒºå¥½çš„ã€‚</p><p>å…¶ä¸­30ç¯‡åšå®¢æˆ‘è§‰å¾—æ˜¯å¯ä»¥æ¨èç»™åŒæ ·å†™åšå®¢çš„åŒå­¦çš„ï¼Œå…¶å®ä¸€å¹´ä¸‹æ¥å†™30ç¯‡åšå®¢è€Œä¸”åˆä¸éƒ½æ˜¯æŠ€æœ¯ç±»çš„å¹¶æ²¡æœ‰å¾ˆéš¾ã€‚è¿™æ ·çš„è¯ä¸ä»…å¯ä»¥è®©è‡ªå·±çš„åšå®¢æ›´é¥±æ»¡è¿˜æ›´å¯ä»¥é€¼è¿«è‡ªå·±å­¦ä¹ ï¼Œå¤§å®¶ä¸€å®šéƒ½ä¼šæœ‰è¿‡é‚£ç§è‡ªå·±è§‰å¾—çœ‹äº†å‡ ç¯‡åšå®¢æ–‡æ¡£åˆå†™äº†å‡ è¡Œä»£ç éªŒè¯å°±è§‰å¾—è‡ªå·±å›äº†çš„æ—¶å€™å§ã€‚å…¶å®è¿™ç§æ—¶å€™å¦‚æœè®¡åˆ’æŠŠè¿™éƒ¨åˆ†æ•´ç†æˆåšå®¢çš„è¯ï¼Œå°±å¯ä»¥å¤§å¹…åº¦æå‡è‡ªå·±çš„å­¦ä¹ æ•ˆæœï¼Œæ¯•ç«Ÿè‡ªå·±ä¹Ÿä¸å¯èƒ½ä¹±å†™ä¸€é€šå°±å‘è¡¨äº†ã€‚æƒ³å¿…ä¹Ÿéƒ½çŸ¥é“é‚£å¥â€œæ•™åˆ«äººçš„åŒæ—¶ä¹Ÿéå¸¸èƒ½æå‡è‡ªå·±â€ï¼Œå…¶å®è¿™é‡Œçš„é“ç†æ˜¯ä¸€æ ·çš„ã€‚æˆ‘æ¯æ¬¡å†™åšå®¢éƒ½æ˜¯æƒ³å°½å¯èƒ½æŠŠäº‹æƒ…è¯´æ¸…æ¥šè¯´æ˜ç™½ï¼Œå¦‚æœè¿‡ç¨‹ä¸­å‘ç°è‡ªå·±è¯´ä¸æ˜ç™½é‚£å°±åªæœ‰ç»§ç»­ç ”ç©¶è¿™ä¸ªä¸œè¥¿ï¼Œç›´åˆ°èƒ½è§£é‡Šç»™åˆ«äººä¸ºæ­¢ã€‚æ‰€ä»¥è¯´ç¨‹åºå‘˜è‡ªå·±å†™åšå®¢ä¼ æˆè‡ªå·±çš„çŸ¥è¯†å’Œç»éªŒå‡ ä¹å°±æ˜¯ç™¾åˆ©è€Œæ— ä¸€å®³çš„ã€‚</p><p>è§‚çœ‹25éƒ¨è±†ç“£top250çš„ç”µå½±ä¹Ÿéå¸¸æ£’çš„ï¼Œå†ç»“åˆå‰é¢20æœ¬ä¹¦é‡ŒåŒ…å«çš„é‚£æœ¬<span class="exturl" data-url="aHR0cHM6Ly9ib29rLmRvdWJhbi5jb20vc3ViamVjdC8yMzI2NDAzLw==" title="https://book.douban.com/subject/2326403/">ã€Šè®¤è¯†ç”µå½±ã€‹ISBN: 9787506287081<i class="fa fa-external-link"></i></span>ä¹¦ï¼Œæ„Ÿè§‰è¿‘ä¸€å¹´æ¥å¯¹ç”µå½±è¶Šæ¥è¶Šäº†è§£äº†ï¼Œæ›´å¤šçš„ä¼šå»çœ‹ç”µå½±é‡Œå¯¼æ¼”æƒ³è¦è¡¨è¾¾çš„ä¸œè¥¿è€Œä¸æ˜¯ç®€ç®€å•å•çš„æ•…äº‹äº†ã€‚è¿™æœ¬ä¹¦ä¹Ÿéå¸¸æ¨èç»™å–œæ¬¢çœ‹ç”µå½±çš„åŒå­¦ï¼Œé‡Œé¢ä»å¤šä¸ªè§’åº¦ä»‹ç»äº†ç”µå½±çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯¹ç†è§£ç”µå½±æœ‰éå¸¸æ£’çš„å¸®åŠ©ã€‚</p><p>äº†è§£æ–°é¢†åŸŸå°±æ›´æœ‰æ„æ€äº†ã€‚ç°åœ¨ç½‘ç»œè¿™ä¹ˆå‘è¾¾ï¼ˆå¬èµ·æ¥å¥½è±¡æ˜¯2005å¹´çš„å°è¯å•Šï¼‰ï¼Œå‡ ä¹æ˜¯æƒ³è¦äº†è§£çš„ä»»ä½•ä¸€ä¸ªé¢†åŸŸéƒ½ä¼šæœ‰å¯¹åº”é¢†åŸŸçš„å¤§ä½¬åšç§‘æ™®ï¼Œç”šè‡³è¿˜ä¼šæœ‰å›½é™…ä¸€æµé™¢æ ¡æ¨å‡ºçš„MOOCå¯ä»¥å­¦ã€‚æƒ³è¦äº†è§£ä¸€ä¸ªæ–°é¢†åŸŸçš„æˆæœ¬è¶Šæ¥è¶Šä½äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯æœç´¢å¼•æ“è§£å†³ä¸äº†çš„ï¼ˆä»€ä¹ˆ  ä½ è¯´ç™¾åº¦ï¼Ÿæ‰“æ‰°äº†ï¼‰ï¼Œå°¤å…¶æ˜¯å¯¹æˆ‘è¿™ç§å¥½å¥‡å®å®ï¼ˆå®å®ï¼Ÿï¼‰æ¥è¯´ç®€ç›´å¤ªæ£’äº†ã€‚</p><h1 id="0X02-2019å€¼å¾—çºªå¿µ"><a href="#0X02-2019å€¼å¾—çºªå¿µ" class="headerlink" title="0X02 2019å€¼å¾—çºªå¿µ"></a>0X02 2019å€¼å¾—çºªå¿µ</h1><p>ä»Šå¹´æœ‰ä»€ä¹ˆç‰¹æ®Šçš„äº‹æƒ…å‘ç”Ÿå—ï¼Ÿè®©æˆ‘ä»”ç»†æƒ³æƒ³â€¦â€¦å¥½å¤šéƒ½æ¯”è¾ƒç§äººï¼Œè¯´å‡ ä¸ªä¸é‚£ä¹ˆç§äººçš„å§ã€‚</p><ol><li>å¹´åˆçš„æ—¶å€™è€ƒäº†çº¢åå­—ä¼šçš„æ€¥æ•‘å‘˜è¯ä¹¦ï¼ŒçœŸå¸Œæœ›æ°¸è¿œä¹Ÿç”¨ä¸åˆ°è¿™ä¸ªä¸œè¥¿ï¼›</li><li>æ¢äº†ä¸€å°4æ ¸8çº¿ç¨‹32Gå†…å­˜çš„ç”µè„‘ï¼ˆè¿™ä¹Ÿç®—å¾ˆå€¼å¾—çºªå¿µäº†å“ˆå“ˆå“ˆå“ˆï¼‰ï¼›</li><li>è·Ÿå»å¹´æ¯”èµ·æ¥ï¼Œä»Šå¹´çœŸæ­£å±äºè‡ªå·±çš„æ—¶é—´å¤šäº†ä¸å°‘ï¼Œä¹Ÿå°±åšäº†ä¸å°‘é¥­ï¼Œå¨è‰ºç²¾è¿›å“ˆå“ˆï¼›</li><li>æˆ‘æˆUPä¸»äº†ï¼Œå½“æ—¶ä¹°ç”µè„‘å‘ç°ç½‘ä¸ŠThinkpad T480çš„è¯„æµ‹å¾ˆå°‘ï¼Œè·å–ä¸åˆ°é‡è¦ä¿¡æ¯ï¼Œå°±è‡ªå·±å½•äº†ä¸€ä¸ªï¼Œç°åœ¨ä½¿ç”¨ä½“éªŒå’Œæ‹†æœºè§†é¢‘ä¸€å…±æ’­æ”¾é‡éƒ½æœ‰å…­ä¸‡äº†ï¼›</li><li>å› ä¸ºã€Šè„±å£ç§€å¤§ä¼šã€‹çš„ç¼˜æ•…ï¼Œå»çœ‹äº†æœ¬åœ°çš„ä¸€åœºçº¿ä¸‹è„±å£ç§€ï¼Œè™½ç„¶å½“æ—¶æ²¡æŠ±å¤ªå¤§æœŸæœ›ä½†æ˜¯ç»“æœå´æ„å¤–çš„å¥½ï¼Œå¤§å®¶æœ‰å…´è¶£çš„å¯ä»¥è¯•è¯•çº¿ä¸‹è„±å£ç§€ï¼›</li><li>å–æ‰PS4æ¢äº†ä¸€å°Switchï¼ˆä¸æ˜¯PS4ä¸å¥½ï¼Œæ˜¯æœ€è¿‘æƒ³ç©çš„PS4æ¸¸æˆéƒ½ç©è¿‡äº†ï¼Œæ­£å¥½ç©Switchç­‰æ˜å¹´çš„PS5ï¼‰</li></ol><h1 id="0X03-2019çœ‹åˆ°çš„å¥½ç”µå½±"><a href="#0X03-2019çœ‹åˆ°çš„å¥½ç”µå½±" class="headerlink" title="0X03 2019çœ‹åˆ°çš„å¥½ç”µå½±"></a>0X03 2019çœ‹åˆ°çš„å¥½ç”µå½±</h1><p>è¿™é‡Œç»™å¤§å®¶æ¨èä¸€äº›ä»Šå¹´çœ‹è¿‡çš„ç”µå½±ï¼Œéƒ½æ˜¯æˆ‘è§‰å¾—éå¸¸æ£’çš„ï¼Œè±†ç“£top250é‡Œçš„å°±ä¸ç®—äº†å“ˆã€‚</p><p>ã€Šåˆ©åˆƒå‡ºé˜ã€‹ï¼šè¿™æ˜¯ä¸€éƒ¨æ‚¬ç–‘ç”µå½±ï¼Œè™½ç„¶å·ç§°007å¤§æˆ˜ç¾å›½é˜Ÿé•¿ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰åŠ¨ä½œæˆã€‚æˆ‘è§‰å¾—æ‚¬ç–‘ç¯‡æœ€é‡è¦çš„ä¸¤ç‚¹ï¼šä¸€ä¸ªæ˜¯ä¸»è§’å’Œè§‚ä¼—çš„ä¿¡æ¯å¯¹ç­‰ï¼Œä¸è¦å‡ºç°ä¸»è§’çŸ¥é“çš„ä¸€äº›äº‹æƒ…æ²¡æœ‰å‘Šè¯‰è§‚ä¼—çš„æƒ…å†µï¼Œæ¯”å¦‚æˆ‘ä»¬è¿˜åœ¨æƒ³è¿™ä¸ªæ€äººå‡¶æ‰‹æ˜¯æ€ä¹ˆé€ƒç¦»äººç¾¤çš„æ—¶å€™ï¼Œç»“æœå…¶å®äººå®¶ä¼šéšèº«ï¼Ÿï¼Ÿç¬¬äºŒä¸ªæ˜¯è®©è§‚ä¼—ä¸€ç›´å¾ªç¯åœ¨â€æˆ‘æ˜¯ä¸ªå¤©æ‰-æˆ‘æ˜¯ä¸ªæ™ºéšœ-æˆ‘æ˜¯ä¸ªå¤©æ‰-æˆ‘æ˜¯ä¸ªæ™ºéšœâ€œä¹‹é—´ã€‚</p><p>ã€ŠåŒå­æ€æ‰‹ã€‹ï¼šè¿™ä¸ªç”µå½±è¯´å®è¯å‰§æƒ…ä¸Šä¸ç®—å¤šå¥½ï¼Œä¸è¿‡ç”±äºæ˜¯æå®‰æŒ‡å¯¼çš„120fpsç”µå½±ï¼Œæœºä¼šå¯æ˜¯ä¸å¤šå•Šã€‚å°±èµ¶ç´§ä¹°äº†æœæ¯”å½±é™¢çš„ç¥¨å»ä½“éªŒ2K 120FPSçš„æœæ¯”å½±é™¢æŠ€æœ¯äº†ã€‚çœŸçš„å¤ªæ£’å¤ªæ£’äº†ï¼Œ120FPSä½¿å¾—åŠ¨ä½œæä¸ºæµç•…ï¼Œç»´å°”å²å¯†æ–¯çš„æ¯ä¸ªåŠ¨ä½œéƒ½æ¸…æ™°ä¸”æµç•…ï¼›æœæ¯”å½±é™¢çš„è¶…é«˜å¯¹æ¯”åº¦ä½¿å¾—ä¸€åœºæš—å¤„åŠ¨ä½œæˆç›¸å½“å¥½çœ‹ã€‚ä¸€åœºç”µå½±çœ‹ä¸‹æ¥çœŸçš„æ˜¯æ„çŠ¹æœªå°½çš„æ„Ÿè§‰ï¼Œç”šè‡³æœ‰ç€ä¸è¾“ç»™å¤ä»‡è€…è”ç›Ÿçš„è§†è§‰éœ‡æ’¼ã€‚</p><p>ã€Šæµæµªåœ°çƒã€‹ï¼šè¿™ä¸ªç”µå½±å…¶å®æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œéå¸¸æ£’ã€‚è™½ç„¶ä¸æ˜¯é¡¶çº§åˆ¶ä½œä½†æ˜¯ä¹Ÿæ²¡æœ‰ä¸€äº›äººå˜´é‡Œçš„é‚£ä¹ˆä¸å ªã€‚ç”µå½±æ€»ä½“æ¥è¯´å³ä½¿å»æ‰æ‰€è°“æƒ…æ€€å’Œå›½äº§çš„tagä¹Ÿæ˜¯ä¸€éƒ¨éå¸¸ä¸é”™çš„ç”µå½±å‘¢ã€‚</p><p>ã€Šå¤ä»‡è€…è”ç›Ÿ4ã€‹ï¼šè¿™ä¸ªç”µå½±åŸºæœ¬å°±æ˜¯ä¸€ä¸ªå­—â€œçˆ½â€ã€‚å°±åƒå¤§ä½¬è¯´çš„è¿™å« <em>movie</em> è€Œä¸æ˜¯ <em>cinema</em>ï¼Œä¸è¿‡è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆè´¬ä¹‰å•¦ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸ºæ•°ä¸å¤šäºŒåˆ·çš„ç”µå½±ï¼Œç¡®å®å¾ˆå¥½çœ‹ã€‚</p><p>ã€Šå¾’æ‰‹æ”€å²©ã€‹ï¼šè¿™éƒ¨ç”µå½±å‡ºä¹æ„å¤–çš„å¥½çœ‹ã€‚æˆ‘ä»¥ä¸ºä¼šå¾ˆæ— èŠï¼Œç»“æœå…¨ç¨‹åŒæ‰‹æ¡ç´§ç›´å‡ºå†·æ±—ã€‚å–œæ¬¢çœ‹çºªå½•ç‰‡çš„åŒå­¦å¼ºçƒˆæ¨èè¿™éƒ¨è®°å½•ç‰‡ã€‚</p><p>ã€Šä¸­å›½æœºé•¿ã€‹ï¼šè·Ÿä¸Šé¢çš„å¾’æ‰‹æ”€å²©ä¸€æ ·ï¼Œæˆ‘ä»¥ä¸ºä¼šå¾ˆæ— èŠï¼Œç»“æœå…¨é•‡åŒæ‰‹ç´§æ¡ç›´å‡ºå†·æ±—ã€‚ï¼ˆè¿˜çœŸå°±ä¸€æ ·ï¼Œå®Œå…¨ä¸€æ ·å“ˆå“ˆå“ˆå“ˆå“ˆï¼‰éƒ½è¯´çœ‹äº†è¿™éƒ¨ç”µå½±å°±ä¸æ•¢åé£æœºäº†ï¼Œæˆ‘åè€Œè§‰å¾—æœ‰è¿™æ ·çš„æœºé•¿åé•‡æˆ‘æ›´æ•¢åé£æœºäº†å‘¢ã€‚</p><h1 id="0X04-2019ç©åˆ°çš„å¥½æ¸¸æˆ"><a href="#0X04-2019ç©åˆ°çš„å¥½æ¸¸æˆ" class="headerlink" title="0X04 2019ç©åˆ°çš„å¥½æ¸¸æˆ"></a>0X04 2019ç©åˆ°çš„å¥½æ¸¸æˆ</h1><p>è¦è¯´ä»Šå¹´ç©åˆ°è¿‡çš„å¥½ç©çš„æ¸¸æˆï¼Œå¦‚æœç›´è®©æˆ‘é€‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ã€Šæˆ˜ç¥ã€‹ã€‚è™½ç„¶è¿™ä¸ªæ¸¸æˆæ˜¯å»å¹´å‡ºçš„ï¼Œä½†æ˜¯ä¹Ÿå¤ªæ£’äº†å§ï¼ï¼ï¼</p><p>æ•…äº‹éå¸¸æ£’ï¼Œæ•´ä¸ªç®—ä¸‹æ¥å¤§æ¦‚å°±æ˜¯å°æˆ˜ç¥å’Œå¥çˆ·æ‰“ç®—æŠŠå°æˆ˜ç¥æ¯äº²çš„éª¨ç°æ‰¬äº†ã€‚ï¼ˆï¼Ÿï¼Ÿï¼Ÿå“ˆå“ˆå“ˆï¼‰</p><p>è®¤çœŸè®¤çœŸï¼Œè¿™é‡Œè¯´ä¸€ä¸ªæˆ‘æœ€å–œæ¬¢çš„ç‚¹ã€‚æ¸¸æˆçš„è¶Šè‚©è§†è§’ä¸€é•œåˆ°åº•æ˜¯çœŸçš„å‰å®³ï¼Œå®Œå…¨ä¸ä¼šæ‰“æ–­æ¸¸æˆæµç¨‹ã€‚å‡è®¾ç©å®¶æ°¸è¿œä¸æŒ‚çš„è¯ï¼Œé‚£å°±å¯ä»¥ä¿æŒæ•´ä¸ªé•œå¤´ä»å¤´åˆ°å°¾ä¸åŠ¨çš„ã€‚ä¸ºäº†æ»¡è¶³è¿™ä¸ªç‚¹å°±è®¾è®¡å‡ºäº†æˆ‘åœ¨æ¸¸æˆé‡Œæœ€å–œæ¬¢æœ€å–œæ¬¢çš„ä¸€ä¸ªå°ç»†èŠ‚ï¼šä¼ é€ã€‚ä¸€èˆ¬æ¸¸æˆä¼ é€å°±ä¸¤ç§ï¼Œé€‰æ‹©ç›®çš„åœ°ååˆ‡æ¢ç•Œé¢è¯»æ¡ï¼Œå†åˆ‡æ¢è½½å…¥ï¼›è¦ä¹ˆå°±æ˜¯ä¸Šè½¦ä¸Šé©¬ç„¶åä¸€è·¯è‡ªåŠ¨è·‘è¿‡å»è¦ç­‰å¾ˆä¹…ï¼›ä½†æ˜¯æˆ˜ç¥é‡Œçš„å¤„ç†ç®€ç›´å¤ªæ£’äº†ï¼æ¸¸æˆé‡Œæœ‰å›ºå®šçš„ä¼ é€ç‚¹ï¼Œæ˜¯ä¸€å †æ•£è½åœ¨åœ°ä¸Šçš„çŸ³å¤´ï¼Œå¥çˆ·é è¿‘çš„æ—¶å€™çŸ³å¤´å°±è‡ªå·±å›´èµ·æ¥å˜æˆé—¨ï¼Œä¸­é—´æ˜¯ç™½è‰²çš„åƒæ˜¯ä¼ é€é—¨ä¸€æ ·ï¼›ç„¶åå¥çˆ·å°±è¿›å…¥åˆ°ç™½è‰²çš„ç©ºé—´é‡Œï¼Œé‡Œé¢æ˜¯ä¸€ä¸ªç±»ä¼¼è¿·å®«çš„å°åœ°å›¾ï¼Œåœ¨é‡Œé¢è·‘å“‡è·‘å“‡è·‘å“‡ï¼Œçªç„¶å‰é¢åˆåˆ·æ–°å‡ºäº†ä¸€ä¸ªç™½è‰²çš„é—¨ï¼Œå‡ºå»å°±åˆ°äº†ç›®çš„åœ°ã€‚å…¶å®ç±»ä¼¼è¿·å®«çš„é‚£ä¸ªå°åœ°å›¾å…«æˆæ˜¯ä¸€ç›´åœ¨å†…å­˜é‡Œçš„ï¼ˆæˆ–è€…å¥çˆ·ç¦»ä¼ é€é—¨è¿‘çš„æ—¶å€™å¼€å§‹åŠ è½½çš„ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿›å…¥å°åœ°å›¾çš„è¿‡ç¨‹æ˜¯æ— ç¼çš„ï¼›ä»å°åœ°å›¾é‡Œè·‘æ¥è·‘å»è‡ªå·±ä»¥ä¸ºæ˜¯è·‘å‘ä¼ é€é—¨ï¼Œå…¶å®æ˜¯æ¸¸æˆæ­£åœ¨åŠ è½½ç›®çš„åœ°çš„èµ„æºï¼Œç­‰åŠ è½½å¥½äº†å°±åœ¨ä½ é¢å‰æ”¾ä¸€ä¸ªä¼ é€é—¨ï¼Œç›´æ¥å‡ºå»æ— ç¼è¡”æ¥ã€‚è¿™ä¸ªè®¾è®¡çœŸçš„æ˜¯è®©æˆ‘æƒŠå¹ä¸å·²ã€‚</p><h1 id="0X05-æ€»ç»“"><a href="#0X05-æ€»ç»“" class="headerlink" title="0X05 æ€»ç»“"></a>0X05 æ€»ç»“</h1><p>æ€»çš„æ¥è¯´2019å¹´è¿‡å¾—è¿˜æ˜¯æŒºå¥½çš„ï¼Œå¸Œæœ›2020å¹´è¿‡å¾—æ›´å¥½å§~~~   å¤§å®¶<strong>æ–°å¹´å¿«ä¹</strong>!!!</p>]]></content>
      
      
      
        <tags>
            
            <tag> log </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Djangoä¸­ä½¿ç”¨RabbitMQ</title>
      <link href="/2019/11/21/django-rabbitmq/"/>
      <url>/2019/11/21/django-rabbitmq/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä½¿ç”¨dockeréƒ¨ç½²RabbitMQ"><a href="#0X00-ä½¿ç”¨dockeréƒ¨ç½²RabbitMQ" class="headerlink" title="0X00 ä½¿ç”¨dockeréƒ¨ç½²RabbitMQ"></a>0X00 ä½¿ç”¨dockeréƒ¨ç½²RabbitMQ</h1><p>è‡ªä»ç”¨èµ·dockerä¹‹åï¼Œæ¯æ¬¡åœ¨è‡ªå·±æœ¬åœ°å¼€å‘ç¯å¢ƒéƒ¨ç½²æ–°æœåŠ¡å°±é¦–é€‰ç”¨dockeräº†ã€‚è™½ç„¶ç†è®ºä¸Šdockerè·Ÿè£¸æœºéƒ¨ç½²æ¯”èµ·æ¥å¤šå¤šå°‘å°‘æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯è·Ÿ3åˆ†é’Ÿéƒ¨ç½²å‡ ä¹ä¸€äº›å¼€å‘ç¯å¢ƒæœåŠ¡çš„ä¼˜åŠ¿æ¯”èµ·æ¥ç®€ç›´éƒ½æ˜¯æ¯›æ¯›é›¨äº†ã€‚</p><p>é¦–å…ˆè¦æ‹‰ä¸ªé•œåƒä¸‹æ¥ï¼Œé€šå¸¸æ‹‰é•œåƒéƒ½æ˜¯é€‰æ‹©æœ€æ–°çš„æˆ–è€…ç‰¹å®šæŸä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯RabbitMQæœ‰ä¸€ç‚¹æ¯”è¾ƒå¥‡æ€ªï¼Œå¦‚æœé€†å‘æ‹‰å¸¦æœ‰webç®¡ç†é¡µé¢çš„å°±ä¸èƒ½ç”¨<code>latest</code>ï¼Œè€Œåº”è¯¥é€‰æ‹©<code>management</code>ã€‚ç„¶åç¡®å®šå¥½é•œåƒä¹‹åå†äº†è§£ä¸€ä¸‹ç«¯å£æƒ…å†µï¼ŒRabbitMQå¸¦æœ‰webç®¡ç†é¡µé¢çš„è¯ä¼šç”¨åˆ°ä¸¤ä¸ªç«¯å£ï¼šæä¾›MQæœåŠ¡çš„<code>5672</code>å’Œæä¾›webæœåŠ¡çš„<code>15672</code>ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠå†…å®¹ä¿å­˜ä¸º<code>docker-compose.yml</code>ç„¶å<code>docker-compose up -d</code>å°±å¥½äº†ï¼ˆå¦‚æœä¸åœ¨ymlæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æ‰§è¡Œæˆ–è€…æ–‡ä»¶åä¸å«<code>docker-compose.yml</code>çš„è¯è¦ç”¨<code>docker-compose -f xxx/xxx/xxx/xxx.yml</code>æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="comment"># image: rabbitmq:latest    # å¦‚æœè¦ç”¨ä¸å¸¦webç•Œé¢çš„å¯ä»¥é€‰è¿™ä¸ª</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">rabbitmq:management</span>  <span class="comment"># å¸¦æœ‰webç•Œé¢çš„é•œåƒ</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">rabbitmq</span>    <span class="comment"># å–ä¸€ä¸ªå®¹å™¨å</span></span><br><span class="line">    <span class="attr">ports:</span>  <span class="comment"># å¼€æ”¾ä¸¤ä¸ªç«¯å£ï¼Œå½“ç„¶æ²¡æœ‰webç•Œé¢çš„è¯å°±ä¸ç”¨å¼€æ”¾15672äº†</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"5672:5672"</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"15672:15672"</span></span><br><span class="line">    <span class="attr">environment:</span>    <span class="comment"># è¿™é‡Œè®¾ç½®ç™»å½•åå’Œå¯†ç </span></span><br><span class="line">      <span class="attr">RABBITMQ_DEFAULT_USER:</span> <span class="string">shawn</span></span><br><span class="line">      <span class="attr">RABBITMQ_DEFAULT_PASS:</span> <span class="string">****************</span>   <span class="comment"># é«˜ç§‘æŠ€åŠ å¯†ï¼ˆéª—ä½ çš„ï¼Œæˆ‘è‡ªå·±æ‰“çš„æ˜Ÿå·</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä»¥æ¥æœåŠ¡å°±å¯åŠ¨èµ·æ¥äº†ï¼Œå¯ä»¥è®¿é—®<code>http://127.0.0.1:15672</code>çœ‹åˆ°RabbitMQçš„webç™»å½•é¡µé¢äº†ã€‚</p><blockquote><p><code>docker-compose</code>å¹¶ä¸æ˜¯dockerçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªç”¨Pythonç¼–å†™çš„dockerç¼–æ’å·¥å…·ã€‚å¦‚æœç”µè„‘ä¸Šçš„è¯å¯ä»¥ä½¿ç”¨<code>pip install docker-compose</code>æ¥å®‰è£…å®ƒ</p></blockquote><a id="more"></a><h1 id="0X01-ä½¿ç”¨Pythonè°ƒç”¨RabbitMQ"><a href="#0X01-ä½¿ç”¨Pythonè°ƒç”¨RabbitMQ" class="headerlink" title="0X01 ä½¿ç”¨Pythonè°ƒç”¨RabbitMQ"></a>0X01 ä½¿ç”¨Pythonè°ƒç”¨RabbitMQ</h1><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucmFiYml0bXEuY29tL3R1dG9yaWFscy90dXRvcmlhbC1vbmUtcHl0aG9uLmh0bWw=" title="https://www.rabbitmq.com/tutorials/tutorial-one-python.html">RabbitMQçš„å®˜æ–¹æ–‡æ¡£ä¸Šæœ‰ä¸€ä¸ªéå¸¸ç®€å•æ˜äº†çš„ä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonæ¥å…¥RabbitMQ<i class="fa fa-external-link"></i></span>ã€‚æœ‰ä¸¤å¨ä»£ç ï¼Œä¸€å¨æ˜¯senderå¦ä¸€å¨æ˜¯receiverï¼Œé¦–å…ˆæ˜¯senderï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹å’ŒRabbitMQçš„è¿æ¥</span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">'shawn'</span>, <span class="string">'********'</span>)   <span class="comment"># ä¸¤ä¸ªå‚æ•°ï¼šç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">connection = pika.BlockingConnection(</span><br><span class="line">    pika.ConnectionParameters(<span class="string">'localhost'</span>, <span class="number">5672</span>, <span class="string">'/'</span>, credentials)  <span class="comment"># å››ä¸ªå‚æ•°ï¼šæœºå™¨ã€ç«¯å£ã€è™šæ‹Ÿä¸»æœºï¼ˆæ–°æ‰‹å…ˆä¸ç®¡å®ƒï¼‰ã€è®¤è¯ä¿¡æ¯</span></span><br><span class="line">)</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">'hello'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€ä¸€ä¸ªæ¶ˆæ¯</span></span><br><span class="line">channel.basic_publish(exchange=<span class="string">''</span>, routing_key=<span class="string">'hello'</span>, body=<span class="string">'Hello World!'</span>)</span><br><span class="line">print(<span class="string">" [x] Sent 'Hello World!'"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–­å¼€è¿æ¥</span></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ˜¯å·®ä¸å¤ªå¤šçš„receiverçš„è¿™ä¸€å¨<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®Œå…¨ç›¸åŒçš„å»ºç«‹è¿æ¥</span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">'shawn'</span>, <span class="string">'********'</span>)</span><br><span class="line">connection = pika.BlockingConnection(</span><br><span class="line">    pika.ConnectionParameters(<span class="string">'localhost'</span>, <span class="number">5672</span>, <span class="string">'/'</span>, credentials)</span><br><span class="line">)</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®Œå…¨ç›¸åŒçš„é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">'hello'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªå›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback</span><span class="params">(ch, method, properties, body)</span>:</span></span><br><span class="line">    print(<span class="string">" [x] Received %r"</span> % body)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»'hello'é˜Ÿåˆ—æ¥çš„æ¶ˆæ¯äº¤ç»™`callback`æ–¹æ³•å¤„ç†</span></span><br><span class="line">channel.basic_consume(queue=<span class="string">'hello'</span>, on_message_callback=callback, auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹ç­‰å¾…æ¶ˆæ¯</span></span><br><span class="line">print(<span class="string">' [*] Waiting for messages. To exit press CTRL+C'</span>)</span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å°±å¯ä»¥ç”¨<code>python sender.py</code>æŠŠæ¶ˆæ¯å¡åˆ°RabbitMQä¸­ï¼Œå†ç”¨<code>python receiver.py</code>æ‹¿åˆ°RabbitMQé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯äº†ã€‚</p><h1 id="0X02-ä½¿ç”¨Djangoè°ƒç”¨RabbitMQï¼ˆCeleryï¼‰"><a href="#0X02-ä½¿ç”¨Djangoè°ƒç”¨RabbitMQï¼ˆCeleryï¼‰" class="headerlink" title="0X02 ä½¿ç”¨Djangoè°ƒç”¨RabbitMQï¼ˆCeleryï¼‰"></a>0X02 ä½¿ç”¨Djangoè°ƒç”¨RabbitMQï¼ˆCeleryï¼‰</h1><p>Djangoåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç»å¸¸éœ€è¦Celeryçš„æ”¯æŒï¼Œåœ¨Djangoä¸­ä½¿ç”¨Celeryä¸»è¦æ˜¯ä¸ºäº†ä¸¤å¤§ç‰¹æ€§ï¼šå®šæ—¶ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ã€‚å¦‚æœå¤Ÿéªšçš„è¯å®šæ—¶ä»»åŠ¡å¯ä»¥é€šè¿‡Linuxçš„<code>crontab</code>æ¥æ›¿ä»£ï¼Œä½†æ˜¯å¼‚æ­¥ä»»åŠ¡ç›®å‰è¿˜ä¸å¤ªå¥½ç¦»å¼€Celeryã€‚é€šå¸¸éƒ¨ç½²Celeryçš„æ—¶å€™åç«¯éƒ½æ˜¯Redisï¼Œè¿™æ¬¡å¯ä»¥å°è¯•ä¸€ä¸‹ä½¿ç”¨RabbitMQï¼ˆCeleryé»˜è®¤å°±æ˜¯æ”¯æŒä½¿ç”¨RabbitMQè¿™ç±»MQçš„ï¼‰ã€‚åœ¨æ­£å¸¸é…ç½®äº†Redisä½œä¸ºåç«¯çš„æƒ…å†µä¸‹åˆ‡æ¢åˆ°RabbitMQå…¶å®æ˜¯ä¸éº»çƒ¦çš„ï¼šå”¯ä¸€è¦åšçš„å°±æ˜¯å°†æœ¬æ¥çš„<code>BROKER_URL</code>æ”¹æˆ<code>BROKER_URL=&#39;amqp://shawn:********@localhost:5672//&#39;</code>å°±å¯ä»¥äº†ã€‚</p><p>ç›¸æ¯”Redisï¼ŒRabbitMQè‡ªå¸¦webç•Œé¢ï¼Œå¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹åå°ä»»åŠ¡ï¼›è€Œä¸”ä½œä¸ºbrokeræ¥è¯´æ€§èƒ½æ›´å¼ºåŠ²ã€‚å¯èƒ½è¿™ä¹Ÿæ˜¯Celeryå®˜æ–¹å»ºè®®ä½¿ç”¨RabbitMQçš„åŸå› å§ã€‚</p><blockquote><p>Django3å…¶å®å·²ç»å¼€å§‹æ”¯æŒå¼‚æ­¥äº†ï¼Œä½†ç­‰åˆ°å¤§è§„æ¨¡é«˜è´¨é‡åº”ç”¨å¯èƒ½è¿˜éœ€è¦ä¸€æ®µæ—¶é—´</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> RabbitMQ </tag>
            
            <tag> MQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¸­çš„url</title>
      <link href="/2019/11/20/django-url/"/>
      <url>/2019/11/20/django-url/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-urlçš„æºå¤´"><a href="#0X00-urlçš„æºå¤´" class="headerlink" title="0X00 urlçš„æºå¤´"></a>0X00 urlçš„æºå¤´</h1><p>ä½¿ç”¨<code>django-admin startproject test_project</code>åˆ›å»ºä¸€ä¸ªæ–°çš„Djangoé¡¹ç›®ä¹‹ååœ¨<code>settings.py</code>ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªé…ç½®é¡¹<code>ROOT_URLCONF</code>ï¼Œé»˜è®¤æƒ…å†µä¸‹å€¼ä¸ºé¡¹ç›®ç›®å½•ä¸‹çš„<code>urls</code>ï¼Œä¹Ÿå°±æ˜¯<code>test_project.urls</code>ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ª<code>urls.py</code>çš„å†…å®¹å¤§è‡´æ˜¯è¿™æ ·çš„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""learn_django URL Configuration</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The `urlpatterns` list routes URLs to views. For more information please see:</span></span><br><span class="line"><span class="string">    https://docs.djangoproject.com/en/2.2/topics/http/urls/</span></span><br><span class="line"><span class="string">Examples:</span></span><br><span class="line"><span class="string">Function views</span></span><br><span class="line"><span class="string">    1. Add an import:  from my_app import views</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('', views.home, name='home')</span></span><br><span class="line"><span class="string">Class-based views</span></span><br><span class="line"><span class="string">    1. Add an import:  from other_app.views import Home</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')</span></span><br><span class="line"><span class="string">Including another URLconf</span></span><br><span class="line"><span class="string">    1. Import the include() function: from django.urls import include, path</span></span><br><span class="line"><span class="string">    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå°±æ˜¯æ ¹ç›®å½•äº†ï¼Œæ–°é¡¹ç›®ä½¿ç”¨<code>python manage.py runserver</code>å¯åŠ¨ä¹‹åè®¿é—®<code>http://127.0.0.1:8000/</code>å°±æ˜¯è®¿é—®åˆ°è¿™ä¸ªurlçš„æ ¹è·¯ç”±äº†ï¼Œé»˜è®¤æƒ…å†µä¸‹æœ‰ä¸€ä¸ª<code>admin/</code>å¯é€‰ï¼Œä¹Ÿå°±æ˜¯Djangoè‡ªå·±çš„åå°ç®¡ç†é¡µé¢ã€‚<strong>Djangoæ‰€æœ‰çš„urléƒ½æ˜¯ä»è¿™ä¸ªæ–‡ä»¶å‘æ•£å‡ºå»çš„</strong>ï¼Œ<code>urlpatterns</code>é‡Œé™¤äº†å°†urlè·¯ç”±è‡³<code>view</code>å°±æ˜¯å…¶ä»–çš„å­urlé…ç½®ã€‚æ¢å¥è¯è¯´ï¼Œé€šå¸¸æƒ…å†µä¸‹Djangoä¸­æ‰€æœ‰urlæœ€ç»ˆéƒ½åº”è¯¥è¢«è·¯ç”±åˆ°Viewä¸Šæ‰å¯¹ã€‚</p><a id="more"></a><h1 id="0X01-è·¯ç”±åˆ°å­urlå’Œview"><a href="#0X01-è·¯ç”±åˆ°å­urlå’Œview" class="headerlink" title="0X01 è·¯ç”±åˆ°å­urlå’Œview"></a>0X01 è·¯ç”±åˆ°å­urlå’Œview</h1><p>ä¸Šé¢æåˆ°é€šå¸¸æƒ…å†µä¸‹Djangoä¸­æ‰€æœ‰urlæœ€ç»ˆéƒ½åº”è¯¥è¢«è·¯ç”±åˆ°Viewä¸Šï¼Œé‚£å°±æ¥çœ‹ä¸€ä¸‹ç©¶ç«Ÿè¯¥æ€ä¹ˆåšã€‚ç°åœ¨æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªappå«<code>student</code>æ˜¯ç”¨æ¥ç®¡ç†ä¸€äº›å­¦ç”Ÿä¿¡æ¯çš„ï¼Œappä¸­æœ‰ä¸€ä¸ª<code>views.py</code>ï¼Œå…·ä½“å†…å®¹å°±æš‚æ—¶ä¸åˆ—å‡ºäº†ï¼Œåœ¨æ­¤å¤„å…³ç³»ä¸å¤§ï¼›è¿˜æœ‰ä¸€ä¸ª<code>urls.py</code>ï¼Œå†…å®¹æ˜¯è¿™æ ·çš„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> StudentView, ExamView</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'^$'</span>, StudentView.as_view()),    <span class="comment"># ç›´æ¥å°†è¿™ä¸ªå­urlçš„æ ¹ç›®å½•è·¯ç”±åˆ°ä¸€ä¸ªview</span></span><br><span class="line">    path(<span class="string">'^exam/$'</span>, ExamView.as_view()),    <span class="comment"># ç›´æ¥å°†urlè·¯ç”±è‡³ä¸€ä¸ªview</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨è¦æ¥ä¿®æ”¹æ ¹çš„<code>urls.py</code>äº†<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'student/'</span>, include(<span class="string">'test_project.student.urls'</span>)), <span class="comment"># å…¶å®å°±åŠ äº†è¿™ä¸€è¡Œï¼Œè¿™é‡Œçš„includeå°±æ˜¯åŒ…å«å¦ä¸€ä¸ªurlsçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å°±æ˜¯è¿™æ ·çš„ï¼Œå¦‚æœè®¿é—®<code>http://127.0.0.1:8000/admin</code>è¿˜æ˜¯ä¹‹å‰çš„DjangoAdminé»˜è®¤ç®¡ç†é¡µé¢æ²¡é—®é¢˜ï¼Œå¦‚æœè®¿é—®<code>http://127.0.0.1:8000/student/</code>çš„è¯å°±æ˜¯åˆ°<code>StudentView</code>è€Œ<code>http://127.0.0.1:8000/student/exam/</code>å°±æ˜¯<code>ExamView</code>äº†ã€‚</p><h1 id="0X02-å‚æ•°ä¸æ­£åˆ™"><a href="#0X02-å‚æ•°ä¸æ­£åˆ™" class="headerlink" title="0X02 å‚æ•°ä¸æ­£åˆ™"></a>0X02 å‚æ•°ä¸æ­£åˆ™</h1><p>urlä¸­å¸¸è§çš„å‡ºç°ä¸€äº›å‚æ•°ï¼Œä¸€èˆ¬æ¥è¯´å‚æ•°åˆ†æˆä¸¤ç§ï¼šç¬¬ä¸€ç§æ˜¯åœ¨pathä¸­ä½œä¸ºè·¯ç”±çš„ä¸€éƒ¨åˆ†ï¼Œå¦ä¸€ç§æ˜¯åœ¨åé¢ä»¥GETçš„æŸ¥è¯¢å‚æ•°æ–¹å¼å‡ºç°ä¾‹å¦‚<code>/student?name=shawn&amp;age__gt=16</code>è¿™ç§ã€‚ç¬¬äºŒç§æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œåœ¨ä¼ å…¥åˆ°viewåï¼Œä»viewçš„<code>request.GET</code>å°±èƒ½å–åˆ°äº†ã€‚ä½†æ˜¯ä¹Ÿç»å¸¸ä¼šé‡åˆ°ç¬¬ä¸€ç§ï¼Œä¾‹å¦‚è¿™æ ·ä¸€ä¸ªpath<code>/article/2019/11/20/why-linux</code>ï¼Œå¯ä»¥çŒœæµ‹å®ƒæŒ‡çš„æ˜¯2019å¹´11æœˆ20æ—¥çš„ä¸€ç¯‡åä¸ºâ€™why-linuxâ€™çš„æ–‡ç« ã€‚é‚£ä¹ˆè¿™ç§è¯¥æ€ä¹ˆå–å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œåœ¨viewé‡Œ<code>request.path.split(&#39;/&#39;)</code>ç„¶åå–ä¸‹æ ‡å°±è¡Œäº†ï¼ˆå½“ç„¶è¿™å¾ˆè ¢ä¸”å¾ˆä¸é è°±ï¼Œä½†æ˜¯è¿˜ä¸å¤±ä¸ºä¸€ç§æ–¹æ¡ˆå“ˆå“ˆå“ˆå“ˆï¼‰ã€‚</p><p>è¿™ç§æ—¶å€™æ¯”è¾ƒé è°±çš„æ–¹å¼æ˜¯ä½¿ç”¨urlä¸­çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªå­urlé…ç½®å¦‚ä¸‹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'&lt;int:year&gt;/&lt;int:month&gt;/&lt;int:day&gt;/&lt;str:name&gt;/'</span>, StudentView.as_view()),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­<code>&lt;int:year&gt;</code>å°±æ˜¯æŒ‡çš„ä¸€ä¸ªå‚æ•°ï¼Œå‰ä¸‰ä¸ªæ˜¯æ•´å‹å‚æ•°ï¼Œæœ€åä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²å‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“<code>view</code>ä¸­<code>GET</code>æ–¹æ³•çš„å®šä¹‰æ˜¯<code>def get(self, request, *args, **kwargs)</code>ï¼Œé‚£ä¹ˆå…¶å®åé¢çš„è¿™ä¸ª<code>**kwargs</code>é‡Œå°±æ˜¯è¿™é‡Œä¼ è¿›æ¥çš„å‚æ•°äº†ï¼Œå¯ä»¥é€šè¿‡<code>year, month, day, name = kwargs[&#39;year&#39;], kwargs[&#39;month&#39;], kwargs[&#39;day&#39;], kwargs[&#39;name&#39;]</code>è¿™ç§ç±»ä¼¼çš„æ–¹å¼æ¥å–åˆ°å¯¹åº”çš„å€¼</p><p>è¿˜æ˜¯ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå’±ä»¬çŸ¥é“å¹´å·ä¸€å®šæ˜¯æ­£æ•´æ•°ï¼Œæœˆä»½ä¸€å®šæ˜¯1~12ä¹‹é—´ï¼Œæ—¥æœŸä¸€å®šæ˜¯1~31ä¹‹é—´ï¼ˆå…ˆä¸è€ƒè™‘é—°å¹´å’Œå¤§å°æœˆçš„é—®é¢˜ï¼Œåªæ˜¯æ–¹ä¾¿æ¢è®¨urlï¼‰ã€‚é‚£ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­çš„urlå¦‚æœæˆ‘ä¼ ä¸€ä¸ª<code>/article/0/666/233/test/</code>è¿‡å»å…¶å®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›ç®€å•çš„æ ¡éªŒã€‚é‚£ä¹ˆä¼—æ‰€å‘¨çŸ¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼éå¸¸é€‚åˆåšè¿™ç§äº‹æƒ…ã€‚ä¸‹é¢æ¥ä¿®æ”¹ä¸€ä¸‹åˆšåˆšçš„è¿™ä¸ªurlé…ç½®å¥½äº†ï¼Œä¿®æ”¹åçš„é…ç½®Djangoå°±å¯ä»¥æ ¹æ®æ­£åˆ™æ¥åŒ¹é…äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">r'^[1-9]\d*/0[1-9]|1[0-2]/xxxxx'</span>, StudentView.as_view()),  <span class="comment"># å®Œæ•´æ­£åˆ™å¥½é•¿ï¼Œå°±ä¸éƒ½è´´åœ¨è¿™å„¿äº†</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>Djangoåœ¨åŒ¹é…çš„æ—¶å€™æ˜¯æŒ‰ç…§<code>urlpatterns</code>è¿™ä¸ªåˆ—è¡¨çš„ä¸‹æ ‡é¡ºåºæ¥çš„ï¼Œæ‰€ä¸€è¯´å¦‚æœå…ˆç¬¦åˆäº†ä¸Šé¢çš„è§„åˆ™ï¼Œå³æ—¶å†ç¬¦åˆä¸‹é¢çš„è§„åˆ™ä¹Ÿä¸ä¼šç»§ç»­åˆ¤æ–­ä¸‹å»äº†ã€‚</p></blockquote><h1 id="0X03-DRFä¸­çš„router-register"><a href="#0X03-DRFä¸­çš„router-register" class="headerlink" title="0X03 DRFä¸­çš„router.register"></a>0X03 DRFä¸­çš„router.register</h1><p>ä¸€èˆ¬ä½¿ç”¨Djangoçš„åŒæ—¶ä¹Ÿä¼šä½¿ç”¨<strong>Django REST framework</strong>äº†ï¼Œæ‰€ä»¥ä¹Ÿç®€å•ä»‹ç»ä¸€ä¸‹åœ¨DRFä¸­ç‰¹æœ‰çš„ä¸€ç§è·¯ç”±æ–¹å¼å¥½äº†ã€‚å› ä¸ºDRFä¸­å¤§é‡ä½¿ç”¨<code>ViewSet</code>è€Œéæ ‡å‡†çš„Django Viewï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨DRFå°è£…çš„ä¸‹é¢è¿™ç§æ–¹å¼æ¥å»ºç«‹è·¯ç”±</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> routers</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">router = routers.DefaultRouter()    <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªrouter</span></span><br><span class="line">router.register(<span class="string">r'student/'</span>, views.xxxxxxxxViewSet) <span class="comment"># æ³¨å†Œviewset</span></span><br><span class="line">router.register(<span class="string">r'teacher/'</span>, views.xxxxxxxxViewSet)</span><br><span class="line"></span><br><span class="line">urlpatterns = router.urls   <span class="comment"># æœ€åè¿˜æ˜¯è¦ç”Ÿæˆurlpatterns</span></span><br></pre></td></tr></table></figure><blockquote><p>è™½è¯´æ˜¯å«åš<code>router</code>ä¸è¿‡ç¿»è¯‘æˆè·¯ç”±å™¨æ€»æ˜¯æœ‰ç‚¹æ€ªæ€ªçš„ï¼Œå“ˆå“ˆå“ˆ</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¹‹é¢å‘å¯¹è±¡ 2</title>
      <link href="/2019/11/19/python-oop-2/"/>
      <url>/2019/11/19/python-oop-2/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Python3çš„super"><a href="#0X00-Python3çš„super" class="headerlink" title="0X00 Python3çš„super"></a>0X00 Python3çš„super</h1><p>Pythonä¸­å¯¹è±¡çš„æ¦‚å¿µéƒ½å¿«è¢«å¤§å®¶æ·¡å¿˜äº†ï¼Œå› ä¸ºä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼ˆè¯è™½ç„¶è¿™ä¹ˆè¯´ï¼Œä½†æ˜¯æ€ä¹ˆå¯èƒ½æ·¡å¿˜å¯¹è±¡å‘¢ï¼‰ã€‚çœ‹ä¸‹é¢ä¸€æ®µPython2çš„ä»£ç ï¼ŒPython2ä¸­éº»çƒ¦çš„å°±æ˜¯è¿™ä¸ª<code>super()</code>çš„ç”¨æ³•ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'human'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello, i im'</span>, self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Human)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Student, self).__init__()</span><br><span class="line">        self.name = <span class="string">'student'</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello, i im'</span>, self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Student()</span><br></pre></td></tr></table></figure></p><p>åœ¨åˆå­¦Pythonçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯Python2å¾ˆå¤§å¯èƒ½ä¼šåœ¨<code>super(Student, self).__init__()</code>è¿™æ®µè¿·æƒ‘å¥½ä¸€é˜µå­ï¼Œä¸è¿‡å¥½åœ¨<span class="exturl" data-url="aHR0cHM6Ly9weXRob25jbG9jay5vcmcv" title="https://pythonclock.org/">Python2é©¬ä¸Šå°±è¦å‡‰é€äº†<i class="fa fa-external-link"></i></span>ï¼Œåœ¨Python3ä¸­å¯ä»¥å°†ä»£ç æ”¹å†™æˆå¦‚ä¸‹æ–¹å¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Human</span>:</span>    <span class="comment"># ä¸ç”¨å¼ºè¡Œç»§æ‰¿è‡ªobjectäº†</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'human'</span></span><br><span class="line">        print(<span class="string">'hello, i im'</span>, self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Human)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()  <span class="comment"># superçš„ç”¨æ³•ä¹Ÿæ›´æ˜äº†</span></span><br><span class="line">        self.name = <span class="string">'student'</span></span><br><span class="line">        print(<span class="string">'hello, i im'</span>, self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Student()</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>super</code>çš„ç”¨æ³•ç”±<code>super(Student, self).__init__()</code>æ”¹æˆäº†<code>super().__init__()</code>ï¼Œçœ‹èµ·æ¥æ¸…æ™°å¤šäº†ï¼Œåœ¨ä½¿ç”¨Python3åä¸å»ºè®®ä»¥ä»»ä½•ç†ç”±ä½¿ç”¨è€å¼Pythonä¸­çš„<code>super</code>è°ƒç”¨ã€‚</p><a id="more"></a><h1 id="0X01-str"><a href="#0X01-str" class="headerlink" title="0X01 str"></a>0X01 <strong>str</strong></h1><p>å†™ä¸€ä¸ªè‡ªå·±çš„ç±»é€šå¸¸éƒ½éœ€è¦å®ç°ä¸€ä¸ª<code>__str__</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºç²—ç•¥çš„å±•ç¤ºå¯¹è±¡ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, gender)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.gender = gender</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸‹é¢è¿™ä¸€å †xxxè¡¨ç¤ºå…¶ä»–å¾ˆå¤šå±æ€§</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line">        <span class="comment"># self.xxxx = xxxx</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'name:&#123;&#125; age:&#123;&#125; gender:&#123;&#125;'</span>.format(self.name, self.age, self.gender)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = Student(<span class="string">'shawn'</span>, <span class="string">'24'</span>, <span class="string">'m'</span>)</span><br><span class="line">b = Student(<span class="string">'lucy'</span>, <span class="string">'24'</span>, <span class="string">'f'</span>)</span><br><span class="line">c = Student(<span class="string">'bill'</span>, <span class="string">'24'</span>, <span class="string">'m'</span>)</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure><p>å¯ä»¥å°è¯•å…ˆæŠŠ<code>__str__</code>çš„å®šä¹‰æ³¨é‡Šæ‰æ‰§è¡Œä¸€ä¸‹ï¼Œçœ‹åˆ°çš„è¾“å‡ºåº”è¯¥æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;__main__.Student object at 0x7f875f881d10&gt;</span><br><span class="line">&lt;__main__.Student object at 0x7f875f881d90&gt;</span><br><span class="line">&lt;__main__.Student object at 0x7f875f881e10&gt;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœå†å–æ¶ˆ<code>__str__</code>çš„æ³¨é‡Šï¼Œçœ‹åˆ°çš„è¾“å‡ºå°±æ˜¯è¿™æ ·çš„äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name:shawn age:24 gender:m</span><br><span class="line">name:lucy age:24 gender:f</span><br><span class="line">name:bill age:24 gender:m</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºå˜æˆè‚‰çœ¼å¯è¯†åˆ«çš„äº†ã€‚</p><blockquote><p>é€šè¿‡ str(object) ä»¥åŠå†…ç½®å‡½æ•° format() å’Œ print() è°ƒç”¨ä»¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡çš„â€œéæ­£å¼â€æˆ–æ ¼å¼è‰¯å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¿”å›å€¼å¿…é¡»ä¸ºä¸€ä¸ª å­—ç¬¦ä¸² å¯¹è±¡ã€‚<br>æ­¤æ–¹æ³•ä¸ object.<strong>repr</strong>() çš„ä¸åŒç‚¹åœ¨äº <strong>str</strong>() å¹¶ä¸é¢„æœŸè¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„ Python è¡¨è¾¾å¼ï¼šå¯ä»¥ä½¿ç”¨æ›´æ–¹ä¾¿æˆ–æ›´å‡†ç¡®çš„æè¿°ä¿¡æ¯ã€‚<br>å†…ç½®ç±»å‹ object æ‰€å®šä¹‰çš„é»˜è®¤å®ç°ä¼šè°ƒç”¨ object.<strong>repr</strong>()ã€‚    <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvemgtY24vMy9yZWZlcmVuY2UvZGF0YW1vZGVsLmh0bWw/aGlnaGxpZ2h0PXJlcHIjb2JqZWN0Ll9fc3RyX18=" title="https://docs.python.org/zh-cn/3/reference/datamodel.html?highlight=repr#object.__str__">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p></blockquote><h1 id="0X02-repr"><a href="#0X02-repr" class="headerlink" title="0X02 repr"></a>0X02 <strong>repr</strong></h1><p><code>__str__</code>å…¶å®å¾ˆå¤šäººéƒ½æ˜¯çŸ¥é“çš„ï¼Œæ¯•ç«Ÿè¿™ä¹Ÿç®—æ˜¯Pythonä¸­æœ€åŸºç¡€çš„éƒ¨åˆ†ä¹‹ä¸€äº†ï¼Œä¸è¿‡è¿™é‡Œçš„<code>__repr__</code>è²Œä¼¼å°±æœ‰äº›åŒå­¦ä¸å¤ªæ¸…æ¥šäº†ã€‚<code>__repr__</code>çš„åŠŸèƒ½å’Œ<code>__str__</code>æ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡<code>__str__</code>è¾“å‡ºçš„ç»“æœæ˜¯æ–¹ä¾¿è‚‰çœ¼è¯†åˆ«çš„ï¼Œè€Œ<code>__repr__</code>è¾“å‡ºçš„ç»“æœæ˜¯â€å¯ä»¥é€šè¿‡è¾“å‡ºåå‘è¿˜åŸå¯¹è±¡â€œçš„ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å¸¦æœ‰å¯¹è±¡çš„è¯¦å°½ä¿¡æ¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line">print(repr(a))</span><br><span class="line"></span><br><span class="line">b = &#123;<span class="string">'a'</span>: a, <span class="string">'b'</span>: a, <span class="string">'c'</span>: a&#125;</span><br><span class="line">print(repr(a))</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢è¿™å¨ä»£ç å°±ç†è§£è¿™ä¸ªæ–¹æ³•çš„åŸºæœ¬æƒ…å†µäº†ï¼Œæ³¨ï¼š<code>repr(a)</code>ç®—æ˜¯<code>a.__repr__()</code>çš„è¯­æ³•ç³–äº†ï¼Œæ•ˆæœç›¸åŒã€‚</p><blockquote><p>ç”± repr() å†…ç½®å‡½æ•°è°ƒç”¨ä»¥è¾“å‡ºä¸€ä¸ªå¯¹è±¡çš„â€œå®˜æ–¹â€å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å¦‚æœå¯èƒ½ï¼Œè¿™åº”ç±»ä¼¼ä¸€ä¸ªæœ‰æ•ˆçš„ Python è¡¨è¾¾å¼ï¼Œèƒ½è¢«ç”¨æ¥é‡å»ºå…·æœ‰ç›¸åŒå–å€¼çš„å¯¹è±¡ï¼ˆåªè¦æœ‰é€‚å½“çš„ç¯å¢ƒï¼‰ã€‚å¦‚æœè¿™ä¸å¯èƒ½ï¼Œåˆ™åº”è¿”å›å½¢å¼å¦‚ &lt;â€¦some useful descriptionâ€¦&gt; çš„å­—ç¬¦ä¸²ã€‚è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªç±»å®šä¹‰äº† <strong>repr</strong>() ä½†æœªå®šä¹‰ <strong>str</strong>()ï¼Œåˆ™åœ¨éœ€è¦è¯¥ç±»çš„å®ä¾‹çš„â€œéæ­£å¼â€å­—ç¬¦ä¸²è¡¨ç¤ºæ—¶ä¹Ÿä¼šä½¿ç”¨ <strong>repr</strong>()ã€‚<br>æ­¤æ–¹æ³•é€šå¸¸è¢«ç”¨äºè°ƒè¯•ï¼Œå› æ­¤ç¡®ä¿å…¶è¡¨ç¤ºçš„å†…å®¹åŒ…å«ä¸°å¯Œä¿¡æ¯ä¸”æ— æ­§ä¹‰æ˜¯å¾ˆé‡è¦çš„ã€‚    <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvemgtY24vMy9yZWZlcmVuY2UvZGF0YW1vZGVsLmh0bWw/aGlnaGxpZ2h0PXJlcHIjb2JqZWN0Ll9fcmVwcl9f" title="https://docs.python.org/zh-cn/3/reference/datamodel.html?highlight=repr#object.__repr__">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockeréƒ¨ç½²MySQLå’ŒRedis</title>
      <link href="/2019/11/14/docker-mysql-redis/"/>
      <url>/2019/11/14/docker-mysql-redis/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä½¿ç”¨dockeréƒ¨ç½²çš„ä¼˜åŠ¿"><a href="#0X00-ä½¿ç”¨dockeréƒ¨ç½²çš„ä¼˜åŠ¿" class="headerlink" title="0X00 ä½¿ç”¨dockeréƒ¨ç½²çš„ä¼˜åŠ¿"></a>0X00 ä½¿ç”¨dockeréƒ¨ç½²çš„ä¼˜åŠ¿</h1><p>åœ¨ä½¿ç”¨dockeréƒ¨ç½²ä¹‹å‰ï¼Œä¸€èˆ¬éƒ½æ˜¯ç›´æ¥å°†MySQLå’ŒRedisè¿™ç±»æœåŠ¡ç›´æ¥å®‰è£…åœ¨æœºå™¨ä¸Šçš„ã€‚ä»¥è‡³äºå¥½å¤šæ–°æ‰‹æ‰å¼€å§‹å®‰è£…ä½¿ç”¨çš„æ—¶å€™ç»å¸¸ä¼šå‡ºé—®é¢˜ï¼Œå‡ºäº†é—®é¢˜è§£å†³ä¸äº†å°±é‡è£…ç³»ç»Ÿç„¶åå†é‡è£…è½¯ä»¶ï¼Œè€Œä¸”å¦‚æœæƒ³åŒæ—¶ç”¨MySQL5å’ŒMySQL8å°±éå¸¸éº»çƒ¦äº†ã€‚è¯è¯´å›æ¥ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨ä¸Šå…¶å®è¿˜æ˜¯å¾ˆå¤šç›´è£…çš„æœåŠ¡çš„ï¼Œä¸è¿‡å…¶å®ä½¿ç”¨dockeréƒ¨ç½²ä¸€å¥—ç›¸åŒçš„ç¯å¢ƒæ˜¯éå¸¸æœ‰åˆ©äºè‡ªå·±æœ¬åœ°å¼€å‘çš„ã€‚</p><p>æˆ‘ä¸ªäººçœ‹æ¥ä½¿ç”¨dockeréƒ¨ç½²çš„ä¼˜åŠ¿æœ‰è¿™å‡ ç‚¹æ¯”è¾ƒæ˜æ˜¾çš„ï¼š</p><ol><li>å¾ˆå®¹æ˜“åšåˆ°å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„â€œç¯å¢ƒä¸ç‰ˆæœ¬â€å¤§ç»Ÿä¸€ï¼›</li><li>å¾ˆå®¹æ˜“åœ¨å¼€å‘ç¯å¢ƒæœ¬åœ°åŒæ—¶éƒ¨ç½²å¤šå¥—ä¸åŒç‰ˆæœ¬çš„åŒä¸€æœåŠ¡ï¼›ï¼ˆæ¯”å¦‚ä½ è´Ÿè´£8ä¸ªé¡¹ç›®ï¼Œè¿™8ä¸ªé¡¹ç›®è¦ç”¨8ä¸ªä¸åŒç‰ˆæœ¬çš„MySQLï¼‰</li><li>èƒ½å¾ˆå¿«éƒ¨ç½²ä¸€å¥—å¼€å‘ç¯å¢ƒï¼›ï¼ˆäº‹å®è¯æ˜åœ¨ä¸€å°ç½‘ç»œç¯å¢ƒå¥½çš„æœºå™¨ä¸Šï¼Œèƒ½åœ¨5åˆ†é’Ÿå†…éƒ¨ç½²ä¸€å¥—æ•°æ®åº“ï¼‰</li><li>æ•´ç†å¥½é…ç½®æ–‡ä»¶åå¯ä»¥å¾ˆå®¹æ˜“å¤‡ä»½æ•´å¥—é…ç½®ï¼›</li><li>å®‰å…¨é—®é¢˜ï¼Œåœ¨ç‰©ç†æœºä¸Šç›´æ¥è£…äº†MySQLï¼Œå¦‚æœéƒ¨ç½²ä¸å¤Ÿä»”ç»†çš„è¯æœ‰æ•°æ®åº“è¢«æ”»ç ´åå±åŠæœåŠ¡å™¨çš„é£é™©ï¼Œè€ŒDockeréƒ¨ç½²çš„ç”±äºå®¹å™¨æ‰€åœ¨å°±ä¸ä¼šæœ‰è¿™ç§é—®é¢˜ï¼›</li></ol><a id="more"></a><h1 id="0X01-ä½¿ç”¨dockeréƒ¨ç½²MySQL"><a href="#0X01-ä½¿ç”¨dockeréƒ¨ç½²MySQL" class="headerlink" title="0X01 ä½¿ç”¨dockeréƒ¨ç½²MySQL"></a>0X01 ä½¿ç”¨dockeréƒ¨ç½²MySQL</h1><p>é¦–å…ˆæŠŠæœ€æ–°çš„é•œåƒæ‹‰ä¸‹æ¥<code>docker pull mysql:latest</code>ï¼Œç„¶åå¯ä»¥ä½¿ç”¨<code>docker run --name your_first_mysql -e MYSQL_ROOT_PASSWORD=your_password -d mysql:latest</code>è¿™ä¸ªå‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªMySQLäº†ã€‚</p><p>ç°åœ¨æ¥å°è¯•è¿æ¥ä¸€ä¸‹MySQLå§ï¼ˆå…¶å®å¹¶ä¸èƒ½ï¼Œç°åœ¨è¿ç«¯å£éƒ½æ²¡æ˜ å°„å‡ºæ¥ï¼Œä¸ä¿¡å¯ä»¥è¿ä¸€ä¸‹è¯•è¯•ï¼‰ã€‚è¦æƒ³çœŸæ­£è¿åˆ°åˆšåˆšçš„MySQLé‡Œçš„è¯éœ€è¦è¿™æ ·æ“ä½œ<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºMySQLå®¹å™¨</span></span><br><span class="line">docker run --name your_first_mysql -e MYSQL_ROOT_PASSWORD=your_password -d mysql:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥åˆ°MySQLå®¹å™¨é‡Œ</span></span><br><span class="line">docker <span class="built_in">exec</span> -it your_first_mysql bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å®¹å™¨é‡Œ</span></span><br><span class="line">root@b42296a45a92:/<span class="comment"># mysql -p</span></span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 9</span><br><span class="line">Server version: 8.0.18 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥å‘ç°è¿™æ¬¡ç»ˆäºè¿ä¸Šäº†ï¼Œä¸è¿‡è¿™æ ·ç›´æ¥å¯åŠ¨è¿˜æ˜¯æœ‰è¯¸å¤šé—®é¢˜å­˜åœ¨çš„ï¼šå®¹å™¨è¢«åˆ é™¤åæ•°æ®ä¹Ÿå°±æ²¡äº†ã€å…¶ä»–ç¨‹åºå¾ˆéš¾è¿æ¥åˆ°è¿™ä¸ªMySQLä¸Šã€åªè®¾ç½®äº†å¯†ç è¿˜æœ‰å¥½å¤šé…ç½®æ²¡åŠ¨å‘¢ã€‚ã€‚ã€‚å…ˆä¸ç®¡è¿™äº›ä¸ªé—®é¢˜ï¼Œåªéœ€è¦çŸ¥é“ç°åœ¨è¿™ä¸ªæœåŠ¡å·²ç»æˆåŠŸå¯åŠ¨äº†å°±å¥½ï¼Œå…·ä½“çš„é…ç½®ä¼šåœ¨<code>docker-composeç¼–æ’</code>ä¸­ä»‹ç»ã€‚</p><h1 id="0X02-ä½¿ç”¨dockeréƒ¨ç½²Redis"><a href="#0X02-ä½¿ç”¨dockeréƒ¨ç½²Redis" class="headerlink" title="0X02 ä½¿ç”¨dockeréƒ¨ç½²Redis"></a>0X02 ä½¿ç”¨dockeréƒ¨ç½²Redis</h1><p>é¦–å…ˆæŠŠæœ€æ–°çš„é•œåƒæ‹‰ä¸‹æ¥<code>docker pull redis:latest</code>ï¼Œç„¶åå°±å¯ä»¥ç”¨<code>docker run --name your_first_redis redis -d</code>è¿™ä¸ªå‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªRedisäº†ã€‚</p><p>ç°åœ¨æ¥è¯•è¯•è¿æ¥åˆ°Rediså§ï¼ˆä¸çŸ¥é“ä½ å‘ç°äº†æ²¡æœ‰ï¼Œæˆ‘å®Œå…¨å°±æ˜¯åœ¨é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ã€‚å°±ç®—åˆšæ‰æ²¡å‘ç°ï¼Œç°åœ¨ä¹Ÿè¯¥å‘ç°äº†ã€‚æ—¢ç„¶ä½ éƒ½å‘ç°äº†é‚£æˆ‘ä¹Ÿå°±ä¸é‡å¤äº†ï¼Œç›´æ¥æ¥çœ‹docker-composeçš„ç¼–æ’å§ï¼‰</p><h1 id="0X03-ä½¿ç”¨docker-composeç¼–æ’"><a href="#0X03-ä½¿ç”¨docker-composeç¼–æ’" class="headerlink" title="0X03 ä½¿ç”¨docker-composeç¼–æ’"></a>0X03 ä½¿ç”¨docker-composeç¼–æ’</h1><p>ä½œä¸ºå¼€å‘äººå‘˜è€Œéè¿ç»´ï¼Œ<code>docker-compose</code>çš„ä½¿ç”¨æ¬¡æ•°æ˜¯éå¸¸é«˜çš„ã€‚é€šå¸¸æ¥è¯´ä½¿ç”¨Dockeréƒ½æ˜¯åœ¨Unix likeç¯å¢ƒä¸­ï¼ˆä¹Ÿå°±æ˜¯æŒ‡çš„Linuxã€MacOSæˆ–è€…BSDï¼‰ï¼Œé‚£æˆ‘ä»¬å®‰è£…å’Œä½¿ç”¨å®ƒå°±å¾ˆæ–¹ä¾¿äº†ï¼š<code>pip install docker-compose --user</code>å°±å¯ä»¥äº†ã€‚æ˜¾ç„¶è¿™åˆæ˜¯ä¸€ä¸ªPythonç¼–å†™çš„å·¥å…·ï¼Œè£…å¥½å°±å¯ä»¥å¼€å§‹ç¼–å†™<code>docker-compose.yml</code>æ–‡ä»¶äº†ä¸‹é¢çœ‹ä¸€ä¸‹æˆ‘å®Œæ•´çš„è¿™ä¸ªå®ä¾‹æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span>    <span class="comment"># æœåŠ¡çš„åå­—</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:latest</span> <span class="comment"># ä½¿ç”¨æœ€æ–°çš„MySQLé•œåƒ</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">dev_mysql_latest</span>  <span class="comment"># æŒ‡å®šä¸€ä¸ªå®¹å™¨å</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span> <span class="comment"># è‡ªåŠ¨é‡å¯ï¼ˆå¼€æœºåä¹Ÿè‡ªåŠ¨å¯åŠ¨ï¼‰</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">bridge</span>  <span class="comment"># æŒ‡å®šç½‘ç»œä¸ºæ¡¥æ¥</span></span><br><span class="line">    <span class="attr">volumes:</span>  <span class="comment"># æŒ‚è½½çš„ç›®å½•</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/mysql:/var/lib/mysql</span> <span class="comment"># å°†å®¹å™¨ä¸­çš„/var/lib/mysqlæŒ‚è½½åˆ°å½“å‰ç›®å½•ä¸‹çš„data/mysqlï¼ˆMySQLçš„æ•°æ®æ–‡ä»¶ï¼Œé˜²æ­¢å®¹å™¨åˆ é™¤åæ•°æ®ä¸¢å¤±ï¼‰</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./config/mysql:/etc/mysql/conf.d</span>  <span class="comment"># æŒ‚è½½å¥½é…ç½®æ–‡ä»¶çš„ç›®å½•ï¼ˆæ²¡æœ‰ç‰¹æ®Šé…ç½®çš„æ—¶å€™å¯ä»¥ä¸ç”¨å†™è¿™è¡Œï¼‰</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"3306:3306"</span> <span class="comment"># å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„3306</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=test_passwd</span> <span class="comment"># MySQLçš„rootå¯†ç ã€Œå¿…å¡«ã€</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># ä»¥ä¸‹çš†ä¸ºé€‰å¡«</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_DATABASE=test_db</span>  <span class="comment"># å¦‚æŒ‡å®šï¼Œåˆ™åœ¨å®¹å™¨ç”Ÿæˆæ—¶åˆ›å»ºè¯¥æ•°æ®åº“</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_USER=test_user</span>  <span class="comment"># æ–°ç”¨æˆ·å</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_PASSWORD=test_passwd</span> <span class="comment"># æ–°ç”¨æˆ·çš„å¯†ç </span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ALLOW_EMPTY_PASSWORD=no</span> <span class="comment"># ä¸å…è®¸ä½¿ç”¨ç©ºå¯†ç </span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_RANDOM_ROOT_PASSWORD=no</span> <span class="comment"># ä¸é€‚ç”¨éšæœºå¯†ç ï¼ˆä¸ºyesæ—¶ä¼šéšæœºç”Ÿæˆä¸€ä¸ªå¯†ç å¹¶è¾“å‡ºåˆ°stdoutä¸Šï¼Œé€šå¸¸æ˜¯ä½ çœ‹åˆ°çš„çª—å£ï¼‰</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ONETIME_PASSWORD=onetime_passwd</span> <span class="comment"># ä¸€æ¬¡æ€§å¯†ç ï¼ˆä½¿ç”¨æ—¶ï¼Œç¬¬ä¸€æ¬¡ç™»å½•ä¼šå¼ºåˆ¶è¦æ±‚ä¿®æ”¹å¯†ç ï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">dev_redis_latest</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">bridge</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"6379:6379"</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">--requirepass</span> <span class="string">"mypassword"</span>  <span class="comment"># æŒ‡å®šå®¹å™¨è¿è¡Œçš„å‘½ä»¤ï¼Œå‘½ä»¤å¤„è®¾ç½®å¯†ç </span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åœ¨è¿™ä¸ª<code>docker-compose.yml</code>æ‰€åœ¨çš„ç›®å½•ä¸‹æ‰§è¡Œ<code>docker-compose up -d</code>ï¼Œè¿™æ—¶å€™ä¸¤ä¸ªæœåŠ¡å°±éƒ½åœ¨åå°æ‚„æ‚„å¯åŠ¨å¥½å¹¶å¯ä»¥è¿æ¥ä½¿ç”¨äº†ã€‚å¦‚æœä¸æƒ³åŒæ—¶å¼€å¯æ‰€æœ‰çš„æœåŠ¡å¯ä»¥åœ¨åé¢æ¥æœåŠ¡åï¼Œä¾‹å¦‚ï¼š<code>docker-compose up -d redis</code>ã€‚</p><h1 id="0X04-å…¶ä»–å…³äºdockerä¸docker-compose"><a href="#0X04-å…¶ä»–å…³äºdockerä¸docker-compose" class="headerlink" title="0X04 å…¶ä»–å…³äºdockerä¸docker-compose"></a>0X04 å…¶ä»–å…³äºdockerä¸docker-compose</h1><ol><li><code>docker exec -it dev_mysql_latest bash</code>å¯ä»¥æ¥å…¥åˆ°<code>dev_mysql_latest</code>å®¹å™¨çš„bashä¸­è¿›è¡Œç®€å•çš„æ“ä½œï¼›</li><li><code>docker-compose up -d</code>ä¸­çš„<code>-d</code>æ˜¯åœ¨åå°çš„æ„æ€ï¼Œå¯ä»¥ä¸åŠ è¿™ä¸ªå‚æ•°ä»è€ŒæŠŠè¾“å‡ºéƒ½æ‰“åœ¨ç»ˆç«¯ä¸Šæ–¹ä¾¿è°ƒè¯•ï¼›</li><li><code>docker-compose stop</code>å’Œ<code>docker-compose rm</code>åˆ†åˆ«æ˜¯åœæ­¢å®¹å™¨å’Œé”€æ¯å®¹å™¨ï¼Œå®¹å™¨å¿…é¡»å…ˆåœæ­¢å†é”€æ¯ï¼›</li><li>å¦‚æœæƒ³ç›´æ¥é”€æ¯å®¹å™¨å¯ä»¥ä½¿ç”¨<code>docker-compose down</code>ï¼Œä»è¾“å‡ºå¯ä»¥çœ‹åˆ°å°±æ˜¯å…ˆæ‰§è¡Œäº†<code>stop</code>å†æ‰§è¡Œäº†<code>rm</code>ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> MySQL </tag>
            
            <tag> Docker </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„çº¿ç¨‹ã€è¿›ç¨‹æ± </title>
      <link href="/2019/11/12/python-thread-process-pool/"/>
      <url>/2019/11/12/python-thread-process-pool/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± "><a href="#0X00-çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± " class="headerlink" title="0X00 çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± "></a>0X00 çº¿ç¨‹æ± å’Œè¿›ç¨‹æ± </h1><p>å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹åœ¨å¹³æ—¶ç¼–ç¨‹ä¸­æ˜¯æŒºå¸¸è§çš„æ“ä½œï¼Œä¸è¿‡æ§åˆ¶è¿›ç¨‹å’Œçº¿ç¨‹çš„æ•°é‡æ˜¯ä¸€ä»¶æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ã€‚å°¤å…¶æ˜¯çº¿ç¨‹ï¼Œä¹‹å‰åœ¨æœç´¢åˆ°çš„å…³äºçº¿ç¨‹æ± çš„å†…å®¹å¤šæ•°éƒ½æ˜¯â€œé€ è½®å­â€ï¼Œå®é™…ä¸ŠPythonå·²ç»ç»™æˆ‘ä»¬é€ å¥½äº†è¿™ä¸ªè½®å­ã€‚æ–‡æ¡£åœ¨è¿™é‡Œï¼Œç”šè‡³è¿˜æ˜¯ä¸­æ–‡çš„<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvemgtY24vMy43L2xpYnJhcnkvY29uY3VycmVudC5mdXR1cmVzLmh0bWwjbW9kdWxlLWNvbmN1cnJlbnQuZnV0dXJlcw==" title="https://docs.python.org/zh-cn/3.7/library/concurrent.futures.html#module-concurrent.futures">https://docs.python.org/zh-cn/3.7/library/concurrent.futures.html#module-concurrent.futures<i class="fa fa-external-link"></i></span></p><p>æˆ‘è¿™é‡Œç®€å•çš„æ•´ç†äº†ä¸€ä¸‹ï¼Œåšä¸ªå°æ ·ä¾‹å±•ç¤ºå‡ºæ¥æ–¹ä¾¿æŸ¥é˜…ã€‚è¿™é‡Œå°±å‡è£…å¤§å®¶å¯¹Pythonæœ‰ä¸€å®šçš„äº†è§£ï¼Œè€Œä¸”ä¹Ÿå¯¹æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹å’Œè¿›ç¨‹æœ‰ä¸€äº›äº†è§£äº†ã€‚ï¼ˆå“¦å¯¹äº†ï¼Œè¿˜éœ€è¦äº†è§£ä¸€ä¸‹GILæ‰è¡Œï¼‰</p><a id="more"></a><h1 id="0X01-ä½¿ç”¨çº¿ç¨‹æ± "><a href="#0X01-ä½¿ç”¨çº¿ç¨‹æ± " class="headerlink" title="0X01 ä½¿ç”¨çº¿ç¨‹æ± "></a>0X01 ä½¿ç”¨çº¿ç¨‹æ± </h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªç”¨æ¥æµ‹è¯•çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_func</span><span class="params">(num)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    res = num * num</span><br><span class="line">    print(res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># æ„é€ ä¸€ä¸ªå¯ä»¥å®¹çº³ä¸¤ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± </span></span><br><span class="line">    thread_pool = ThreadPoolExecutor(max_workers=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> thread_pool <span class="keyword">as</span> pool:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">            pool.submit(test_func, i)   <span class="comment"># å°†ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± é‡Œ</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ‰§è¡Œä¸‹æ¥è€—æ—¶<code>3s</code>å¤§æ¦‚ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡æ‰§è¡Œäº†ä¸¤ä¸ªä»»åŠ¡ï¼Œç¬¬äºŒæ¬¡ä¸¤ä¸ªï¼Œç¬¬ä¸‰æ¬¡ä¸€ä¸ªã€‚å¯ä»¥é€šè¿‡è°ƒæ•´<code>range()</code>æ•°é‡å’Œ<code>max_workers</code>æ¥è§‚å¯Ÿè¾“å‡ºç»“æœã€‚</p><h1 id="0X02-ä½¿ç”¨è¿›ç¨‹æ± "><a href="#0X02-ä½¿ç”¨è¿›ç¨‹æ± " class="headerlink" title="0X02 ä½¿ç”¨è¿›ç¨‹æ± "></a>0X02 ä½¿ç”¨è¿›ç¨‹æ± </h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_func</span><span class="params">(num)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    res = num * num</span><br><span class="line">    print(res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    process_pool = ProcessPoolExecutor(max_workers=<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">with</span> process_pool <span class="keyword">as</span> pool:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">            pool.submit(test_func, i)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è·Ÿä¸Šé¢çº¿ç¨‹æ± çš„æ–¹æ¡ˆæ¯”èµ·æ¥å°±åªæ˜¯æŠŠ<code>ThreadPoolExecutor</code>æ¢æˆäº†<code>ProcessPoolExecutor</code>è€Œå·²ã€‚</p><h1 id="0X03-é€šç”¨çš„éƒ¨åˆ†"><a href="#0X03-é€šç”¨çš„éƒ¨åˆ†" class="headerlink" title="0X03 é€šç”¨çš„éƒ¨åˆ†"></a>0X03 é€šç”¨çš„éƒ¨åˆ†</h1><p>å…¶ä¸­<code>ProcessPoolExecutor</code>å’Œ<code>ThreadPoolExector</code>å‡æ¥æ”¶å‚æ•°<code>max_workers</code>ï¼Œä¸è¿‡ç”±äºçº¿ç¨‹å’Œè¿›ç¨‹çš„æœ¬è´¨åŒºåˆ«ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦é€‚å½“è®¾ç½®è¿™ä¸¤ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹<code>max_workers</code>çš„å€¼è®¾ç½®ä¸ºè‡ªå·±çš„é€»è¾‘å¤„ç†å™¨ä¸ªæ•°ï¼Œå¦‚æœä½ çš„CPUæ˜¯4æ ¸8çº¿ç¨‹çš„é‚£å°±è‡ªåŠ¨è®¾ç½®æˆ8ã€‚åœ¨ Windows ä¸Šï¼Œmax_workers å¿…é¡»å°äºç­‰äº 61ï¼Œå¦åˆ™å°†å¼•å‘ ValueErrorã€‚</p><p><code>pool.submit()</code>ä¸­çš„å‚æ•°æ˜¯<code>submit(func, *args)</code>ï¼Œæ‰€ä»¥æŠŠéœ€è¦ä¼ é€’ç»™<code>func</code>çš„å‚æ•°é€ä¸ªå†™åœ¨åé¢å°±å¥½äº†ã€‚</p><p><code>pool.submit()</code>åä¼šè¿”å›ä¸€ä¸ª<code>Future</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥æŸ¥çœ‹ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼š<code>cancel()</code>å¯ä»¥å–æ¶ˆä»»åŠ¡ï¼ˆå¦‚æœä»»åŠ¡è¿˜æ²¡å¼€å§‹çš„è¯ï¼‰ï¼›<code>cancelled()</code>æŸ¥çœ‹ä»»åŠ¡æ˜¯å¦è¢«å–æ¶ˆäº†ï¼›<code>running()</code>ä»»åŠ¡æ˜¯å¦åœ¨è¿›è¡Œï¼›<code>done()</code>ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œäº†ã€‚ä½¿ç”¨<code>result()</code>å¯ä»¥è·å¾—ä»»åŠ¡çš„ç»“æœï¼Œè¿˜æœªå®Œæˆçš„ä»»åŠ¡ä¼šç­‰å¾…ç»“æœï¼Œå¯ä»¥ä½¿ç”¨<code>timeout</code>å‚æ•°æŒ‡å®šç­‰å¾…å¤šå°‘ç§’ã€‚</p><h1 id="ä¸Pythonæ— å…³çš„éƒ¨åˆ†"><a href="#ä¸Pythonæ— å…³çš„éƒ¨åˆ†" class="headerlink" title="ä¸Pythonæ— å…³çš„éƒ¨åˆ†"></a>ä¸Pythonæ— å…³çš„éƒ¨åˆ†</h1><ol><li>ä½¿ç”¨å¤šçº¿ç¨‹è¦æ³¨æ„ä¸è¦å¼€è¿‡å¤šçš„çº¿ç¨‹ï¼Œå› ä¸ºåœ¨çº¿ç¨‹ä¸­åˆ‡æ¢ä¹Ÿéœ€è¦èµ„æºï¼Œçº¿ç¨‹è¿‡å¤šå¯èƒ½åè€Œä¼šå½±å“æ•ˆç‡ï¼›</li><li>è¿›ç¨‹ä¸å®œè¿‡å¤šï¼Œé˜²æ­¢ç³»ç»Ÿè´Ÿè½½è¿‡å¤§ï¼›</li><li>ä½¿ç”¨å¤šè¿›ç¨‹æ—¶è¦ä¸‡åˆ†å°å¿ƒä¸è¦å¤±æ§ï¼Œå› ä¸ºè¿›ç¨‹æ•°é‡ä¸€æ—¦å¤±æ§å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå®•æœºï¼ˆç›¸å…³å†…å®¹å¯ä»¥æœç´¢äº†è§£ä¸€ä¸‹<code>forkç‚¸å¼¹</code>ï¼‰ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Thread </tag>
            
            <tag> Process </tag>
            
            <tag> Parallel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¿¡å·åˆçº§</title>
      <link href="/2019/11/06/django-signals-primary/"/>
      <url>/2019/11/06/django-signals-primary/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>å®è¯è®²ï¼ŒDjangoçš„ä¿¡å·(signal)æœºåˆ¶å…¶å®ç”¨åˆ°çš„æ—¶å€™å¹¶ä¸å¤šï¼Œä½†æ˜¯æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ä¸€ä¸ªä¿¡å·èƒ½è§£å†³éå¸¸å¤§çš„é—®é¢˜ï¼Œæ‰€ä»¥ä¿¡å·è¿™ä¸ªä¸œè¥¿è¿˜æ˜¯å€¼å¾—äº†è§£ä¸€ä¸‹çš„ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¿™é‡Œåªè¯´ä¸€äº›åˆçº§å†…å®¹å‘¢ï¼Œä¸»è¦æ˜¯å› ä¸ºé€šè¿‡è°ƒæŸ¥å‘ç°ä¿¡å·çš„é«˜çº§çŸ¥è¯†ç”¨ï¼ˆæˆ‘ï¼‰çš„ï¼ˆä¹Ÿï¼‰å¾ˆï¼ˆä¸ï¼‰å°‘ï¼ˆä¼šï¼‰ã€‚</p><p>ç›®å‰æˆ‘å·¥ä½œä¸­ç”¨åˆ°çš„ä¿¡å·æœºåˆ¶ä¹Ÿæ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥å¯èƒ½æœ‰äº›äº‹æƒ…è¯´ä¸åˆ°ç‚¹ä¸Šè¿˜è¯·è§è°…ã€‚é‚£æˆ‘ä»¬å¼€å§‹å§~</p><h1 id="0X01-ä»€ä¹ˆæ˜¯ä¿¡å·"><a href="#0X01-ä»€ä¹ˆæ˜¯ä¿¡å·" class="headerlink" title="0X01 ä»€ä¹ˆæ˜¯ä¿¡å·"></a>0X01 ä»€ä¹ˆæ˜¯ä¿¡å·</h1><p>â€œä¿¡å·æœºåˆ¶â€å…‰ä»åå­—ä¸Šæ¥å°±å¤§æ¦‚èƒ½æ‡‚äº†ã€‚åº”è¯¥å°±æ˜¯ï¼šæŸäººå‘å‡ºæŸä¿¡å·ï¼ŒæŸäººæ¥å—åˆ°ä¹‹ååšä¸€äº›äº‹æƒ…ã€‚æ‰€ä»¥çœ‹èµ·æ¥éå¸¸ç±»ä¼¼æˆ‘ä»¬ç†Ÿæ‚‰çš„â€œè®¢é˜…-å‘å¸ƒâ€æ¨¡å¼ï¼Œå®é™…ä¸Šä¹Ÿä¹Ÿç¡®å®å¾ˆç±»ä¼¼ã€‚æ•´ä¸ªä¿¡å·æœºåˆ¶åˆ†æˆè¿™ä¹ˆå‡ ä¸ªéƒ¨åˆ†ï¼šå‘å¸ƒè€…ã€ä¿¡å·ã€æ¥æ”¶è€…å’Œä¸€ä¸ªå‡½æ•°ã€‚</p><p>æˆ‘ä»¬ä¼ ç»Ÿæˆ˜åœºä¸Šçš„ä¸€ä¸ªè¡Œä¸ºæ¥ç±»æ¯”ä¼šæ¯”è¾ƒå¥½è§£é‡Š</p><ol><li>å‘é€è€…ï¼šç±»ä¼¼äºæˆ˜åœºä¸Šæ‰“ä¿¡å·å¼¹çš„äºº</li><li>ä¿¡å·ï¼šä¿¡å·å¼¹ï¼ˆä¿¡å·å¼¹ä¼šåˆ†æˆå‡ ç§æ¯”å¦‚çº¢è‰²ã€è“è‰²ã€ç»¿è‰²çš„ï¼‰</li><li>æ¥å—è€…ï¼šå„ä¸ªä¸åŒé˜µåœ°éƒ½æœ‰äººè§‚å¯Ÿç€æˆ˜åœºçš„ä¿¡å·å¼¹</li><li>ä¸€ä¸ªå‡½æ•°ï¼šæ¥å—è€…çœ‹åˆ°ä¿¡å·å¼¹åä¼šå¯¹åº”ä½œå‡ºæˆ˜æœ¯åŠ¨ä½œ</li></ol><p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸‰ä¸ªäººï¼šå°æ˜ã€å°å¼ºå’Œæé“è›‹ï¼Œæ¯äººåˆæœ‰ä¸‰ç§ä¿¡å·å¼¹ï¼šçº¢è‰²ã€è“è‰²å’Œç»¿è‰²ï¼Œåˆæœ‰ä¸‰ä¸ªä¸åŒé˜µåœ°ï¼šè·¯å£ã€å¹¿åœºå’Œç†å‘åº—ã€‚å…¶ä¸­æ¯ä¸ªäººçš„ä¿¡å·å¼¹ä¸åŒï¼Œå°æ˜çš„çº¢è‰²ä¿¡å·å¼¹æ‰“å‡ºå»æ˜¯ä¸€ä¸ªâ€æ˜â€œå­—ï¼Œå°å¼ºçš„æ˜¯â€å¼ºâ€œï¼Œæé“è›‹çš„æ˜¯ä¸ªâ€è›‹â€œã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™åœºä¸Šçš„å°æ˜å‘å°„äº†è“è‰²çš„ä¿¡å·å¼¹ï¼ˆå‘é€è€…å‘é€äº†ç‰¹å®šä¿¡å·ï¼‰ï¼Œä¸‰ä¸ªé˜µåœ°çš„äººéƒ½çœ‹åˆ°äº†ï¼Œä½†æ˜¯ä¹‹å‰é¦–é•¿è¯´åªæœ‰å¹¿åœºçš„é˜µåœ°è¦å“åº”å°æ˜çš„è“è‰²ä¿¡å·å¼¹ï¼ˆæå‰å›ºå®šå¥½æ¥å—è€…è¦æ¥æ”¶å“ªéƒ¨åˆ†ä¿¡å·ï¼‰ï¼Œå¹¿åœºçš„é˜µåœ°æ¥å—åˆ°ä¿¡å·ä¹‹åæŒ‰ç…§ä¹‹å‰çš„è®¡åˆ’å‰å»æ”»æ‰“ç¢‰å ¡ï¼ˆæ¥å—è€…æ”¶åˆ°æŒ‡å®šä¿¡å·åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼‰ã€‚</p><p>å¤§æ¦‚çš„æµç¨‹æ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œä¸­é—´å¯èƒ½æœ‰äº›ä¸å‡†ç¡®ä¸è¿‡å¤§ä½“æ˜¯å¯¹çš„ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Djangoè‡ªèº«å†…ç½®çš„ä¸€äº›ä¿¡å·ã€‚</p><a id="more"></a><h1 id="0X02-Djangoå†…ç½®çš„ä¿¡å·"><a href="#0X02-Djangoå†…ç½®çš„ä¿¡å·" class="headerlink" title="0X02 Djangoå†…ç½®çš„ä¿¡å·"></a>0X02 Djangoå†…ç½®çš„ä¿¡å·</h1><p>Djangoä¸­çš„ä¿¡å·åˆ†ä¸¤ç±»ï¼šå†…ç½®å’Œè‡ªå®šä¹‰çš„ã€‚æˆ‘ä»¬å…ˆæ¥åˆ—å‡ºç°æœ‰çš„éƒ¨åˆ†ä¿¡å·ï¼šï¼ˆæ›´å®Œæ•´çš„Djangoå†…ç½®ä¿¡å·å¯ä»¥çœ‹<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL2VuLzIuMi90b3BpY3Mvc2lnbmFscy8=" title="https://docs.djangoproject.com/en/2.2/topics/signals/">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span>ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># modeléƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_init   <span class="comment"># æ•°æ®æ¨¡å‹æ„é€ å‰è§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> post_init  <span class="comment"># æ•°æ®æ¨¡å‹æ„é€ åšè§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_save   <span class="comment"># æ•°æ®å¯¹è±¡ä¿å­˜å‰è§¦å‘  instance.save()</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> post_save  <span class="comment"># æ•°æ®å¯¹è±¡ä¿å­˜åšè§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_delete <span class="comment"># æ•°æ®å¯¹è±¡åˆ é™¤å‰è§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> post_delete    <span class="comment"># æ•°æ®å¯¹è±¡åˆ é™¤åšè§¦å‘</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># migrateéƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_migrate    <span class="comment"># migrateå‰è§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> post_migrate   <span class="comment"># migrateåè§¦å‘</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># requestéƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">from</span> django.core.signals <span class="keyword">import</span> request_finished    <span class="comment"># è¯·æ±‚ç»“æŸåè§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.core.signals <span class="keyword">import</span> request_started     <span class="comment"># è¯·æ±‚å¼€å§‹å‰è§¦å‘</span></span><br><span class="line"><span class="keyword">from</span> django.core.signals <span class="keyword">import</span> got_request_exception   <span class="comment"># è¯·æ±‚å¼‚å¸¸åè§¦å‘</span></span><br></pre></td></tr></table></figure><h1 id="0X03-ä½¿ç”¨Djangoä¿¡å·"><a href="#0X03-ä½¿ç”¨Djangoä¿¡å·" class="headerlink" title="0X03 ä½¿ç”¨Djangoä¿¡å·"></a>0X03 ä½¿ç”¨Djangoä¿¡å·</h1><p>ä½¿ç”¨ä¸€ä¸ªDjangoä¿¡å·é¦–å…ˆè¦å¯¼å…¥ï¼ˆæˆ–è€…ç¼–å†™ï¼‰signalï¼Œæ¥ä¸‹æ¥å†è®¾ç½®å¥½æ¥å—è€…ï¼Œç´§æ¥ç€å†™å¥½è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œç„¶åæ³¨å†Œå®ƒï¼Œæœ€åè°ƒç”¨å°±å¥½äº†ã€‚</p><p>é¦–å…ˆä¸ªäººå»ºè®®ç»™signalå•ç‹¬æ”¾ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä½ signalç”¨çš„å¾ˆå¤šå¾ˆå¤šé‚£å°±å¯ä»¥ç»™æ¯ä¸ªappå®‰æ’ä¸€ä¸ª<code>signal.py</code>ï¼Œæˆ–è€…å¦‚æœä½ ç”¨çš„ä¸è¿‡çš„è¯æ•´ä¸ªé¡¹ç›®ç”¨ä¸€ä¸ª<code>signal.py</code>å°±å¥½äº†ã€‚é¦–å…ˆæˆ‘æ¥åœ¨æˆ‘çš„é¡¹ç›®çš„<code>School/</code>ä¸‹æä¸€ä¸ª<code>signal.py</code>å¹¶å†™ä¸Šä¸‹é¢çš„å†…å®¹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.dispatch <span class="keyword">import</span> receiver</span><br><span class="line"><span class="keyword">from</span> django.db.models.signals <span class="keyword">import</span> pre_save</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> School.models <span class="keyword">import</span> Student</span><br><span class="line"></span><br><span class="line"><span class="meta">@receiver(pre_save, sender=Student)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_hello_when_student_pre_save</span><span class="params">(sender, instance, **kwargs)</span>:</span></span><br><span class="line">    print(<span class="string">'hello,world'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>è£…é¥°å™¨å‚æ•°ä¸­ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¿¡å·ç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‘é€è€…ï¼›è‡ªå®šä¹‰çš„å‡½æ•°ä¸­instanceå°±æ˜¯æ•°æ®å¯¹è±¡äº†ï¼Œä½†æ˜¯ç”±äºæ˜¯<code>pre_save</code>å‚æ•°æ‰€ä»¥æ­¤æ—¶çš„instanceè¿˜æ²¡æœ‰è¢«çœŸæ­£å†™å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œæ‰€ä»¥å¦‚æœæ‰“å°<code>instance.id</code>çš„è¯å…¶å®æ˜¯ä¸ºç©ºçš„</p></blockquote><p>ç„¶åæˆ‘ä»¬æ¥æ³¨å†Œè¿™ä¸ªï¼Œçœ‹ä¸€ä¸‹ç°åœ¨<code>School/apps.py</code>çš„å†…å®¹æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.apps <span class="keyword">import</span> AppConfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SchoolConfig</span><span class="params">(AppConfig)</span>:</span></span><br><span class="line">    name = <span class="string">'School'</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ç¨åŠ æ”¹åŠ¨å°±èƒ½å®Œæˆæ³¨å†Œï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.apps <span class="keyword">import</span> AppConfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SchoolConfig</span><span class="params">(AppConfig)</span>:</span></span><br><span class="line">    name = <span class="string">'School'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">ready</span><span class="params">(self)</span>:</span>    <span class="comment"># è¿™é‡Œçš„readyåœ¨Djangoå¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨è¢«æ‰§è¡Œï¼Œç„¶åæˆ‘ä»¬çš„æ³¨å†Œå°±å®Œæˆäº†ï¼ˆå¹¶æ²¡æœ‰å…¶å®ï¼‰</span></span><br><span class="line">        <span class="keyword">from</span> .signal <span class="keyword">import</span> print_hello_when_student_pre_save</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯ç°åœ¨å…¶å®è¿˜ä¸èƒ½ç”¨ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨<code>settings.py</code>ä¸­æˆ‘ä»¬åªéœ€è¦åœ¨<code>INSTALLED_APPS</code>ä¸­æ·»åŠ ä¸€ä¸ªappåå°±å¯ä»¥äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™æ¬¡éœ€è¦æŠŠå®ƒæ”¹æˆ<code>apps.py</code>ä¸‹çš„appç±»åã€‚æˆ‘ä¹‹å‰å†™çš„æ˜¯<code>School</code>ç°åœ¨å°±è¦æ”¹æˆ<code>School.apps.SchoolConfig</code>æ‰è¡Œã€‚ï¼ˆç°åœ¨æ‰æ˜¯çœŸçš„å¥½äº†ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> ~/W/learn_dj/learn_django î‚± master +15 !3 ?4 î‚° python manage.py shell</span><br><span class="line">Python 3.7.4 (default, Oct  4 2019, 06:57:26)</span><br><span class="line">Type <span class="string">'copyright'</span>, <span class="string">'credits'</span> or <span class="string">'license'</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython 7.6.1 -- An enhanced Interactive Python. Type <span class="string">'?'</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">In [1]: from School.models import Student</span><br><span class="line"></span><br><span class="line">In [2]: Student.objects.create(name=<span class="string">'shawn'</span>)</span><br><span class="line">hello,world</span><br><span class="line">Out[2]: &lt;Student: Student object (1120)&gt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨æˆ‘<code>create</code>ä¸€ä¸ªæ•°æ®å¯¹è±¡çš„æ—¶å€™ç¡®ç¡®å®è¾“å‡ºäº†æˆ‘ä»¬æŒ‡å®šçš„<code>hello,world</code>ã€‚</p><blockquote><p>å…³äº<code>pre_save/post_save</code>çš„æç¤º</p><ol><li>å½“ä½¿ç”¨<code>obj = models.Student.objects.first(); obj.name = &#39;hello&#39;; obj.save()</code>çš„æ–¹æ³•æ›´æ–°æ•°æ®æ—¶ä¼šè§¦å‘è¯¥ä¿¡å·ï¼Œä½†æ˜¯å¦‚æœæ˜¯ç”¨<code>models.Student.objects.filter().update(name=&#39;hello&#39;)</code>æ˜¯ä¸èƒ½è§¦å‘çš„ï¼›</li><li>åœ¨<code>pre_save/post_save</code>çš„å“åº”å‡½æ•°é‡Œåˆ‡å¿Œå†æ‰§è¡Œè¯¥modelçš„<code>.save()</code>å¦åˆ™ä¼šè¿›å…¥æ­»å¾ªç¯ã€‚</li></ol></blockquote><h1 id="0X04-è‡ªå®šä¹‰ä¿¡å·"><a href="#0X04-è‡ªå®šä¹‰ä¿¡å·" class="headerlink" title="0X04 è‡ªå®šä¹‰ä¿¡å·"></a>0X04 è‡ªå®šä¹‰ä¿¡å·</h1><p>è¦ä½¿ç”¨è‡ªå®šä¹‰ä¿¡å·çš„æ—¶å€™å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œä¸è¿‡è¿˜æ˜¯å¯ä»¥è¯´ä¸€ä¸‹ã€‚æˆ‘ä»¬æ‹¿ä¸Šé¢ä¿¡å·å¼¹çš„ä¾‹å­çœ‹ä¸€ä¸‹</p><p>é¦–å…ˆåœ¨ç›®å½•ä¸‹æä¸€ä¸ª<code>custom_signals.py</code>æ–‡ä»¶ï¼Œé‡Œé¢å†™å¥½ä¸‹é¢çš„å†…å®¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> django.dispatch</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªä¿¡å·ï¼šè¿˜æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼ˆå¥½åƒæ¯”ä¿¡å·å¼¹å¼ºä¸€äº›å“ˆå“ˆå“ˆï¼‰</span></span><br><span class="line">blue_signal = django.dispatch.Signal(providing_args=[<span class="string">'attack_time'</span>, <span class="string">'attack_zone'</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback</span><span class="params">(sender, attack_time, attack_zone, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> sender == <span class="string">'å°æ˜'</span>:    <span class="comment"># åªç›¸åº”å°æ˜çš„ä¿¡å·</span></span><br><span class="line">        print(<span class="string">'attack it from &#123;&#125; &#123;&#125;'</span>.format(attack_time, attack_zone))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">blue_signal.connect(callback)</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬å¯åŠ¨shellæ¥è¯•è¯•<code>python manage.py shell</code>ï¼Œåœ¨shellé‡Œæ¨¡æ‹Ÿä¸€ä¸‹å‘é€ä¿¡å·ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨æ­£å¸¸ç¨‹åºä¸­æ˜¯å†™åœ¨<code>view</code>ä¸­çš„ï¼Œæ­¤å¤„åªæ˜¯ä¸ºäº†å±•ç¤ºæ–¹ä¾¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> ~/W/learn_dj/learn_django î‚± master +15 !3 ?6 î‚° python manage.py shell</span><br><span class="line">Python <span class="number">3.7</span><span class="number">.4</span> (default, Oct  <span class="number">4</span> <span class="number">2019</span>, <span class="number">06</span>:<span class="number">57</span>:<span class="number">26</span>) </span><br><span class="line">Type <span class="string">'copyright'</span>, <span class="string">'credits'</span> <span class="keyword">or</span> <span class="string">'license'</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython <span class="number">7.6</span><span class="number">.1</span> -- An enhanced Interactive Python. Type <span class="string">'?'</span> <span class="keyword">for</span> help.</span><br><span class="line"></span><br><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> School.custom_signal <span class="keyword">import</span> blue_signal    <span class="comment"># é¦–å…ˆå¯¼å…¥æˆ‘ä»¬çš„ä¿¡å·</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: blue_signal.send(sender=<span class="string">'æé“è›‹'</span>, attack_time=<span class="string">'now'</span>, attack_zone=<span class="string">'left'</span>)     <span class="comment"># å‘é€ä¿¡å·</span></span><br><span class="line">Out[<span class="number">2</span>]:     <span class="comment"># å¹¶æ²¡æœ‰è¾“å‡ºï¼Œå› ä¸ºæ¥å—è€…å¹¶ä¸ç›¸åº”é“è›‹çš„ä¿¡å·</span></span><br><span class="line">[(&lt;function School.custom_signal.callback(sender, attack_time, attack_zone, **kwargs)&gt;,</span><br><span class="line">  <span class="literal">None</span>)]</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: blue_signal.send(sender=<span class="string">'å°æ˜'</span>, attack_time=<span class="string">'now'</span>, attack_zone=<span class="string">'left'</span>)</span><br><span class="line">attack it <span class="keyword">from</span> now left     <span class="comment"># å°æ˜çš„ä¿¡å·å¾—åˆ°äº†ç›¸åº”ï¼Œå¹¶ä¸”å¯¹åº”çš„å‚æ•°ä¹ŸæˆåŠŸä¼ è¿›å»äº†</span></span><br><span class="line">Out[<span class="number">3</span>]:</span><br><span class="line">[(&lt;function School.custom_signal.callback(sender, attack_time, attack_zone, **kwargs)&gt;,</span><br><span class="line">  <span class="literal">None</span>)]</span><br></pre></td></tr></table></figure><h1 id="0X05-ç»“å°¾"><a href="#0X05-ç»“å°¾" class="headerlink" title="0X05 ç»“å°¾"></a>0X05 ç»“å°¾</h1><p>Djangoçš„ä¿¡å·æœºåˆ¶å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œæˆ‘è¿™é‡Œå†è´´å‡ºå‡ ä¸ªä¸é”™çš„å‚è€ƒèµ„æ–™å§</p><ol><li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL2VuLzIuMi90b3BpY3Mvc2lnbmFscy8=" title="https://docs.djangoproject.com/en/2.2/topics/signals/">å®˜æ–¹æ–‡æ¡£ï¼š Django signal<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cua2F3YWJhbmdnYS5jb20vcG9zdHMvMTk5Nw==" title="https://www.kawabangga.com/posts/1997">Djangoçš„ä¿¡å·æœºåˆ¶  å¡ç“¦é‚¦å™¶ï¼<i class="fa fa-external-link"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vcXdqLXN5c3UvcC80MjI0ODA1Lmh0bWw=" title="https://www.cnblogs.com/qwj-sysu/p/4224805.html">django ä¿¡å·ï¼ˆsignalï¼‰ 2BiTT<i class="fa fa-external-link"></i></span></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Single </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ…¢æŸ¥è¯¢åˆæ­¥</title>
      <link href="/2019/11/03/mysql-slowquery/"/>
      <url>/2019/11/03/mysql-slowquery/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-IOæ€»æ˜¯æ¯”è¿ç®—æ…¢"><a href="#0X00-IOæ€»æ˜¯æ¯”è¿ç®—æ…¢" class="headerlink" title="0X00 IOæ€»æ˜¯æ¯”è¿ç®—æ…¢"></a>0X00 IOæ€»æ˜¯æ¯”è¿ç®—æ…¢</h1><p>ä¼—æ‰€å‘¨çŸ¥è®¡ç®—æœºçš„IOéƒ½è¦æ¯”è®¡ç®—æ…¢å¾ˆå¤šå¾ˆå¤šï¼Œå³æ—¶æ˜¯ç›®å‰æ°‘ç”¨çš„é«˜çº§SSDï¼šä¸‰æ˜Ÿ970PROï¼Œå®ƒçš„è¯»å†™é€Ÿåº¦éƒ½è¦æ¯”å†…å­˜æ…¢ä¸Šå‡ ä¸ªæ•°é‡çº§ï¼Œæ›´ä¸è¦è¯´CPUäº†ã€‚æ‰€ä»¥è½¯ä»¶çš„IOé€šå¸¸éƒ½æ˜¯ç“¶é¢ˆï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯CPUç­‰å†…å­˜ï¼Œå†…å­˜ç­‰ç£ç›˜ï¼Œç£ç›˜ç­‰ç½‘ç»œã€‚</p><p>é‚£ä¹ˆå¦‚ä½•æ‰èƒ½æå‡è‡ªå·±webæœåŠ¡çš„å“åº”é€Ÿåº¦å‘¢ï¼Ÿé€šå¸¸æ¥è¯´ç®€å•çš„æ“ä½œæœ‰å¦‚ä¸‹ä¸¤ç§ï¼šæ¢ç¡¬ç›˜æˆ–è€…æ”¹SQLã€‚</p><h1 id="0X01-æ¢ç¡¬ç›˜"><a href="#0X01-æ¢ç¡¬ç›˜" class="headerlink" title="0X01 æ¢ç¡¬ç›˜"></a>0X01 æ¢ç¡¬ç›˜</h1><p>â€œè¿™éš¾é“ä¸æ˜¯åºŸè¯å—ï¼Ÿâ€å¯¹å‘€ï¼Œè¿™å°±æ˜¯åºŸè¯ã€‚å½“ç“¶é¢ˆå‡ºç°åœ¨æ•°æ®åº“çš„æŸ¥è¯¢ä¸Šäº†ï¼Œé‚£ä¹ˆæŠŠæ­£åœ¨ç”¨çš„æœºæ¢°ç¡¬ç›˜æ¢æˆå›ºæ€ç¡¬ç›˜å½“ç„¶ä¼šæå‡æ•ˆç‡ï¼Œç¨å¾®æƒ³æƒ³å°±å‘¢èƒ½æ˜ç™½çš„äº‹æƒ…ã€‚äº‹å®ä¸Šä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œä¹‹å‰æˆ‘æŠŠåŒæ ·é‡çº§çš„æ•°æ®ä»æˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒæåˆ°æˆ‘æœ¬åœ°ï¼Œæµ‹è¯•ç¯å¢ƒæ˜¯ä¼ä¸šçº§HDDï¼Œè€Œæˆ‘æœ¬åœ°æ˜¯ä¸‰æ˜Ÿ970EVOPlusçš„SSDï¼Œä¼šå‘ç°æŸ¥è¯¢åŒä¸€ä¸ªå†…å®¹å°±å¿«äº†å¥½å¤šå¥½å¤šã€‚</p><p>é‚£å…¶å®è¿™ä¸ªæ¢ç¡¬ç›˜å¹¶ä¸æ˜¯å¥½åŠæ³•ï¼Œæ¯•ç«Ÿä¸èƒ½æŒ‡æœ›å…¨éƒ½ç”¨ä¸ŠSSDã€‚è€Œä¸”å³ä½¿ç”¨ä¸ŠSSDäº†ï¼Œåœ¨æŸ¥è¯¢æ›´å¤æ‚æˆ–è€…æ•°æ®é‡æ›´å¤šçš„æƒ…å†µä¸‹è¿˜æ˜¯ä¼šå‡ºç°ç“¶é¢ˆã€‚é‚£é¦–å…ˆæƒ³åˆ°çš„æ–¹å¼å°±æ˜¯ä¼˜åŒ–SQLäº†ã€‚</p><a id="more"></a><h1 id="0X02-æ…¢æŸ¥è¯¢"><a href="#0X02-æ…¢æŸ¥è¯¢" class="headerlink" title="0X02 æ…¢æŸ¥è¯¢"></a>0X02 æ…¢æŸ¥è¯¢</h1><p>å¤§å®¶éƒ½çŸ¥é“ä¼˜åŒ–SQLï¼Œé‚£ä¹ˆä¼˜åŒ–å“ªæ¡å‘¢ï¼Ÿä¸€ä¸ªç³»ç»Ÿé‡Œå¯èƒ½æœ‰å‡ åƒæ¡SQLï¼Œæ€»ä¸èƒ½ä¸€ä¸ªä¸ªçœ‹å§ã€‚è€Œä¸”ç°åœ¨è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šé¡¹ç›®ç”¨ä¸Šäº†ORMï¼Œæ ¹æœ¬ä¸åœ¨ç³»ç»Ÿé‡Œå†™åŸç”ŸSQLäº†ã€‚</p><p>è¿™æ—¶å€™MySQLçš„æ…¢æŸ¥è¯¢åŠŸèƒ½å°±å¸®å¾—ä¸Šå¿™äº†ã€‚é¡¾åæ€ä¹‰â€œæ…¢æŸ¥è¯¢â€å°±æ˜¯å¾ˆæ…¢çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„é…ç½®èƒ½å¤Ÿè®©MySQLè®°å½•ä¸‹å¾ˆæ…¢çš„æŸ¥è¯¢è¯­å¥ï¼Œé€šè¿‡æ•´ç†åˆ†æå†å›å»ç³»ç»Ÿä¸­æ‰¾åˆ°äº§ç”Ÿè¿™äº›æ…¢æŸ¥è¯¢çš„ä½ç½®é€ä¸ªä¼˜åŒ–å°±å¯ä»¥äº†ã€‚</p><h1 id="0X03-å¼€å¯"><a href="#0X03-å¼€å¯" class="headerlink" title="0X03 å¼€å¯"></a>0X03 å¼€å¯</h1><p>é€šå¸¸æ¥è¯´å¼€å¯MySQLæ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šç›´æ¥æ”¹é…ç½®æ–‡ä»¶å’Œä¿®æ”¹å…¨å±€å˜é‡ã€‚</p><p>æ”¹é…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">slow_query_log = ON     # å¼€å§‹è®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—</span><br><span class="line">slow_query_log_file = /usr/local/mysql/data/slow.log     # æ…¢æŸ¥è¯¢æ—¥å¿—çš„ä½ç½®</span><br><span class="line">long_query_time = 1     # å¯¹â€œæ…¢â€çš„å®šä¹‰ï¼Œè¿™é‡Œæ˜¯è€—æ—¶è¶…è¿‡1s       è›¤ï¼Ÿè¿™å¾ˆæš´åŠ›å—ï¼Ÿ</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶çš„å¥½å¤„åœ¨äºä¸è®ºæ€ä¹ˆé‡å¯æ•°æ®åº“æœåŠ¡ï¼Œè¿™é¡¹é…ç½®éƒ½æ˜¯å­˜åœ¨çš„ï¼›ç¼ºç‚¹åœ¨äºæƒ³è®©å…¶ç”Ÿæ•ˆéœ€è¦é‡å¯ä¸€æ¬¡æ•°æ®åº“æ‰è¡Œã€‚</p><p>æ”¹å…¨å±€å˜é‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global slow_query_log=&apos;ON&apos;;  // æ‰“å¼€æ…¢æŸ¥è¯¢è®°å½•</span><br><span class="line"></span><br><span class="line">mysql&gt; set global slow_query_log_file=&apos;/home/shawn/slow_query.log&apos;;     // æ…¢æŸ¥è¯¢æ—¥å¿—çš„ä½ç½®ï¼ˆæˆ‘ä¹±å†™çš„ï¼Œä¸å»ºè®®å†™åœ¨è‡ªå·±çš„$HOMEä¸‹ï¼‰</span><br><span class="line"></span><br><span class="line">mysql&gt; set global long_query_time=1;    // è¿˜æ˜¯1s</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹å…¨å±€å˜é‡çš„ä¼˜åŠ¿å’Œç¼ºç‚¹æ­£å¥½ä¸ä¸Šé¢ç›¸åï¼Œèƒ½ç«‹å³ç”Ÿæ•ˆä½†æ˜¯é‡å¯ä¼šå¤±æ•ˆã€‚</p><h1 id="0X04-ä½¿ç”¨"><a href="#0X04-ä½¿ç”¨" class="headerlink" title="0X04 ä½¿ç”¨"></a>0X04 ä½¿ç”¨</h1><p>æˆ‘ä»¬æ¥æ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªæ˜¯ä¸æ˜¯é…ç½®å¥½äº†ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> ~/Workstadion/blog î‚± master ?1 î‚° mycli -h 127.0.0.1 -uroot</span><br><span class="line">Password: </span><br><span class="line">mysql 5.7.17</span><br><span class="line">mycli 1.19.0</span><br><span class="line">Chat: https://gitter.im/dbcli/mycli</span><br><span class="line">Mail: https://groups.google.com/forum/<span class="comment">#!forum/mycli-users</span></span><br><span class="line">Home: http://mycli.net</span><br><span class="line">Thanks to the contributor - Ryan Smith</span><br><span class="line">mysql root@127.0.0.1:(none)&gt; show variables like <span class="string">'slow_query%'</span>;                                                                                                   </span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Variable_name       | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| slow_query_log      | ON                                   |</span><br><span class="line">| slow_query_log_file | /home/shawn/slow.log                 |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: 0.042s</span><br><span class="line">mysql root@127.0.0.1:(none)&gt; show variables like <span class="string">'long_query_time'</span>;                                                                                               </span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| Variable_name   | Value     |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">| long_query_time | 1.000000 |</span><br><span class="line">+-----------------+-----------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: 0.035s</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨çœ‹èµ·æ¥æˆ‘ä»¬çš„æ…¢æŸ¥è¯¢æ—¥å¿—å°±æå¥½äº†ï¼Œå¼€å§‹è¯•ä¸€è¯•çœŸæ­£æ„ä¹‰ä¸Šçš„æ…¢æŸ¥è¯¢å‘¢<code>SELECT SLEEP(5)</code>ã€‚å…¶å®è¿™æ˜¯ä¸ªæ²¡æœ‰æ„ä¹‰çš„æŸ¥è¯¢ï¼ˆä¸å¤ªå¥½æ‹¿æµ‹è¯•æ•°æ®å‡ºæ¥ç»™å¤§å®¶å±•ç¤ºï¼‰ï¼Œä¸è¿‡æ²¡å…³ç³»äº†ï¼Œå› ä¸ºå®ƒä¼šå¾ˆæ‰å®å¾—ç­‰5sï¼Œæ»¡è¶³æˆ‘ä»¬å¯¹â€œæ…¢æŸ¥è¯¢â€çš„è®¤çŸ¥äº†ã€‚</p><p>ç„¶åå»çœ‹çœ‹æˆ‘ä»¬çš„æ—¥å¿—å‘¢ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼Œå°±æ²¡æœ‰é—®é¢˜äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@1971e980abad:/var/lib/mysql# tail -f 1971e980abad-slow.log </span><br><span class="line">mysqld, Version: 5.7.17 (MySQL Community Server (GPL)). started with:</span><br><span class="line">Tcp port: 3306  Unix socket: /var/run/mysqld/mysqld.sock</span><br><span class="line">Time                 Id Command    Argument</span><br><span class="line"># Time: 2019-11-03T12:47:41.827832Z</span><br><span class="line"># User@Host: root[root] @  [172.17.0.1]  Id:    14</span><br><span class="line"># Query_time: 12.000459  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0</span><br><span class="line">SET timestamp=1572785261;</span><br><span class="line">select sleep(12);</span><br></pre></td></tr></table></figure></p><p>è¿™æ—¶å€™å°±å¯ä»¥å°†æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ—¶é—´è®¾ç½®æˆä¸€ä¸ªåˆç†çš„å€¼ï¼Œç„¶åå°±å¯ä»¥é™å¾…ç”Ÿäº§ç¯å¢ƒæˆ–è€…æµ‹è¯•ç¯å¢ƒæ‰“ä¸€å¤§å †logå‡ºæ¥å–½ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªè¶…å‡ºæˆ‘ä»¬å®šä¹‰çš„æ—¶é•¿çš„SQLå’Œå…¶è€—æ—¶ï¼Œå½“æ—¥å¿—ç´¯è®¡èµ·æ¥æˆ‘ä»¬å°±å¯ä»¥ä»è€—æ—¶æœ€é•¿çš„æˆ–è€…å‡ºç°æœ€é¢‘ç¹çš„å¼€å§‹ä¼˜åŒ–SQLäº†ã€‚</p><p>å½“ç„¶ï¼Œæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œä¸è¿‡æˆ‘è¿™ç§åˆçº§MySQLç”¨æˆ·é‡åˆ°çš„ä¹Ÿè¿˜ä¸å¤ªéœ€è¦ã€‚æ¯æ¬¡çš„æ…¢æŸ¥è¯¢æ—¥å¿—è‡ªå·±æä¸‹æ¥é€è¡Œçœ‹ä¸€çœ‹æ€»ç»“ä¸€ä¸‹è§„å¾‹ä¹Ÿå°±èƒ½æ‰¾åˆ°é—®é¢˜æ‰€åœ¨å•¦ã€‚å¦‚æœåé¢æ—¥å¿—è¶Šæ¥è¶Šå¤šè¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™å†è€ƒè™‘ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å§~</p><blockquote><p>è¿™é‡Œè¿æ¥MySQLç”¨çš„ä¸æ˜¯mysqlçš„å®˜æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªPythonç¼–å†™çš„å«åš<code>mycli</code>çš„å·¥å…·ã€‚è¿™ä¸ªå·¥å…·å®ç°äº†<code>mysql</code>å‘½ä»¤çš„å‡ ä¹æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”æ”¯æŒè¯­æ³•é«˜äº®ä¸è‡ªåŠ¨è¡¥å…¨ï¼Œä½¿ç”¨ä½“éªŒéå¸¸æ£’ã€‚å¯ä»¥ç›´æ¥ç”¨<code>pip install mycli --user</code>å®‰è£…</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Linuxæ¡Œé¢ä¸‹æ´»å¾—èˆ’æœ</title>
      <link href="/2019/11/02/better-linux/"/>
      <url>/2019/11/02/better-linux/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>è¿™ç¯‡åšå®¢çš„ç›®æ ‡è¯»è€…ï¼šæ­£åœ¨ä½¿ç”¨Linuxæ¡Œé¢ï¼Œæ‰“ç®—é•¿æœŸç»§ç»­ä½¿ç”¨ä¸‹å»çš„åŒå­¦ï¼ˆè¿™ä¹Ÿå°±æ„å‘³ç€ç†Ÿæ‚‰Linuxä¸‹çš„åŸºç¡€æ“ä½œï¼Œç†è§£Linuxä¸‹çš„å¸¸è§æ¦‚å¿µï¼‰ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªæˆ‘ä¹‹å‰å†™çš„â€œ<a href="https://blog.just666.com/2019/10/29/use-linux/">åœ¨Linuxæ¡Œé¢ä¸‹å­˜æ´»</a>â€å¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><h1 id="0X01-é¢œå€¼å°±æ˜¯æˆ˜æ–—åŠ›"><a href="#0X01-é¢œå€¼å°±æ˜¯æˆ˜æ–—åŠ›" class="headerlink" title="0X01 é¢œå€¼å°±æ˜¯æˆ˜æ–—åŠ›"></a>0X01 é¢œå€¼å°±æ˜¯æˆ˜æ–—åŠ›</h1><p><strong>Linuxä¹Ÿä¸éƒ½æ˜¯é»‘è‰²èƒŒæ™¯ç™½è‰²å­—çš„å‘½ä»¤è¡Œã€‚</strong></p><p>é¦–å…ˆè¦æ¢çš„å°±æ˜¯ä¸€å¥—ä¸»é¢˜å’Œå›¾æ ‡ï¼Œä¸è®ºæ˜¯KDEã€Gnomeè¿˜æ˜¯Xfceéƒ½å¯ä»¥åœ¨å¯¹åº”çš„ç½‘ç«™æ‰¾åˆ°å¤§é‡çš„ä¸»é¢˜ï¼Œç®€å•æ¢è¿‡å›¾æ ‡å’Œä¸»é¢˜ä¹‹åå†é…åˆä¸€å¼ å¥½çœ‹çš„å£çº¸ï¼Œæ•´ä¸ªè§‚æ„Ÿç«‹é©¬å°±å¥½äº†ä¸å°‘ã€‚</p><blockquote><p>KDE: <span class="exturl" data-url="aHR0cHM6Ly9zdG9yZS5rZGUub3JnLw==" title="https://store.kde.org/">https://store.kde.org/<i class="fa fa-external-link"></i></span><br>Gnome: <span class="exturl" data-url="aHR0cHM6Ly93d3cuZ25vbWUtbG9vay5vcmcv" title="https://www.gnome-look.org/">https://www.gnome-look.org/<i class="fa fa-external-link"></i></span><br>Xfce: <span class="exturl" data-url="aHR0cHM6Ly93d3cueGZjZS1sb29rLm9yZy8=" title="https://www.xfce-look.org/">https://www.xfce-look.org/<i class="fa fa-external-link"></i></span></p></blockquote><p>ç„¶åè¦æ¢çš„å°±æ˜¯å­—ä½“äº†ï¼Œ<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3poLWhhbnMvJUU3JUFEJTg5JUU1JUFFJUJEJUU1JUFEJTk3JUU0JUJEJTkz" title="https://zh.wikipedia.org/zh-hans/%E7%AD%89%E5%AE%BD%E5%AD%97%E4%BD%93">ç­‰å®½å­—ä½“<i class="fa fa-external-link"></i></span>æˆ‘æ¨èè¿™å‡ ä¸ª<span class="exturl" data-url="aHR0cHM6Ly9zb3VyY2Vmb3VuZHJ5Lm9yZy9oYWNrLw==" title="https://sourcefoundry.org/hack/">Hack<i class="fa fa-external-link"></i></span>ã€<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Fkb2JlLWZvbnRzL3NvdXJjZS1jb2RlLXBybw==" title="https://github.com/adobe-fonts/source-code-pro">Source Code Pro<i class="fa fa-external-link"></i></span>ã€<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9jYXNjYWRpYS1jb2Rl" title="https://github.com/microsoft/cascadia-code">Cascadia Code<i class="fa fa-external-link"></i></span>éƒ½å¾ˆå¥½çœ‹ï¼Œé€‚åˆåœ¨ç»ˆç«¯ã€IDEå’Œç¼–è¾‘å™¨é‡Œä½¿ç”¨ã€‚</p><p>æœ€åå°±æ˜¯zshä¸»é¢˜ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯zshçš„è¯æ¨èä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvbWthdHYvcG93ZXJsZXZlbDEwaw==" title="https://github.com/romkatv/powerlevel10k">powerlevel10k<i class="fa fa-external-link"></i></span>è¿™ä¸ªä¸»é¢˜ï¼Œæ˜¯ç”±<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1Bvd2VybGV2ZWw5ay9wb3dlcmxldmVsOWs=" title="https://github.com/Powerlevel9k/powerlevel9k">powerlevel9k<i class="fa fa-external-link"></i></span>å‘å±•è€Œæ¥çš„ï¼Œä½†æ˜¯é€Ÿåº¦æ¯”<code>powerlevel9k</code>å¿«å¥½å¤šã€‚</p><h1 id="0X02-å–„ç”¨aliaså’Œbashå‡½æ•°"><a href="#0X02-å–„ç”¨aliaså’Œbashå‡½æ•°" class="headerlink" title="0X02 å–„ç”¨aliaså’Œbashå‡½æ•°"></a>0X02 å–„ç”¨aliaså’Œbashå‡½æ•°</h1><p>ç›¸ä¿¡å¤§å®¶åœ¨åˆå­¦Linuxçš„æ—¶å€™éƒ½å­¦è¿‡<code>alias</code>æŒ‡ä»¤ï¼Œæ²¡å­¦è¿‡çš„è¯æˆ‘ç®€å•ä»‹ç»ä¸€å¥ï¼šâ€œaliasæ˜¯ç»™å‘½ä»¤å–åˆ«åçš„å·¥å…·ï¼Œä¾‹å¦‚æ‰§è¡Œ<code>alias new_ls=&quot;ls -l&quot;</code>è¿‡åå†ä½¿ç”¨<code>new_ls</code>å‘½ä»¤å°±å’Œä½¿ç”¨<code>ls -l</code>ä¸€æ ·äº†â€ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“å°†<code>alias</code>å‘½ä»¤ç›´æ¥å†™åœ¨shellé‡Œï¼Œåœ¨å…³é—­é‡å¼€shellä¹‹åå°±å¤±æ•ˆäº†ï¼ˆèµ·ç ç°åœ¨çŸ¥é“äº†ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æŠŠ<code>alias</code>å†™åœ¨<code>.bashrc</code>æˆ–è€…<code>.zshrc</code>ä¸­ï¼ˆä¾ä½ ä½¿ç”¨çš„shellè€Œå®šï¼‰ã€‚ç°åœ¨æˆ‘çš„<code>.zshrc</code>ä¸­å°±æœ‰å¾ˆå¤šå·²ç»å†™å¥½äº†çš„ï¼Œä¸‹é¢ç»™å¤§å®¶åˆ†é¡¹å‡ ä¸ªå¯¹å¤§å®¶éƒ½æœ‰ç”¨çš„</p><a id="more"></a><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># alias for simple command</span></span><br><span class="line"><span class="built_in">alias</span> f=<span class="string">'open .'</span>    <span class="comment"># ç”¨å›¾å½¢æ–‡ä»¶ç®¡ç†å™¨æ‰“å¼€å½“å‰ç›®å½•</span></span><br><span class="line"><span class="built_in">alias</span> h=<span class="string">'open ~'</span></span><br><span class="line"><span class="built_in">alias</span> py=<span class="string">'ipython3'</span></span><br><span class="line"><span class="built_in">alias</span> py2=<span class="string">'ipython2'</span></span><br><span class="line"><span class="built_in">alias</span> du=<span class="string">'/usr/bin/ncdu'</span>    <span class="comment"># ncduæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œé‡Œå¯è§†åŒ–æŸ¥çœ‹ç£ç›˜ï¼ˆç›®å½•ï¼‰å ç”¨ç‡çš„å·¥å…·</span></span><br><span class="line"><span class="built_in">alias</span> cat=<span class="string">'/usr/bin/bat'</span>    <span class="comment"># batæ˜¯ä¸€ä¸ªå¸¦è¯­æ³•é«˜äº®ã€è¡Œå·æ˜¾ç¤ºä¸”èƒ½å¤Ÿä¸Šä¸‹æ»šåŠ¨çš„catåŠ å¼ºç‰ˆ</span></span><br><span class="line"><span class="built_in">alias</span> down=<span class="string">'aria2c -x16 -j4'</span>    <span class="comment"># ä½¿ç”¨aria2è¿›è¡Œå¤šçº¿ç¨‹ä¸‹è½½</span></span><br><span class="line"><span class="built_in">alias</span> me=<span class="string">"cd <span class="variable">$HOME</span>/Workstadion/ &amp;&amp; ls"</span></span><br><span class="line"><span class="built_in">alias</span> connect_android=<span class="string">"scrcpy --bit-rate 256M"</span>  <span class="comment"># ä½¿ç”¨scrcpyè¿æ¥åˆ°æ¥å…¥ç”µè„‘çš„Androidæ‰‹æœº</span></span><br><span class="line"><span class="built_in">alias</span> code=<span class="string">'LANG="zh_CN.UTF-8" LANGUAGE="zh_CN.UTF-8" code'</span>     <span class="comment"># ç”¨VSCodeæ‰“å¼€</span></span><br><span class="line"><span class="built_in">alias</span> jwt=<span class="string">"python3 <span class="variable">$HOME</span>/Workstadion/script/get_token.py jwt"</span>   <span class="comment"># è‡ªå·±ç¼–å†™çš„æ–¹ä¾¿è·å–å¼€å‘ç¯å¢ƒjwt tokençš„å·¥å…·</span></span><br><span class="line"><span class="built_in">alias</span> token=<span class="string">"python3 <span class="variable">$HOME</span>/Workstadion/script/get_token.py token"</span></span><br><span class="line"><span class="built_in">alias</span> open=<span class="string">'LANG="zh_CN.UTF-8" xdg-open &gt; /dev/null 2&gt; /dev/null'</span>   <span class="comment"># ä½¿ç”¨å¯¹åº”çš„å·¥å…·æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># alias to source command   # æ˜ å°„åˆ°åŸå§‹å·¥å…·</span></span><br><span class="line"><span class="built_in">alias</span> _du=<span class="string">'/usr/bin/du'</span></span><br><span class="line"><span class="built_in">alias</span> _cat=<span class="string">'/usr/bin/cat'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># alias some command for network and proxy  # ä½¿ç”¨ä»£ç†åšä¸€äº›äº‹æƒ…</span></span><br><span class="line"><span class="built_in">alias</span> use_proxy=<span class="string">"ALL_PROXY=socks5://127.0.0.1:1080"</span></span><br><span class="line"><span class="built_in">alias</span> git_clone_with_proxy=<span class="string">"ALL_PROXY=socks5://127.0.0.1:1080 git clone"</span></span><br><span class="line"><span class="built_in">alias</span> yay_with_proxy=<span class="string">"ALL_PROXY=socks5://127.0.0.1:1080 yay"</span></span><br></pre></td></tr></table></figure><p><code>alias</code>çš„åŠŸèƒ½è¿˜æ˜¯æ¯”è¾ƒå•ä¸€ï¼Œæ¯•ç«Ÿä»â€œåˆ«åâ€è¿™ä¸ªåå­—ä¸Šå°±çœ‹å‡ºæ¥äº†ã€‚ä¸è¿‡å¥½åœ¨è¿˜å¯ä»¥å†™å‡½æ•°ï¼Œå†™å‡½æ•°è¿™å°±æ˜¯æˆ‘ä»¬ç¨‹åºå‘˜æ¯”è¾ƒæ“…é•¿çš„äº†ã€‚è¿™é‡Œç®€å•ä»‹ç»ï¼ˆçœŸçš„è¶…ç®€å•çš„é‚£ç§ï¼‰ä¸€ä¸‹<code>Bash</code>çš„å‡½æ•°ï¼ˆå½“ç„¶<code>zsh</code>ä¹Ÿæ˜¯å…¼å®¹çš„ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">foo</span></span>() &#123;</span><br><span class="line">    <span class="comment"># xxxxx</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯ä¸€ä¸ªå‡½æ•°çš„åŸºæœ¬ç»“æ„äº†ï¼Œå†é…åˆå‚æ•°ï¼š<code>$0  $1  $2  $3</code>è¿™ç§å°±è¶³å¤Ÿæä¸€äº›ç‰¹åˆ«ç®€å•çš„å‡½æ•°äº†ã€‚æˆ‘ä»¬ä¸€æ®µå‘½ä»¤å¦‚æœå‰é¢å›ºå®šåé¢æ˜¯å˜åŠ¨çš„é‚£ä¹ˆå¯ä»¥æ–¹ä¾¿å¾—ç”¨<code>alias</code>æ¯”å¦‚ï¼š<code>docker-compose up -d web</code>å’Œ<code>docker-compose up -d test</code>è¿™ç§å°±å¯ä»¥å°†å‰åŠéƒ¨åˆ†ææˆ<code>alias</code>å†æ‹¼èµ·æ¥ç”¨æ¯”å¦‚<code>alias dp-up-d=&quot;docker-compose up -d&quot;</code>ç„¶å<code>dp-up-d web</code>å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¦‚æœæ˜¯<code>grep -Rn &quot;hello&quot; ~/articles</code>å’Œ<code>grep -Rn &quot;world&quot; ~/article</code>è¿™ç§å‘¢å°±æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™æ—¶å€™å°±è¦ç”¨å‡½æ•°äº†ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">grep_this</span></span>() &#123;</span><br><span class="line">    grep -Rn <span class="string">"<span class="variable">$1</span>"</span> .</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°å°±å¯ä»¥é€šè¿‡<code>grep_this hello</code>æ¥æ‰§è¡Œ<code>grep -Rn &quot;hello&quot; .</code>è¿™ä¸ªå‘½ä»¤ã€‚å…¶ä¸­çš„å‚æ•°ï¼š<code>$0</code>å’Œ<code>$1</code>æŒ‡çš„å°±æ˜¯æ•´ä¸ªå‘½ä»¤ç”¨ç©ºæ ¼åˆ†éš”ä¹‹åçš„ä¸‹æ ‡ï¼Œä¾‹å¦‚<code>$1</code>æŒ‡çš„å°±æ˜¯æ•´æ¡å‘½ä»¤ç”¨ç©ºæ ¼åˆ†éš”åï¼Œä¸‹æ ‡ä¸º1çš„å€¼ï¼Œè¿™é‡Œçš„å®ä¾‹å‡½æ•°ä¹Ÿå°±æ˜¯æŒ‡çš„â€helloâ€äº†ã€‚</p><p>è¿™é‡Œç»™å¤§å®¶å¤åˆ¶å‡ æ¡æˆ‘è‡ªå·±çš„é…ç½®ï¼Œå¯èƒ½æ˜¯å¤§å®¶éƒ½ç”¨çš„åˆ°çš„</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># v2er translate    # v2exä¸€è€å“¥æçš„è¯å…¸apiï¼Œç›´æ¥ç”¨`v2 hello`å°±å¯ä»¥æŸ¥åˆ°helloçš„ä¸­æ–‡ï¼ˆæ”¯æŒä¸­è‹±äº’è½¬ï¼‰</span></span><br><span class="line"><span class="function"><span class="title">v2</span></span>() &#123;</span><br><span class="line">  <span class="built_in">declare</span> q=<span class="string">"$*"</span></span><br><span class="line">  curl --user-agent curl <span class="string">"https://v2en.co/<span class="variable">$&#123;q// /%20&#125;</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker    # ä½¿ç”¨`attach mysql`å¯ä»¥æ¥å…¥åˆ°å«æœ‰mysqlçš„è¡Œçš„dockerå®¹å™¨çš„bashä¸­ï¼ˆå½“æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªgrepç»“æœæ—¶æ‰æœ‰æ•ˆï¼Œæœ‰å…´è¶£çš„è€å“¥å¯ä»¥è‡ªè¡Œä¿®æ”¹ï¼‰</span></span><br><span class="line"><span class="function"><span class="title">attach</span></span>() &#123;</span><br><span class="line">  docker <span class="built_in">exec</span> -it `docker ps | grep $* | awk -F <span class="string">' '</span> <span class="string">'&#123;print $1&#125;'</span>` bash</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">attach_django</span></span>() &#123;</span><br><span class="line">  docker <span class="built_in">exec</span> -it `docker ps | grep $* | awk -F <span class="string">' '</span> <span class="string">'&#123;print $1&#125;'</span>` python manage.py shell</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">grep_this</span></span>() &#123;   <span class="comment"># `grep_this test`ä»å½“å‰ç›®å½•é€’å½’æ‰¾ä¸‹å»ï¼Œå°†æ‰€æœ‰å«æœ‰testçš„æ–‡æœ¬æ–‡ä»¶çš„è¡Œéƒ½è¾“å‡ºå‡ºæ¥</span></span><br><span class="line">  grep -Rn <span class="string">"<span class="variable">$1</span>"</span> .</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">find_this</span></span>() &#123;   <span class="comment"># `find_this test`é€’å½’å½“å‰ç›®å½•æ‰¾åˆ°è·¯å¾„å«testçš„</span></span><br><span class="line">  find . -name \*<span class="variable">$1</span>\*</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0X03-æœ¬åœ°æœåŠ¡å°½é‡DockeråŒ–"><a href="#0X03-æœ¬åœ°æœåŠ¡å°½é‡DockeråŒ–" class="headerlink" title="0X03 æœ¬åœ°æœåŠ¡å°½é‡DockeråŒ–"></a>0X03 æœ¬åœ°æœåŠ¡å°½é‡DockeråŒ–</h1><p>ä¼ ç»Ÿæ–¹å¼æˆ‘ä»¬éƒ½æ˜¯å°†æœ¬åœ°å¼€å‘æ‰€ä¾èµ–çš„æœåŠ¡ä¾‹å¦‚ï¼šMySQLå’ŒRedisè¿™ç§ç›´æ¥éƒ¨ç½²ä¸€ä»½ã€‚ä½†æ˜¯å…¶å®è¿™ç§éƒ¨ç½²æ–¹å¼åœ¨å¼€å‘ç¯å¢ƒæ˜¯ä¸å¤ªå¥½çš„ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨Dockeréƒ¨ç½²ã€‚å¦‚æœä½ åŒæ—¶è¦ç”¨3ä¸ªMySQLç‰ˆæœ¬ï¼Œ3ä¸ªRedisç‰ˆæœ¬ï¼Œè¿™åªè¿˜è¦ç”¨5ä¸ªMongoç‰ˆæœ¬ï¼Œé‚£æ€•ä¸æ˜¯è¦ç–¯äº†å¯¹å§ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æä¸€ä¸ª<code>docker</code>å†æä¸€ä¸ª<code>docker-compose</code>ç„¶åå¼€å§‹å°è¯•éƒ¨ç½²ç¯å¢ƒï¼ˆdockerå’Œdocker-composeçš„å®‰è£…è¿™é‡Œå°±ä¸è¯´äº†ï¼‰ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">"3"</span></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:latest</span><br><span class="line">    container_name: dev_mysql</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    restart: always</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/mysql:/var/lib/mysql</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"3306:3306"</span></span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=ä½ çš„å¯†ç </span><br><span class="line">    <span class="built_in">command</span>: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  redis:</span><br><span class="line">    image: redis:latest</span><br><span class="line">    container_name: dev_redis</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"6379:6379"</span></span><br><span class="line"></span><br><span class="line">  mongo:</span><br><span class="line">    image: mongo:latest</span><br><span class="line">    container_name: dev_mongo</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"27017:27017"</span></span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/mongo:/var/lib/mongo</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†å†…å®¹ä¿å­˜ä¸º<code>docker-compose.yml</code>ï¼Œå¹¶æ”¾åˆ°ä¸€ä¸ªç©ºç›®å½•ä¸‹å¼€å§‹ä¸€æ³¢å¤æ‚çš„æ“ä½œï¼šé¦–å…ˆæ‰§è¡Œ<code>docker-compose up -d</code>ï¼Œç„¶åç­‰ä¸€ä¼šå„¿ï¼Œç­‰æ‹‰å®Œè¿™ä¸‰ä¸ªé•œåƒï¼Œæ¥ä¸‹æ¥ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å°±å¥½äº†ï¼ˆæ˜¯çš„ï¼Œè¿™å°±å¥½äº†ï¼‰ã€‚è¿™æ ·ä½ å°±åœ¨æœ¬åœ°éƒ¨ç½²äº†<code>MySQL+Redis+Mongo</code>å¹¶ä¸”éƒ½æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦ä¸åŒçš„ç‰ˆæœ¬å¯ä»¥è¿™ä¸ªæ ·å­</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">"3"</span></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  mysql:</span><br><span class="line">    image: mysql:latest</span><br><span class="line">    container_name: dev_mysql</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    restart: always</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/mysql:/var/lib/mysql</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"3306:3306"</span></span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=ä½ çš„å¯†ç </span><br><span class="line">    <span class="built_in">command</span>: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line">    </span><br><span class="line">  mysql_old:</span><br><span class="line">    image: mysql:5.7.17</span><br><span class="line">    container_name: dev_mysql</span><br><span class="line">    network_mode: bridge</span><br><span class="line">    restart: always</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data/mysql:/var/lib/mysql</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="string">"3306:3306"</span></span><br><span class="line">    environment:</span><br><span class="line">      - MYSQL_ROOT_PASSWORD=ä½ çš„å¯†ç </span><br><span class="line">    <span class="built_in">command</span>: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ç”¨<code>docker-compose up -d mysql</code>å’Œ<code>docker-compose up -d mysql_old</code>å°±å¯ä»¥å¯åŠ¨ç›¸åº”çš„ç‰ˆæœ¬äº†ã€‚</p><p><strong>æ³¨æ„</strong></p><blockquote><ol><li>è¿™é‡Œå±•ç¤ºåªæ˜¯æ”¹äº†ç‰ˆæœ¬ï¼Œä¸è¿‡æ”¹äº†ç‰ˆæœ¬çš„è¯æ•°æ®æ–‡ä»¶çš„æ˜ å°„ä¸€å®šè¦æ”¹ï¼Œè¦ä¸ç„¶ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„MySQLç”¨åŒä¸€å¥—æ•°æ®æ–‡ä»¶ä¼šå‡ºé—®é¢˜çš„</li><li>è¿™é‡Œå±•ç¤ºåªæ˜¯ç”¨äº†æœ€ç®€å•çš„é…ç½®ï¼Œé™¤äº†MySQLå…¶ä»–çš„æœåŠ¡ç”šè‡³æ²¡æœ‰å¯†ç ï¼Œå³ä½¿æ˜¯å¼€å‘æ¬¢è¿ä¹Ÿè¦<strong>æ³¨æ„æ•°æ®å®‰å…¨</strong></li><li>å¦‚æœéœ€è¦æ›´æ·±åº¦çš„è‡ªå®šä¹‰æ¯ä¸ªæœåŠ¡å°±éœ€è¦å–çœ‹å¯¹åº”é•œåƒå’ŒæœåŠ¡çš„å®˜æ–¹æ–‡æ¡£äº†</li></ol></blockquote><p>äº‹å®ä¸Šæˆ‘è¿˜ç”¨Dockeréƒ¨ç½²è¿‡FTPæ–¹ä¾¿åŒäº‹çš„ä¸åŒæ“ä½œç³»ç»Ÿé—´å¿«é€Ÿä¼ é€’æ–‡ä»¶ï¼Œæ‰€ä»¥å¤§å¤§å°å°çš„æœåŠ¡åªè¦æƒ³å¾—åˆ°éƒ½å¯ä»¥ç”¨Dockeræ¥éƒ¨ç½²ï¼Œä¸ä»…æ–¹ä¾¿è¿˜èƒ½é™ä½æåäº†çš„é£é™©ã€‚</p><h1 id="0X03-ä¸€ä¸ªPyçš„å°æ“ä½œ"><a href="#0X03-ä¸€ä¸ªPyçš„å°æ“ä½œ" class="headerlink" title="0X03 ä¸€ä¸ªPyçš„å°æ“ä½œ"></a>0X03 ä¸€ä¸ªPyçš„å°æ“ä½œ</h1><p>ç°åœ¨æœ‰æ­Œåœºæ™¯ï¼šä½ åŒäº‹æƒ³ä»ä½ ç”µè„‘ä¸Šæä¸ªæ–‡ä»¶è¿‡å»ï¼Œè¯¥æ€ä¹ˆæï¼Ÿå½“ç„¶è¿™æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ˜¯éå¸¸ç®€å•å¿«é€Ÿçš„ï¼šæ‰¾åˆ°ä½ æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•<code>python3 -m http.server 2333</code>ç„¶åæŠŠ<code>http://ip:2333</code>å‘ç»™ä½ çš„åŒäº‹å°±å¥½äº†ã€‚æ˜¯çš„ä½ æ²¡çœ‹é”™ï¼Œç”¨ä¸€è¡Œå‘½ä»¤å°±å¯åŠ¨äº†ä¸€ä¸ªä¸´æ—¶çš„webæœåŠ¡å™¨ã€‚</p><p>è¿™ä¸ªæ“ä½œåº”ç”¨åœºæ™¯ä¹Ÿå¾ˆå¤šï¼šä½ é€šè¿‡è·³æ¿æœºåˆ°æœåŠ¡å™¨ä¸Šå¯¼å‡ºäº†ä¸ªæ•°æ®ï¼Œå› ä¸ºç”¨çš„è·³æ¿æœºæ‰€ä»¥ä¸èƒ½scpï¼Œé‚£è¿™æ—¶å€™<code>http.server</code>å°±æ˜¯ä¸ªå¥½åŠæ³•ï¼›ç”šè‡³æˆ‘è¿˜ä¸´æ—¶ç”¨è¿™ä¸ªå‘½ä»¤ç»™åŒäº‹æä¾›è¿‡<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2thc3VnYW5vc29yYXMvY3hrLWJhbGw=" title="https://github.com/kasuganosoras/cxk-ball">CXKæ‰“çƒ<i class="fa fa-external-link"></i></span>çš„æ¸¸æˆå‘¢å“ˆå“ˆå“ˆã€‚</p><h1 id="0X04-zshæ²¡æ’ä»¶å°±åƒå–é…’æ²¡é…’ç²¾"><a href="#0X04-zshæ²¡æ’ä»¶å°±åƒå–é…’æ²¡é…’ç²¾" class="headerlink" title="0X04 zshæ²¡æ’ä»¶å°±åƒå–é…’æ²¡é…’ç²¾"></a>0X04 zshæ²¡æ’ä»¶å°±åƒå–é…’æ²¡é…’ç²¾</h1><p><code>zsh</code>ä½œä¸ºä¸€ä¸ªæ‰€è°“çš„â€œç»ˆæShellâ€ï¼Œæ”¯æŒçš„æ’ä»¶æ˜¯éå¸¸éå¸¸å¤šçš„ã€‚è¿™é‡Œç»™å¤§å®¶çœ‹çœ‹æˆ‘æ­£åœ¨ç”¨çš„æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶æ˜¯<code>~/.zshrc</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">plugins=(</span><br><span class="line">    z</span><br><span class="line">    git</span><br><span class="line">    fabric</span><br><span class="line">    extract</span><br><span class="line">    thefuck</span><br><span class="line">    fzf-zsh</span><br><span class="line">    git-open</span><br><span class="line">    virtualenvwrapper</span><br><span class="line">    colored-man-pages</span><br><span class="line">    zsh-autosuggestions</span><br><span class="line">    zsh-syntax-highlighting</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒæŒ‘å‡ ä¸ªä»‹ç»ä¸€ä¸‹</p><h2 id="z"><a href="#z" class="headerlink" title="z"></a>z</h2><p>æˆ‘ä»¬åœ¨Linuxä¸‹æœ€å¸¸ç”¨çš„å¯èƒ½å°±æ˜¯<code>cd</code>äº†ï¼Œ<code>z</code>é…åˆ<code>zsh</code>çš„åŸç”ŸåŠŸèƒ½å¯ä»¥è®©æˆ‘ä»¬ä¸å†éœ€è¦<code>cd</code>ã€‚æ¯”å¦‚æˆ‘ä»¬ç»å¸¸å»<code>~/Workstadion/too_young/simple</code>è¿™ä¸ªç›®å½•ï¼Œé‚£ä¹ˆä»¥åå°±å¯ä»¥ç›´æ¥<code>z simple</code>è·³è¿‡å»äº†ã€‚å…¶å®æ˜¯è¿™æ ·ï¼Œä½ å¯ä»¥åœ¨ç»ˆç«¯ç›´æ¥ç”¨<code>z</code>æ¥æŸ¥çœ‹å½“å‰å„ä¸ªç›®å½•çš„æƒé‡ï¼Œ<code>z</code>å‘½ä»¤å°±æ˜¯ä»æƒé‡æœ€é«˜å¼€å§‹æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å¯¹åº”çš„ç›®å½•å¹¶è·³è½¬è¿‡å»ã€‚</p><p>å¦å¤–æˆ‘è¯´çš„<code>zsh</code>åŸç”ŸåŠŸèƒ½æ˜¯æŒ‡ï¼šé»˜è®¤å°±æ˜¯cdã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨<code>zsh</code>ä¸­ç›´æ¥è¾“å…¥<code>/</code>å°±ä¼šè·³åˆ°æ ¹ç›®å½•ï¼Œç›´æ¥<code>..</code>å°±æ˜¯ä¸Šçº§ï¼Œç›´æ¥<code>~/Workstadion</code>å°±æ˜¯å¯¹åº”çš„ç›®å½•ï¼Œçœä¸‹äº†<code>cd</code>çš„è¿‡ç¨‹</p><h2 id="fabric"><a href="#fabric" class="headerlink" title="fabric"></a>fabric</h2><p>å¦‚æœä½ ç”¨<code>fabric</code>çš„è¯ï¼Œåœ¨<code>fabfile.py</code>å­˜åœ¨çš„ç›®å½•ä¸‹è¾“å…¥<code>fab</code>å†tabå°±å¯ä»¥è¡¥å…¨<code>fabric</code>ä¸­çš„å‘½ä»¤</p><h2 id="extract"><a href="#extract" class="headerlink" title="extract"></a>extract</h2><p>æˆ‘ä»¬çŸ¥é“è§£å‹<code>zip</code>è¦ç”¨<code>unzip</code>ï¼Œè§£å‹<code>rar</code>è¦ç”¨<code>unrar</code>ï¼Œè§£å‹<code>tar.gz</code>è¦ç”¨<code>tar -zxvf</code>â€¦â€¦çŸ¥é“æ˜¯çŸ¥é“äº†ï¼Œä½†æ˜¯æ¯æ¬¡ç”¨èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥æœ‰äº†è¿™ä¸ªæ’ä»¶ã€‚ä¸ç®¡ä½ æ˜¯å•¥<code>tar.gz/tar.xz/tar.bz2/zip/rar</code>ï¼Œç»Ÿç»Ÿä¸€ä¸ª<code>x</code>å…¨éƒ¨è§£å‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x qwer.zip</span><br><span class="line">x asdf.rar</span><br><span class="line">x zxcv.tar.gz</span><br><span class="line">x qwer.tar.xz</span><br></pre></td></tr></table></figure><h2 id="thefuck"><a href="#thefuck" class="headerlink" title="thefuck"></a>thefuck</h2><p>é¡¾åæ€ä¹‰ï¼Œå½“ä½ æƒ³å¼<code>fxxk</code>çš„æ—¶å€™ï¼Œè¿™ä¸ªæ’ä»¶å°±æœ‰ç”¨äº†ã€‚<code>thefuck</code>æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼Œè¦ç”¨<code>pip install thefuck --user</code>æ¥å®‰è£…ã€‚è£…å¥½ä¹‹åå†é…åˆä¸Šè¿™ä¸ªæ’ä»¶å°±å¯ä»¥å®ç°ç¥å¥‡çš„æ•ˆæœã€‚æ¯”å¦‚å½“ä½ åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥äº†ä¸€é•¿ä¸²å‘½ä»¤<code>git commmt -m &quot;feat: æ–°å¢äº†ä»€ä¹ˆé¬¼çš„éœ€æ±‚ç‚¹&quot;</code>ï¼Œæ˜¾ç„¶å‰é¢çš„<code>commit</code>æ‹¼é”™äº†ï¼Œå¦‚æœæ˜¯ä»¥å‰çš„è¯å°±åªæœ‰è¿”å›å»æ”¹ã€‚è¿™æ—¶å€™å°±å¾ˆæƒ³å¤§å¼<code>fxxk</code>äº†ï¼Œä½†æ˜¯è¯·æ·¡å®šã€‚åŒå‡»ä¸€ä¸‹ä½ çš„ESCé”®ï¼Œä¼šå‘ç°ä½ çš„å‘½ä»¤å·²ç»è¢«è‡ªåŠ¨ä¿®æ­£å¹¶å†™åœ¨å‘½ä»¤è¡Œé‡Œäº†ã€‚</p><p>æ˜¯çš„ï¼Œè¿™ä¸ª<code>thefuck</code>å°±æ˜¯è‡ªåŠ¨ä¿®å¤å†™é”™çš„å‘½ä»¤çš„å·¥å…·ã€‚</p><h2 id="zsh-autosuggestionså’Œzsh-syntax-highlighting"><a href="#zsh-autosuggestionså’Œzsh-syntax-highlighting" class="headerlink" title="zsh-autosuggestionså’Œzsh-syntax-highlighting"></a>zsh-autosuggestionså’Œzsh-syntax-highlighting</h2><p>è¿™ä¸¤ä¸ªéƒ½æ˜¯éœ€è¦æ‰‹åŠ¨å®‰è£…çš„ï¼Œå¯ä»¥å»GitHubä¸Šæœä¸€ä¸‹ï¼Œå¾ˆç®€å•ã€‚åˆ†åˆ«æ˜¯å®æ—¶æç¤ºå‘½ä»¤çš„æ­£ç¡®æ€§å’Œé¢„å…ˆæç¤ºç±»ä¼¼çš„å†å²å‘½ä»¤çš„</p><h2 id="ä¸€å¥è¯ä»‹ç»å…¶ä»–çš„ï¼š"><a href="#ä¸€å¥è¯ä»‹ç»å…¶ä»–çš„ï¼š" class="headerlink" title="ä¸€å¥è¯ä»‹ç»å…¶ä»–çš„ï¼š"></a>ä¸€å¥è¯ä»‹ç»å…¶ä»–çš„ï¼š</h2><ol><li>git æ˜¯ä¸€å †ç°æˆçš„gitçš„<code>alias</code></li><li>fzf-zsh éœ€è¦å…ˆå®‰è£…<code>fzf</code>ã€‚åœ¨å‘½ä»¤è¡Œé‡ŒæŒ‰ä¸‹Ctrl+Rï¼Œç”¨æ–°çš„é€†å‘æœç´¢æ›¿æ¢åŸæ¥ä¸å¥½ç”¨çš„è€å¼æœç´¢</li><li>git-open ç”¨æµè§ˆå™¨æ‰“å¼€å½“å‰gitä»“åº“ï¼šæ”¯æŒGitHubå’ŒGitLab</li><li>colored-man-pages å½©è‰²é«˜äº®çš„man</li></ol><h1 id="0X05-å¥½åƒæ²¡å•¥äº†"><a href="#0X05-å¥½åƒæ²¡å•¥äº†" class="headerlink" title="0X05 å¥½åƒæ²¡å•¥äº†"></a>0X05 å¥½åƒæ²¡å•¥äº†</h1><p>ä¸€æ—¶åŠä¼šä¹Ÿæƒ³ä¸åˆ°æœ‰ä»€ä¹ˆè¦è¡¥å……çš„äº†ï¼Œç­‰ä»€ä¹ˆæ—¶å€™æƒ³åˆ°æ–°çš„äº†å†æå§ã€‚ç¥å¤§å®¶ç”Ÿæ´»å·¥ä½œæ„‰å¿«~</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Linuxæ¡Œé¢ä¸‹å­˜æ´»</title>
      <link href="/2019/10/29/use-linux/"/>
      <url>/2019/10/29/use-linux/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>è¿™ç¯‡åšå®¢çš„ç›®æ ‡è¯»è€…ï¼šæœ‰Linuxä½¿ç”¨åŸºç¡€ï¼Œæ‰“ç®—ä½¿ç”¨Linuxä½œä¸ºæ¡Œé¢ç³»ç»Ÿçš„äººï¼ˆè¿™ä¹Ÿå°±æ„å‘³ç€ç†Ÿæ‚‰Linuxä¸‹çš„åŸºç¡€æ“ä½œï¼Œç†è§£Linuxä¸‹çš„å¸¸è§æ¦‚å¿µï¼‰ã€‚</p><p>æ³¨ï¼šè¿™ç¯‡åšå®¢ä¸è®¨è®ºä¸å¯¹æ¯”Linux/Windows/MacOSç­‰ä¸åŒçš„æ“ä½œç³»ç»Ÿã€‚</p><h1 id="0X01-é¦–å…ˆé€‰æ‹©ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬"><a href="#0X01-é¦–å…ˆé€‰æ‹©ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬" class="headerlink" title="0X01 é¦–å…ˆé€‰æ‹©ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬"></a>0X01 é¦–å…ˆé€‰æ‹©ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬</h1><p>ä¼—æ‰€å‘¨çŸ¥Linuxæ˜¯ä¸€ä¸ªå†…æ ¸ï¼Œåœ¨è¿™ä¸ªå†…æ ¸åŸºç¡€ä¸Šæœ‰å¾ˆå¤šå‘è¡Œç‰ˆæœ¬ä¾‹å¦‚ï¼šArchlinuxã€Manjaroã€Ubuntuã€Deepinã€Debianã€openSUSEã€Fedoraç­‰ç­‰ã€‚é‚£æˆ‘ä»¬é¦–å…ˆè¦é€‰æ‹©ä¸€ä¸ªæ¥å®‰è£…åˆ°è‡ªå·±ç”µè„‘ä¸Šã€‚</p><p>åŸºäºæˆ‘è‡ªå·±çš„ä½¿ç”¨ä½“éªŒæ¯”è¾ƒæ¨èä½¿ç”¨çš„æ˜¯ï¼šManjaroã€Ubuntuã€Deepinè¿™ä¸‰ä¸ªï¼Œä»–ä»¬å…±åŒçš„ä¼˜ç‚¹æ˜¯ï¼šé€‚åˆåˆæ¬¡ä½¿ç”¨Linuxæ¡Œé¢çš„äººã€‚</p><h2 id="Manjaro"><a href="#Manjaro" class="headerlink" title="Manjaro"></a>Manjaro</h2><p>åŸºäºArchlinuxï¼Œæ»šåŠ¨æ›´æ–°ã€‚è¯¥å‘è¡Œç‰ˆæœ¬æœ€å¤§çš„ç‰¹ç‚¹æ˜¯è½¯ä»¶ç‰ˆæœ¬ç´§è·Ÿæœ€æ–°ï¼Œè€Œä¸”ç”±äºæ˜¯æ»šåŠ¨æ›´æ–°æ‰€ä»¥ä¸ç”¨åƒå¤šæ•°ç³»ç»Ÿä¸€æ ·éš”ä¸€æ®µæ—¶é—´æ¥ä¸€æ¬¡å¤§ç‰ˆæœ¬æ›´æ–°ã€‚åªè¦æŒ‰ç…§ç³»ç»Ÿæç¤ºè¿›è¡Œå¸¸è§„ç³»ç»Ÿå‡çº§å°±å¯ä»¥å°†æ•´ä¸ªç³»ç»Ÿä¸€ç›´ä¿æŒåœ¨æœ€æ–°çš„çŠ¶æ€ã€‚</p><p>Manjaroèƒ½å¤Ÿä½¿ç”¨Archlinuxçš„AURè½¯ä»¶ä»“åº“ï¼Œç®—æ˜¯è½¯ä»¶ä»“åº“æœ€ä¸°å¯Œçš„å‘è¡Œç‰ˆæœ¬ä¹‹ä¸€äº†ï¼Œå¾ˆå¤šå…¶ä»–ç³»ç»Ÿè¦æ“ä½œå¾ˆå¤šæ­¥éª¤æ‰èƒ½è£…å¥½çš„è½¯ä»¶åœ¨Manjaroä¸‹ä¸€ä¸ªå‘½ä»¤å°±èƒ½è£…å¥½ã€‚</p><p>å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯å¯ä»¥ä½¿ç”¨ArchWIKIï¼Œå¾ˆå¤šé—®é¢˜åœ¨WIKIé‡Œéƒ½æœ‰è¯¦ç»†çš„è§£é‡Šã€‚</p><p>è€ŒManjaroçš„ç¼ºç‚¹ä¹Ÿæ˜¯æœ‰çš„ï¼Œä¾‹å¦‚ç”¨æˆ·ç¾¤ä½“è¿˜æ˜¯ä¸å¤Ÿå¤§ã€‚å¦‚æœä½ ç”µè„‘å‡ºç°äº†ç‚¹é—®é¢˜ï¼Œé‚£ä¹ˆææœ‰å¯èƒ½ä½ çš„åŒäº‹å’Œæœ‹å‹éƒ½æ²¡æœ‰ç”¨è¿‡è¿™ä¸ªæ“ä½œç³»ç»Ÿï¼Œåªæœ‰ä¸€ç‚¹ç‚¹åœ¨ç½‘ä¸Šæ‰¾è§£å†³æ–¹æ¡ˆã€‚å¦‚æœæ˜¯Ubuntuçš„è¯å¯èƒ½å¥½å¤šäººéƒ½ç”¨è¿‡ï¼Œå¯ä»¥ç»™ä½ ä¸€äº›æç¤ºæˆ–è€…å»ºè®®ã€‚</p><a id="more"></a><h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>Ubuntuæ˜¯åŸºäºDebiançš„å‘è¡Œç‰ˆæœ¬ï¼Œåº”è¯¥æ˜¯ç›®å‰ç”¨æˆ·æ•°é‡æœ€åºå¤§çš„Linuxæ¡Œé¢å‘è¡Œç‰ˆæœ¬äº†ã€‚æœ€å¤§çš„ä¼˜åŠ¿ä¹Ÿæ˜¯ä¸Šè¿°çš„ç”¨æˆ·è¶³å¤Ÿå¤šï¼Œå‡ ä¹ä½ é‡åˆ°çš„ä¸€åˆ‡é—®é¢˜éƒ½ä¼šæœ‰äººé‡åˆ°è¿‡ï¼Œç½‘ä¸Šä¸€æœå‡ æœ¬å°±æœ‰ç­”æ¡ˆäº†ã€‚</p><p>ç¼ºç‚¹å°±æ˜¯è·ŸManjaroæ¯”èµ·æ¥è½¯ä»¶æ¯”è¾ƒå°‘ï¼Œå€’ä¸æ˜¯ä¸èƒ½å®‰è£…è€Œæ˜¯è£…èµ·æ¥å¯èƒ½æ›´éº»çƒ¦ä¸€ç‚¹ã€‚è¿˜æœ‰å°±æ˜¯æ®è¯´Ubuntuçš„å›¾å½¢ç•Œé¢ä¼šæ— ç¼˜æ— æ•…æŒ‚æ‰ï¼Œä¸çŸ¥é“ç°åœ¨çš„æƒ…å†µæ˜¯æ€ä¹ˆæ ·äº†ã€‚</p><p>æ³¨ï¼šUbuntuçš„ç‰ˆæœ¬å·ä¸ºxx.04å’Œxx.10ä¸¤ä¸ªï¼Œä¾‹å¦‚â€14.04/14.10/15.04/15.10/16.04/16.10â€è¿™ç§ï¼Œä»£è¡¨çš„æ„æ€æ˜¯â€œå‘å¸ƒçš„å¹´ä»½.å‘å¸ƒçš„æœˆä»½â€ã€‚Ubuntuæ¯å¹´4æœˆå’Œ6æœˆä¼šå‘å¸ƒæ–°çš„ç‰ˆæœ¬ï¼Œç„¶åå¶æ•°å¹´å‘å¸ƒçš„æ˜¯LTSä¹Ÿå°±æ˜¯é•¿æœŸæ”¯æŒç‰ˆã€‚æ‰€ä»¥å»ºè®®ä½¿ç”¨æœ€å¤§çš„å¶æ•°å¹´çš„å››æœˆä»½ç‰ˆæœ¬ï¼Œç›®å‰æ¥è¯´çš„è¯å°±æ˜¯18.04ã€‚</p><h2 id="Deepin"><a href="#Deepin" class="headerlink" title="Deepin"></a>Deepin</h2><p>Deepinæ˜¯åŸºäºUbuntuçš„å‘è¡Œç‰ˆæœ¬ï¼Œæ˜¯å›½å†…çš„ä¸€ä¸ªå›¢é˜Ÿåœ¨ç»´æŠ¤çš„ã€‚ç•Œé¢æ¯”è¾ƒæ¼‚äº®ï¼Œåˆç”±äºæ˜¯å›½å†…å›¢é˜Ÿç»´æŠ¤çš„ç³»ç»Ÿæ‰€ä»¥é›†æˆäº†ä¸€äº›å¸¸ç”¨çš„Windowsè½¯ä»¶ä¾‹å¦‚ï¼šå¾®ä¿¡ã€QQè¿™ç§ã€‚é€šå¸¸æ¥è¯´åœ¨Linuxä¸Šè¿è¡ŒWindowsç¨‹åºè¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦çš„ï¼Œå°¤å…¶æ˜¯å®Œç¾è¿è¡Œï¼Œæ‰€ä»¥Deepinåšçš„è¿™ä¸ªå·¥ä½œæ˜¯éå¸¸å€¼å¾—è‚¯å®šçš„ã€‚å°¤å…¶é€‚åˆåˆæ¬¡ä½¿ç”¨Linuxæ¡Œé¢çš„äººã€‚</p><p>è€Œä¸”Deepinæœ‰å¾ˆå¤šä¼˜ç§€çš„é«˜è´¨é‡çš„è‡ªç ”è½¯ä»¶ï¼Œä¾‹å¦‚æ·±åº¦éŸ³ä¹ã€æ·±åº¦å½±é™¢ã€æ·±åº¦ç»ˆç«¯ç­‰ï¼Œä¸ä»…å¥½ç”¨è€Œä¸”å¥½çœ‹ã€‚</p><p>ä»ç„¶æ˜¯å› ä¸ºå›½äº§çš„åŸå› ï¼Œå¼€å‘å›¢é˜Ÿè®¾è®¡å›¢é˜Ÿéƒ½æ˜¯ä¸­å›½äººï¼Œç”¨æˆ·ç¾¤ä½“ä¹Ÿå¾ˆå¤šä¸­å›½äººï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªç»´æŠ¤çš„å¾ˆæ£’çš„ä¸­æ–‡è®ºå›ï¼Œæ–¹ä¾¿å¤§å®¶äº¤æµé—®é¢˜ã€‚</p><p>æ³¨ï¼šDeepinå³å°†å‘å¸ƒV20ç‰ˆæœ¬ï¼Œå€¼å¾—æœŸå¾…</p><blockquote><p>Archlinuxå¹¶éä¸å¥½ï¼Œåªæ˜¯å®‰è£…èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”æœ‰Nå¡ç‹¬ç«‹æ˜¾å¡çš„è¯é©±åŠ¨ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä¸æ˜¯å¾ˆé€‚åˆæ–°æ‰‹ä½¿ç”¨ï¼Œå¦‚æœä¸åœ¨ä¹è¿™äº›çš„è¯Archlinuxåˆ™æ˜¯ä¸€ä¸ªæ›´æ£’çš„å‘è¡Œç‰ˆæœ¬ï¼›<br>openSUSEå¹¶éä¸å¥½ï¼Œåªæ˜¯å›½å†…çš„ç”¨æˆ·å¤ªå°‘äº†ï¼Œè€Œä¸”ç»™openSUSEæ‰“åŒ…çš„ç¨‹åºä¹Ÿä¸å¤šï¼Œä¸è¿‡æ®è¯´openSUSEçš„KDEè°ƒæ•™å¾ˆæ£’ã€‚å¦‚æœä¸å¤ªåœ¨ä¹è¿™äº›çš„è¯openSUSEä¹Ÿæ˜¯éå¸¸æ£’çš„å‘è¡Œç‰ˆæœ¬ï¼›<br>Fedoraå¹¶éä¸å¥½ï¼Œåªæ˜¯æ›´æ–°å¤ªå¿«äº†ï¼ŒåŠå¹´å°±æœ‰ä¸€ä¸ªå¤§æ›´æ–°ã€‚è€Œä¸”ä½œä¸ºçº¢å¸½ç³»åˆ—çš„å‘è¡Œç‰ˆæœ¬ï¼Œç›¸å¯¹æ¥è¯´æä¾›çš„è½¯ä»¶åŒ…ä¹Ÿæ¯”è¾ƒå°‘ã€‚å¦‚æœèƒ½æ¥æ”¶åŠå¹´ä¸€ä¸ªå¤§ç‰ˆæœ¬å¹¶ä¸”ä¸€å¹´å°±ä¸å†å¯¹æ—§ç‰ˆæœ¬æä¾›æ”¯æŒçš„è¯ï¼ŒFedoraä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½å‘è¡Œç‰ˆæœ¬ï¼ˆå®é™…ä¸Šæˆ‘è‡ªå·±ä¹Ÿç”¨è¿‡å¤§æ¦‚ä¸€å¹´ï¼‰ï¼›<br>LinuxMintç­‰ç­‰ä¹Ÿå¹¶éä¸å¥½ï¼Œæœ‰äº›æˆ‘è‡ªå·±ä¹Ÿæ²¡æœ‰ä½“éªŒè¿‡ï¼Œå†æœ‰äº›ç¡®å®ä¸å¤ªé€‚åˆæ–°æ‰‹ä½¿ç”¨è¿™é‡Œä¹Ÿå°±ä¸å†ä¸€ä¸€åˆ—å‡ºï¼›</p></blockquote><p><strong>æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼šå°½å¯èƒ½ä¸è¦ä½¿ç”¨æå°ä¼—çš„å‘è¡Œç‰ˆæœ¬åœ¨ç”Ÿäº§ç”µè„‘ä¸Šï¼Œå› ä¸ºä¸€æ—¦å‡ºé—®é¢˜å¯èƒ½å¾ˆéš¾è§£å†³ã€‚</strong></p><h1 id="0X02-ç„¶åé€‰æ‹©ä¸€ä¸ªæ¡Œé¢ç¯å¢ƒ"><a href="#0X02-ç„¶åé€‰æ‹©ä¸€ä¸ªæ¡Œé¢ç¯å¢ƒ" class="headerlink" title="0X02 ç„¶åé€‰æ‹©ä¸€ä¸ªæ¡Œé¢ç¯å¢ƒ"></a>0X02 ç„¶åé€‰æ‹©ä¸€ä¸ªæ¡Œé¢ç¯å¢ƒ</h1><p>æ¡Œé¢ç¯å¢ƒç®€ç§°DEï¼Œåœ¨Windowsä¸Šæˆ‘ä»¬åªæœ‰ä¸€ä¸ªå¯é€‰ï¼Œåœ¨MacOSä¸ŠåŒæ ·åªæœ‰ä¸€ä¸ªå¯é€‰ï¼Œä½†æ˜¯Linuxä¸Šæˆ‘ä»¬æœ‰éå¸¸å¤šçš„é€‰æ‹©ï¼Œä¸»æµçš„å°±æœ‰ï¼šKDEã€Gnomeã€ddeã€Xfceã€i3ç­‰ã€‚é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆé€‰å‘¢ï¼Ÿ</p><p>é¦–å…ˆä½¿ç”¨Linuxæ¡Œé¢æœ‰ä¸€ä¸ªå‡†åˆ™ï¼ˆæˆ‘è‡ªå·±è®¤ä¸ºçš„ï¼Œä¸ä¸€å®šæ‰€æœ‰äººéƒ½è®¤åŒï¼‰ï¼šå°½å¯èƒ½å°‘çš„è°ƒæ•´ä½ çš„æ¡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°½å¯èƒ½ä½¿ç”¨åŸç”Ÿçš„æ¡Œé¢æ ·å­ã€‚å› ä¸ºLinuxæ¡Œé¢ç¯å¢ƒå¹¶æ²¡æœ‰Windowså’ŒMacOSé‚£ä¹ˆç¨³å®šï¼Œæ‰€ä»¥è¶Šå¤šçš„ä¿®æ”¹å°±æ„å‘³ç€è¶Šå¤šçš„ä¸ç¨³å®šã€‚è€Œä¸”ç”±äºLinuxæ¡Œé¢å…è®¸æé«˜ç¨‹åº¦çš„è‡ªå®šä¹‰ï¼Œåˆæ¬¡ä½¿ç”¨å¾ˆå®¹æ˜“æ‰åˆ°â€œç¾åŒ–æ¡Œé¢â€çš„å‘é‡Œã€‚</p><p>ç»¼åˆæ¥è¯´æˆ‘ç›®å‰æ¨èçš„ä¸‰ä¸ªDEæ˜¯ï¼šKDEã€Gnomeã€Xfceã€dde</p><h2 id="KDE"><a href="#KDE" class="headerlink" title="KDE"></a>KDE</h2><p>è‡ªä»KDE5ä¹‹åï¼ŒKDEå°±å˜å¾—éå¸¸éå¸¸æ£’äº†ï¼Œä¹Ÿæ­£æ˜¯æˆ‘ç°åœ¨ä½¿ç”¨çš„æ¡Œé¢ç¯å¢ƒã€‚æ•´ä½“è®¾è®¡é£æ ¼æ¯”è¾ƒç»Ÿä¸€ï¼Œä¹Ÿæ¯”è¾ƒæ¼‚äº®ã€‚KDEçš„é»˜è®¤æ¡Œé¢åˆçœ‹èµ·æ¥æœ‰ç‚¹åƒWindowsï¼ˆå¯èƒ½å°±æ˜¯å› ä¸ºä¸‹é¢çš„â€œä»»åŠ¡æ â€å§ï¼‰</p><h2 id="Gnome"><a href="#Gnome" class="headerlink" title="Gnome"></a>Gnome</h2><p>Gnomeä¸KDEä¸€èµ·ä½å±…Linuxæ¡Œé¢ç¯å¢ƒå¸‚åœºçš„å‰ä¸¤åã€‚ä¸KDEä¸åŒï¼ŒGnomeçš„è®¾è®¡åˆçœ‹èµ·æ¥æœ‰ç‚¹åƒMacOSï¼ˆåº”è¯¥æ˜¯å› ä¸ºé¡¶éƒ¨çš„â€œTopbarâ€ï¼‰</p><h2 id="Xfce"><a href="#Xfce" class="headerlink" title="Xfce"></a>Xfce</h2><p>Xfceçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ç®€æ´é«˜æ•ˆã€‚æˆ‘è®°å¾—ä¹‹å‰ä½¿ç”¨Xfceçš„æ—¶å€™å¼€æœºé»˜è®¤æ‰ä½¿ç”¨ä¸åˆ°500Mçš„å†…å­˜ã€‚æ€»ä¹‹Xfceå°±æ˜¯é‚£ç§ç®€å•çš„ï¼Œä¸åä¸½çš„é«˜æ•ˆçš„æ¡Œé¢ç¯å¢ƒã€‚</p><h2 id="dde"><a href="#dde" class="headerlink" title="dde"></a>dde</h2><p>ddeæ˜¯Deepinå›¢é˜Ÿçš„ä½œå“ï¼Œé£æ ¼ä¸ä»¥å¾€ä¸åŒï¼Œæˆ‘ä¹Ÿä¸å¤ªä¼šè¯´ï¼Œå¯ä»¥å»å®˜ç½‘çœ‹ä¸€ä¸‹å…·ä½“çš„ã€‚</p><h2 id="å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ"><a href="#å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ"></a>å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</h2><p>å®é™…ä¸Šæ“ä½œç³»ç»Ÿå’ŒDEæ˜¯å®Œå…¨å‰¥ç¦»çš„ï¼Œä¸è¿‡æˆ‘ä»¬æ—¢ç„¶æ˜¯æ–°æ‰‹å°±æœ€å¥½ä½¿ç”¨å®˜æ–¹è‡ªå¸¦çš„æˆ–è€…ç›´æ¥æ”¯æŒçš„ï¼Œé˜²æ­¢å‡ºç°æ„å¤–å¯¹å§ã€‚å…¶ä¸­Manjaroå®˜æ–¹æ”¯æŒæœ€å¤šï¼šåŒæ—¶æä¾›äº†KDEã€Gnomeå’ŒXfceçš„å®‰è£…é•œåƒï¼Œåˆç”±ç¤¾åŒºæä¾›äº†ddeçš„ç‰ˆæœ¬ï¼›Ubuntuå®˜æ–¹ä½¿ç”¨Gnomeï¼Œä½†æœ‰ç¤¾åŒºæä¾›çš„kUbuntuä½¿ç”¨KDEå’ŒxUbuntuä½¿ç”¨Xfceï¼›Deepinçš„è¯å°±ä½¿ç”¨ddeï¼Œä½¿ç”¨å…¶ä»–DEçš„è¯ä¼šä½¿Deepinä¸§å¤±ä¼˜åŠ¿ï¼ˆDeepiné‡Œå¾ˆå¤šå®˜æ–¹æä¾›çš„Windowsç¨‹åºåœ¨éddeæ¡Œé¢ä¸‹æ”¯æŒå¹¶ä¸å¥½ï¼‰ã€‚</p><p>ç°åœ¨æ“ä½œç³»ç»Ÿå’ŒDEå·²ç»å¯¹åº”å¥½äº†ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ç»„åˆäº†ã€‚é€‰å¥½ä¹‹åå¯ä»¥å…ˆæä¸€ä¸ªè™šæ‹Ÿæœºæ¥ä½“éªŒä¸€ä¸‹ï¼Œè§‰å¾—ä¸é”™çš„è¯å°±æ¥è£…ç³»ç»Ÿå§ã€‚</p><h1 id="0X03-è½¯ä»¶éƒ¨åˆ†"><a href="#0X03-è½¯ä»¶éƒ¨åˆ†" class="headerlink" title="0X03 è½¯ä»¶éƒ¨åˆ†"></a>0X03 è½¯ä»¶éƒ¨åˆ†</h1><p>éƒ½å·²ç»æ‰“ç®—ä½¿ç”¨Linuxä½œä¸ºæ¡Œé¢ç³»ç»Ÿäº†ï¼Œé‚£åº”è¯¥å¾ˆæ¸…æ¥šWindowsã€MacOSã€Linuxçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸äº’é€šçš„å§ã€‚æ‰€ä»¥æœ‰å¯èƒ½ä½ åœ¨Windowsã€MacOSä¸­ä½¿ç”¨çš„ç¨‹åºåœ¨Linuxä¸‹å¹¶æ²¡æœ‰ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰Linuxæ¡Œé¢çš„æœ€å¤§ç“¶é¢ˆï¼ˆæˆ‘è‡ªå·±è¿™ä¹ˆè®¤ä¸ºï¼‰ã€‚</p><p>ä¸è¿‡ä¹Ÿä¸ç”¨è¿‡åˆ†æ‹…å¿ƒï¼Œæˆ‘ä»¬å¸¸ç”¨çš„å·¥å…·æ¯”å¦‚ï¼šChromeã€Firefoxã€PyCharmï¼ˆIDEAç­‰Jetbrainså®¶æ‰€æœ‰IDEï¼‰ã€Postmanã€VScodeç­‰è¿˜æ˜¯åŸç”Ÿæ”¯æŒçš„ï¼Œç”šè‡³æ¯”å…¶ä»–ç³»ç»Ÿæœ‰æ›´å¥½çš„ä½“éªŒã€‚æ¥ä¸‹æ¥ä¸»è¦ä»‹ç»ä¸€äº›é‚£äº›æ²¡æœ‰çš„è½¯ä»¶çš„æ›¿ä»£æ–¹æ¡ˆ</p><h2 id="è¾“å…¥æ³•"><a href="#è¾“å…¥æ³•" class="headerlink" title="è¾“å…¥æ³•"></a>è¾“å…¥æ³•</h2><p>è¾“å…¥æ³•åœ¨Linuxä¸‹æ˜¯æœ‰ä¸€ä¸ªæœç‹—çš„ï¼Œä¸è¿‡æˆ‘ä¸å–œæ¬¢ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥æœç´¢ä¸€ä¸‹å°è¯•å°è¯•ã€‚å¦‚æœä¸ç”¨æœç‹—çš„è¯æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä¸¤ä¸ªï¼šsunpinyinå’ŒRimeã€‚å…¶ä¸­sumpinyinå‡ ä¹æ˜¯æ‰€æœ‰Linuxéƒ½å¸¦çš„ï¼Œé€‰å¥½å°±èƒ½ç”¨ï¼›Rimeæ˜¯ä¸€ä¸ªå¼€æºè¾“å…¥æ³•ï¼Œä½¿ç”¨é—¨æ§›ç¨é«˜ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æ›´å¥½ç”¨ã€‚</p><h2 id="æ¢¯å­"><a href="#æ¢¯å­" class="headerlink" title="æ¢¯å­"></a>æ¢¯å­</h2><p>æˆ‘è‡ªå·±æ˜¯ä½¿ç”¨çš„v2rayä½œä¸ºæ¢¯å­ï¼Œåœ¨Linuxä¸‹å¾ˆå®¹æ˜“å°±èƒ½è£…å¥½ã€‚å¦‚æœæ˜¯ç”¨ssrçš„å¯èƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè™½ç„¶æœ‰ssrçš„è§£å†³æ–¹æ¡ˆä½†æ˜¯æˆ‘æ²¡ç”¨è¿‡ä¸å¤ªå¥½è¯´ã€‚sså€’æ˜¯ç®€å•ï¼Œå¯ä»¥æœç´¢å®‰è£…ä¸€ä¸ª<code>shadowsocks-qt5</code>çš„å›¾å½¢å·¥å…·ï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p><blockquote><p>Linuxä¸‹ä¸€èˆ¬æ¢¯å­éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œéœ€è¦åœ¨æµè§ˆå™¨ä¸Šé…ç½®ä»£ç†ã€‚ä¸è®ºæ˜¯Chromeè¿˜æ˜¯Firefoxéƒ½æ¨èä½¿ç”¨<code>switchomega</code>è¿™ä¸ªæ‰©å±•æ¥é…ç½®æµè§ˆå™¨ä»£ç†</p></blockquote><h2 id="å½±éŸ³æ’­æ”¾"><a href="#å½±éŸ³æ’­æ”¾" class="headerlink" title="å½±éŸ³æ’­æ”¾"></a>å½±éŸ³æ’­æ”¾</h2><p>Linuxä¸‹æœ¬åœ°è§†é¢‘æ’­æ”¾å™¨ä¸¤ä¸ªå¤§ä½¬ï¼šmpvå’ŒVLCã€‚å…¶ä¸­VLCå¼€ç®±å³ç”¨ï¼Œç®€å•ç²—æš´ï¼›mpvåˆ™æ˜¯å¼‚å¸¸ç®€å•ï¼Œæƒ³è¦ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼Ÿéº»çƒ¦æ‚¨è‡ªå·±ç¼–å†™é…ç½®æ–‡ä»¶ã€‚æ‰€ä»¥å¯ä»¥è§å¾—å¦‚æœå¯¹æ’­æ”¾å™¨è‡ªå®šä¹‰è¦æ±‚å¾ˆé«˜çš„è¯å»ºè®®ä½¿ç”¨mpvæˆ–è€…å¦‚æœæ²¡æœ‰ä»€ä¹ˆè¦æ±‚ä¹Ÿèƒ½ç”¨mpvï¼Œå¦åˆ™vlcæ›´åˆé€‚ã€‚</p><p>å½“ç„¶è¿™ä¸¤ä¸ªæ’­æ”¾å™¨éƒ½è´¼å‰å®³ï¼Œæ²¡æœ‰è¯´è°å¥½è°åã€‚</p><p>æœ¬åœ°éŸ³é¢‘æ’­æ”¾å™¨æˆ‘ç”¨çš„æ˜¯<code>deadbeef</code>ï¼Œç®€å•ã€å¥½çœ‹ã€å¥½ç”¨ã€‚åœ¨çº¿æ’­æ”¾å™¨çš„è¯ï¼Œç½‘æ˜“äº‘éŸ³ä¹æ˜¯æä¾›å®˜æ–¹Linuxå®¢æˆ·ç«¯çš„ã€‚</p><h2 id="Office"><a href="#Office" class="headerlink" title="Office"></a>Office</h2><p>è¿™é‡Œæˆ‘åªæƒ³è¯´<code>&quot;é‡‘å±±NBï¼&quot; * 100</code>ã€‚é‡‘å±±å…¬å¸æçš„<code>wps-office</code>æ˜¯æä¾›å®˜æ–¹Linuxç‰ˆæœ¬çš„ï¼Œå¯¹Officeæ”¯æŒåº¦éå¸¸é«˜ï¼Œè½»åº¦ä½¿ç”¨çš„è¯èƒ½æ›¿æ¢æ‰MS-Officeäº†ã€‚å¦‚æœå¯¹å¼€æºæ¯”è¾ƒæ•æ„Ÿçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<code>libreoffice</code>ï¼Œæ˜¯å¼€æºçš„ã€‚</p><h2 id="ç»ˆç«¯æ¨¡æ‹Ÿå™¨"><a href="#ç»ˆç«¯æ¨¡æ‹Ÿå™¨" class="headerlink" title="ç»ˆç«¯æ¨¡æ‹Ÿå™¨"></a>ç»ˆç«¯æ¨¡æ‹Ÿå™¨</h2><p>MacOSçš„ç”¨æˆ·åº”è¯¥çŸ¥é“<code>iTerm2</code>ï¼ŒLinuxä¸­ä¼˜ç§€çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨å±‚å‡ºä¸ç©·ï¼Œä¸è¿‡æˆ‘æœ€æ¨èçš„è¿˜æ˜¯<code>terminator</code>ã€‚ä¸ä»…å¯ä»¥è½»æ¾çš„åˆ†å¤šä¸ªtabï¼Œè¿˜å¯ä»¥åœ¨æ¯ä¸ªtabä¸­å·¦å³ä¸Šä¸‹åˆ†æ ã€‚å†é…åˆä¸€ä¸ªå¥½çœ‹çš„<code>zsh</code>ä¸»é¢˜ã€<code>hack</code>å­—ä½“ã€è‡ªå·±å–œæ¬¢çš„é…è‰²ï¼Œç®€ç›´æ‰¾ä¸åˆ°ä»»ä½•ç¼ºç‚¹ã€‚</p><h2 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h2><p>è™šæ‹Ÿæœºæ˜¯ä¸å¾—å·²çš„æ–¹æ¡ˆï¼Œæ¯•ç«Ÿæœ‰æ—¶å€™è¦ç”¨çš„ç¨‹åºçœŸçš„åœ¨Linuxä¸‹æ²¡æœ‰æ›¿ä»£æ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç”¨ä¸€ä¸ªå¼€æºçš„è™šæ‹Ÿæœºå·¥å…·<code>virtualbox</code>æ¥åº”å¯¹ä¸æ—¶ä¹‹éœ€ã€‚</p><h1 id="0X04-æœ€å"><a href="#0X04-æœ€å" class="headerlink" title="0X04 æœ€å"></a>0X04 æœ€å</h1><p>æˆ‘ä¸ªäººè§‰å¾—Linuxæ˜¯ä¸€ä¸ªéå¸¸æœ‰é­…åŠ›çš„æ“ä½œç³»ç»Ÿï¼Œè™½ç„¶å®ƒçš„æ¡Œé¢è¿˜ä¸å¤Ÿå¥½ï¼Œå­¦ä¹ æˆæœ¬ä¹Ÿæ¯”è¾ƒé«˜ã€‚ä½†æ˜¯å°±åƒVimä¸€æ ·ï¼Œå½“ä½ è¶Šè¿‡é¸¿æ²Ÿä¹‹åä¼šå‘ç°å¦ä¸€ä¸ªä¸–ç•Œã€‚åˆ°ç°åœ¨ä½ç½®æˆ‘ä½¿ç”¨Linuxæ¡Œé¢å·²ç»ä¸¤å¹´å¤šäº†ï¼Œç›®å‰å¯¹è‡ªå·±çš„æ‰€ç”¨çš„ç³»ç»Ÿéå¸¸æ»¡æ„ã€‚ç³»ç»Ÿä¿¡æ¯ã€æ¡Œé¢ç¯å¢ƒå’Œä¸»é¢˜ä»¬å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   shawn@T480 </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   ---------- </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   OS: Manjaro Linux x86_64 </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Host: 20L5A027HK ThinkPad T480 </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Kernel: 4.19.79-1-MANJARO </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Uptime: 12 hours, 23 mins </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Packages: 1374 (pacman) </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Shell: zsh 5.7.1 </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Resolution: 2560x1440 </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   DE: Plasma </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   WM: KWin </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   WM Theme: Materia-Manjaro </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Theme: Breath-Dark [GTK2/3] </span><br><span class="line">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   Icons: Tela-dark [GTK2/3] </span><br><span class="line">                               Terminal: terminator </span><br><span class="line">                               CPU: Intel i7-8550U (8) @ 4.000GHz </span><br><span class="line">                               GPU: Intel UHD Graphics 620 </span><br><span class="line">                               GPU: NVIDIA GeForce MX150 </span><br><span class="line">                               Memory: 14795MiB / 32058MiB</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerfileä¸­çš„COPYä¸ADDæŒ‡ä»¤</title>
      <link href="/2019/09/25/dockerfile-add-vs-copy/"/>
      <url>/2019/09/25/dockerfile-add-vs-copy/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å°±ç®—åªæœ‰ä¸€èŠ‚æˆ‘ä¹Ÿè¦å†™æ ‡é¢˜"><a href="#0X00-å°±ç®—åªæœ‰ä¸€èŠ‚æˆ‘ä¹Ÿè¦å†™æ ‡é¢˜" class="headerlink" title="0X00 å°±ç®—åªæœ‰ä¸€èŠ‚æˆ‘ä¹Ÿè¦å†™æ ‡é¢˜"></a>0X00 å°±ç®—åªæœ‰ä¸€èŠ‚æˆ‘ä¹Ÿè¦å†™æ ‡é¢˜</h1><p>ä¼—æ‰€å‘¨çŸ¥Dockerfileæ˜¯æ„å»ºDockeré•œåƒçš„ä¼˜è‰¯æ–¹å¼ï¼Œè€Œä½¿ç”¨Dockerfileæ„å»ºé•œåƒæœ€é‡è¦çš„å°±æ˜¯ä¸ºæ•°ä¸å¤šçš„å‡ ä¸ªå‘½ä»¤ï¼Œè€Œæœ¬æ¬¡çš„ä¸»é¢˜<code>COPY</code>å’Œ<code>ADD</code>å°±æ˜¯å…¶ä¸­ä¸¤ä¸ªã€‚æˆ‘ä»¬çŸ¥é“è¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯å°†æ–‡ä»¶æåˆ°Dockeré•œåƒé‡Œç”¨çš„ï¼Œé‚£ç©¶ç«Ÿæœ‰æ²¡æœ‰åŒºåˆ«ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å½“å‰è¿™ä¸ªç›®å½•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Î»  ~/Workstadion/learn_docker  ls</span><br><span class="line">Dockerfile  excited.tar</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æœ‰ç€ä¹ˆä¸€ä¸ªDockerfileï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åŸºäº<code>fedora</code>çš„ä¸€ä¸ªé•œåƒï¼Œå¹¶ä¸”å°†ç›®å½•ä¸‹çš„<code>excited.tar</code>æ”¾è¿›äº†åˆ›å»ºå¥½çš„<code>shawn</code>ç›®å½•ä¸­<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> fedora</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir shawn</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> shawn</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> excited.tar .</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·¥ä½œç›®å½•ä¸‹å·²ç»å­˜åœ¨äº†ä¸€ä¸ª<code>excited.tar</code>äº†ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æˆåŠŸå°†è¿™ä¸ªæ–‡ä»¶æè¿›å»äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Î»  ~/Workstadion/learn_docker  docker build . -t wtf ; docker rm learn_docker; docker run --name learn_docker -it wtf bash</span><br><span class="line">Sending build context to Docker daemon  23.04kB</span><br><span class="line">Step 1/4 : FROM fedora</span><br><span class="line"> ---&gt; e9ed59d2baf7</span><br><span class="line">Step 2/4 : RUN mkdir shawn</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 5014855b8533</span><br><span class="line">Step 3/4 : WORKDIR shawn</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 82f9d06a4d3c</span><br><span class="line">Step 4/4 : COPY excited.tar .</span><br><span class="line"> ---&gt; 1bc293d81b33</span><br><span class="line">Successfully built 1bc293d81b33</span><br><span class="line">Successfully tagged wtf:latest</span><br><span class="line">learn_docker</span><br><span class="line">[root@f6a4f34ed504 shawn]# ls -l</span><br><span class="line">total 20</span><br><span class="line">-rw-r--r-- 1 root root 20480 Sep 25 14:15 excited.tar</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>å¦‚æœåŒæ ·çš„æ“ä½œç”¨<code>ADD</code>å‘¢ï¼Ÿçœ‹ä¸Šå»æ˜¯ç±»ä¼¼çš„æ“ä½œå®é™…ä¸Šå¹¶ä¸æ˜¯<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> fedora</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir shawn</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> shawn</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> excited.tar .</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬è¿›åˆ°å®¹å™¨é‡Œå¯ä»¥çœ‹åˆ°æ‰“åŒ…æ–‡ä»¶è¢«æ‹†è§£äº†ï¼ˆå‹ç¼©æ–‡ä»¶ä¹Ÿä¼šè¢«è§£å‹ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Î»  ~/Workstadion/learn_docker  docker build . -t wtf ; docker rm learn_docker; docker run --name learn_docker -it wtf bash</span><br><span class="line">Sending build context to Docker daemon  23.04kB</span><br><span class="line">Step 1/4 : FROM fedora</span><br><span class="line"> ---&gt; e9ed59d2baf7</span><br><span class="line">Step 2/4 : RUN mkdir shawn</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 5014855b8533</span><br><span class="line">Step 3/4 : WORKDIR shawn</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 82f9d06a4d3c</span><br><span class="line">Step 4/4 : ADD excited.tar .</span><br><span class="line"> ---&gt; cc1d067d0dbe</span><br><span class="line">Successfully built cc1d067d0dbe</span><br><span class="line">Successfully tagged wtf:latest</span><br><span class="line">learn_docker</span><br><span class="line">[root@89276af7b0a2 shawn]# ls -l</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 2 1000 1000 4096 Sep 25 14:15 excited</span><br><span class="line">[root@89276af7b0a2 shawn]# cd excited/</span><br><span class="line">[root@89276af7b0a2 excited]# ls</span><br><span class="line">file_0  file_10  file_12  file_14  file_16  file_18  file_2  file_4  file_6  file_8</span><br><span class="line">file_1  file_11  file_13  file_15  file_17  file_19  file_3  file_5  file_7  file_9</span><br></pre></td></tr></table></figure></p><p>å…¶å®ä¸æ­¢è¿™æ ·ï¼Œ<code>ADD</code> å‘½ä»¤è¿˜èƒ½ä¸‹è½½æ–‡ä»¶ï¼š<code>ADD https://too.young/too/simple.pdf /hello</code>å°±èƒ½å°†æ–‡ä»¶ä¸‹è½½ä¸‹æ¥å¹¶ä¸”å‘½åä¸º<code>hello</code>ï¼›å¦‚æœæ˜¯<code>ADD https://too.young/too/simple.pdf /hello/</code>ï¼ˆåªæ˜¯æœ€åå¤šäº†æ–œæ ï¼‰ï¼Œdockerä¼šè®¤ä¸ºä½ æƒ³å°†æ–‡ä»¶ä¸‹è½½åˆ°<code>/hello</code>çš„ç›®å½•ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ä»–ä¼šè‡ªå·±åˆ›å»ºï¼›è¿˜æœ‰æˆ‘ä»¬ä¸æ˜¯è¯´<code>ADD</code>èƒ½ä¸‹è½½æ–‡ä»¶è¿˜èƒ½è§£å‹æ–‡ä»¶å—ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªåˆä¸èƒ½åŒæ—¶ç”Ÿæ•ˆï¼Œæ„å‘³ç€å¦‚æœä½ æƒ³ç”¨<code>ADD https://too.young/too/simple.zip /sometimes/naive/</code>å°†ä¸‹è½½å¥½çš„<code>simple.zip</code>æ–‡ä»¶è§£å‹åˆ°<code>/sometimes/naive/</code>ç›®å½•é‡Œæ˜¯ä¸è¡Œçš„ï¼Œæœ€åç»“æœåªæ˜¯å°†å‹ç¼©åŒ…ä¸‹è½½åˆ°äº†é‚£ä¸ªç›®å½•è€Œå·²ã€‚</p><p>æ€»ç»“æ¥è¯´çš„è¯å°±æ˜¯ <strong><code>COPY</code>ç®€ç®€å•å•å¤åˆ¶ï¼Œ<code>ADD</code>çµæ´»å¤šå˜</strong>ã€‚ä½†æ˜¯å…¶å®æˆ‘ä»¬æœ€å¥½å°±ç›´æ¥ç”¨<code>COPY</code>å‘½ä»¤ï¼ŒçœŸçš„éœ€è¦è§£å‹ä»€ä¹ˆçš„æ“ä½œå¤šå†™ä¸€ä¸ªç®¡é“ç¬¦ä¹Ÿæ²¡æœ‰å¤šéº»çƒ¦ã€‚è€Œä¸”å…¶ä»–äººçœ‹ç®¡é“ç¬¦åé¢æ¥å‘½ä»¤å‚æ•°è¦æ¯”åˆ†æ<code>ADD</code>å‘½ä»¤æ¥çš„èˆ’æœå¾—å¤šã€‚</p><p>ç®—ä¸‹æ¥<code>ADD</code>èƒ½åšçš„æ²¡æœ‰ä»€ä¹ˆæ˜¯<code>COPY</code>åŠ ç®¡é“åšä¸äº†çš„ã€‚è€Œä¸”åˆåŠ ä¸Š<code>ADD</code>çš„ç»“æœå˜æ¢å¤šç«¯ï¼Œä¸ç®¡æ˜¯è‡ªå·±å†™è¿˜æ˜¯å…¶ä»–äººçœ‹éƒ½å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥è¯´å¤§å®¶èƒ½ä¸ç”¨<code>ADD</code>å°±ä¸ç”¨äº†å§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså…¥é—¨ä½¿ç”¨ï¼šåˆ†åº“ã€è®¤è¯ä¸æŒä¹…åŒ–</title>
      <link href="/2019/09/19/ez-redis/"/>
      <url>/2019/09/19/ez-redis/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Redisçš„åˆ†åº“"><a href="#0X00-Redisçš„åˆ†åº“" class="headerlink" title="0X00 Redisçš„åˆ†åº“"></a>0X00 Redisçš„åˆ†åº“</h1><p>ä½¿ç”¨è¿‡MySQLæˆ–è€…ç±»ä¼¼çš„æ•°æ®åº“éƒ½åº”è¯¥çŸ¥é“ï¼Œä¸€ä¸ªæ•°æ®åº“å†…éƒ¨æ˜¯å¯ä»¥åˆ†æˆå¤šä¸ªåº“çš„ã€‚æ¯”å¦‚MySQLä»ä¸Šåˆ°ä¸‹æ˜¯<code>MySQL service -&gt; database -&gt; table -&gt; field</code>ï¼Œä½†æ˜¯ä¸€å¼€å§‹ä½¿ç”¨redisçš„æ—¶å€™å¥½åƒæ˜¯æ²¡æœ‰databaseè¿™ä¸€å±‚çš„å‘¢ï¼Ÿå…¶å®æ˜¯å­˜åœ¨è¿™ä¹ˆä¸€å±‚çš„ï¼Œredisé»˜è®¤æ˜¯å­˜åœ¨ç¼–å·0åˆ°15è¿™æ€»å…±16ä¸ªåº“çš„ï¼Œæ¯ä¸ªåº“é™¤äº†å‘½åç©ºé—´ä¸åŒä»¥å¤–éƒ½æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–å·ä¸º0çš„åº“é‡Œ<code>set name shawn</code>ä¹‹åè·‘åˆ°ç¼–å·ä¸º1çš„åº“é‡Œ<code>get name</code>æ˜¯æ‹¿ä¸åˆ°çš„ã€‚</p><p>é‚£è¿™ä¹ˆè¯´æ¥è¿™ä¸ªåˆ†åº“ç©¶ç«Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®å¾ˆå°‘ç”¨çš„åˆ°ï¼Œç”šè‡³å°±è¿<code>redis</code>çš„<span class="exturl" data-url="aHR0cHM6Ly9ncm91cHMuZ29vZ2xlLmNvbS9mb3J1bS8jIW1zZy9yZWRpcy1kYi92UzV3WDhYNENqZy84b3VuQlhpdEc0c0o=" title="https://groups.google.com/forum/#!msg/redis-db/vS5wX8X4Cjg/8ounBXitG4sJ">è®¾è®¡è€…è‡ªå·±éƒ½è¯´æè¿™ä¸ªæ˜¯è¾ƒè ¢çš„æ“ä½œ<i class="fa fa-external-link"></i></span>ã€‚æˆ‘ä»¬æ—¥å¸¸ç”¨åˆ°çš„å”¯ä¸€ä¸€å¤„åœ°æ–¹å°±æ˜¯åœ¨æµ‹è¯•æœåŠ¡å™¨ä¸Šï¼Œå› ä¸ºä¸€å°æœºå™¨éƒ¨ç½²äº†å¤ªå¤šæœåŠ¡ï¼Œè€Œä¸”æ¯ä¸ªæœåŠ¡åˆéƒ½è¦ç”¨redisæ‰€ä»¥å°±æ¯ä¸ªæœåŠ¡åˆ†å¼€ä½¿ç”¨0~15è¿™äº›æ•°æ®åº“ã€‚</p><p>å› ä¸ºå¼€ä¸€ä¸ªå®Œæ•´rediså®ä¾‹çš„èµ„æºæ¶ˆè€—æœ¬èº«å°±å¾ˆå°ï¼Œæ‰€ä»¥åˆ†åº“è¿™ä¸ªæ“ä½œå°±æ›´æ˜¾çš„ä¸å¤ªç”¨çš„åˆ°äº†ï¼Œæ¯•ç«Ÿæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨ä¸€å°æœºå™¨ä¸Šå¼€å¤šä¸ªrediså®ä¾‹ä»è€Œå®ç°ç›¸åŒçš„æ•ˆæœï¼Œè€Œä¸”åˆæ–¹ä¾¿ç®¡ç†ã€‚</p><p>ä¸è¿‡ä¹Ÿè¿˜æ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹å¥½äº†ï¼š<code>/etc/redis.conf</code>æ–‡ä»¶ä¸­çš„<code>databases</code>å‚æ•°æ˜¯è®¾ç½®rediså®ä¾‹å…·æœ‰å¤šå°‘ä¸ªæ•°æ®åº“çš„ï¼Œå¦‚æœçœŸçš„éœ€è¦çš„è¯å¯ä»¥ä¿®æ”¹è¿™ä¸ªå‚æ•°ç„¶åé‡å¯redisä»è€Œç”Ÿæ•ˆã€‚</p><a id="more"></a><p>é‚£ä¹ˆæ€ä¹ˆåˆ‡æ¢è¿™äº›åº“å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨<code>redis-cli</code>è¿ä¸Šæ•°æ®åº“ä¹‹åå¯ä»¥çœ‹åˆ°ç±»ä¼¼è¿™ä¹ˆä¸€ä¸ªå‘½ä»¤æç¤ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™å°±æ„å‘³ç€æˆ‘ä»¬åœ¨æ“ä½œ0åº“ï¼Œä½¿ç”¨<code>select</code>æŒ‡ä»¤å¯ä»¥åˆ‡æ¢åº“ï¼Œåˆ‡æ¢ååœ¨å‘½ä»¤è¡Œä¸Šä¼šæç¤ºå‡ºæ¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; select 2</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[2]&gt; select 6</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[6]&gt; select 15</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[15]&gt; select 16</span><br><span class="line">(error) ERR DB index is out of range</span><br><span class="line">127.0.0.1:6379[15]&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°åœ¨é»˜è®¤æƒ…å†µä¸‹åˆ‡åˆ°ä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„åº“ä¼šæŠ¥é”™ã€‚ï¼ˆçœŸæ˜¯ä¸€æœ¬æ­£ç»çš„åºŸè¯ï¼‰</p><h1 id="0X01-Redisçš„è®¤è¯"><a href="#0X01-Redisçš„è®¤è¯" class="headerlink" title="0X01 Redisçš„è®¤è¯"></a>0X01 Redisçš„è®¤è¯</h1><p>redisçš„è®¤è¯è¦æ¯”MySQLè¦ç®€å•çš„å¤šï¼Œåœ¨MySQLä¸­è¦é…ç½®ç”¨æˆ·åã€å¯†ç ç”šè‡³è¿˜è¦æ ¡éªŒç½‘æ®µï¼Œä¸è¿‡redisä¸­å°±åªæœ‰ä¸€ä¸ªç®€ç®€å•å•çš„å¯†ç æ ¡éªŒã€‚è€Œä¸”æ˜¯é‚£ç§ä¸éœ€è¦ç”¨æˆ·åï¼Œä»…æœ‰å¯†ç çš„æ ¡éªŒã€‚è¿˜æœ‰ä¸€ç‚¹ä¸åŒçš„å°±æ˜¯ï¼Œredisä¸æ”¯æŒè®¾ç½®å¤šä¸ªå¯†ç ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹redisåˆšåˆšè£…å®Œæ˜¯ä¸éœ€è¦è®¤è¯ç›´æ¥ä½¿ç”¨çš„ï¼Œè®¾ç½®å¯†ç æœ‰ä¸‹é¢ä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼š</p><h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><p>ä¿®æ”¹<code>/etc/redis.conf</code>é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª<code>requirepass</code>å‚æ•°ï¼Œé»˜è®¤æ˜¯åŠ äº†æ³¨é‡Šçš„ä¹Ÿå°±æ„å‘³ç€å¹¶æ²¡æœ‰å¯†ç ã€‚å¦‚æœè¦ä¸ºå…¶åŠ ä¸Šå¯†ç å°±å°†é‚£ä¸€è¡Œæ”¹ä¸º<code>requirepass this_is_password</code>ï¼Œç„¶åä½¿ç”¨ç±»ä¼¼<code>systemctl restart redis</code>çš„å‘½ä»¤æ¥é‡å¯ä¸€ä¸‹ä½ çš„redisæœåŠ¡ï¼Œå¯†ç å°±ç”Ÿæ•ˆäº†ã€‚</p><h2 id="æ‰§è¡Œrediså‘½ä»¤"><a href="#æ‰§è¡Œrediså‘½ä»¤" class="headerlink" title="æ‰§è¡Œrediså‘½ä»¤"></a>æ‰§è¡Œrediså‘½ä»¤</h2><p>å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨rediså‘½ä»¤<code>config set</code>çš„æ–¹å¼æ¥è®¾ç½®å¯†ç ï¼Œè¿™ç§æ–¹å¼å¥½åœ¨ä¸éœ€è¦é‡å¯redisæœåŠ¡ï¼Œä½†æ˜¯é»˜è®¤æƒ…å†µä¸‹ä¸€æ—¦é‡å¯å¯†ç ä¹Ÿå°±è·Ÿç€å¤±æ•ˆäº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config set requirepass this_is_password</span><br></pre></td></tr></table></figure><h2 id="è®¤è¯ç™»å½•"><a href="#è®¤è¯ç™»å½•" class="headerlink" title="è®¤è¯ç™»å½•"></a>è®¤è¯ç™»å½•</h2><p>é‚£å¯†ç æä¸Šäº†ï¼Œæ€ä¹ˆç™»å½•å‘¢ï¼Ÿç™»å½•ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥æŠŠå¯†ç å†™åœ¨è¿æ¥çš„å‘½ä»¤é‡Œï¼Œå¦ä¸€ç§æ˜¯è¿›å…¥åˆ°redis-cliçš„äº¤äº’ç•Œé¢å†è¾“å…¥å¯†ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Î»  blog master âœ— redis-cli</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line">127.0.0.1:6379&gt; exit</span><br><span class="line"></span><br><span class="line"># ç›´æ¥å°†å¯†ç å†™åœ¨è¿æ¥çš„å‘½ä»¤è¡Œé‡Œ</span><br><span class="line">Î»  blog master âœ— redis-cli -a this_is_password</span><br><span class="line">Warning: Using a password with &apos;-a&apos; or &apos;-u&apos; option on the command line interface may not be safe.</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">127.0.0.1:6379&gt; exit</span><br><span class="line"></span><br><span class="line"># è¿›å…¥åˆ°redis-cliäº¤äº’ç•Œé¢åå†éªŒè¯</span><br><span class="line">Î»  blog master âœ— redis-cli</span><br><span class="line">127.0.0.1:6379&gt; auth this_is_password</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;a&quot;</span><br></pre></td></tr></table></figure><blockquote><p>æ²¡æœ‰éªŒè¯ä¹Ÿèƒ½è¿›å…¥åˆ°redis-cliçš„äº¤äº’ç•Œé¢ï¼Œåªæ˜¯æ²¡æœ‰æƒé™è€Œå·²</p></blockquote><blockquote><p>å…¶ä¸­<code>keys *</code>å¯ä»¥çœ‹åˆ°å½“å‰åº“é‡Œçš„æ‰€æœ‰key</p></blockquote><h1 id="0X02-RedisæŒä¹…åŒ–"><a href="#0X02-RedisæŒä¹…åŒ–" class="headerlink" title="0X02 RedisæŒä¹…åŒ–"></a>0X02 RedisæŒä¹…åŒ–</h1><p>æœ¬æ¥è¿˜åƒè¦è‡ªå·±å†™ä¸€äº›å…³äºæŒä¹…åŒ–çš„åˆçº§çŸ¥è¯†ï¼Œç»“æœå‘ç°<span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwMjkwNjM0NQ==" title="https://segmentfault.com/a/1190000002906345">è¿™ç¯‡æ–‡ç« <i class="fa fa-external-link"></i></span>å·²ç»å†™çš„è¶…çº§æ£’äº†ï¼Œç´¢æ€§è¡¥å……ä¸€å°éƒ¨åˆ†ä»–è¿™é‡Œæ²¡æœ‰æåˆ°çš„å§ã€‚</p><ol><li>é»˜è®¤æƒ…å†µä¸‹redisè£…å¥½å°±å¯ç”¨äº†RDBï¼›</li><li>é»˜è®¤æƒ…å†µä¸‹é‡å¯redisçš„æ—¶å€™ä¼šå†™å…¥ä¸€æ¬¡RDBï¼›</li></ol><p><strong>ä½¿ç”¨dockeréƒ¨ç½²rediséœ€è¦æ³¨æ„çš„ç‚¹</strong>ï¼šå¦‚æœä½¿ç”¨dockeréƒ¨ç½²redisï¼Œå¹¶ä¸”éœ€è¦å¯¹æ•°æ®è¿›è¡ŒæŒä¹…åŒ–çš„è¯ä¸€å®šè®°å¾—å°†redisæ•°æ®æ–‡ä»¶æŒ‚è½½å‡ºæ¥ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚å› ä¸ºæŒä¹…åŒ–çš„æ–‡ä»¶å­˜åœ¨ä¸dockerå®¹å™¨å†…éƒ¨ï¼Œåªæ˜¯é‡å¯å®¹å™¨è¿˜å¥½é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯å¦‚æœ<code>docker stop/rm/run</code>ä¸€æ³¢ä¸‹æ¥å°±ä¼šå¯¼è‡´å®¹å™¨å†…éƒ¨çš„æ•°æ®è¢«åˆ çš„ä¸€å¹²äºŒå‡€äº†ï¼ˆå‡†ç¡®åœ°è¯´å®¹å™¨éƒ½ä¸æ˜¯ä¹‹å‰çš„é‚£ä¸ªäº†ï¼Œæ•°æ®å½“ç„¶ä¹Ÿå°±ä¸åœ¨äº†ï¼‰ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£ç¡®æ„å»ºDockeré•œåƒ</title>
      <link href="/2019/09/17/docker-image/"/>
      <url>/2019/09/17/docker-image/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æœ€å¸¸è§çš„ä¸¤ç§æ„å»ºæ–¹å¼"><a href="#0X00-æœ€å¸¸è§çš„ä¸¤ç§æ„å»ºæ–¹å¼" class="headerlink" title="0X00 æœ€å¸¸è§çš„ä¸¤ç§æ„å»ºæ–¹å¼"></a>0X00 æœ€å¸¸è§çš„ä¸¤ç§æ„å»ºæ–¹å¼</h1><p>æ„å»ºDockeré•œåƒçš„æ–¹å¼å¹¶ä¸å¤šï¼Œæœ€å¸¸ç”¨çš„ä¹Ÿå°±åªæœ‰ï¼šç¼–å†™Dockerfileå’Œä½¿ç”¨docker commitè¿™ä¸¤ç§ã€‚æ—¢ç„¶æ–¹å¼åˆ†ä¸ºä¸¤ç§é‚£ä¹ˆè‚¯å®šæ˜¯æœ‰åŒºåˆ«çš„ï¼ˆåºŸè¯ï¼‰ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹çœ‹å§ã€‚</p><p>é¦–å…ˆæ¥ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ç§æ„å»ºæ–¹å¼ï¼Œå‡è®¾æ‰“ç®—ä½¿ç”¨dockeréƒ¨ç½²æˆ‘ä»¬çš„æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä½¿ç”¨ä¸¤ç§æ–¹å¼æ¥æ„å»ºä¸€ä¸‹è¿™ä¸ªé•œåƒå§ã€‚</p><h1 id="0X01-docker-commit"><a href="#0X01-docker-commit" class="headerlink" title="0X01 docker commit"></a>0X01 docker commit</h1><p>åƒæˆ‘ä»¬è¿™ç§æ–°æ‰‹å¹³æ—¶ç”¨çš„æ¯”è¾ƒå¤šçš„åº”è¯¥å°±æ˜¯<code>docker commit xxxxx hub.xxx.xxx/xxx:xxx</code>è¿™ç§æ–¹å¼äº†ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<code>docker commit</code>ã€‚è¿™ç§æ–¹å¼æ¯”è¾ƒå¥½æ“ä½œï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼Œæ“ä½œä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚å¦‚æœæŒæ¡äº†<code>git</code>çš„å·¥ä½œæµç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨<code>docker commit</code>æ–¹å¼æ¥æ„å»ºé•œåƒç®€ç›´æ˜¯å°èœä¸€ç¢Ÿã€‚</p><ol><li>æˆ‘ä»¬æä¸€ä¸ªåŸºç¡€é•œåƒæ¯”å¦‚<code>fedora</code>ï¼Œé‚£æˆ‘ä»¬æŠŠå®ƒæä¸‹æ¥ï¼š<code>docker pull fedora</code></li><li>è¿è¡Œå¹¶è¿›å…¥åˆ°å®¹å™¨é‡Œ<code>docker run --name our_container -it fedora /bin/bash</code>ï¼Œæ­¤æ—¶shellå·²ç»æ¥å…¥åˆ°å®¹å™¨é‡Œäº†</li><li>æˆ‘ä»¬æ¥å®‰è£…å§ <code>dnf install python3</code>ç„¶å<code>pip3 install Django</code> è¿™æ ·å°±è£…å¥½äº†ï¼Œå¯ä»¥é€€å‡ºdockeré‡Œçš„shelläº†</li><li><code>docker commit -m &quot;å®‰è£…äº†Pythonå’ŒDjango&quot; our_container our_image:latest</code>è¿™æ ·å°±å°†åˆšåˆšçš„å®¹å™¨æ‰“åŒ…æˆåä¸º<code>our_image</code>çš„é•œåƒäº†</li><li>ç°åœ¨ä½¿ç”¨<code>docker images</code>å°±å¯ä»¥çœ‹åˆ°åˆšåˆšæ‰“åŒ…çš„<code>our_image</code>äº†</li><li>åé¢å¦‚æœè¿˜éœ€è¦æ›´æ–°è¿™ä¸ªé•œåƒé‚£ä¹ˆå°±å¯ä»¥ç»§ç»­è¿è¡Œè¿™ä¸ª<code>docker run --name our_container -it our_image:latest</code>ç„¶åæ›´æ–°å®Œäº†å†<code>docker commit -m &quot;balabalabala&quot; our_container our_image:latest</code>æ‰“åŒ…ä¸€å±‚æ–°çš„ä¸Šå»å°±å¥½äº†</li></ol><a id="more"></a><h1 id="0X02-Dockerfile"><a href="#0X02-Dockerfile" class="headerlink" title="0X02 Dockerfile"></a>0X02 Dockerfile</h1><p>å¦ä¸€ç§å¸¸è§æ„å»ºé•œåƒçš„æ–¹å¼æ˜¯ç¼–å†™<code>Dockerfile</code>æ–‡ä»¶ï¼Œé€šè¿‡Dockerfileæ„å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªåä¸º<code>Dockerfile</code>çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹</li><li>åœ¨å½“å‰ç›®å½•æ‰§è¡Œ<code>docker build . -t our_image:latest</code>å°±å¯ä»¥äº†</li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> fedora</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> dnf install python3</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip3 install Django</span></span><br></pre></td></tr></table></figure><h1 id="0X03-å¯¹æ¯”ä¸¤ç§æ–¹æ³•"><a href="#0X03-å¯¹æ¯”ä¸¤ç§æ–¹æ³•" class="headerlink" title="0X03 å¯¹æ¯”ä¸¤ç§æ–¹æ³•"></a>0X03 å¯¹æ¯”ä¸¤ç§æ–¹æ³•</h1><p>ä¸¤è€…çš„å¯¹æ¯”ä»ä¸‹é¢å‡ ä¸ªæ–¹é¢æ¥è¿›è¡Œ</p><h2 id="docker-hub"><a href="#docker-hub" class="headerlink" title="docker hub"></a>docker hub</h2><p>è¿™ä¸¤ç§æ–¹æ³•å…¶ä¸­<code>docker commit</code>æ–¹æ³•é€šå¸¸éœ€è¦ä½¿ç”¨ç§æœ‰<code>docker hub</code>ï¼Œè€Œ<code>Dockerfile</code>åˆ™å¯ä»¥ä¸ä½¿ç”¨ã€‚å› ä¸º<code>docker commit</code>å®Œæˆçš„é•œåƒå¦‚æœè¦åˆ†äº«ç»™å…¶ä»–äººçš„è¯æœ€æ–¹ä¾¿çš„é€”å¾„å°±æ˜¯èµ°<code>docker hub</code>ï¼ˆè‡ªå·±æ„å»ºå®Œpushåˆ°hubä¸Šï¼Œå…¶ä»–äººå†pullä¸‹æ¥ï¼‰ï¼Œè€Œ<code>Dockerfile</code>åªè¦ä¿è¯ä½¿ç”¨çš„æ˜¯å…¬å…±çš„åŸºç¡€é•œåƒé‚£ä¹ˆæ‰€æœ‰äººå°±éƒ½å¯ä»¥ç›´æ¥æ„å»ºå‡ºç›®æ ‡é•œåƒã€‚</p><blockquote><p>ä¹‹æ‰€ä»¥è¯´æ˜¯æœ€æ–¹ä¾¿ï¼Œæ˜¯å› ä¸ºè¿˜æœ‰ä¸€ç§<code>docker save</code>çš„æ–¹å¼å¯ä»¥æ‰“åŒ…é•œåƒæˆ<code>xxx.tar</code>ï¼Œåˆ«äººå†<code>docker load</code>ã€‚è¿™ç§æ–¹å¼è™½ç„¶èƒ½ç”¨ä½†æ˜¯å¾ˆéº»çƒ¦ï¼Œä¹Ÿä¸æ˜¯å¸¸è§„æ“ä½œ</p></blockquote><blockquote><p>docker é•œåƒå½“ç„¶å¯ä»¥ä¸Šä¼ åˆ°å…¬å…±çš„hubä¸Šï¼Œä½†æ˜¯å…¬å¸çš„å•†ä¸šå†…å®¹æ€•æ˜¯ä¸å…è®¸å‘¦</p></blockquote><h2 id="ä½¿ç”¨éš¾åº¦"><a href="#ä½¿ç”¨éš¾åº¦" class="headerlink" title="ä½¿ç”¨éš¾åº¦"></a>ä½¿ç”¨éš¾åº¦</h2><p><code>docker commit</code>æ“ä½œç®€å•ï¼Œæ¯æ¬¡æ›´æ–°é•œåƒæ—¶æ¥å…¥åˆ°å®¹å™¨é‡Œä¸€æ³¢æ“ä½œæœ€å<code>docker commit xxxxx</code>å°è£…ä¸€ä¸‹å†ä½¿ç”¨<code>docker push</code>å°†é•œåƒæ¨åˆ°hubå°±å¯ä»¥äº†ã€‚åŸºæœ¬æ‰€æœ‰äººéƒ½å¯ä»¥å¾ˆå¿«ææ¸…æ¥šæµç¨‹å¹¶ä¸”å¼€å§‹ä¸Šæ‰‹ä½¿ç”¨ã€‚</p><p><code>Dockerfile</code>å°±æ˜¾å¾—éš¾äº†ä¸å°‘ï¼Œæ„å»ºå¤æ‚ä¸€ç‚¹çš„é•œåƒå¾€å¾€<code>Dockerfile</code>å°±å‡ åä¸Šç™¾è¡Œäº†ï¼Œå†ç®—ä¸Šé‡Œé¢åå¤šç§<code>Dockerfile</code>è¯­æ³•ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½å¾ˆå¿«ä¸Šæ‰‹çš„ã€‚</p><h2 id="é•œåƒå±‚æ•°"><a href="#é•œåƒå±‚æ•°" class="headerlink" title="é•œåƒå±‚æ•°"></a>é•œåƒå±‚æ•°</h2><p>ä¼—æ‰€å‘¨çŸ¥<strong>Dockeré•œåƒçš„æ¯æ¬¡commitéƒ½ä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šæ–°å¢ä¸€å±‚</strong>ï¼ˆåæ­£ç°åœ¨ä½ è‚¯å®šçŸ¥é“äº†ï¼‰ï¼Œè€Œå±‚æ•°çš„å¢åŠ æ„å‘³ç€â€œé•œåƒä½“ç§¯è†¨èƒ€â€ã€‚å¦‚æœå†³å®šä½¿ç”¨<code>docker commit</code>çš„æ–¹å¼ç»´æŠ¤é•œåƒï¼Œé‚£ä¹ˆä¸å…åæœŸä¼šå¤§é‡é€šè¿‡commitæ¥æ›´æ–°é•œåƒä»è€Œå¯¼è‡´é•œåƒå±‚æ•°è¿‡å¤šï¼Œä½“ç§¯è¿‡å¤§ã€‚</p><p>è€Œ<code>Dockerfile</code>ä¸­çš„æ¯ä¸ªæŒ‡ä»¤ä¹Ÿéƒ½ä¼šä¸ºé•œåƒæ‘ä¸Šä¸€å±‚ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ¢è¡Œæ•´åˆçš„æ–¹å¼ä½¿ä¹‹ç¼©å°å¾ˆå¤šï¼Œæ¯”å¦‚å°†å†…å®¹å†™æˆä¸‹é¢è¿™ç§</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> dnf install python3 gcc \</span></span><br><span class="line"><span class="bash">    &amp;&amp; cat /data/our_hosts &gt; /etc/hosts \</span></span><br><span class="line"><span class="bash">    &amp;&amp; cat /<span class="built_in">log</span>/balabala.log | grep <span class="string">"test"</span> &gt; /data/test_group.log \</span></span><br><span class="line"><span class="bash">    &amp;&amp; pip install Django \</span></span><br><span class="line"><span class="bash">    &amp;&amp; django-admin startproject testproject</span></span><br></pre></td></tr></table></figure><p>å°†æœ¬æ¥è¦å†™å¾ˆå¤šè¡Œçš„æ•´ç†åˆ°ä¸€ä¸ªå‘½ä»¤åé¢ï¼Œä»¥æ­¤æ¥ç¼©å‡é•œåƒå±‚æ•°</p><h2 id="é•œåƒçš„å¯è¿½æº¯æ€§"><a href="#é•œåƒçš„å¯è¿½æº¯æ€§" class="headerlink" title="é•œåƒçš„å¯è¿½æº¯æ€§"></a>é•œåƒçš„å¯è¿½æº¯æ€§</h2><p><code>Dockerfile</code>æ¯”<code>docker commit</code>å…·æœ‰æ›´å¥½çš„å¯è¿½æº¯æ€§ã€‚æ‰€è°“çš„<strong>å¯è¿½æº¯æ€§</strong>å°±æ˜¯è¯´å¯ä»¥è¿½æº¯è¿™ä¸ªé•œåƒä»åŸºç¡€é•œåƒå¼€å§‹åˆ°æœ€æ–°çš„è¿™ä¸ªç‰ˆæœ¬éƒ½åšäº†ä»€ä¹ˆã€‚</p><p>å¦‚æœä½¿ç”¨<code>docker commit</code>çš„æ–¹å¼ç»´æŠ¤é•œåƒï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡commitæ—¶å€™çš„å¤‡æ³¨å’Œshellçš„å†å²è®°å½•æ¥è¿½æº¯ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™æ ·æ—¶é—´é•¿ä¹…ä¸‹å»å°±ä¼šå¯¼è‡´<strong>ç¥–ä¼ é•œåƒ</strong>çš„å‡ºç°ã€‚æ‰€è°“ç¥–ä¼ é•œåƒå°±æ˜¯æŒ‡é‚£äº›â€œæˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªé•œåƒé‡Œéƒ½æ”¹è¿‡å“ªäº›é…ç½®ï¼Œè£…è¿‡å“ªäº›è½¯ä»¶å’Œç¬¬ä¸‰æ–¹åŒ…ï¼Œåæ­£è¿˜èƒ½ç”¨å°±å‡‘åˆç”¨æŠŠâ€çš„é•œåƒã€‚</p><p>å¦‚æœæ˜¯ä½¿ç”¨çš„<code>Dockerfile</code>é‚£ä¹ˆå°±å¾ˆå®¹æ˜“äº†ï¼Œæ„å»ºè¿™ä¸ªé•œåƒæ‰€ç»å†çš„æ‰€æœ‰æ‰€æœ‰æ­¥éª¤éƒ½æ¸…æ¸…æ¥šæ¥šå†™åœ¨<code>Dockerfile</code>é‡Œäº†ï¼Œå¯è¿½æº¯æ€§æ¯”<code>docker commit</code>é«˜åˆ°ä¸çŸ¥é“å“ªé‡Œå»äº†ã€‚</p><h1 id="0X04-ç²¾ç®€é•œåƒ"><a href="#0X04-ç²¾ç®€é•œåƒ" class="headerlink" title="0X04 ç²¾ç®€é•œåƒ"></a>0X04 ç²¾ç®€é•œåƒ</h1><p>ç²¾ç®€é•œåƒå…¶å®åŸåˆ™å¾ˆç®€å•ï¼Œå°±æ˜¯<strong>åˆ é™¤ä¸ç”¨çš„ä¸œè¥¿ï¼Œå‡å°‘é•œåƒå±‚æ•°</strong>ã€‚é¦–å…ˆæ­£ç¡®ä½¿ç”¨<code>Dockerfile</code>å°±å¯ä»¥å¤§å¹…åº¦ç²¾ç®€é•œåƒäº†ï¼Œå…¶æ¬¡å°±æ˜¯åœ¨Dockerfileä¸­è®°å¾—æ¸…ç†ä¸€äº›æ— ç”¨çš„ä¸œè¥¿ã€‚</p><ol><li>æ¯”å¦‚ä½ è¦å†å®¹å™¨ä¸­ç¼–è¯‘å®‰è£…ä¸€ä¸ªCåº“ï¼Œé‚£ä¹ˆæœ€åæ˜¯ä¸æ˜¯<code>gcc</code>å°±ç”¨ä¸åˆ°äº†ï¼Ÿç”¨ä¸åˆ°äº†å°±å¸è½½æ‰ã€‚</li><li>æ¯æ¬¡<code>apt install &amp; dnf install &amp; pip install</code>æ˜¯ä¸æ˜¯è¦æœ‰ç¼“å­˜æ–‡ä»¶ï¼Ÿç”¨å®Œäº†å°±åˆ æ‰</li><li>ä»¥æ­¤ç±»æ¨ï¼Œå°†ç”¨ä¸åˆ°çš„å†…å®¹æ¸…ç†æ‰å°±è¡Œäº†</li></ol><p>æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹å°±æ˜¯é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åŸºç¡€é•œåƒï¼Œé€šå¸¸æ¥è¯´æˆ‘ä»¬è‡ªå·±ä½¿ç”¨<code>ubuntu</code>æä¸€ä¸ªé•œåƒè£…ä¸Š<code>Python</code>å†æä¸Š<code>Django</code>(Pythonçš„ä¸€ä¸ªwebæ¡†æ¶)æ‰€æ„å»ºçš„é•œåƒä¸ä¼šæ¯”ç›´æ¥ç”¨<code>Django</code>çš„å®˜æ–¹åŸºç¡€é•œåƒæ›´å¥½ã€‚</p><h1 id="0X05-éœ€è¦æ³¨æ„"><a href="#0X05-éœ€è¦æ³¨æ„" class="headerlink" title="0X05 éœ€è¦æ³¨æ„"></a>0X05 éœ€è¦æ³¨æ„</h1><p>æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p><ol><li><code>docker image</code>æ˜¯æœ‰å±‚æ•°é™åˆ¶çš„ï¼Œç›®å‰æ˜¯127å±‚ï¼Œè¶…å‡ºçš„è¯å†commitæ˜¯ä¼šæŠ¥é”™çš„</li><li><code>docker build</code>å®é™…ä¸Šå°±æ˜¯è‡ªåŠ¨çš„<code>docker run/xxx/commit/stop/rm</code>å·¥ä½œæµ</li><li><code>docker build .</code>ä¸­çš„<code>.</code>çœ‹èµ·æ¥æ˜¯<code>Dockerfile</code>æ‰€åœ¨ä½ç½®ï¼Œå®é™…å¹¶ä¸æ˜¯ï¼Œè€Œæ˜¯â€œä¸Šä¸‹æ–‡ç¯å¢ƒâ€ã€‚å…·ä½“çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œå¯ä»¥è‡ªè¡Œæœç´¢äº†è§£</li><li>æŒ‡å®š<code>Dockerfile</code>è¦ç”¨<code>docker buld -f xxx/xxx/xxx/hello .</code>ï¼Œå…¶ä¸­<code>xxx/xxx/xxx/hello</code>è¢«å½“ä½œ<code>Dockerfile</code></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³ç³»å‹æ•°æ®åº“ç´¢å¼•åˆæ­¥ä½¿ç”¨ï¼ˆæä¸å¥½æ€§èƒ½æå‡ç™¾å€å‘¦ï¼‰</title>
      <link href="/2019/09/15/database-index/"/>
      <url>/2019/09/15/database-index/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>ä¸è®ºå¤šåˆçº§çš„åç«¯ç¨‹åºå‘˜ï¼Œåªè¦è®¤å¯è‡ªå·±æ˜¯â€œåç«¯ç¨‹åºå‘˜â€é‚£æœ€èµ·ç ä¹Ÿæ˜¯å¬è¿‡â€œæ•°æ®åº“ç´¢å¼•â€è¿™ä¸ªä¸œè¥¿çš„ï¼Œåº”è¯¥ä¹Ÿç›´åˆ°è¿™ä¸œè¥¿èƒ½è®©æ•°æ®åº“å˜å¿«ã€‚ä½†æ˜¯å…·ä½“â€œæ•°æ®åº“ç´¢å¼•â€æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæ€ä¹ˆç”¨ï¼Œä¸ºä»€ä¹ˆèƒ½è®©æ•°æ®åº“å˜å¿«å¯èƒ½å°±ä¸ä¸€å®šæ¸…æ¥šäº†ã€‚</p><p>è¿™ç¯‡åšå®¢ä»…ä»…æ˜¯ç®€è¿°äº†â€œæ•°æ®åº“ç´¢å¼•â€çš„æœ€åŸºç¡€å†…å®¹ï¼Œä¸æ¶‰åŠå†…éƒ¨åŸç†ï¼ˆå…¶å®æˆ‘ä¹Ÿè¿˜æ²¡ææ‡‚ï¼‰ã€‚é˜…è¯»äº†æœ¬ç¯‡åšå®¢å¯ä»¥ï¼ˆä¹Ÿè®¸ï¼‰ææ¸…æ¥šæ€ä¹ˆç»™ä¸€å¼ è¡¨æ·»åŠ ç´¢å¼•ï¼Œç´¢å¼•åŠ åœ¨å“ªå„¿ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸èƒ½ç»™æ‰€æœ‰å­—æ®µåŠ ç´¢å¼•ã€‚</p><h1 id="0X01-ä¸€ä¸ªä¸šåŠ¡åœºæ™¯"><a href="#0X01-ä¸€ä¸ªä¸šåŠ¡åœºæ™¯" class="headerlink" title="0X01 ä¸€ä¸ªä¸šåŠ¡åœºæ™¯"></a>0X01 ä¸€ä¸ªä¸šåŠ¡åœºæ™¯</h1><p>å‡è®¾æˆ‘ä»¬æäº†ä¸€ä¸ªç”µå•†å¹³å°â€œå¹¶å¤•å¤•â€ï¼Œç°åœ¨æœ‰è¶…å¤šç”¨æˆ·å¤§æ¦‚å‡ ç™¾ä¸‡ï¼Œå¾ˆå¤šäººéƒ½åœ¨æˆ‘ä»¬ç³»ç»Ÿé‡Œä¹°äº†ä¸œè¥¿ï¼Œå¤§æ¦‚ä¸‹äº†1000Wå•ã€‚é‚£ä¹ˆæˆ‘ä»¬ç”¨æ¥å­˜å‚¨è®¢å•çš„è¡¨å°±æœ‰å¤§æ¦‚1000Wæ¡æ•°æ®äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿™ä¸ªæ²¡æœ‰è¿›è¡Œè¿‡ä»»ä½•ä¼˜åŒ–çš„æ•°æ®åº“å°±å·²ç»é¡¶ä¸ä½äº†ï¼Œæˆ‘ä»¬æ¯æ¬¡åœ¨åå°æŸ¥çœ‹è®¢å•åˆ—è¡¨çš„æ—¶å€™ä¸€ä¸ªæŸ¥è¯¢å°±è¦å¿«20sï¼Œæ˜¾ç„¶æ˜¯ä¸€ä¸ªæ¥å—ä¸äº†çš„é€Ÿåº¦äº†ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªåˆ—è¡¨éƒ½å¹²äº†ä»€ä¹ˆï¼šâ€œæ ¹æ® è®¢å•çŠ¶æ€ï¼ˆä¸‹å•å¾…æ”¯ä»˜/å·²æ”¯ä»˜/é…é€ä¸­/å·²æ”¶è´§/é€€è´§ä¸­/å·²å®Œæˆï¼‰ï¼Œè®¢å•ç±»å‹ï¼ˆç›´æ¥è´­ä¹°/æ‹¼å•è´­ä¹°/åˆ†äº«ç™½æ‹¿ï¼‰ç­‰çŠ¶æ€ç­›é€‰ï¼Œå¹¶å–å‡ºå‰20æ¡å±•ç¤ºå‡ºæ¥â€ã€‚åå°SQLæ˜¯è¿™ä¸ªæ ·å­çš„<code>SELECT * FROM bxx_order WHERE order_status = xxx AND order_type = xxx ORDER BY -id LIMIT 20</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çœŸæ­£ä¼šå½±å“æ€§èƒ½çš„ä¸»è¦å°±åœ¨<code>WHERE</code>å­å¥é‡Œçš„æŸ¥è¯¢æ¡ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»™è¿™ä¸¤ä¸ªå­—æ®µåˆ†åˆ«åŠ ä¸Šç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±ä¼šé«˜éå¸¸éå¸¸å¤šã€‚</p><a id="more"></a><blockquote><p>æˆ‘åœ¨å…¬å¸çš„ä¸€å¼ 400Wçš„è¡¨ä¸­ä¸ºâ€œçŠ¶æ€â€å­—æ®µæ·»åŠ ç´¢å¼•åå¯¹æ¯”æœªæ·»åŠ ç´¢å¼•çš„æ—¶å€™å¿«äº†ä¸æ­¢100å€ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç´¢å¼•æ˜¯æ€ä¹ˆä½¿ç”¨çš„</p><h1 id="0X02-ä»€ä¹ˆæ˜¯ç´¢å¼•-amp-ä¸ºä»€ä¹ˆç”¨ç´¢å¼•ä¼šåŠ å¿«æŸ¥è¯¢"><a href="#0X02-ä»€ä¹ˆæ˜¯ç´¢å¼•-amp-ä¸ºä»€ä¹ˆç”¨ç´¢å¼•ä¼šåŠ å¿«æŸ¥è¯¢" class="headerlink" title="0X02 ä»€ä¹ˆæ˜¯ç´¢å¼•&amp;ä¸ºä»€ä¹ˆç”¨ç´¢å¼•ä¼šåŠ å¿«æŸ¥è¯¢"></a>0X02 ä»€ä¹ˆæ˜¯ç´¢å¼•&amp;ä¸ºä»€ä¹ˆç”¨ç´¢å¼•ä¼šåŠ å¿«æŸ¥è¯¢</h1><p>ç½‘ä¸Šå¸¸è§çš„è§£é‡Šæ˜¯å°†â€œä¹¦çš„ç›®å½•â€ä¸â€œæ•°æ®åº“ç´¢å¼•â€å…³è”ç†è§£ï¼Œå…¶å®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡ç†è§£è¿™ä¸ªæ¦‚å¿µå…‰ç›´åˆ°è¿™ä¸ªä¹Ÿæ²¡ä»€ä¹ˆç”¨å•Šï¼Œè¿˜æ˜¯ä¸å¤ªèƒ½æ˜ç™½å‘¢ã€‚æˆ‘ä»¬æ¥æŠŠä¸€æœ¬ä¹¦ä½œä¸ºä¸€å¼ æ•°æ®åº“è¡¨å¥½äº†ï¼Œå…¶ä¸­æœ‰å¦‚ä¸‹å­—æ®µ<code>ä¸€çº§æ ‡é¢˜ï¼ŒäºŒçº§æ ‡é¢˜ï¼Œå°èŠ‚ï¼Œæ­£æ–‡</code>ã€‚æ¯”å¦‚ä¸€çº§æ ‡é¢˜å°±æ˜¯â€œ1. å¼•è®ºâ€ï¼ŒäºŒçº§æ ‡é¢˜æ˜¯â€œ1.1 ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿâ€ï¼Œå°èŠ‚æ˜¯â€œ1.1.1 ä½œä¸ºæ‰©å±•æœºå™¨çš„æ“ä½œç³»ç»Ÿâ€ï¼Œæ­£æ–‡å°±æ˜¯â€œbalabalabalabalaâ€ï¼Œé‚£ä¹ˆä¸€èˆ¬çš„ä¹¦ç±éƒ½ä¼šå¯¹ä¸€äºŒçº§æ ‡é¢˜å»ºç«‹ç´¢å¼•ï¼ˆç›®å½•ï¼‰ã€‚</p><p>æˆ‘ä»¬æƒ³æƒ³è¿™æœ¬500å¤šé¡µçš„ã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œé‚£æˆ‘æƒ³çœ‹â€œå¤šæ ¸å¤„ç†å™¨ä¸Šçš„è™šæ‹Ÿæœºâ€è¿™ä¸€éƒ¨åˆ†è¦æ€ä¹ˆæ‰¾å‘¢ï¼Œå°±åªæœ‰ä»ç¬¬ä¸€é¡µå¼€å§‹ç¿»ä¹¦ä¸€ç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ã€‚è¿™å°±æ˜¯æ•°æ®åº“ä¸æ·»åŠ ç´¢å¼•æ—¶å€™çš„æŸ¥è¯¢æ–¹å¼ï¼Œé€æ¡æŸ¥çœ‹ã€‚</p><p>ç°åœ¨æˆ‘ä»¬ç»™æ ‡é¢˜æ·»åŠ äº†ç´¢å¼•ï¼Œä¹Ÿå°±å¤šå‡ºäº†ä¸€éƒ¨åˆ†åä¸ºâ€œç›®å½•â€çš„å†…å®¹ã€‚ä½†æ˜¯è¿™ä¸ªç›®å½•åªæœ‰7é¡µï¼Œæˆ‘å¯ä»¥åœ¨è¿™7é¡µç›®å½•é‡Œæ‰¾åˆ°æˆ‘éœ€è¦çš„å†…å®¹åœ¨500é¡µä¸­çš„ä½ç½®ç„¶åç›´æ¥ç¿»åˆ°å¯¹åº”çš„é‚£ä¸€é¡µã€‚æ•°æ®åº“ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œå‡è®¾æˆ‘ä»¬ç»™è®¢å•çŠ¶æ€æ·»åŠ äº†ç´¢å¼•ï¼Œæ•°æ®åº“å°±ä¼šçŸ¥é“çŠ¶æ€ä¸ºâ€œå¾…æ”¯ä»˜â€çš„è®¢å•åœ¨æ•°æ®åº“çš„ä»€ä¹ˆä½ç½®ï¼ŒçŠ¶æ€ä¸ºâ€œå·²å®Œæˆâ€çš„åœ¨ä»€ä¹ˆä½ç½®ã€‚ä¹Ÿå°±ä¸ç”¨æ¯æ¬¡éƒ½ä¸€æ¡æ¡çš„æŸ¥çœ‹è¿™1000Wæ¡è®¢å•æ•°æ®äº†ã€‚</p><h1 id="0X03-å¦‚ä½•æ·»åŠ ç´¢å¼•"><a href="#0X03-å¦‚ä½•æ·»åŠ ç´¢å¼•" class="headerlink" title="0X03 å¦‚ä½•æ·»åŠ ç´¢å¼•"></a>0X03 å¦‚ä½•æ·»åŠ ç´¢å¼•</h1><p>é‚£è¯´äº†è¿™ä¹ˆå¤šï¼Œæ€ä¹ˆæ‰èƒ½ç»™æ•°æ®åº“è¡¨æ·»åŠ ä¸Šç´¢å¼•å‘¢ï¼Ÿå¦‚æœæ˜¯åœ¨å»ºè¡¨é˜¶æ®µå°±è€ƒè™‘åˆ°äº†ç´¢å¼•ï¼Œæœ¬æ¥çš„å»ºè¡¨SQLæ˜¯è¿™æ ·çš„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> bxx_order(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">order_status <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">order_type <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"></span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆåªéœ€è¦åœ¨æœ€ååŠ ä¸Šç´¢å¼•æŒ‡å®šå°±è¡Œäº†<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> bxx_order(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">order_status <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">order_type <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"></span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line"><span class="comment">-- ä¸Šé¢æ²¡å˜ï¼Œåªæ˜¯åŠ äº†æœ€åçš„é€—å·</span></span><br><span class="line"><span class="keyword">INDEX</span> (order_status)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>é‚£å¦‚æœè¡¨å·²ç»å­˜åœ¨äº†å‘¢ï¼Ÿä¹Ÿåªéœ€è¦<code>ALERT TABLE bxx_order ADD INDEX order_status</code>å°±å¯ä»¥å°†å·²ç»å­˜åœ¨çš„è¡¨æ·»åŠ ä¸Šç´¢å¼•ã€‚</p><p><strong>æ³¨æ„åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šæ·»åŠ ç´¢å¼•æ—¶å¯èƒ½ä¼šé”è¡¨ä»è€Œå¯¼è‡´ä¸šåŠ¡æ”¶åˆ°å½±å“ã€‚æ‰€ä»¥è¯·åŠ¡å¿…è°ƒæŸ¥æ¸…æ¥šè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ç‰ˆæœ¬å’Œå½“å‰çš„ä¸šåŠ¡ï¼Œç»“åˆæ•°æ®åº“ç‰ˆæœ¬ç‰¹æ€§å’Œä¸šåŠ¡æƒ…å†µé…Œæƒ…åœ¨ç”Ÿäº§ç¯å¢ƒæ“ä½œ</strong></p><p><strong>æ³¨æ„åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šæ·»åŠ ç´¢å¼•æ—¶å¯èƒ½ä¼šé”è¡¨ä»è€Œå¯¼è‡´ä¸šåŠ¡æ”¶åˆ°å½±å“ã€‚æ‰€ä»¥è¯·åŠ¡å¿…è°ƒæŸ¥æ¸…æ¥šè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ç‰ˆæœ¬å’Œå½“å‰çš„ä¸šåŠ¡ï¼Œç»“åˆæ•°æ®åº“ç‰ˆæœ¬ç‰¹æ€§å’Œä¸šåŠ¡æƒ…å†µé…Œæƒ…åœ¨ç”Ÿäº§ç¯å¢ƒæ“ä½œ</strong></p><p><strong>æ³¨æ„åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šæ·»åŠ ç´¢å¼•æ—¶å¯èƒ½ä¼šé”è¡¨ä»è€Œå¯¼è‡´ä¸šåŠ¡æ”¶åˆ°å½±å“ã€‚æ‰€ä»¥è¯·åŠ¡å¿…è°ƒæŸ¥æ¸…æ¥šè‡ªå·±ä½¿ç”¨çš„æ•°æ®åº“ç‰ˆæœ¬å’Œå½“å‰çš„ä¸šåŠ¡ï¼Œç»“åˆæ•°æ®åº“ç‰ˆæœ¬ç‰¹æ€§å’Œä¸šåŠ¡æƒ…å†µé…Œæƒ…åœ¨ç”Ÿäº§ç¯å¢ƒæ“ä½œ</strong></p><h1 id="0X04-ç´¢å¼•åŠ åœ¨é‚£å„¿"><a href="#0X04-ç´¢å¼•åŠ åœ¨é‚£å„¿" class="headerlink" title="0X04 ç´¢å¼•åŠ åœ¨é‚£å„¿"></a>0X04 ç´¢å¼•åŠ åœ¨é‚£å„¿</h1><p>å¥½äº†ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†ç´¢å¼•æ˜¯ä»€ä¹ˆä¹ŸçŸ¥é“ç´¢å¼•æ€ä¹ˆåŠ äº†ï¼Œé‚£åœ¨å“ªäº›å­—æ®µåŠ ç´¢å¼•æ‰ä¼šæœ‰å¾ˆå¥½çš„æ•ˆæœå‘¢ï¼Ÿ<strong>ç»™<code>WHERE</code>åé¢ç”¨çš„å­—æ®µåŠ ç´¢å¼•ï¼Œç»™<code>ORDER BY</code>åé¢çš„å­—æ®µåŠ ç´¢å¼•ï¼Œç»™â€œé€‰æ‹©çš„å€¼â€åŠ ç´¢å¼•</strong>ã€‚</p><p><code>SELECT create_time, pay_time, username, amount FROM bxx_order WHERE order_status = &quot;done&quot; AND order_type = &quot;free&quot; ORDER BY -pay_time LIMIT 20</code></p><p>ç¬¬ä¸€éƒ¨åˆ†æ˜¯â€œç»™<code>WHERE</code>åé¢çš„å­—æ®µåŠ ç´¢å¼•â€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¿™ä¸ªå®ä¾‹ä¸­çš„<code>order_status</code>å’Œ<code>order_type</code>å­—æ®µï¼›ç¬¬äºŒéƒ¨åˆ†æ˜¯â€ç»™<code>ORDER BY</code>åé¢çš„å­—æ®µåŠ ç´¢å¼•â€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å®ä¾‹ä¸­çš„<code>pay_time</code>å­—æ®µã€‚å› ä¸ºæˆ‘ä»¬åŠ äº†ç´¢å¼•æ˜¯æ–¹ä¾¿æŸ¥è¯¢å’Œæ’åºçš„ï¼Œä½ çœ‹æˆ‘ä»¬çš„ä¹¦ä¸Šä¸ä¼šç»™æ­£æ–‡åŠ ç´¢å¼•ï¼Œæ›´ä¸ä¼šç»™æ¯ä¸€é¡µçš„å­—æ•°åŠ ç´¢å¼•ï¼Œå› ä¸ºè¿™äº›ç´¢å¼•åŠ äº†ä¹‹åå¯¹æˆ‘ä»¬ç¿»çœ‹ç›®å½•å¹¶æ²¡æœ‰ä»»ä½•å¸®åŠ©ã€‚</p><p>é‡ç‚¹æ˜¯ç¬¬ä¸‰ç‚¹<strong>ç»™â€œé€‰æ‹©çš„å€¼â€åŠ ç´¢å¼•</strong>ã€‚ä»€ä¹ˆæ˜¯â€œé€‰æ‹©çš„å€¼â€å‘¢ï¼Ÿå°±æ˜¯è¯´æŸä¸ªå­—æ®µçš„å€¼å°±åªæœ‰è¿™äº›ï¼Œè¿™ä¸ªå­—æ®µçš„å€¼å€¼å¯èƒ½æ˜¯è¿™å‡ ç§åå‡ ç§é‡Œçš„ä¸€ç§ã€‚</p><p>æˆ‘ä»¬çœ‹è¿™æ ·ä¸€ä¸ªSQL<code>SELECT * FROM bxx_order WHERE order_status = &quot;done&quot;</code>ã€‚å› ä¸ºæˆ‘ä»¬çš„<code>order_status</code>ä¸€å…±å°±è¿™ä¹ˆå‡ ç§ï¼Œå‡è®¾è¿™äº›çŠ¶æ€çš„è®¢å•éƒ½å·®ä¸å¤šæ•°é‡çš„è¯ï¼Œåº”è¯¥æ˜¯æ¯ç§çŠ¶æ€çš„è®¢å•éƒ½æ˜¯167Wå·¦å³ã€‚é‚£ä¹ˆæˆ‘ä»¬ç»™è¿™ä¸ªå­—æ®µåŠ äº†ç´¢å¼•åï¼Œæ•°æ®åº“æŸ¥è¯¢æ—¶å€™å°±å¯ä»¥ç¬é—´å°†æŸ¥è¯¢èŒƒå›´ä»1000Wç¼©å‡ä¸º167Wï¼Œæ•ˆç‡ä¸€ä¸‹å°±æ˜¯åŸæ¥çš„6å€ï¼Œå¦‚æœçŠ¶æ€æ›´å¤šé‚£æ•ˆæœä¼šæ›´æ˜æ˜¾ã€‚ï¼ˆå½“ç„¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå‰¯ä½œç”¨åé¢ä¼šæåˆ°ï¼‰</p><h1 id="0X05-è”åˆç´¢å¼•"><a href="#0X05-è”åˆç´¢å¼•" class="headerlink" title="0X05 è”åˆç´¢å¼•"></a>0X05 è”åˆç´¢å¼•</h1><p>è”åˆç´¢å¼•å¯ä»¥ç†è§£ä¸ºå°†ç´¢å¼•åçš„æ•°æ®å†ç´¢å¼•ä¸€æ¬¡ã€‚æ¯”å¦‚è¿™ä¹ˆä¸€ä¸ªSQL<code>SELECT * FROM bxx_order WHERE order_status = &quot;done&quot; AND ORDER_TYPE = &quot;free&quot;</code>ï¼Œå¦‚æœå»ºç«‹äº†<code>order_status</code>å’Œ<code>order_type</code>çš„è”åˆç´¢å¼•ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨å¯¹<code>order_status</code>ç´¢å¼•å®Œæˆåçš„167Wæ¡æ•°æ®çš„gåŸºç¡€ä¸Šå†æ¥ä¸€æ¬¡å¯¹<code>order_type</code>çš„ç´¢å¼•ï¼Œé€Ÿåº¦ä¼šè¿›ä¸€æ­¥å˜å¿«ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯è”åˆç´¢å¼•è¦æ˜¯<code>AND</code>æ¡ä»¶ä¸‹æ‰ä¼šè§¦å‘ï¼Œå¦‚æœç”¨äº†<code>SELECT * FROM bxx_order WHERE order_status=&quot;done&quot; OR order_type=&quot;free&quot;</code>è¿™ç§å°±ä¸ä¼šè§¦å‘äº†ã€‚</p><p>å»ºç«‹è”åˆç´¢å¼•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå»ºè¡¨çš„æ—¶å€™å°†ä¸Šè¿°çš„<code>INDEX (order_status)</code>æ”¹æˆ<code>INDEX (order_status, order_type)</code>å°±å¥½äº†ï¼Œæ”¹è¡¨ä¹Ÿæ˜¯åŒç†ã€‚</p><h1 id="0X06-ç´¢å¼•å½“ç„¶æœ‰å‰¯ä½œç”¨"><a href="#0X06-ç´¢å¼•å½“ç„¶æœ‰å‰¯ä½œç”¨" class="headerlink" title="0X06 ç´¢å¼•å½“ç„¶æœ‰å‰¯ä½œç”¨"></a>0X06 ç´¢å¼•å½“ç„¶æœ‰å‰¯ä½œç”¨</h1><p>é‚£æ˜¯ä¸æ˜¯ç»™æ‰€ä»¥å­—æ®µéƒ½åŠ ä¸Šç´¢å¼•æ•°æ®åº“å°±é£å¿«äº†ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œå¦‚æœæ˜¯çš„è¯é‚£ç´¢å¼•è¿™ä¸œè¥¿å°±åº”è¯¥ä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ è€Œæ˜¯ç›´æ¥è‡ªåŠ¨å®ç°äº†æ˜¯å§ã€‚é‚£ç´¢å¼•çš„å‰¯ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢è¿™å‡ ç§æƒ…å†µéƒ½æ˜¯å»ºç«‹ç´¢å¼•çš„å‰¯ä½œç”¨ï¼Œæˆ–æ˜¯æ— ç”¨åŠŸ:</p><ol><li>æƒ³æƒ³æŠŠä¹¦å†™å®Œäº†ï¼Œç”Ÿæˆäº†ä¸€ä¸ªç›®å½•ï¼Œè¯»è€…è¯»èµ·æ¥å¼€å¼€å¿ƒå¿ƒæ˜¯å§ã€‚çªç„¶ä½ è¯´è¦å¾€ä¹¦çš„ç¬¬ä¸‰ç« å’Œç¬¬å››ç« ä¸­é—´æ’å…¥ä¸€äº›æ–°å†…å®¹ï¼Œæœ¬æ¥æ˜¯åªéœ€è¦ä¿®æ”¹å†…å®¹çš„ï¼Œç°åœ¨è¿˜è¦å¯¹åº”ä¿®æ”¹ç›®å½•éƒ¨åˆ†ã€‚æ•°æ®åº“ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæœ¬æ¥ä¸€æ¬¡çš„å†™å…¥å˜æˆäº†ä¸¤æ¬¡å†™å…¥ï¼Œæ€§èƒ½è‡ªç„¶ä¸‹é™äº†ï¼›</li><li>å¦‚æœå»ºç«‹äº†è¿‡å¤šçš„ç´¢å¼•ï¼Œé‚£ä¹ˆç´¢å¼•å ç”¨çš„å†…å­˜å°±ä¼šå¾ˆå¤§ï¼Œå¯¹æœºå™¨é€ æˆè¿‡å¤šçš„è´Ÿè½½ã€‚æƒ³æƒ³å¦‚æœæˆ‘ä»¬ç»™ä¹¦çš„æ‰€æœ‰å†…å®¹éƒ½å»ºç«‹äº†ç´¢å¼•ï¼Œç”šè‡³æ­£æ–‡é¡µå»ºç«‹äº†ç´¢å¼•ï¼Œé‚£ç´¢å¼•ä¹Ÿå°±æ²¡ä»€ä¹ˆå¤ªå¤§çš„æ„ä¹‰äº†ï¼›</li><li>å¦‚æœæˆ‘ä»¬æŠŠç´¢å¼•æ·»åŠ åœ¨äº†ç»å¸¸åªå‡ºç°åœ¨<code>SELECT</code>åé¢çš„å­—æ®µä¸Šï¼Œé‚£ä¸ä»…æ¯æ¬¡å†™å…¥æ•°æ®çš„æ—¶å€™éƒ½è¦æ›´æ–°ç´¢å¼•æ•°æ®ï¼Œè€Œä¸”è¿™ä¸ªç´¢å¼•å¯¹æˆ‘ä»¬çš„ç³»ç»Ÿæ€§èƒ½è¿˜æ¯«æ— æå‡ç”šè‡³å› ä¸ºè¿™ä¸ªç´¢å¼•æˆ‘ä»¬ç³»ç»Ÿè¿˜æ›´æ…¢äº†ã€‚</li></ol><h1 id="0X07-æ€»ç»“"><a href="#0X07-æ€»ç»“" class="headerlink" title="0X07 æ€»ç»“"></a>0X07 æ€»ç»“</h1><p>æ€»ç»“èµ·æ¥è¯´çš„è¯ï¼Œç´¢å¼•çš„å»ºç«‹åº”è¯¥éµå¾ªå…¶è®¾è®¡åˆè¡·ä¸åŸç†ï¼Œå¦åˆ™ä¸ä»…å¯¹æŸ¥è¯¢æ¯«æ— å¸®åŠ©åè€Œä¼šåŠ å¤§æ¶ˆè€—çš„å†…å­˜å¹¶ä¸”å‡æ…¢å†™å…¥çš„é€Ÿåº¦ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Index </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python è£…é¥°å™¨</title>
      <link href="/2019/08/22/python-decorator/"/>
      <url>/2019/08/22/python-decorator/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ç»™ä¸€ä¸ªæ–¹æ³•è®¡æ—¶"><a href="#0X00-ç»™ä¸€ä¸ªæ–¹æ³•è®¡æ—¶" class="headerlink" title="0X00 ç»™ä¸€ä¸ªæ–¹æ³•è®¡æ—¶"></a>0X00 ç»™ä¸€ä¸ªæ–¹æ³•è®¡æ—¶</h1><p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ç»™ç¨‹åºä¸­çš„ä¸€éƒ¨åˆ†æ–¹æ³•è®¡æ—¶ï¼Œä»¥ç›‘æ§ä»–ä»¬æ‰§è¡Œå®Œå…·ä½“ç”¨äº†å¤šä¹…ã€‚é‚£ä¹ˆåœ¨æ²¡æœ‰è£…é¥°å™¨çš„æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå†™å‡ºç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>    <span class="comment"># some code</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = datetime.datetime.now()</span><br><span class="line">foo()</span><br><span class="line">end = datetime.datetime.now()</span><br><span class="line">print((end - start).seconds)</span><br></pre></td></tr></table></figure><h1 id="0X01-å¼•å…¥è£…é¥°å™¨"><a href="#0X01-å¼•å…¥è£…é¥°å™¨" class="headerlink" title="0X01 å¼•å…¥è£…é¥°å™¨"></a>0X01 å¼•å…¥è£…é¥°å™¨</h1><p>å¦‚æœåªæ˜¯ä¸´æ—¶ç»™ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§å¤§é‡çš„æ–¹æ³•å‘¢ï¼Ÿä¼—æ‰€å‘¨çŸ¥Pythonä¸­<code>function</code>ä¹Ÿæ˜¯å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’çš„ï¼Œé‚£æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ç§å†™æ³•å‘¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run_func</span><span class="params">()</span>:</span> <span class="comment"># æ–¹æ³•å†…éƒ¨å°†ä¹‹å‰è®¡æ—¶çš„åŠŸèƒ½å°è£…èµ·æ¥</span></span><br><span class="line">        start = datetime.datetime.now()</span><br><span class="line">        result = func() <span class="comment"># å¾—åˆ°å‚æ•°æ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line">        end = datetime.datetime.now()</span><br><span class="line">        print((end - start).seconds)</span><br><span class="line">        <span class="keyword">return</span> result   <span class="comment"># å°†çœŸæ­£çš„ç»“æœè¿”å›ç»™è°ƒç”¨è€…</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> run_func   <span class="comment"># è°ƒç”¨å†…éƒ¨æ–¹æ³•ï¼Œè¿›è¡Œè®¡æ—¶</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>    <span class="comment"># some code</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>    <span class="comment"># some code</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ–¹æ³•ä½œä¸ºå‚æ•°å‘é€ç»™ timer()</span></span><br><span class="line">timer(foo)()</span><br><span class="line">timer(bar)()</span><br></pre></td></tr></table></figure><p><strong>å› ä¸ºä¸Šé¢timer(foo)è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ª<code>func</code>ï¼Œæ‰€ä»¥åé¢éœ€è¦å†åŠ ä¸€å¯¹æ‹¬å·æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•</strong></p><p>è¿™ç§æ–¹æ³•åªå†™äº†ä¸€æ¬¡è®¡æ—¶çš„é€»è¾‘ï¼Œä½†æ˜¯å¯ä»¥ç»™ä»»æ„ä¸€ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œå…¶å®è¿™æ—¶å€™<code>def timer(func)</code>å·²ç»æ˜¯è£…é¥°å™¨äº†ï¼Œä¸‹é¢è°ƒç”¨çš„æ–¹æ³•<code>timer(foo)/timer(bar)</code>ä¹Ÿæ˜¯æ­£ç¡®çš„è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•ã€‚é‚£æ˜¯ä¸æ˜¯è§‰å¾—å’Œå¸¸è§çš„è£…é¥°å™¨ä½¿ç”¨ä¸å¤ªä¸€æ ·å‘¢ï¼Ÿå…¶å®å¸¸è§çš„<code>@timer</code>ç”¨æ³•æ˜¯Pythonä¸­æä¾›çš„ä¸€ç§è¯­æ³•ç³–ã€‚</p><a id="more"></a><h1 id="0X02-è¯­æ³•ç³–"><a href="#0X02-è¯­æ³•ç³–" class="headerlink" title="0X02 @è¯­æ³•ç³–"></a>0X02 @è¯­æ³•ç³–</h1><p>å…¶å®ä¸Šé¢çš„ä»£ç å°±å¯ä»¥ç›´æ¥ä½¿ç”¨@è¯­æ³•ç³–äº†ï¼Œå…·ä½“ç”¨æ³•æ˜¯è¿™æ ·ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>    <span class="comment"># some code</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></p><p>è¯­æ³•ç³–å®é™…åªæ˜¯ä¾¿äºæˆ‘ä»¬ç¼–ç çš„ä¸€ç§è®¾è®¡ï¼ŒæŒ‰ç†è¯´ä¸€åˆ‡è¢«ç§°ä¸ºè¯­æ³•ç³–çš„ä¸œè¥¿éƒ½ä¸æ˜¯å¿…é¡»çš„ã€‚æ¯”å¦‚è¯´è¿™é‡Œçš„è¯­æ³•ç³–å®Œå…¨å¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥åº”ç”¨è£…é¥°å™¨ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜æ˜¯è®¾è®¡äº†è¿™ä¸ªè¯­æ³•ç³–å‘¢ï¼Ÿæˆ‘ä»¬å¯¹æ¯”ä¸‹é¢ä¸¤ç§æ–¹æ³•çš„è°ƒç”¨ï¼Œæˆ‘ä»¬å‡è®¾<code>get_data_from_server/db</code>æ˜¯ä¸€ä¸ªè€—æ—¶è¾ƒä¹…çš„æ–¹æ³•ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data_from_server</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data_from_db</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">timer(get_data_from_server))()</span><br><span class="line"></span><br><span class="line">get_data_from_db()</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸¤ç§æ–¹æ³•çœ‹èµ·æ¥æ˜æ˜¾æ˜¯åé¢<code>get_data_from_db</code>çš„ç”¨æ³•æ›´æ˜“è¯»ã€‚æ‰€ä»¥è¿™å¤„è¯­æ³•ç³–çš„å‡ºç°èƒ½å¤§å¹…åº¦çš„æå‡ä»£ç çš„å¯è¯»æ€§ï¼Œæ›´èƒ½æå‡ç»´æŠ¤æ€§è´¨ï¼šå½“ä»£ç ä¸­è°ƒç”¨äº†1Wæ¬¡éè¯­æ³•ç³–å½¢å¼çš„è£…é¥°å™¨è®¡æ—¶æ—¶ï¼Œå–æ¶ˆè®¡æ—¶å°±è¦ä¿®æ”¹1Wè¡Œä»£ç ï¼›å¦‚æœç”¨äº†@è¯­æ³•ç³–ï¼Œé‚£å°±åªéœ€è¦å°†æ–¹æ³•å®šä¹‰å¤„çš„<code>@timer</code>æ³¨é‡Šæ‰å°±å¯ä»¥äº†ã€‚</p><h1 id="0X03-ä¼ å‚"><a href="#0X03-ä¼ å‚" class="headerlink" title="0X03 ä¼ å‚"></a>0X03 ä¼ å‚</h1><p>â€œé‚£è¦ä¼ å‚å’‹æå“‡ï¼Ÿâ€ â€œè¿™ä¹ˆæâ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run_func</span><span class="params">(secs)</span>:</span> <span class="comment"># è¿™å„¿æ¥å—å‚æ•°</span></span><br><span class="line">        start = datetime.datetime.now()</span><br><span class="line">        result = func(secs) <span class="comment"># è¿™å„¿æŠŠå‚æ•°æè¿›å»</span></span><br><span class="line">        end = datetime.datetime.now()</span><br><span class="line">        print((end - start).microseconds)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> run_func</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(secs)</span>:</span></span><br><span class="line">    time.sleep(secs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(secs)</span>:</span></span><br><span class="line">    time.sleep(secs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    foo(<span class="number">3</span>)  <span class="comment"># å’Œä¸ä½¿ç”¨@timeræ—¶å€™çš„timer(foo)(3)æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">    bar(<span class="number">5</span>)  <span class="comment"># å’Œä¸ä½¿ç”¨@timeræ—¶å€™çš„timer(bar)(5)æ˜¯ä¸€æ ·çš„</span></span><br></pre></td></tr></table></figure><p>â€œé‚£æˆ‘è¦æ˜¯æœ‰å¥½å‡ ä¸ªå‚æ•°å‘¢ï¼Œæ€ä¹ˆæï¼Ÿâ€ â€œå°±è¿˜æ˜¯è¿™ä¹ˆæå•Šâ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run_func</span><span class="params">(*args)</span>:</span> <span class="comment"># è¿™å„¿æ¥å—å‚æ•°ï¼Œå‡ ä¸ªéƒ½è¡Œ</span></span><br><span class="line">        start = datetime.datetime.now()</span><br><span class="line">        result = func(*args) <span class="comment"># è¿™å„¿æŠŠå‚æ•°æè¿›å»ï¼Œå‡ ä¸ªéƒ½è¡Œ</span></span><br><span class="line">        end = datetime.datetime.now()</span><br><span class="line">        print((end - start).microseconds)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> run_func</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(start_secs, end_secs)</span>:</span></span><br><span class="line">    time.sleep(random.randint(start_secs, end_secs))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foo(<span class="number">3</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Decorator </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„å¯è¿­ä»£å¯¹è±¡ã€è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨</title>
      <link href="/2019/08/20/iterator-generator/"/>
      <url>/2019/08/20/iterator-generator/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯å¯è¿­ä»£å¯¹è±¡"><a href="#0X00-ä»€ä¹ˆæ˜¯å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯å¯è¿­ä»£å¯¹è±¡"></a>0X00 ä»€ä¹ˆæ˜¯å¯è¿­ä»£å¯¹è±¡</h1><p>æˆ‘ä»¬å¹³æ—¶ç”¨åˆ°çš„<code>list/set/tuples</code>æ˜¯æœ€å¸¸è§çš„å¯è¿­ä»£å¯¹è±¡ï¼Œç®€å•åˆ¤æ–­å°±æ˜¯è¯´å½“å¯ä»¥<code>for item in this_obj</code>çš„æ—¶å€™<code>this_obj</code>å°±æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚æ‰€ä»¥ä¸åªæ˜¯<code>list/set/tuples</code>ï¼Œæ‰“å¼€çš„æ–‡ä»¶æˆ–æ˜¯Djangoä¸­çš„<code>queryset</code>ä¹Ÿéƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: user_list = iter([<span class="string">'shawn'</span>, <span class="string">'danny'</span>, <span class="string">'jenny'</span>, <span class="string">'liming'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: next(user_list)</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">'shawn'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: next(user_list)</span><br><span class="line">Out[<span class="number">3</span>]: <span class="string">'danny'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: next(user_list)</span><br><span class="line">Out[<span class="number">4</span>]: <span class="string">'jenny'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: next(user_list)</span><br><span class="line">Out[<span class="number">5</span>]: <span class="string">'liming'</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>iter()</code>å¯ä»¥å°†åˆ—è¡¨å˜ä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œç„¶åä½¿ç”¨<code>next</code>æ–¹æ³•è®¿é—®ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å®é™…ä¸Š<code>iter(this_obj)</code>æ–¹æ³•å’Œ<code>next(this_obj)</code>æ–¹æ³•åˆ†åˆ«è°ƒç”¨çš„æ˜¯<code>this_obj.__iter__()</code>å’Œ<code>this_obj.__next__()</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœæƒ³è¦è‡ªå·±å®ç°è¿­ä»£å™¨çš„è¯å°±éœ€è¦å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p><a id="more"></a><h1 id="0X01-è¿­ä»£å™¨"><a href="#0X01-è¿­ä»£å™¨" class="headerlink" title="0X01 è¿­ä»£å™¨"></a>0X01 è¿­ä»£å™¨</h1><p>é‚£æˆ‘ä»¬æ¥å®ç°å®ç°ä¸€ä¸ªè®¡ç®—æ–æ³¢çº³å¥‘æ•°åˆ—çš„è¿­ä»£å™¨å§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.pre = <span class="number">0</span></span><br><span class="line">        self.cur = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""è¿­ä»£å™¨çš„iteræ–¹æ³•è¿”å›è‡ªèº«"""</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""æ¯æ¬¡è®¡ç®—ä¸‹ä¸€ä¸ªå€¼"""</span></span><br><span class="line">        res = self.cur</span><br><span class="line">        self.cur = self.cur + self.pre</span><br><span class="line">        self.pre = res</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><p>è¿è¡Œèµ·æ¥ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>fib = Fib()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> fib:</span><br><span class="line">        print(i)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="number">34</span></span><br><span class="line"><span class="number">55</span></span><br><span class="line"><span class="number">89</span></span><br><span class="line"><span class="number">144</span></span><br><span class="line"><span class="number">233</span></span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œæ²¡æœ‰ä¸­æ–­çš„åˆ¤å®šï¼Œå¦‚æœéœ€è¦ä¸­æ–­çš„è¯å°±æŠ›å‡ºä¸€ä¸ª<code>StopIteration</code>å¼‚å¸¸å°±å¥½äº†ï¼Œå°±åƒè¿™æ ·ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span>:</span></span><br><span class="line">    .......</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></span><br><span class="line">        res = self.cur</span><br><span class="line">        self.cur = self.cur + self.pre</span><br><span class="line">        self.pre = res</span><br><span class="line">        <span class="keyword">if</span> res &gt; <span class="number">100</span>:   <span class="comment"># æ•°åˆ—æœ€åå€¼å°äº100</span></span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h1 id="0X02-ç”Ÿæˆå™¨"><a href="#0X02-ç”Ÿæˆå™¨" class="headerlink" title="0X02 ç”Ÿæˆå™¨"></a>0X02 ç”Ÿæˆå™¨</h1><p><strong>ç”Ÿæˆå™¨æ˜¯ä¸€ç±»ç‰¹æ®Šçš„è¿­ä»£å™¨</strong>ï¼Œå°†æˆ‘ä»¬å¹³æ—¶å†™çš„è¿™ç§<code>[i for i in range(100)]</code>åˆ—è¡¨ç”Ÿæˆå¼çš„æ–¹æ‹¬å·æ¢æˆå°æ‹¬å·ï¼Œå°±æ˜¯å°†ç»“æœä»åˆ—è¡¨å˜æˆç”Ÿæˆå™¨äº†<code>(i for i in range(100))</code>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä»è¿™é‡Œçœ‹å‡ºæ¥<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: a = [i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>)]</span><br><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: b = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: type(a)</span><br><span class="line">Out[<span class="number">3</span>]: list</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: type(b)</span><br><span class="line">Out[<span class="number">4</span>]: generator</span><br></pre></td></tr></table></figure></p><h1 id="0X03-åŒºåˆ«åœ¨å“ªå„¿å‘¢"><a href="#0X03-åŒºåˆ«åœ¨å“ªå„¿å‘¢" class="headerlink" title="0X03 åŒºåˆ«åœ¨å“ªå„¿å‘¢"></a>0X03 åŒºåˆ«åœ¨å“ªå„¿å‘¢</h1><p>æ—¢ç„¶è¿­ä»£å™¨ç”¨èµ·<code>for .. in ..</code>æ¥è·Ÿåˆ—è¡¨ä¹‹ç±»çš„å·®ä¸å¤šï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æè¿™ä¸ªä¸œè¥¿å‡ºæ¥å‘¢ã€‚æ˜¾ç„¶ä¸æ˜¯ç”¨æ¥ç©ç¥¨çš„ï¼Œç”¨å¤„æ˜¯å¤§å¤§çš„æœ‰ã€‚ä¸‹é¢æ¥ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸€ä¸ª10GBå¤§å°çš„æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬æœºå™¨åªæœ‰8Gçš„å†…å­˜ï¼Œè¿˜æ‰“ç®—é€è¡Œåˆ†ææ—¥å¿—å†…å®¹ï¼Œé‚£è‚¯å®šå°±ä¸èƒ½ç›´æ¥æŠŠæ–‡ä»¶å…¨éƒ¨éƒ½è¯»å…¥å†…å­˜äº†ï¼Œæ˜¾ç„¶å†…å­˜æ˜¯ä¸å¤Ÿç”¨çš„ã€‚è¿™ç§ç±»ä¼¼çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨çš„æ–¹æ³•æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„è¿™ç§<code>for line open(&#39;nginx.log&#39;)</code>çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å¯ä»¥å‘ç°ä¸ç®¡å¤šå¤§çš„æ–‡ä»¶ï¼Œåªè¦ä¸æ˜¯å•è¡Œè¶…é•¿çš„æ–‡ä»¶ï¼Œè¯»å–èµ·æ¥éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚</p><p>å› ä¸ºè¿­ä»£å™¨åªæ˜¯æ¯æ¬¡è¦ç”¨ä¸‹ä¸€è¡Œçš„æ—¶å€™æ‰å»è¯»å–ä¸‹ä¸€è¡Œï¼Œè€Œä¸æ˜¯æŠŠæ•´ä¸ªæ–‡ä»¶éƒ½è¯»åˆ°å†…å­˜é‡Œå†åœ¨éœ€è¦çš„æ—¶å€™å»å–ã€‚ç®€å•åœ°æ¥è¯´å°±æ˜¯<strong>åˆ—è¡¨å…ƒç»„ä¹‹ç±»çš„ç»“æ„æ˜¯ä¿å­˜æ•°æ®ï¼Œè€Œè¿­ä»£å™¨æ˜¯ä¿å­˜ç®—æ³•</strong>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Data Structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Djangoä¸­çš„select_relatedå’Œprefetch_relatedä¼˜åŒ–æŸ¥è¯¢</title>
      <link href="/2019/05/12/django-2-query/"/>
      <url>/2019/05/12/django-2-query/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>æ²¡æœ‰ä»€ä¹ˆå‰è¨€ï¼Œåªæœ‰ä¸€ä¸ªæ•°æ®åº“æ¨¡å‹ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨è¿™ä¸ªæ¨¡å‹æ‹¿æ¥æµ‹è¯•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Major</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(</span><br><span class="line">        <span class="string">'åå­—'</span>,</span><br><span class="line">        max_length=<span class="number">100</span>,</span><br><span class="line">        blank=<span class="literal">True</span>,</span><br><span class="line">        null=<span class="literal">True</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(</span><br><span class="line">        <span class="string">'åå­—'</span>,</span><br><span class="line">        max_length=<span class="number">100</span>,</span><br><span class="line">        blank=<span class="literal">True</span>,</span><br><span class="line">        null=<span class="literal">True</span>,</span><br><span class="line">    )</span><br><span class="line">    select_major = models.ForeignKey(</span><br><span class="line">        Major,</span><br><span class="line">        verbose_name=<span class="string">'ä¸“ä¸š'</span>,</span><br><span class="line">        on_delete=models.SET_NULL,</span><br><span class="line">        blank=<span class="literal">True</span>,</span><br><span class="line">        null=<span class="literal">True</span>,</span><br><span class="line">        related_name=<span class="string">'main_student'</span>,</span><br><span class="line">    )</span><br><span class="line">    ext_major = models.ManyToManyField(</span><br><span class="line">        Major,</span><br><span class="line">        verbose_name=<span class="string">'é™„åŠ ä¸“ä¸š'</span>,</span><br><span class="line">        related_name=<span class="string">'ext_student'</span>,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆå‡è®¾Majorè¡¨å­˜åœ¨10æ¡æ•°æ®ï¼Œè€ŒStudentè¡¨å­˜åœ¨1ä¸‡æ¡æ•°æ®ã€‚</p><a id="more"></a><h1 id="0X01-ä½¿ç”¨select-related"><a href="#0X01-ä½¿ç”¨select-related" class="headerlink" title="0X01 ä½¿ç”¨select_related"></a>0X01 ä½¿ç”¨select_related</h1><p>å¦‚æœæˆ‘ä»¬è¦å¾—åˆ°æ‰€æœ‰çš„å­¦ç”Ÿå’Œä»–ä»¬æ‰€å­¦ä¸“ä¸šçš„åå­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è½»æ¾å†™å‡ºä¸‹é¢çš„ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> Student.objects.all():</span><br><span class="line">    print(student.name, <span class="string">'--&gt;'</span>, student.selected_major.name)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½å¾—åˆ°æ‰€æœ‰å­¦ç”Ÿå§“åå’Œä»–ä»¬æ‰€å­¦çš„ä¸“ä¸šåäº†ï¼Œä½†æ˜¯é‡ç‚¹åœ¨äºè¿™æ¬¡æŸ¥è¯¢å…¶å®æ˜¯ä¸€ä¸ªå¾ˆä½æ•ˆçš„æŸ¥è¯¢ï¼Œå› ä¸ºåœ¨<code>Student.objects.all()</code>çš„æ—¶å€™æŸ¥è¯¢äº†ä¸€æ¬¡æ•°æ®åº“ï¼Œè€Œä¸”æ¯æ¬¡è®¿é—®<code>student.selected_major.name</code>çš„æ—¶å€™éƒ½ä¼šå†æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼ŒåŸºäºä¸Šè¿°æ¡ä»¶è¿™ä¸¤è¡Œä»£ç å°†ä¼šæŸ¥è¯¢10001æ¬¡æ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤¸å¼ çš„æ•°å­—äº†ã€‚é‚£ä¹ˆå¦‚ä½•ç”¨<code>select_related</code>æ¥ä¼˜åŒ–è¿™æ¬¡æŸ¥è¯¢å‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> student <span class="keyword">in</span> Student.objects.all().select_related(<span class="string">'major'</span>):</span><br><span class="line">    print(student.name, <span class="string">'--&gt;'</span>, student.selected_major.name)</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯åœ¨<code>all()</code>ä¹‹åæ·»åŠ äº†<code>select_related(&#39;major&#39;)</code>ï¼Œè¿™æ¬¡å°±åªéœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚åœ¨æˆ‘æœ¬åœ°çš„ç±»ä¼¼ç¯å¢ƒä¸‹æµ‹è¯•ç»“æœæ˜¯ä¸ä½¿ç”¨<code>select_related</code>æ¶ˆè€—çš„æ—¶é—´æ˜¯ä¼˜åŒ–åçš„400%å·¦å³ã€‚</p><blockquote><p>æœ¬è´¨ä¸Šæ˜¯<code>select_related</code>è¿›è¡Œäº†æ•°æ®åº“çº§çš„JOINæ“ä½œï¼Œå…·ä½“çš„å¤§å®¶å¯ä»¥é€šè¿‡æŸ¥çœ‹<code>print(Model.objects.filter().query)</code>æˆ–è€…<code>django-extensions</code>ç­‰æ–¹æ³•æŸ¥çœ‹å…·ä½“çš„SQL</p></blockquote><p>è¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€ç§å£°éŸ³â€œæŸ¥è¯¢ä»10001æ¬¡åˆ°1æ¬¡å·®äº†å‡ ä¹10000å€æ—¶é—´å´åªçœä¸‹äº†70%å¤šï¼Ÿâ€è¿™ä¸ªé—®é¢˜å…¶å®æ¯”è¾ƒå¥½ç†è§£ï¼ŒJOINæ“ä½œæœ¬æ¥å°±ä¼šä½¿ä¸€æ¬¡SQLæŸ¥è¯¢å˜çš„å¾ˆæ…¢ï¼Œæ¯•ç«Ÿè¦è·¨è¶Šå¤šå¼ è¡¨ã€‚</p><p><code>select_related</code>æ˜¯ç”¨äºä¼˜åŒ–â€œå¤šå¯¹ä¸€â€ç»“æ„ä¸­ä»â€œå¤šâ€è¡¨å‡ºå‘æŸ¥â€œä¸€â€è¡¨ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„å¤šä¸ªå­¦ç”Ÿå¯¹ä¸€ä¸ªä¸“ä¸šï¼Œä»å­¦ç”Ÿå‡ºå‘æŸ¥è¯¢å¾—åˆ°â€œä¸“ä¸šâ€ã€‚</p><p>è¿™é‡Œæˆ‘è´´å‡ºä½¿ç”¨å‰å’Œä½¿ç”¨åçš„ä¸¤å¨SQLï¼Œå¤§å®¶å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ã€‚ï¼ˆè¿™äº›SQLéƒ½æ˜¯Django-extensionsåˆ†æå¾—å‡ºçš„ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜åŒ–å‰</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_student"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"name"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_student"</span></span><br><span class="line"> <span class="keyword">LIMIT</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_major"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"name"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_major"</span></span><br><span class="line"> <span class="keyword">WHERE</span> <span class="string">"School_major"</span>.<span class="string">"id"</span> = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_major"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"name"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_major"</span></span><br><span class="line"> <span class="keyword">WHERE</span> <span class="string">"School_major"</span>.<span class="string">"id"</span> = <span class="number">5</span></span><br><span class="line">ä¸€ç›´é‡å¤ï¼Œç›´åˆ°å¾ªç¯ç»“æŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¼˜åŒ–å</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_student"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"name"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"name"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_student"</span></span><br><span class="line">  <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="string">"School_major"</span></span><br><span class="line">    <span class="keyword">ON</span> (<span class="string">"School_student"</span>.<span class="string">"select_major_id"</span> = <span class="string">"School_major"</span>.<span class="string">"id"</span>)</span><br><span class="line">åªå‰©ä¸‹äº†ä¸€æ¡ä½¿ç”¨äº†<span class="keyword">JOIN</span>çš„<span class="keyword">SQL</span>ï¼Œæ˜¾ç„¶ä¼šæ¯”ä¸Šé¢å¿«å¾ˆå¤š</span><br></pre></td></tr></table></figure><h1 id="0X02-ä½¿ç”¨prefetch-related"><a href="#0X02-ä½¿ç”¨prefetch-related" class="headerlink" title="0X02 ä½¿ç”¨prefetch_related"></a>0X02 ä½¿ç”¨prefetch_related</h1><p><code>prefetch_related</code>æ˜¯ä»â€œä¸€å¯¹å¤šâ€ç»“æ„ä¸­â€œä¸€â€è¡¨å‡ºå‘æŸ¥â€œå¤šâ€è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä»ä¸“ä¸šè¡¨å‡ºå‘æŸ¥è¯¢å¾—åˆ°å­¦ç”Ÿä¿¡æ¯ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³çœ‹è¿™æ‰€æœ‰ä¸“ä¸šä¸­æ¯ä¸ªä¸“ä¸šä¸‹çš„å­¦ç”Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> major <span class="keyword">in</span> Major.objects.filter():</span><br><span class="line">    print(major.main_student.all())</span><br></pre></td></tr></table></figure><p>è¿™ç§æŸ¥è¯¢æ˜¯æœ€å®¹æ˜“å†™å‡ºæ¥çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™é‡Œç¬¬ä¸€è¡Œå¾ªç¯å‰æœ‰ä¸€ä¸ª<code>filter()</code>ä¼šæŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“ï¼Œåé¢æ¯ä¸€æ¬¡<code>main_student.all()</code>éƒ½ä¼šå†æŸ¥è¯¢æ•°æ®åº“ã€‚æˆ‘ä»¬åªæœ‰10ä¸ªä¸“ä¸šï¼ŒæŸ¥11æ¬¡æ•°æ®åº“è¿˜è¡Œé—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯éšç€æ•°æ®å¢å¤šè¿™é‡ŒæŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°ä¼šå‘ˆçº¿æ€§å¢é•¿ã€‚é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> major <span class="keyword">in</span> Major.objects.filter().prefetch_related(<span class="string">'main_student'</span>):</span><br><span class="line">    print(major.main_student.all())</span><br></pre></td></tr></table></figure><p>å°±åªæ˜¯å‘ä¸Šé¢ä½¿ç”¨<code>select_related</code>ä¸€æ ·æ·»åŠ ä¸€ä¸ª<code>prefetch_related</code>åœ¨<code>filter()</code>åé¢å°±å¯ä»¥äº†ã€‚ä¿®æ”¹äº†ä¹‹åçš„ä»£ç åªä¼šæŸ¥è¯¢ä¸¤æ¬¡æ•°æ®åº“ï¼šç¬¬ä¸€æ¬¡æŠŠæ‰€æœ‰çš„ä¸“ä¸šæŸ¥å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯<code>Major.objects.filter()</code>çš„ä½œç”¨ï¼›ç¬¬äºŒæ¬¡æ˜¯ä½¿ç”¨ä¸€ä¸ª<code>SELECT * FROM student WHERE select_major_id IN (x,x,x,x,x,x)</code>å½¢å¼çš„SQLæŸ¥è¯¢åˆ°äº†å¯¹åº”çš„Studentã€‚<strong>ç„¶åä½¿ç”¨Pythonå°†å…¶ç»„è£…æ•´åˆè€Œéæ•°æ®åº“</strong>ï¼Œè¿™æ ·å°±èƒ½å¤§å¹…åº¦å‡å°‘æŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°äº†ã€‚</p><p>è¿™é‡Œæˆ‘è´´å‡ºä½¿ç”¨å‰å’Œä½¿ç”¨åçš„ä¸¤å¨SQLï¼Œå¤§å®¶å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ã€‚ï¼ˆè¿™äº›SQLéƒ½æ˜¯Django-extensionsåˆ†æå¾—å‡ºçš„ï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ä¼˜åŒ–å‰</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_major"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"name"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_major"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_student"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"name"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_student"</span></span><br><span class="line"> <span class="keyword">WHERE</span> <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span> = <span class="number">4</span></span><br><span class="line"> <span class="keyword">LIMIT</span> <span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_student"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"name"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_student"</span></span><br><span class="line"> <span class="keyword">WHERE</span> <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span> = <span class="number">5</span></span><br><span class="line"> <span class="keyword">LIMIT</span> <span class="number">21</span></span><br><span class="line">......ä¸€ç›´é‡å¤ç›´åˆ°å¾ªç¯å®Œæ‰€æœ‰çš„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¼˜åŒ–å</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_major"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_major"</span>.<span class="string">"name"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_major"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">"School_student"</span>.<span class="string">"id"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"name"</span>,</span><br><span class="line">       <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="string">"School_student"</span></span><br><span class="line"> <span class="keyword">WHERE</span> <span class="string">"School_student"</span>.<span class="string">"select_major_id"</span> <span class="keyword">IN</span> (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">80</span>, <span class="number">81</span>, <span class="number">82</span>, <span class="number">83</span>, <span class="number">84</span>, <span class="number">85</span>, <span class="number">86</span>, <span class="number">87</span>, <span class="number">88</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>, <span class="number">92</span>, <span class="number">93</span>, <span class="number">94</span>, <span class="number">95</span>, <span class="number">96</span>, <span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>, <span class="number">100</span>, <span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>)</span><br></pre></td></tr></table></figure><h1 id="0X03-æ€»ç»“"><a href="#0X03-æ€»ç»“" class="headerlink" title="0X03 æ€»ç»“"></a>0X03 æ€»ç»“</h1><p>è¿˜æœ‰æ€»ç»“ï¼Ÿå¤§å®¶éƒ½æœ‰ï¼Œæˆ‘ä¹Ÿæœ‰å¥½äº†</p><p>é€šå¸¸æ¥è¯´æ°å½“çš„ä½¿ç”¨<code>select_related</code>å’Œ<code>prefetch_related</code>å¯ä»¥å¤§å¹…åº¦æå‡è‡ªå·±ORMæŸ¥è¯¢çš„é€Ÿåº¦ï¼Œå¾ˆå¤šæ—¶å€™å¤§å®¶åªæ˜¯å†™äº†èƒ½ç”¨çš„æŸ¥è¯¢ï¼Œç°åœ¨å¯ä»¥å°è¯•ç€ä½¿ç”¨<code>select_related/prefetch_related</code>å†™å‡ºå¥½ç”¨çš„æŸ¥è¯¢å•¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆHttpsæ˜¯å®‰å…¨çš„ï¼ˆç®€å•ä»‹ç»ï¼‰</title>
      <link href="/2019/04/09/why-https-security/"/>
      <url>/2019/04/09/why-https-security/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¼€å¤´"><a href="#0X00-æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¼€å¤´" class="headerlink" title="0X00 æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¼€å¤´"></a>0X00 æ²¡æœ‰ä»€ä¹ˆç”¨çš„å¼€å¤´</h1><p>ä¼—æ‰€å‘¨çŸ¥httpsæ˜¯å®‰å…¨åŠ å¯†çš„åè®®ï¼Œé‚£ä¹ˆhttpsç©¶ç«Ÿæ˜¯å¦‚ä½•ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§çš„å‘¢ï¼Ÿè¿™é‡Œæ¥ç®€å•ä»‹ç»ä¸€ä¸‹httpsçš„å®‰å…¨æœºåˆ¶ã€‚</p><h1 id="0X01-ç®€ä»‹"><a href="#0X01-ç®€ä»‹" class="headerlink" title="0X01 ç®€ä»‹"></a>0X01 ç®€ä»‹</h1><p>HTTPSå…¨ç§°æ˜¯ <em>Hypertext Transfer Protocol Secure</em> ä¹Ÿå°±æ˜¯ä¼ ç»Ÿçš„HTTPåŠ ä¸Šäº†S <em>Secure</em>ï¼Œä¹Ÿå¯ä»¥å« <em>HTTP over TLS</em>ï¼Œæ€»ä¹‹å°±æ˜¯åŠ äº†å¯†çš„HTTPå˜›ã€‚</p><p>æœ€å¸¸è§çš„åŠ å¯†å°±æ˜¯é€šä¿¡åŒæ–¹å…±æœ‰ä¸€ä¸ªå¯†é’¥ï¼Œä½¿ç”¨è¿™ä¸ªå¯†é’¥å¯¹åŸæ–‡è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œç®€å•ç²—æš´ã€‚ä½†æ˜¯ä¸‡ä¸€å¯†é’¥æ³„éœ²äº†ï¼Œé‚£ä¹ˆä»»ä½•äººéƒ½å¯ä»¥ç”¨è¿™ä¸ªå¯†é’¥è§£å¯†ä½ ä»¬é€šä¿¡çš„æ‰€æœ‰å†…å®¹ï¼Œç”šè‡³é€šä¿¡åŒæ–¹éƒ½æ˜¯æ— æ„ŸçŸ¥çš„ã€‚ï¼ˆæƒ³è±¡ä¸€ä¸‹ä½ å’Œå°å§å§çš„èŠå¤©è®°å½•è¢«ä¸€ä¸ªæ‰£è„šå¤§æ±‰ä¸€è¡Œè¡Œçš„çœ‹å®Œè¿˜å˜¿å˜¿å‚»ç¬‘æ˜¯ä¸æ˜¯è´¼ææ€–ï¼‰</p><p>è¿™ç§åŠ å¯†æ–¹å¼æœ‰ä¸€ä¸ªä¸¥è‚ƒçš„é—®é¢˜å°±åœ¨äºé€šä¿¡åŒæ–¹å¾—æœ‰ä¸€ä¸ªçº¦å®šå¯†é’¥çš„æœºä¼šï¼Œè¿˜è¦ä¿è¯ä¼ è¾“å¯†é’¥çš„ä¿¡é“æ˜¯ç»å¯¹å®‰å…¨çš„ã€‚ï¼ˆæƒ³è±¡ä¸€ä¸‹ä½ æƒ³è·Ÿå°å§å§èŠå¤©çš„è¯éœ€è¦å…ˆç§ä¸‹æ‚„æ‚„ç¢°é¢ï¼Œç„¶åå†ä¸€ä¸ªæ²¡æœ‰äººçš„åœ°æ–¹æ‚„å’ªå’ªçš„äº¤æ¢å¯†é’¥ï¼Œç„¶åå†ç”¨è¿™ä¸ªå¯†é’¥è¿›è¡ŒåŠ å¯†é€šä¿¡ï¼‰è¿™è¿˜ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹å°±æ˜¯ä½ ä¿©æ˜æ˜å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥ä¿è¯ç»å¯¹å®‰å…¨çš„é€šä¿¡æ–¹æ³•ï¼ˆåœ¨æ²¡æœ‰äººçš„åœ°æ–¹æ‚„å’ªå’ªåœ°é€šä¿¡ï¼‰äº†ï¼Œé‚£ä¸ºå•¥è¿˜éè¦äº¤æ¢å¯†ç ç„¶ååŠ å¯†é€šä¿¡å‘¢ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—è´¼è ¢ã€‚</p><p>HTTPSå°±èƒ½è§£å†³è¿™ç§é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å¼€å§‹å§ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯å°±æ˜¯å®¢æˆ·ç«¯ï¼ˆä½ ï¼‰å’Œä¸€å°webæœåŠ¡å™¨ï¼ˆå°å§å§ï¼‰é€šä¿¡çš„åœºæ™¯ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹æè¿°HTTPSã€‚</p><h1 id="0X02-HTTPSçš„å‰ææ¡ä»¶"><a href="#0X02-HTTPSçš„å‰ææ¡ä»¶" class="headerlink" title="0X02 HTTPSçš„å‰ææ¡ä»¶"></a>0X02 HTTPSçš„å‰ææ¡ä»¶</h1><p>HTTPSé€šä¿¡æœ‰ä¸¤ä¸ªé‡è¦å‰ææ¡ä»¶ï¼Œæ²¡æœ‰è¿™äº›æ¡ä»¶çš„è¯HTTPSæ˜¯æ²¡æœ‰å®é™…ä½œç”¨çš„</p><ol><li>ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•å¯¹å†…å®¹è¿›è¡ŒåŠ å¯†ï¼Œç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„RSAç®—æ³•å°±æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•</li><li>å­˜åœ¨ä¸€ä¸ªç»å¯¹å®‰å…¨çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºCAï¼ˆCertificate Authorityï¼‰ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¸ä¼šè¢«æ”»å‡»ï¼Œä»–å‘å¸ƒçš„ä¿¡æ¯éƒ½æ˜¯å¯é çš„</li></ol><blockquote><p>éå¯¹ç§°åŠ å¯†ï¼šä¸å¯¹ç§°åŠ å¯†çš„ä¸€ä¸ªå¯†é’¥ç”¨æ¥åŠ å¯†è§£å¯†ä¸åŒï¼Œéå¯¹ç§°åŠ å¯†æœ‰ä¸€å¯¹å¯†é’¥ï¼Œåˆ†ä¸ºâ€œå…¬é’¥â€å’Œâ€œç§é’¥â€ã€‚ä½¿ç”¨å¯†é’¥å¯¹ä¸­çš„å…¬é’¥å¯¹åŸæ–‡è¿›è¡ŒåŠ å¯†ä¹‹åå†æ¬¡ä½¿ç”¨å…¬é’¥è§£å¯†æ˜¯è¡Œä¸é€šçš„ï¼Œå¿…é¡»ä½¿ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†ï¼›</p></blockquote><blockquote><p>CAï¼šCAæ˜¯ä¸€ä¸ªè¢«è®¤ä¸ºç»å¯¹å®‰å…¨ä¸”è¯šå®çš„ç¬¬ä¸‰æ–¹æœºæ„ï¼ŒæœåŠ¡å™¨å°†è‡ªå·±å¯†é’¥å¯¹ä¸­çš„å…¬é’¥äº¤ç”±CAç®¡ç†ã€‚å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶å€™å¯ä»¥ä»CAå¤„å–å¾—æœåŠ¡å™¨çš„å…¬é’¥ï¼›</p></blockquote><a id="more"></a><h1 id="0X03-å¼€å§‹å§"><a href="#0X03-å¼€å§‹å§" class="headerlink" title="0X03 å¼€å§‹å§"></a>0X03 å¼€å§‹å§</h1><p><strong>æ— è®ºå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œæ‰€æœ‰äººçš„å…¬é’¥éƒ½æ˜¯å¯ä»¥å¯¹å¤–å…¬å¼€çš„ï¼Œç§é’¥éƒ½æ˜¯ç»å¯¹ç»å¯¹ä¸èƒ½å…¬å¼€çš„ï¼Œè¦ä¿è¯ç§é’¥ç»å¯¹å®‰å…¨ï¼Œä¸€æ—¦ç§é’¥æ³„éœ²å³å¯é€ æˆHTTPSåŠ å¯†å¤±æ•ˆ</strong></p><p>é¦–å…ˆä½ æ‰“ç®—ä»¥å®‰å…¨çš„æ–¹å¼è”ç³»å°å§å§ï¼Œä»ä½ è¿™é‡Œå¼€å§‹æ•´ä¸ªæµç¨‹ã€‚ </p><ol><li>é¦–å…ˆä½ çŸ¥é“å°å§å§çš„ä½å€ï¼Œç„¶åé€šè¿‡å°å§å§çš„ä½å¤„å‰å¾€CAå»å–å¾—å°å§å§çš„å…¬é’¥ï¼›</li><li>ä½ æŠŠæƒ³ç»™å°å§å§è¯´çš„è¯ç”¨å°å§å§çš„å¯†é’¥åŠ å¯†å¥½ï¼Œè¿åŒè‡ªå·±çš„å…¬é’¥ä¸€èµ·å‘é€ç»™å°å§å§ï¼›</li><li>å°å§å§æ”¶åˆ°äº†ä½ çš„å¯†æ–‡ï¼Œä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¾—åˆ°äº†ä½ å‘é€çš„åŸæ–‡ï¼›</li><li>å°å§å§å†™å¥½äº†ç»™ä½ çš„å›å¤ï¼Œä½¿ç”¨ä½ æä¾›çš„å…¬é’¥å¯¹åŸæ–‡åŠ å¯†ï¼Œå¹¶ä¼ è¾“ç»™äº†ä½ ï¼›</li><li>ä½ æ”¶åˆ°å°å§å§çš„å¯†æ–‡åä½¿ç”¨ç§é’¥å°†å†…å®¹è§£å¯†ï¼Œå¾—çŸ¥äº†å°å§å§çš„å¿ƒæ„ï¼›</li><li>é‡å¤ä¸Šé¢çš„æ“ä½œã€‚</li></ol><h1 id="0X04-å¦‚æœè¢«æˆªå–"><a href="#0X04-å¦‚æœè¢«æˆªå–" class="headerlink" title="0X04 å¦‚æœè¢«æˆªå–"></a>0X04 å¦‚æœè¢«æˆªå–</h1><p>æˆ‘ä»¬å‡è®¾åœ¨ä¸Šé¢ä»»æ„åœ°æ–¹æ•°æ®è¢«é»‘å®¢æˆªå–äº†ï¼Œé‚£ä»–èƒ½è·å–ä½ å’Œå°å§å§çš„æ¶ˆæ¯å†…å®¹å—ï¼Ÿ</p><h2 id="æˆªå–äº†ä½ å’ŒCAçš„é€šä¿¡"><a href="#æˆªå–äº†ä½ å’ŒCAçš„é€šä¿¡" class="headerlink" title="æˆªå–äº†ä½ å’ŒCAçš„é€šä¿¡"></a>æˆªå–äº†ä½ å’ŒCAçš„é€šä¿¡</h2><p>é»‘å®¢æˆªå–äº†ä½ å’ŒCAçš„é€šä¿¡ï¼Œé‚£ä¹ˆä»–èƒ½å¾—åˆ°çš„ä¿¡æ¯å°±æ˜¯ï¼šâ€œä½ è¦å’Œå“ªä¸ªå°å§å§é€šä¿¡ï¼Œå°å§å§çš„å…¬é’¥æ˜¯ä»€ä¹ˆâ€ã€‚è™½ç„¶ä½ ä¹Ÿæ³„éœ²äº†ä¸€ç‚¹ç‚¹ä¿¡æ¯ï¼ˆä½ è¦å’Œè°é€šä¿¡ï¼‰ï¼Œä½†æ˜¯è¿™äº›å¹¶éæ•æ„Ÿæ•°æ®ï¼Œé»‘å®¢å¹¶ä¸èƒ½å¯¹è¿™ä¸ªåšä»€ä¹ˆã€‚å°å§å§çš„å…¬é’¥å°±æ›´ä¸é‡è¦äº†ï¼Œä»»ä½•äººéƒ½èƒ½è·å¾—ï¼›</p><h2 id="æˆªå–äº†ä½ ç¬¬ä¸€æ¬¡å‘ç»™å°å§å§çš„å†…å®¹"><a href="#æˆªå–äº†ä½ ç¬¬ä¸€æ¬¡å‘ç»™å°å§å§çš„å†…å®¹" class="headerlink" title="æˆªå–äº†ä½ ç¬¬ä¸€æ¬¡å‘ç»™å°å§å§çš„å†…å®¹"></a>æˆªå–äº†ä½ ç¬¬ä¸€æ¬¡å‘ç»™å°å§å§çš„å†…å®¹</h2><p>å¦‚æœé»‘å®¢æˆªå–äº†ä½ å‘é€ç»™å°å§å§çš„å†…å®¹ï¼Œé‚£å†…å®¹ä¸­åªæœ‰ï¼šâ€œä½ å‘ç»™å°å§å§çš„å¯†æ–‡ï¼Œä½ è‡ªå·±çš„å…¬é’¥â€ã€‚å¯†æ–‡ç”±äºä»–æ²¡æœ‰å°å§å§çš„ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•è§£å¯†ï¼›ä½ è‡ªå·±çš„å…¬é’¥ä¹Ÿæ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥è·å–çš„ï¼Œä¹Ÿæ²¡æœ‰ç”¨ï¼›</p><h2 id="æˆªå–äº†å°å§å§å›å¤ç»™ä½ çš„å†…å®¹"><a href="#æˆªå–äº†å°å§å§å›å¤ç»™ä½ çš„å†…å®¹" class="headerlink" title="æˆªå–äº†å°å§å§å›å¤ç»™ä½ çš„å†…å®¹"></a>æˆªå–äº†å°å§å§å›å¤ç»™ä½ çš„å†…å®¹</h2><p>å‡è®¾é»‘å®¢æˆªå–äº†å°å§å§å›å¤ç»™ä½ çš„å†…å®¹ï¼Œé‚£å†…å®¹ä¸­åªæœ‰ï¼šâ€œå°å§å§ç»™ä½ çš„å¯†æ–‡â€ã€‚ç”±äºé»‘å®¢å¹¶æ²¡æœ‰ä½ çš„ç§é’¥ï¼Œæ‰€ä»¥ä»–å¹¶ä¸èƒ½çŸ¥é“å°å§å§ç»™ä½ å‘é€äº†ä»€ä¹ˆå†…å®¹ã€‚</p><h1 id="0X05-æ€»ç»“"><a href="#0X05-æ€»ç»“" class="headerlink" title="0X05 æ€»ç»“"></a>0X05 æ€»ç»“</h1><p>æ€»ç»“ä¸‹æ¥ï¼Œé»‘å®¢å³ä½¿æˆªå–äº†æ‰€æœ‰çš„æ•°æ®ï¼Œé‚£ä¹Ÿåªæœ‰ä¸‹é¢è¿™äº›ï¼š</p><ol><li>å®¢æˆ·ç«¯è®¿é—®çš„æœåŠ¡å™¨åœ°å€</li><li>å®¢æˆ·ç«¯requestæºå¸¦çš„åŠ å¯†æ•°æ®</li><li>æœåŠ¡ç«¯responseæºå¸¦çš„åŠ å¯†æ•°æ®</li><li>å®¢æˆ·ç«¯æœåŠ¡ç«¯åŒæ–¹çš„å…¬é’¥</li></ol><p>å…¶ä¸­åŠ å¯†æ•°æ®ç”±äºæ²¡æœ‰å¯¹åº”çš„ç§é’¥æ‰€ä»¥æ— æ³•è§£å¯†ï¼Œè€ŒåŒæ–¹çš„å…¬é’¥æœ¬æ¥å°±æ˜¯å…¬å¼€çš„æ‰€ä»¥å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> HTTP Secure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim å¯„å­˜å™¨çš„ä½¿ç”¨</title>
      <link href="/2019/01/19/vim-register/"/>
      <url>/2019/01/19/vim-register/</url>
      
        <content type="html"><![CDATA[<p><strong>ç¼–è¾‘å™¨ä¹‹ç¥å¯ä¸æ˜¯æµªå¾—è™šå</strong></p><h1 id="0X00-é‡åˆ°äº†ä¸€äº›é—®é¢˜"><a href="#0X00-é‡åˆ°äº†ä¸€äº›é—®é¢˜" class="headerlink" title="0X00 é‡åˆ°äº†ä¸€äº›é—®é¢˜"></a>0X00 é‡åˆ°äº†ä¸€äº›é—®é¢˜</h1><p>å¦‚æœä½ çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« é‚£ä¹ˆæˆ‘å¯ä»¥è®¤ä¸ºä½ è‡³å°‘å·²ç»æŒæ¡äº†vimåŸºæœ¬ç”¨æ³•ã€‚åœ¨æˆ‘ä¸ªäººä½¿ç”¨vimçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™æ¬¡å°±æŒ‘â€œå¯„å­˜å™¨â€è¿™éƒ¨åˆ†å‡ºæ¥è¯´ä¸€ä¸‹å§ã€‚</p><p>æˆ‘è¿™é‡Œè´´ä¸€æ®µä»£ç è¿‡æ¥ï¼Œè¿™æ®µä»£ç å‡ºè‡ªæˆ‘åœ¨å­¦æ ¡æ—¶å†™çš„ä¸€ä¸ªå°é¡¹ç›®<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoYXduLWJsdWNlL29wZW5fZGlzZnJhbWU=" title="https://github.com/shawn-bluce/open_disframe">open_disframe<i class="fa fa-external-link"></i></span><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> slave_method == <span class="string">'handshake'</span>:</span><br><span class="line">    process_handshake_request(slave_id)</span><br><span class="line">    slave_socket.send(<span class="string">"handshake success"</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line"><span class="keyword">elif</span> slave_method == <span class="string">'heartbeat'</span>:</span><br><span class="line">    process_heartbeat_request(slave_id)</span><br><span class="line">    slave_socket.send(<span class="string">"heartbeat success"</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line"><span class="keyword">elif</span> slave_method == <span class="string">'submit_message'</span>:</span><br><span class="line">    process_submit_message_request(message[<span class="string">'message_list'</span>])</span><br><span class="line">    slave_socket.send(<span class="string">"submit success"</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line"><span class="keyword">elif</span> slave_method == <span class="string">'get_message'</span>:</span><br><span class="line">    send_message_list = process_get_message_request(slave_id, <span class="number">10</span>)</span><br><span class="line">    slave_socket.send(send_message_list.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line"><span class="keyword">elif</span> slave_method == <span class="string">'exit'</span>:</span><br><span class="line">    process_exit_request(slave_id)</span><br><span class="line">    slave_socket.send(<span class="string">"exit success"</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    slave_socket.send((<span class="string">"not found request: "</span> + slave_method).encode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬åœ¨ç¼–è¾‘ç¼–è¾‘è¿™æ®µä»£ç çš„æ—¶å€™éœ€è¦å°†å…¶ä¸­çš„éƒ¨åˆ†å†…å®¹æ›¿æ¢æ‰ï¼Œæ¯”å¦‚å°†ç¬¬ä¸€ä¸ªifä¸­çš„<code>slave_socket.send.....</code>å’Œç¬¬äºŒä¸ªifä¸­çš„<code>process_heartbeatxxx</code>å’Œç¬¬ä¸‰ä¸ªifä¸­çš„<code>continue</code>æ›¿æ¢æˆ<code>break</code>ã€‚è™½ç„¶è¿™ä¹ˆåšå¯èƒ½æœ‰ç‚¹è¯¡å¼‚ï¼Œä¸è¿‡è¿™é‡Œå®åœ¨æ²¡æ‰¾åˆ°å®Œç¾çš„é€‚ç”¨åœºæ™¯ï¼Œå…¬å¸çš„ä»£ç ä¹Ÿä¸èƒ½è´´å‡ºæ¥ï¼Œåˆæ‡’å¾—ç¼–é€ ä¸€ä¸ªå®Œç¾é€‚ç”¨åœºæ™¯ï¼Œå°±å…ˆè¿™æ ·çœ‹å§ã€‚</p><a id="more"></a><p>é€šå¸¸æˆ‘ä»¬ä¸åˆ°è¿™ç§æƒ…å†µéƒ½ä¼šæ˜¯ä¸‹é¢çš„æ“ä½œæµ</p><ol><li>æ‰‹åŠ¨æ›¿æ¢ç¬¬ä¸€å¤„çš„<code>break</code></li><li>å¤åˆ¶<code>break</code></li><li>æ‰¾åˆ°ä¸‹ä¸€å¤„éœ€è¦æ›¿æ¢çš„åœ°æ–¹é€‰ä¸­</li><li><code>p</code>ç²˜è´´è¿‡å»</li><li>æ‰¾åˆ°ä¸‹ä¸€å¤„éœ€è¦æ›¿æ¢çš„åœ°æ–¹é€‰ä¸­</li><li><code>p</code>ç²˜è´´è¿‡å»</li><li>å‘ç°â€œå‰ªè´´æ¿â€è¢«ä¸Šé¢é‚£æ¬¡è¢«æ›¿æ¢æ‰çš„æ•°æ®è¦†ç›–äº†ï¼Œä»¥è‡³äºå°†ä¸Šæ¬¡åˆ æ‰çš„å†…å®¹è´´è¿‡æ¥äº†ï¼Œè€Œä¸æ˜¯è‡ªå·±æƒ³è¦çš„<code>break</code></li><li>æ²®ä¸§ä¸­ã€‚ã€‚ä¸€ä¸ªä¸ªå¤åˆ¶ç²˜è´´æ›¿æ¢è¿‡æ¥</li></ol><p>è¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘è¿˜æ˜¯æŒºä¹…çš„ï¼Œä¸€åº¦è®¤ä¸ºvimå±…ç„¶è¿™ä¹ˆè ¢ï¼Œåæ¥æ‰å‘ç°æ˜¯æˆ‘è‡ªå·±å¤ªè ¢äº†ï¼Œvimä¸­æœ‰ä¸€ä¸ªâ€œå¯„å­˜å™¨â€æœºåˆ¶æ˜¯æˆ‘ä»¬å‡å¤§å¤šæ•°äººè¦ä¹ˆæ²¡ç”¨è¿‡è¦ä¹ˆå¬éƒ½æ²¡å¬è¿‡çš„ï¼Œè€Œè¿™ä¸ªâ€œå¯„å­˜å™¨â€å°±æ˜¯ç”¨æ¥è§£å†³è¿™ç§é—®é¢˜çš„ã€‚</p><h1 id="0X01-ä»€ä¹ˆæ˜¯vimä¸­çš„å¯„å­˜å™¨"><a href="#0X01-ä»€ä¹ˆæ˜¯vimä¸­çš„å¯„å­˜å™¨" class="headerlink" title="0X01 ä»€ä¹ˆæ˜¯vimä¸­çš„å¯„å­˜å™¨"></a>0X01 ä»€ä¹ˆæ˜¯vimä¸­çš„å¯„å­˜å™¨</h1><p>æˆ‘ä»¬å¯ä»¥å¤§è‡´å°†vimä¸­çš„å¯„å­˜å™¨æƒ³åƒæˆç³»ç»Ÿä½¿ç”¨çš„å‰ªè´´æ¿ï¼Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„å‰ªè´´æ¿åªæœ‰ä¸€ä¸ªæ ¼å­ï¼Œæ¯æ¬¡å¤åˆ¶/å‰ªåˆ‡äº†æ–°çš„æ•°æ®å°±ä¼šè¦†ç›–æ‰ä¹‹å‰æ ¼å­é‡Œçš„æ•°æ®ã€‚è€Œvimä¸­çš„å¯„å­˜å™¨æœ‰å¤šç§ï¼Œæ¯ç§æœ‰ä¸åŒçš„åŠŸèƒ½ç‰¹æ€§ï¼Œè€Œä¸”æ¯ç§å¯„å­˜å™¨åˆæœ‰ä¸€ä¸ªåˆ°å¤šä¸ªä¸ç­‰ã€‚æ€»çš„æ¥è¯´vimä¸­æœ‰ä¸‹è¿°åç§å¯„å­˜å™¨ã€‚</p><ol><li>åŒ¿åå¯„å­˜å™¨ <code>&quot;&quot;</code></li><li>ç¼–å·å¯„å­˜å™¨ <code>&quot;0</code> åˆ° <code>&quot;9</code></li><li>å°åˆ é™¤å¯„å­˜å™¨ <code>&quot;-</code></li><li>26ä¸ªå‘½åå¯„å­˜å™¨ <code>&quot;a</code> åˆ° <code>&quot;z</code></li><li>3ä¸ªåªè¯»å¯„å­˜å™¨ <code>&quot;:</code>, <code>&quot;.</code>, <code>&quot;%</code></li><li>Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨ <code>&quot;#</code></li><li>è¡¨è¾¾å¼å¯„å­˜å™¨ <code>&quot;=</code></li><li>é€‰åŒºå’Œæ‹–æ”¾å¯„å­˜å™¨ <code>&quot;*</code>, <code>&quot;+</code>, <code>&quot;~</code></li><li>é»‘æ´å¯„å­˜å™¨ <code>&quot;_</code></li><li>æœç´¢æ¨¡å¼å¯„å­˜å™¨ <code>&quot;/</code></li></ol><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹<code>: register</code>å°±å¯ä»¥çœ‹åˆ°å„ä¸ªå¯„å­˜å™¨çš„å€¼äº†</p><h1 id="0X02-å¦‚ä½•ä½¿ç”¨è¿™äº›å¯„å­˜å™¨"><a href="#0X02-å¦‚ä½•ä½¿ç”¨è¿™äº›å¯„å­˜å™¨" class="headerlink" title="0X02 å¦‚ä½•ä½¿ç”¨è¿™äº›å¯„å­˜å™¨"></a>0X02 å¦‚ä½•ä½¿ç”¨è¿™äº›å¯„å­˜å™¨</h1><p>è¿™äº›å¯„å­˜å™¨ç§ç±»è¾ƒå¤šï¼ŒåªæŒ‘é€‰ä¸€äº›æˆ‘ä¸ªäººå¸¸ç”¨åˆ°çš„å§ï¼Œæ›´å®Œå–„çš„ä¸€ç¯‡åšå®¢å¯ä»¥<span class="exturl" data-url="aHR0cHM6Ly9oYXJ0dGxlLmxhbmQvMjAxNi8wNy8yNS92aW0tcmVnaXN0ZXJzLmh0bWw=" title="https://harttle.land/2016/07/25/vim-registers.html">çœ‹è¿™é‡Œ<i class="fa fa-external-link"></i></span></p><h2 id="å¦‚ä½•ä½¿ç”¨å¯„å­˜å™¨"><a href="#å¦‚ä½•ä½¿ç”¨å¯„å­˜å™¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å¯„å­˜å™¨"></a>å¦‚ä½•ä½¿ç”¨å¯„å­˜å™¨</h2><p>å…ˆç®€å•è¯´ä¸€ä¸‹ï¼Œä¸‹é¢ä¼šå…·ä½“ä»‹ç»çš„ã€‚å½“ä½ é€‰ä¸­ä¸€å¨å†…å®¹åæƒ³è¦å¤åˆ¶ä»–åˆ°å‘½åå¯„å­˜å™¨<code>&quot;a</code>ä¸­ï¼Œé‚£å°±éœ€è¦åœ¨é€‰ä¸­åä¾æ¬¡æŒ‰ä¸‹<code>&quot;ay</code>ã€‚å…¶ä¸­<code>&quot;a</code>ç›¸å½“äºæ˜¯é€‰ä¸­äº†ä¸€ä¸ªå¯„å­˜å™¨ï¼Œè€Œ<code>y</code>å°±æ˜¯å½“å‰é€‰ä¸­å†…å®¹ä¸å¯„å­˜å™¨ä¹‹é—´çš„æ“ä½œã€‚å› ä¸ºæ˜¯<code>y</code>æ‰€ä»¥å°±æ˜¯å°†å½“å‰é€‰ä¸­çš„å†…å®¹å¤åˆ¶åˆ°<code>&quot;a</code>ä¸­ï¼Œå¦‚æœæ˜¯<code>&quot;ap</code>çš„è¯å°±æ˜¯å°†å‘½åå¯„å­˜å™¨<code>&quot;a</code>ä¸­çš„å†…å®¹ç²˜è´´åˆ°é€‰ä¸­çš„ä½ç½®ä¸Šæ¥ã€‚</p><h2 id="åŒ¿åå¯„å­˜å™¨"><a href="#åŒ¿åå¯„å­˜å™¨" class="headerlink" title="åŒ¿åå¯„å­˜å™¨"></a>åŒ¿åå¯„å­˜å™¨</h2><p>åŒ¿åå¯„å­˜å™¨åŸºæœ¬å°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„é‚£ä¸ªï¼Œå¹³æ—¶<code>d/x</code>çš„åˆ é™¤æ“ä½œéƒ½ä¼šå°†è¢«åˆ é™¤çš„å†…å®¹å­˜åˆ°è¿™ä¸ªåŒ¿åå¯„å­˜å™¨ä¸­ï¼Œè€Œé€šè¿‡<code>y</code>å¤åˆ¶çš„å†…å®¹åˆ™ä¼šæ”¾åˆ°<code>&quot;0</code>çš„ç¼–å·å¯„å­˜å™¨ä¸Šï¼Œä¸è¿‡è¿™ä¸ª<code>&quot;0</code>å¯„å­˜å™¨ä¼šä¸€ç›´ä¿æŒä¸åŒ¿åå¯„å­˜å™¨<code>&quot;&quot;</code>ç›¸åŒçš„å†…å®¹ã€‚æ­£å› ä¸ºå¦‚æ­¤æ‰ä¼šå‡ºç°ä¸Šé¢æåˆ°çš„ç°è±¡ï¼šâ€œå¤åˆ¶äº†ä¸€æ®µå†…å®¹Aï¼Œé€‰ä¸­Bç²˜è´´ï¼ŒåŸæ¥Bçš„ä½ç½®å°±è¢«Aæ›¿æ¢äº†ï¼›å†é€‰ä¸­Cç²˜è´´ï¼Œæ›¿æ¢Cä½ç½®çš„ä¸æ˜¯Aè€Œæ˜¯Bâ€ï¼Œå› ä¸ºåœ¨Bè¢«Aæ›¿æ¢æ—¶ï¼ŒåŒ¿åå¯„å­˜å™¨<code>&quot;&quot;</code>ä¸­å°±å·²ç»æ˜¯å†…å®¹Bäº†ã€‚</p><h2 id="ç¼–å·å¯„å­˜å™¨"><a href="#ç¼–å·å¯„å­˜å™¨" class="headerlink" title="ç¼–å·å¯„å­˜å™¨"></a>ç¼–å·å¯„å­˜å™¨</h2><p>ç¼–å·å¯„å­˜å™¨ä¸­ï¼Œ<code>&quot;0</code>ä¿å­˜çš„æ˜¯ä½ å¤åˆ¶çš„å†…å®¹ï¼Œ<code>&quot;1</code>~<code>&quot;9</code>ä¿å­˜çš„æ˜¯åˆ é™¤çš„å†…å®¹ã€ä¸Šæ¬¡åˆ é™¤çš„å†…å®¹ã€ä¸Šä¸Šæ¬¡åˆ é™¤çš„å†…å®¹ç­‰å†å²9æ¬¡åˆ é™¤çš„å†…å®¹ã€‚</p><p>è¿™ä¹Ÿæ­£æ˜¯è§£å†³ä¸Šè¿°é—®é¢˜çš„å…³é”®æ‰€åœ¨äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å°è¯•è¿™è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå‰ä¸‰æ­¥æ˜¯ä¸€æ ·çš„ï¼Œä»ç¬¬å››æ­¥å¼€å§‹å°±æœ‰åŒºåˆ«äº†ã€‚</p><ol><li>æ‰‹åŠ¨æ›¿æ¢ç¬¬ä¸€å¤„çš„<code>break</code></li><li>å¤åˆ¶<code>break</code></li><li>æ‰¾åˆ°ä¸‹ä¸€å¤„éœ€è¦æ›¿æ¢çš„åœ°æ–¹é€‰ä¸­</li><li>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥<code>&quot;0p</code></li><li>æ‰¾åˆ°ä¸‹ä¸€å¤„éœ€è¦æ›¿æ¢çš„åœ°æ–¹é€‰ä¸­</li><li>å†å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥<code>&quot;0p</code></li><li>é‡å¤æ“ä½œç›´åˆ°å®Œæˆ</li></ol><p>å…¶ä¸­<code>&quot;0p</code>æ“ä½œå°±æ˜¯ä»ç¼–å·ä¸º0çš„ç¼–å·å¯„å­˜å™¨ä¸­ç²˜è´´å†…å®¹ã€‚å¦‚æœç›´æ¥<code>p</code>çš„è¯æ˜¯ä»é»˜è®¤çš„åŒ¿åå¯„å­˜å™¨ä¸­ç²˜è´´çš„ï¼Œå†…å®¹ä¹Ÿå°±æ˜¯åˆšåˆšè¢«åˆ æ‰çš„å†…å®¹äº†ã€‚</p><h2 id="å°åˆ é™¤å¯„å­˜å™¨"><a href="#å°åˆ é™¤å¯„å­˜å™¨" class="headerlink" title="å°åˆ é™¤å¯„å­˜å™¨"></a>å°åˆ é™¤å¯„å­˜å™¨</h2><p>ä¸è¶³ä¸€è¡Œçš„åˆ é™¤æ“ä½œä¼šå°†è¢«åˆ é™¤çš„å†…å®¹æ”¾åˆ°å°åˆ é™¤å¯„å­˜å™¨<code>&quot;_</code>ä¸­</p><h2 id="å‘½åå¯„å­˜å™¨"><a href="#å‘½åå¯„å­˜å™¨" class="headerlink" title="å‘½åå¯„å­˜å™¨"></a>å‘½åå¯„å­˜å™¨</h2><p>å‘½åå¯„å­˜å™¨å°±å¾ˆå¥½ç†è§£äº†ï¼Œå°±ç›¸å½“äºä¸€äº›è´´äº†æ ‡ç­¾çš„å°ç›’å­ã€‚<code>&quot;ay</code>å°±æ˜¯å¤åˆ¶å†…å®¹åˆ°å‘½åå¯„å­˜å™¨<code>&quot;a</code>ä¸­ï¼Œ<code>&quot;bp</code>å°±æ˜¯ä»å‘½åå¯„å­˜å™¨<code>&quot;b</code>ä¸­ç²˜è´´å†…å®¹å‡ºæ¥ã€‚</p><p>å½“ä½ é€‰ä¸­äº†ä¸€å¨å†…å®¹<code>&quot;ay</code>åï¼Œå†é€‰ä¸­å¦ä¸€å¨<code>&quot;ay</code>ï¼Œå¦‚ä½ æ‰€æƒ³ï¼Œä¹‹å‰çš„å†…å®¹è¢«æ›¿æ¢äº†ï¼›ä½†æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ é€‰ä¸­äº†ä¸€å¨å†…å®¹<code>&quot;ay</code>åï¼Œå†é€‰ä¸­å¦ä¸€å¨<code>&quot;Ay</code>å°±ä¼šå°†å½“å‰å†…å®¹è¿½åŠ åˆ°<code>&quot;a</code>ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä½¿ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºå‘½åå¯„å­˜å™¨å¤åˆ¶æ—¶ï¼Œæ˜¯ä¼šè¿½åŠ è€Œéè¦†ç›–çš„ã€‚</p><h2 id="é»‘æ´å¯„å­˜å™¨"><a href="#é»‘æ´å¯„å­˜å™¨" class="headerlink" title="é»‘æ´å¯„å­˜å™¨"></a>é»‘æ´å¯„å­˜å™¨</h2><p>é»˜è®¤æƒ…å†µä¸‹åˆ é™¤å†…å®¹æ—¶ä¼šå°†è¢«åˆ é™¤çš„å†…å®¹æ”¾åˆ°<code>&quot;1</code>å’Œ<code>&quot;&quot;</code>ä¸¤ä¸ªå¯„å­˜å™¨ä¸­ï¼Œä½†æ˜¯å¦‚æœé€‰ä¸­åä½¿ç”¨<code>&quot;_x</code>æˆ–è€…<code>&quot;_d</code>çš„æ–¹å¼åˆ é™¤ï¼Œåˆ™ä¼šå°†è¢«åˆ é™¤çš„å†…å®¹ä¸¢åˆ°é»‘æ´ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶ä¸ä¼šè¦†ç›–<code>&quot;1</code>å’Œ<code>&quot;&quot;</code>ã€‚æ‰€ä»¥ä½¿ç”¨é»‘æ´å¯„å­˜å™¨ä¹Ÿèƒ½è§£å†³ä¸Šè¿°é—®é¢˜</p><ol><li>æ‰‹åŠ¨æ›¿æ¢ç¬¬ä¸€å¤„çš„<code>break</code></li><li>å¤åˆ¶<code>break</code></li><li>æ‰¾åˆ°ä¸‹ä¸€å¤„éœ€è¦æ›¿æ¢çš„åœ°æ–¹é€‰ä¸­</li><li><code>&quot;_x</code>åˆ é™¤</li><li><code>p</code>ç²˜è´´è¿‡å»</li><li><code>&quot;_x</code>åˆ é™¤</li><li><code>p</code>ç²˜è´´è¿‡å»</li><li>é‡å¤æ“ä½œç›´åˆ°å®Œæˆ</li></ol><h1 id="0X03-åè®°"><a href="#0X03-åè®°" class="headerlink" title="0X03 åè®°"></a>0X03 åè®°</h1><p>vimæœç„¶æ˜¯çœŸçš„<strong>ç¼–è¾‘å™¨ä¹‹ç¥</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çœ¼ä¸­çš„ã€Œæ­£ç‰ˆã€ä¸ã€Œç›—ç‰ˆã€</title>
      <link href="/2019/01/13/genuine-piracy/"/>
      <url>/2019/01/13/genuine-piracy/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä½•ä¸ºæ­£ç‰ˆ"><a href="#0X00-ä½•ä¸ºæ­£ç‰ˆ" class="headerlink" title="0X00 ä½•ä¸ºæ­£ç‰ˆ"></a>0X00 ä½•ä¸ºæ­£ç‰ˆ</h1><blockquote><p>æ­£ç‰ˆçš„å³â€œæ­£ç¡®åœ°ä½¿ç”¨ç‰ˆæƒâ€ã€‚è€Œç‰ˆæƒæ˜¯å±äºç‰ˆæƒæ‰€æœ‰äººçš„ï¼Œç‰ˆæƒæ‰€æœ‰äººæå‡ºä½¿ç”¨æ¡ä»¶ï¼Œä½¿ç”¨è€…åªè¦ç¬¦åˆæ¡ä»¶ï¼Œå°±ç®—æ˜¯æ­£ç¡®åœ°ä½¿ç”¨ï¼Œå°±ä¸è¿åç‰ˆæƒæ³•ã€‚</p></blockquote><p>ä»¥ä¸Šæ¥è‡ª<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU2JUFEJUEzJUU3JTg5JTg4" title="https://zh.wikipedia.org/wiki/%E6%AD%A3%E7%89%88">ç»´åŸºç™¾ç§‘ï¼šâ€œæ­£ç‰ˆâ€è¯æ¡<i class="fa fa-external-link"></i></span></p><h1 id="0X01-æˆ‘çš„æ­£ç‰ˆè§‚å¿µ"><a href="#0X01-æˆ‘çš„æ­£ç‰ˆè§‚å¿µ" class="headerlink" title="0X01 æˆ‘çš„æ­£ç‰ˆè§‚å¿µ"></a>0X01 æˆ‘çš„æ­£ç‰ˆè§‚å¿µ</h1><p>æ­£ç¡®çš„ç‰ˆæƒè§‚å¿µå½“ç„¶åº”è¯¥æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½è¦â€œæ­£ç¡®çš„ä½¿ç”¨ç‰ˆæƒâ€ã€‚ä½†æ˜¯å‡ ä¹ä¸ä¼šæœ‰äººèƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘è¿™é‡Œä¸è°ˆæ”¿æ²»æ­£ç¡®ï¼Œåªæ˜¯è¯´ä¸€ä¸‹æˆ‘ä¸ªäººçš„æ­£ç‰ˆè§‚å¿µã€‚æˆ‘çš„æ­£ç‰ˆè§‚å¿µç®€å•è¯´æ¥å°±æ˜¯â€œåœ¨è‡ªå·±æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹å°½å¯èƒ½çš„ä½¿ç”¨æ­£ç‰ˆâ€ï¼Œå½“ç„¶è¿™é‡Œçš„æ¡ä»¶å…è®¸ä¸åªæ˜¯æŒ‡çš„ç»æµæ¡ä»¶ï¼Œè¿˜æœ‰å„ç§å…¶ä»–çš„å› ç´ ã€‚</p><p>æ¯”å¦‚è¯´ç”µå½±ï¼ŒæŒ‰ç…§æœ€æ­£ç¡®çš„æ­£ç‰ˆæ„è¯†æ¥è¯´åº”è¯¥æ˜¯åœ¨ä¸Šæ˜ æ—¶åœ¨ç”µå½±é™¢è§‚çœ‹ï¼Œé™¢çº¿ä¸‹æ˜ ååœ¨å„ä¸ªè§†é¢‘ç½‘ç«™è§‚çœ‹æˆ–å•ç‹¬è´­ä¹°å…‰ç›˜/æ•°å­—æˆæƒç­‰ã€‚æˆ‘ä¸ªäººåªåšåˆ°ä¸€éƒ¨åˆ†ï¼Œç”µå½±è¿˜åœ¨é™¢çº¿æ—¶æˆ‘è¦ä¹ˆå»ç”µå½±é™¢è§‚çœ‹è¦ä¹ˆå°±ç­‰ä¸‹æ˜ ååœ¨çº¿è§‚çœ‹ï¼Œä»æ¥ä¸ä¸‹è½½è§‚çœ‹â€œæªç‰ˆâ€å’Œâ€œæ³„æ¼ç‰ˆâ€ï¼Œä¸è¿‡ä¸‹æ˜ æ¯”è¾ƒä¹…åä¹Ÿæœ‰å¯èƒ½ä¼šé€šè¿‡â€œtorrentï¼ˆä¹Ÿå°±æ˜¯ç§å­ï¼‰â€ä¸‹è½½åˆ°æœ¬åœ°è§‚çœ‹ã€‚</p><p>éŸ³ä¹ä¹Ÿæ˜¯ç±»ä¼¼ã€‚æˆ‘ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨æœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨å¬æ­Œï¼Œä¸è®ºæ˜¯åœ¨ç”µè„‘è¿˜æ˜¯æ‰‹æœºä¸Šã€‚ä¸è¿‡æ¯æ¬¡å‘ç°æ–°éŸ³ä¹éƒ½æ˜¯é€šè¿‡åœ¨çº¿æ’­æ”¾å™¨ï¼Œå½“å–œæ¬¢çš„æ–°éŸ³ä¹è¾¾åˆ°äº†ä¸€å®šæ•°é‡åå°±å……å€¼å¯¹åº”å¹³å°çš„ä¼šå‘˜æŠŠä»–ä»¬ä¸‹è½½ä¸‹æ¥ï¼Œç»§ç»­ä½¿ç”¨æœ¬åœ°æ’­æ”¾å™¨æ’­æ”¾ã€‚</p><a id="more"></a><p>ä¹¦ç±åˆ™æ¯”è¾ƒç®€å•ï¼Œé€‰æ‹©æ€§è´­ä¹°çº¸è´¨ç‰ˆæˆ–Kindleçš„ç”µå­ç‰ˆå°±è¡Œäº†ï¼Œåšå†³æŠµåˆ¶ç›—ç‰ˆå›¾ä¹¦ã€‚</p><p>æ¸¸æˆå’Œä¹¦ç±æ¯”è¾ƒç±»ä¼¼ï¼Œåšå†³æŠµåˆ¶ç›—ç‰ˆæ¸¸æˆã€‚å°¤å…¶æ˜¯ç°åœ¨PS4å•†åº—å’ŒSteamè¶Šå‘æˆç†Ÿï¼Œè·å¾—æ­£ç‰ˆæ¸¸æˆçš„æ–¹å¼è¶Šæ¥è¶Šç®€å•ï¼Œè€Œä¸”æ¸¸æˆä¹Ÿæ²¡æœ‰é‚£ä¹ˆè´µçš„æƒ…å†µä¸‹æ²¡æœ‰ç†ç”±ä¸è´­ä¹°æ­£ç‰ˆã€‚æ¯•ç«Ÿä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜éå¸¸æ¸…æ¥šä¸€æ¬¾æ¸¸æˆèƒŒåè¦ä»˜å‡ºå¤šå°‘ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€ä¸ª <em>GTA V</em> å–ä¸€ç™¾å¤šå—çœŸçš„ä¸è´µäº†ï¼Œæ›´ä¸ç”¨è¯´é‚£äº›åªå–å‡ åå—çš„ç‹¬ç«‹æ¸¸æˆå’Œå›½äº§æ¸¸æˆäº†ã€‚</p><p>è½¯ä»¶æ–¹é¢æ‰“ç®—å•ç‹¬è¯´ï¼Œä½œä¸ºä¸€åç¨‹åºå‘˜åŒæ ·æ¸…æ¥šä¸€æ¬¾ä¼˜ç§€çš„è½¯ä»¶èƒŒåæ‰€è¦ä»˜å‡ºçš„åŠªåŠ›ä¸å¿ƒè¡€ã€‚</p><h1 id="0X02-å¼€æºä¸ç­‰äºå…è´¹ï¼Œæ›´ä¸ç­‰äºæ— é™åˆ¶"><a href="#0X02-å¼€æºä¸ç­‰äºå…è´¹ï¼Œæ›´ä¸ç­‰äºæ— é™åˆ¶" class="headerlink" title="0X02 å¼€æºä¸ç­‰äºå…è´¹ï¼Œæ›´ä¸ç­‰äºæ— é™åˆ¶"></a>0X02 å¼€æºä¸ç­‰äºå…è´¹ï¼Œæ›´ä¸ç­‰äºæ— é™åˆ¶</h1><blockquote><p>åœ¨è‹±è¯­ä¸­ï¼Œâ€œè‡ªç”±è½¯ä»¶â€ï¼Œå³Free Softwareï¼Œè¿™ä¸ªè¯å¾ˆå®¹æ˜“è¢«è¯¯è§£ï¼šFreeä¸€è¯æ—¢æœ‰å…è´¹çš„æ„æ€ï¼Œä¹Ÿæœ‰è‡ªç”±çš„æ„æ€ã€‚è€Œæˆ‘ä»¬æ‰€è°“çš„è‡ªç”±è½¯ä»¶ï¼Œåˆ™æ˜¯â€œä¸€ç±»å¯ä»¥èµ‹äºˆç”¨æˆ·æŒ‡å®šè‡ªç”±çš„è½¯ä»¶â€ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‘å¸ƒäº†è‡ªç”±è½¯ä»¶çš„å®šä¹‰ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬è§£é‡Šè‡ªç”±è½¯ä»¶ä¸­Freeï¼Œæ˜¯è‡ªç”±è¨€è®ºä¸­æ‰€è¯´çš„è‡ªç”±ï¼Œè€Œéå…è´¹èµ é¥®ä¸­çš„å…è´¹ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯ä¸ªç†æƒ³çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒæ— æ³•å®Œå…¨æœç»è¿™ä¸€é—®é¢˜ã€‚ä¸€ä¸ªæ„æ€æ­£ç¡®ï¼Œåˆæ²¡æœ‰æ­§å¼‚çš„è¯æ˜¾ç„¶æ›´å¥½äº›ï¼Œä¸è¿‡å‰ææ˜¯è¿™è¯ä¸ä¼šå¼•èµ·å…¶ä»–éº»çƒ¦ã€‚</p></blockquote><p>ä¸Šè¿°å†…å®¹å‡ºè‡ª<span class="exturl" data-url="aHR0cHM6Ly93d3cuZ251Lm9yZy9waGlsb3NvcGh5L29wZW4tc291cmNlLW1pc3Nlcy10aGUtcG9pbnQuaHRtbA==" title="https://www.gnu.org/philosophy/open-source-misses-the-point.html">GNUç»„ç»‡  å…³äºâ€œè‡ªç”±è½¯ä»¶â€å’Œâ€œå¼€æºâ€çš„å¸¸è§è¯¯è§£<i class="fa fa-external-link"></i></span></p><p>é™¤äº†è´¹ç”¨é—®é¢˜æ„å¤–è¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„è¯¯è§£â€œè¿™ä¸æ˜¯å¼€æºè½¯ä»¶å—ï¼Œéš¾é“ä¸æ˜¯æˆ‘éšä¾¿æ€ä¹ˆæï¼Ÿâ€ã€‚å…¶å®ä¸ç„¶ï¼Œå¼€æºè½¯ä»¶ä¹Ÿéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªå¼€æºè®¸å¯è¯ï¼Œå¸¸è§çš„æœ‰<code>GPL/MIT/Apache</code>ç­‰ï¼Œä½¿ç”¨è¿™äº›è½¯ä»¶ä¹Ÿéœ€è¦éµå®ˆä»–ä»¬æ‰€ä½¿ç”¨çš„è®¸å¯è¯ã€‚è¿™æ ·æ‰ç®—æ˜¯çœŸæ­£çš„â€œæ­£ç¡®çš„ä½¿ç”¨ç‰ˆæƒâ€ã€‚</p><h1 id="0X03-è½¯ä»¶æˆæƒéœ€è¦æ³¨æ„çš„åœ°æ–¹"><a href="#0X03-è½¯ä»¶æˆæƒéœ€è¦æ³¨æ„çš„åœ°æ–¹" class="headerlink" title="0X03 è½¯ä»¶æˆæƒéœ€è¦æ³¨æ„çš„åœ°æ–¹"></a>0X03 è½¯ä»¶æˆæƒéœ€è¦æ³¨æ„çš„åœ°æ–¹</h1><p>å¾ˆå¤šæ—¶å€™è½¯ä»¶æˆæƒåè®®æ˜¯ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ï¼Œä»¥ä¸ºè‡ªå·±è´­ä¹°äº†æ­£ç‰ˆå°±éšæ„ä½¿ç”¨ï¼Œç»å¸¸ä¼šè¿åå¯¹åº”çš„åè®®ã€‚</p><ol><li>æ¯”å¦‚å½“ä½ è´­ä¹°äº†ä¸€ä»½Officeæˆæƒåï¼Œåœ¨è‡ªå·±å…¬å¸çš„ç”µè„‘ä¸Šæ¿€æ´»äº†è½¯ä»¶ï¼Œåœ¨è‡ªå·±å®¶é‡Œä¹Ÿç™»å½•äº†å¯¹åº”çš„è´¦å·ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¹Ÿå°±è¿åäº†Officeçš„ä¸ªäººç‰ˆç”¨æˆ·åè®®ï¼›</li><li>æ¯”å¦‚å½“ä½ ä½¿ç”¨Teamvieweræ—¶ï¼Œä»æœ‹å‹å®¶é‡Œè¿æ¥åˆ°è‡ªå·±å®¶é‡Œæ˜¯å…è´¹çš„ï¼Œå› ä¸ºç”¨æˆ·åè®®è¯´ä¸ªäººä½¿ç”¨å…è´¹ã€‚ä½†æ˜¯ä»è‡ªå·±å®¶é‡Œè¿æ¥åˆ°å…¬å¸å°±è¿åäº†ä¸ªäººç”¨æˆ·çš„åè®®ï¼Œè™½ç„¶è½¯ä»¶ä¸ä¸€å®šå¯ä»¥è¯†åˆ«åˆ°è¿™ç§è¿è§„ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸ç¬¦åˆç”¨æˆ·åè®®çš„ï¼›</li><li>æŸäº›IDEä¼šåŒºåˆ†ç¤¾åŒºç‰ˆã€ä¸ªäººç‰ˆå’Œä¼ä¸šç‰ˆã€‚ç¤¾åŒºç‰ˆå¼€å‘çš„è½¯ä»¶ä¸èƒ½å”®å–ã€ä¸ªäººç‰ˆçš„IDEä¸èƒ½ç”¨ä¸ä¼ä¸šç­‰ã€‚</li><li>Jetbarinså®¶çš„åè®®å°±æ¯”è¾ƒå®½æ¾ï¼Œç¤¾åŒºç‰ˆå¯ç”¨äºä¸€åˆ‡å½¢å¼çš„å¼€å‘ï¼Œä¸ªäººè´­ä¹°çš„ä¹Ÿå¯ä»¥ç”¨äºå…¬å¸çš„å•†ä¸šå¼€å‘ã€‚ä½†æ˜¯å…¶ä¸­éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ä¸ªäººè´­ä¹°æ˜¯æˆæƒç»™ä¸ªäººçš„ï¼Œè€Œä¼ä¸šè´­ä¹°åˆ™æ˜¯æˆæƒç»™æŸä¸€ä½ç½®ã€‚ç®€å•åœ°è¯´å°±æ˜¯â€œä½ è‡ªå·±ä¹°çš„Jetbarinsçš„IDEç¦»èŒåå¯ä»¥åœ¨å®¶é‡Œç”¨ï¼Œä¹Ÿå¯ä»¥åˆ°ä¸‹ä¸€å®¶ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœä½ ç”¨çš„æ˜¯å…¬å¸æä¾›çš„IDEæˆæƒï¼Œåˆ™ä¸èƒ½å¸¦å›å®¶æ›´ä¸èƒ½å¸¦åˆ°å¦ä¸€å®¶å…¬å¸â€ã€‚</li></ol><h1 id="0X04-åè®°"><a href="#0X04-åè®°" class="headerlink" title="0X04 åè®°"></a>0X04 åè®°</h1><p>å†™è¿™ç¯‡åšæ–‡ä¸»è¦æ˜¯ä¸ºäº†è®©è‡ªå·±è¿›ä¸€æ­¥çš„æå‡ç‰ˆæƒæ„è¯†ï¼Œå¹¶èƒ½ä¸ºå¤§å®¶çš„ç‰ˆæƒæ„è¯†å°½ä¸€åˆ†åŠ›ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> None </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å°†è‡ªå·±çš„æ—¶é—´ç®¡ç†èµ·æ¥</title>
      <link href="/2018/11/25/manage-our-time/"/>
      <url>/2018/11/25/manage-our-time/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ—¶é—´éƒ½å»å“ªå„¿äº†"><a href="#0X00-æ—¶é—´éƒ½å»å“ªå„¿äº†" class="headerlink" title="0X00 æ—¶é—´éƒ½å»å“ªå„¿äº†"></a>0X00 æ—¶é—´éƒ½å»å“ªå„¿äº†</h1><p>å¥½å¤šäººéƒ½ä¼šæœ‰è¿™ç§æƒ…å†µï¼Œæ•´æ•´ä¸¤å¤©çš„å‘¨æœ«å›å¿†èµ·æ¥å´ä¸çŸ¥é“è‡ªå·±åšäº†ä»€ä¹ˆï¼Œæ˜æ˜ä¹Ÿæ²¡çœ‹å‡ éƒ¨ç”µå½±ã€æ²¡æ€ä¹ˆæ‰“æ¸¸æˆï¼Œä¹Ÿæ²¡æ€ä¹ˆå­¦ä¹ ï¼Œæ—¶é—´æ€ä¹ˆå°±ä¸è§äº†å‘¢ï¼Ÿæ›´ä¸ºå¸¸è§çš„ä¸€ç§æ˜¯â€œç­‰æˆ‘æœ‰ç©ºäº†å°±æâ€ã€â€œç­‰æˆ‘ç©ºäº†ä¸€å®šå»ä¸€è¶Ÿå“ªå„¿å“ªå„¿å“ªå„¿â€ã€â€œä¸‹å‘¨å…­ä¸€å®šè¦å»åƒXXXâ€ï¼Œç„¶åå°±å†ä¹Ÿæƒ³ä¸èµ·æ¥äº†ã€‚çœŸæ­£ç©ºä¸‹æ¥çš„æ—¶å€™åˆè§‰å¾—è‡ªå·±æ²¡äº‹åšï¼Œå®Œå…¨æƒ³ä¸èµ·æ¥ä¹‹å‰åˆ—å‡ºæ¥æ¯”å·çº¸è¿˜é•¿çš„todo listäº†ã€‚</p><p>å®é™…ä¸Šå¤§å®¶å‡ ä¹ä¸ä¼šçœŸçš„æœ‰â€œæ— äº‹å¯åšâ€çš„æ—¶å€™ï¼Œåªæ˜¯æœ‰ç©ºçš„æ—¶å€™æƒ³ä¸èµ·æ¥ä¹‹å‰çš„è®¡åˆ’ï¼Œå®šäº†è®¡åˆ’åˆä¸å®šæ‰§è¡Œæ—¶é—´ã€‚æœ€ååˆ°å¤´æ¥å°±è½å¾—è¿™ä¹ˆä¸€ä¸ªä¸ä»…å¾ˆé—²åˆå•¥äº‹éƒ½åšä¸äº†çš„å¢ƒå†µã€‚æ¯”å¦‚ä½ ä¸€å®šä¼šæœ‰è¿‡ä¸Šåˆè¿˜åœ¨è¯´â€œæœ‰ç©ºäº†ä¸€å®šå»ä¸€è¶Ÿæœ¬åœ°çš„åšç‰©é¦†çœ‹çœ‹â€ï¼Œä¸‹åˆçš„æ—¶å€™å°±è¶´åœ¨åºŠä¸Šä¸çŸ¥é“è¦å¹²å•¥çš„æƒ…å†µã€‚è¿™ç§åœ¨æˆ‘ä»¬ä¸­å¤ªé•¿è§äº†ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½æ˜¯å°±è¿™ä¹ˆè¶´åœ¨åºŠä¸Šç»§ç»­ä¸‹å»äº†ã€‚</p><p>ä»¥æˆ‘ä¸ªäººæ¥è¯´ï¼Œåœ¨ä¸»åŠ¨ç®¡ç†è‡ªå·±æ—¶é—´çš„æ—¶å€™æˆ‘ä¸€å¤©ä¸‹æ¥æœ‰å¾ˆå¤šäº‹è¦åšï¼Œæ„Ÿè§‰è‡ªå·±å¾ˆå……å®ã€‚é‚£æ®µæ—¶é—´é‡Œæˆ‘ç©æ¸¸æˆã€çœ‹ä¹¦ã€å†™ä»£ç ç”šè‡³å»ä¸€å…¬é‡Œå¤–çš„é•‡ä¸Šåƒä¸€å®¶å¥½åƒçš„åŒ…å­éƒ½ä¼šåˆ—åœ¨æˆ‘çš„è®¡åˆ’ä¸­ï¼Œä¸¥æ ¼æŒ‰ç…§è®¡åˆ’è¡Œäº‹ã€‚</p><p>åæ¥å¤§å››å®ä¹ çš„ä¸€å¹´å› ä¸ºåˆšåˆšå‡ºæ¥ç‹¬è‡ªç”Ÿæ´»å†åŠ ä¸Šåˆšå¼€å§‹å·¥ä½œè§‰çš„æ¯”è¾ƒç´¯ï¼Œé‚£ä¸€å¹´åŸºæœ¬å°±ä»€ä¹ˆéƒ½æ²¡åšã€‚æ¯å¤©æ™šä¸Šå¯¹ç€ç”µè„‘ä¸çŸ¥é“åœ¨å¹²å—ï¼Œå‘¨æœ«åœ¨å®¶é‡Œä¹Ÿæ˜¯å®Œå…¨æ‡µé€¼çš„ã€‚éƒ½ä¸è¯´å­¦ä¹ äº†ï¼Œå°±è¿æ¸¸æˆå’Œç”µå½±éƒ½æ²¡æ€ä¹ˆç¢°è¿‡ï¼Œæ‰€ä»¥å°†è‡ªå·±çš„æ—¶é—´ç®¡ç†èµ·æ¥æŒ‡çš„å½“ç„¶ä¸æ˜¯è¯´åªäºå­¦ä¹ å’Œæå‡è‡ªå·±ï¼Œè€Œæ˜¯å•çº¯çš„ç®¡ç†æ—¶é—´è€Œå·²ã€‚æŠŠè‡ªå·±çš„æ—¶é—´ç®¡ç†èµ·æ¥äº†ä»¥åä¼šå‘ç°è‡ªå·±çš„æ¸¸æˆé€šå…³æ›´å¿«äº†ã€çœ‹ä¹¦æ•ˆç‡æ›´é«˜äº†ã€ç”µå½±çœ‹å¾—æ›´å¤šäº†ã€å¥½å¤šè®¡åˆ’è¿‡æ²¡æœ‰ä»˜è¯¸æ—¶é—´çš„äº‹æƒ…éƒ½ä»TODOä¸­æ¸…ç†æ‰äº†ã€‚å”¯ä¸€è¾¹å°‘çš„æ—¶é—´å°±æ˜¯è‡ªå·±æ— èŠå‘å‘†çš„æ—¶é—´ï¼Œæ‰€ä»¥è¯´æ¥è¿™æ˜¯ä¸€é—¨è¡€èµšçš„ç”Ÿæ„ã€‚æ¢å¥è¯è¯´å‘¨æœ«ä¸¤å¤©è¶´åœ¨åºŠä¸Šå‘å‘†ç©æ‰‹æœºæ˜¯æœ€å’¸é±¼çš„ï¼Œå°±ç®—æ˜¯èµ·æ¥çœ‹ä¸‰éƒ¨ç”µå½±ç©å‡ ä¸ªå°æ—¶PS4éƒ½è¦æ¯”è¿™å‘å‘†æ¥çš„å¥½å§ã€‚</p><p>æœ€è¿‘è¿™æ®µæ—¶é—´åˆå°†æ—¶é—´ç®¡ç†èµ·æ¥äº†ï¼Œæ‰è§‰å¾—è‡ªå·±çš„ç”Ÿæ´»åˆå……å®äº†èµ·æ¥ã€‚ä¸ä»…é€šå…³äº†å‡ æ¬¾æ—©å°±æƒ³ç©çš„æ¸¸æˆã€çœ‹äº†å¥½å¤šéƒ¨æƒ³çœ‹å´æ²¡çœ‹çš„ç”µå½±ã€å°±è¿å¥½å¤šæœ¬æƒ³çœ‹æ²¡çœ‹çš„ä¹¦ä¹Ÿéƒ½çœ‹å®Œäº†ã€‚</p><a id="more"></a><h1 id="0X01-æ—¥å†æ–¹æ¡ˆ"><a href="#0X01-æ—¥å†æ–¹æ¡ˆ" class="headerlink" title="0X01 æ—¥å†æ–¹æ¡ˆ"></a>0X01 æ—¥å†æ–¹æ¡ˆ</h1><p>è¯´æ˜¯å°†è‡ªå·±çš„æ—¶é—´ç®¡ç†èµ·æ¥ï¼Œé‚£å…·ä½“è¯¥æ€ä¹ˆå®æ–½å‘¢ï¼Ÿæœ€ç®€å•çš„ä¸€ä¸ªæ–¹æ¡ˆå°±æ˜¯æ—¥å†äº†ï¼Œå‡ ä¹ä»»ä½•æ‰‹æœºéƒ½å¸¦æœ‰æ—¥å†å’Œæ—¥ç¨‹æé†’åŠŸèƒ½ï¼Œç”¨å®ƒå°±å¯ä»¥äº†ã€‚æ¯ä¸ªå‘¨æœŸå®šä¸€ä¸ªæ—¶é—´æ¥å®‰æ’ä¸‹ä¸€ä¸ªå‘¨æœŸçš„æ—¥ç¨‹ã€‚</p><p>æ¯”å¦‚æ¯å‘¨æ—¥æ™šä¸Šç¡å‰æ‹¿å‡ºåŠä¸ªåˆ°ä¸€ä¸ªå°æ—¶æ¥å®‰æ’æ¥ä¸‹æ¥ä¸€å‘¨çš„ä»»åŠ¡ï¼Œå®‰æ’æ—¥ç¨‹æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯â€œæ—¶é—´ç²¾ç¡®â€ã€‚å½“ä½ æŠŠâ€œå‚è§‚çœåšç‰©é¦†â€çš„æ—¥ç¨‹è®¾ç½®ä¸ºâ€œæœ¬å‘¨çš„å‘¨ä¸‰åˆ°å‘¨äº”â€ï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šå°±ä»£è¡¨ç€è¿™å‘¨æ˜¯å»ä¸æˆåšç‰©é¦†äº†ï¼Œå› ä¸ºå…«æˆä¼šè¢«æ‹–åˆ°æœ€åç„¶åæ”¾å¼ƒæ‰ã€‚æ‰€ä»¥ä¸€å®šè¦ç²¾ç¡®åˆ°å…·ä½“æ—¶é—´ï¼Œæ¯”å¦‚â€œ2018-11-25 14:00å‚è§‚çœåšç‰©é¦†â€ã€â€œ2018-11-25 10:00æ”¶æ‹¾å±‹å­â€è¿™ç§ã€‚åˆ°äº†æ—¶é—´å°±å»åšè¯¥åšçš„äº‹ï¼Œä¸€å®šè¦æœ‰å¾ˆé«˜çš„è‡ªæ§åŠ›å’Œæ‰§è¡ŒåŠ›ã€‚</p><p>åœ¨ç³»ç»Ÿæ—¥å†ä¸­é€šå¸¸éƒ½å¯ä»¥ç»™ä¸€ä¸ªæ—¥ç¨‹è®¾ç½®å¤šä¸ªæé†’ï¼Œè¦åˆ©ç”¨å¥½è¿™ä¸€ç‚¹ã€‚æ¯”å¦‚ä½ è®¡åˆ’ä¸‹åˆè¦çœ‹ç”µå½±ï¼Œé‚£å°±è®¾ç½®ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„æ—¥ç¨‹â€œä»Šå¤© 15:00è§‚çœ‹XX ç”µå½±ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæå‰åŠå°æ—¶çš„æé†’â€ã€‚è¿™æ ·åœ¨14:30çš„æ—¶å€™ä½ å°±ä¼šè¢«æé†’åŠå°æ—¶åçš„çœ‹ç”µå½±æ—¥ç¨‹ï¼Œä¾¿äºå®‰æ’æ­¤æ—¶æ‰‹ä¸­æ­£åœ¨åšçš„äº‹æƒ…ã€‚</p><h1 id="0X02-Googleæ—¥å†"><a href="#0X02-Googleæ—¥å†" class="headerlink" title="0X02 Googleæ—¥å†"></a>0X02 Googleæ—¥å†</h1><p>å¦‚æœèƒ½å¤Ÿç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œå»ºè®®Androidç”¨æˆ·ä½¿ç”¨Googleæ—¥å†ã€‚Googleæ—¥å†æ¯”ä¸€èˆ¬ç³»ç»Ÿè‡ªå¸¦çš„æ—¥å†åŠŸèƒ½æ›´åŠ å®Œå–„ï¼Œè€Œä¸”è¿˜å¸¦æœ‰åŒæ­¥çš„åŠŸèƒ½ã€‚é¦–å…ˆæ¥è¯´Googleæ—¥å†å¯ä»¥ç»™ä¸åŒçš„æ—¥ç¨‹è®¾ç½®ä¸åŒçš„é¢œè‰²æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢œè‰²æ ‡ç­¾ç»™è¿™äº›æ—¥ç¨‹åˆ†ç±»æˆ–æ˜¯åŒºåˆ†ä»–ä»¬çš„ä¼˜å…ˆçº§å’Œé‡è¦åº¦ã€‚Googleæ—¥å†åœ¨ç™»å½•äº†è‡ªå·±çš„è´¦å·åå¯ä»¥è·ŸChromeè¿›è¡ŒåŒæ­¥ï¼Œåœ¨Chromeä¸Šå®‰è£…ä¸€ä¸ªGoogleæ—¥å†çš„æ‰©å±•ä¹‹åèƒ½åŒæ­¥æŸ¥çœ‹åˆ°æ‰‹æœºä¸Šçœ‹åˆ°çš„æ—¥ç¨‹ï¼Œå¹¶ä¸”åœ¨å¯¹åº”çš„æ—¶é—´ç”µè„‘ä¹Ÿä¼šå¼¹å‡ºé€šçŸ¥æç¤ºæ—¥ç¨‹ã€‚</p><p>åœ¨Androidä¸Šçš„Googleæ—¥å†ä½“éªŒæ˜¯å¾ˆä¸é”™çš„ï¼Œå»ºè®®æœ‰æ¡ä»¶çš„åŒå­¦éƒ½ä½¿ç”¨Googleæ—¥å†æ›¿æ¢æ‰ç³»ç»Ÿçš„æ—¥å†åŠŸèƒ½ã€‚åœ¨IOSä¸Šæˆ‘ä¸æ¸…æ¥šæœ‰æ²¡æœ‰Googleæ—¥å†å¯ä»¥ç”¨ï¼Œä¸è¿‡Appleä¹Ÿæœ‰è‡ªå·±å¯¹åº”çš„æ–¹æ¡ˆå‘¢ã€‚</p><h1 id="0X03-Microsoftå¥—ä»¶"><a href="#0X03-Microsoftå¥—ä»¶" class="headerlink" title="0X03 Microsoftå¥—ä»¶"></a>0X03 Microsoftå¥—ä»¶</h1><p>å¾®è½¯å¥—ä»¶ä¸­çš„outlookä¹Ÿæ˜¯ä¸€ä¸ªè¿™æ ·çš„å·¥å…·ï¼Œåœ¨é‚®ä»¶åŠŸèƒ½ä¹‹å¤–çš„æ—¥ç¨‹ç®¡ç†ä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„ã€‚outlookå¯ä»¥ä»é‚®ä»¶ä¸­æ™ºèƒ½è¯†åˆ«ç›¸å…³æ—¥ç¨‹å¹¶å¯¼å…¥ï¼ˆGmail/Googleæ—¥å†ä¹Ÿå¯ä»¥ï¼ŒAppleå…¶å®ä¹Ÿå¯ä»¥ï¼‰ã€‚å¦‚æœæ˜¯åœ¨Windowsç¯å¢ƒä¸‹ä½¿ç”¨outlookä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œåœ¨Windowsä¸‹å¾®è½¯çš„æ—¥ç¨‹å¯ä»¥ç›´æ¥ä»¥ç³»ç»Ÿé€šçŸ¥çš„å½¢å¼æ¨é€ï¼Œåœ¨æ‰‹æœºä¸Šå®‰è£…ä¸€ä¸ªoutlookå°±å¯ä»¥å®ç°æ‰‹æœºä¸ç”µè„‘çš„åŒæ­¥äº†ã€‚</p><h1 id="0X04-Appleå¥—ä»¶"><a href="#0X04-Appleå¥—ä»¶" class="headerlink" title="0X04 Appleå¥—ä»¶"></a>0X04 Appleå¥—ä»¶</h1><p>Appleå¥—ä»¶æˆ‘æ˜¯æ²¡ç”¨è¿‡çš„ï¼Œæ¯•ç«Ÿæ²¡ä¹°è¿‡è‹¹æœçš„ä»»ä½•äº§å“ã€‚ä¸è¿‡IOSå’ŒMacä¸ŠåŒæ­¥æ—¥ç¨‹è¿˜æ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ï¼Œè€Œä¸”é…åˆsiriä½¿ç”¨èµ·æ¥åº”è¯¥ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p><h1 id="0X05-GTDè½¯ä»¶"><a href="#0X05-GTDè½¯ä»¶" class="headerlink" title="0X05 GTDè½¯ä»¶"></a>0X05 GTDè½¯ä»¶</h1><p>æ›´å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨GTDè½¯ä»¶ï¼Œæ¯”å¦‚æ»´ç­”æ¸…å•è¿™ç§ï¼Œä»¥æ»´ç­”æ¸…å•ä¸ºä¾‹ä»‹ç»ä¸€ä¸‹è¿™ç±»è½¯ä»¶ã€‚æ»´ç­”æ¸…å•æ˜¯ä¸€ä¸ªä»¥ä»»åŠ¡ä¸ºåŸºç¡€çš„æ—¶é—´ç®¡ç†è½¯ä»¶ï¼Œç”¨æˆ·æ¯æ¬¡æƒ³åˆ°çš„ä»»ä½•ä¸œè¥¿éƒ½è¦åœ¨æ»´ç­”æ¸…å•ä¸­åˆ›å»ºä¸ºä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ªä»»åŠ¡æŒ‡å®šâ€œå¼€å§‹æ—¶é—´ã€æé†’æ—¶é—´ã€ä¼˜å…ˆçº§ã€è¯„è®ºå¤‡æ³¨ã€é™„ä»¶â€ç­‰ä¸€ç³»åˆ—å±æ€§ã€‚</p><p>æˆ‘æ˜¯åœ¨æ»´ç­”æ¸…å•ä¸­åˆ›å»ºäº†å¤šä¸ªç›®å½•ï¼Œè€Œä¸”æ˜¯æ”¯æŒå¤šçº§ç›®å½•çš„ï¼Œæ¯ä¸ªç›®å½•ä¸‹æœ‰ç€å¯¹åº”çš„ä»»åŠ¡ï¼Œä¾‹å¦‚â€œå·¥ä½œå†…å®¹ï¼šç ”å‘å·¥ä½œã€å·¥ä½œä¼šè®®ã€å…¶ä»–å·¥ä½œï¼Œä¸ªäººæå‡ï¼šä¸“ä¸šè¿›é˜¶ã€åšå®¢æ›´æ–°ã€ä¸šä½™é¢†åŸŸã€é˜…è¯»è¿›åº¦ï¼Œä¸šä½™ç”Ÿæ´»ï¼šä¸ªäººç”Ÿæ´»ã€ç”µå½±ç”µè§†ã€å…´è¶£çˆ±å¥½ã€ç¤¾äº¤æ´»åŠ¨â€è¿™æ ·ã€‚</p><p>æ¯æ¬¡åˆ›å»ºçš„ä»»åŠ¡é»˜è®¤æ”¾åœ¨ä¸€ä¸ªå«åšâ€œæ”¶é›†ç®±â€çš„åœ°æ–¹ï¼Œç­‰ä¸€å‘¨ä¸‹æ¥æ”¶é›†ç®±é‡Œåº”è¯¥å°±æœ‰äº†å¥½å¤šä»»åŠ¡ï¼Œå†æ‰¾ä¸€ä¸ªæ—¶é—´å°†æ”¶é›†ç®±é‡Œçš„ä»»åŠ¡ä¸€ä¸ªä¸ªçš„é…ç½®æ—¶é—´å¹¶ä¸”åˆ†åˆ°å¯¹åº”çš„ç›®å½•ä¸­ã€‚</p><p>è€Œä¸”æ»´ç­”æ¸…å•è¿˜é›†æˆäº†â€œç•ªèŒ„æ—¶é—´æ³•â€ï¼Œè¿™ä¸ªå°±ä¸å¤šä»‹ç»äº†ï¼Œå¯ä»¥æœç´¢äº†è§£ä¸€ä¸‹ã€‚å¯¹äºæˆ‘æ¥è¯´æ¯”è¾ƒé‡è¦çš„æ˜¯æ»´ç­”æ¸…å•é›†æˆçš„â€œç»Ÿè®¡æ€»ç»“â€åŠŸèƒ½ï¼Œæ¯å‘¨æœ€åçš„æ—¶å€™æˆ‘éƒ½å–œæ¬¢ç‚¹å¼€æ»´ç­”æ¸…å•çš„è¿™ä¸ªåŠŸèƒ½æ¥çœ‹ä¸€ä¸‹è‡ªå·±è¿™å‘¨éƒ½å®Œæˆäº†ä»€ä¹ˆä»»åŠ¡ã€‚ä¹Ÿä¸æ˜¯ä¸ºäº†æ€»ç»“è¿™ä¸€å‘¨æˆ‘æœ‰å¤šå°‘å¤šå°‘çš„æ”¶è·ï¼Œå•çº¯çš„æ˜¯çœ‹ç€è¿™äº›è¢«åˆ’æ‰çš„ä»»åŠ¡è§‰å¾—å¾ˆçˆ½ï¼Œæ„Ÿè§‰ç‰¹åˆ«æœ‰æˆå°±æ„Ÿã€‚</p><h1 id="0X06-æœ€é‡è¦çš„ä¸€ç‚¹"><a href="#0X06-æœ€é‡è¦çš„ä¸€ç‚¹" class="headerlink" title="0X06 æœ€é‡è¦çš„ä¸€ç‚¹"></a>0X06 æœ€é‡è¦çš„ä¸€ç‚¹</h1><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå¦‚æœè¯´è¿™ç¯‡åšæ–‡ä¸­æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¿™æ®µè¯´åˆ°çš„â€œè‡ªæ§åŠ›â€äº†ã€‚å¦‚æœæ²¡æœ‰è‰¯å¥½çš„â€œè‡ªæ§åŠ›â€ï¼Œå°±ç®—ç”¨å†å¥½çš„å·¥å…·ï¼Œå¼¹å‡ºå†å¤šçš„æé†’ï¼Œè¿›è¡Œå†å‘¨å¯†çš„å®‰æ’å¦‚æœä¸å»æ‰§è¡Œä¹Ÿæ˜¯å®Œå…¨æ²¡æœ‰ç”¨çš„ã€‚</p><p>åœ¨è¿™é‡Œå¸Œæœ›æ‰€æœ‰çœ‹åˆ°è¿™ç¯‡åšæ–‡çš„åŒå­¦éƒ½æœ‰ä¸é”™çš„è‡ªæ§åŠ› :)</p>]]></content>
      
      
      
        <tags>
            
            <tag> GTD </tag>
            
            <tag> TickTick </tag>
            
            <tag> Todo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠŠè‡ªå·±çš„VPS/Serverç”¨èµ·æ¥</title>
      <link href="/2018/11/22/using-vps/"/>
      <url>/2018/11/22/using-vps/</url>
      
        <content type="html"><![CDATA[<p>å¥½å¤šäººçš„VPSæˆ–æ˜¯æœåŠ¡å™¨å°±åªè·‘äº†ä¸€ä¸ªå°æœåŠ¡æˆ–æ˜¯å°ç¨‹åºï¼Œè™½ç„¶æˆ‘ä»¬å¤šæ•°äººçš„VPSæ€§èƒ½æ¯”è¾ƒå·®ä½†æ˜¯åªè·‘ä¸€ä¸ªå°æœåŠ¡ä¸€ä¸ªå°ç¨‹åºæœªå…è¿˜æ˜¯æœ‰äº›æµªè´¹ã€‚å¤§å¯å°†å…¶å……åˆ†åˆ©ç”¨èµ·æ¥ï¼Œæ¯•ç«Ÿæ€§èƒ½å†å·®ä¹Ÿæ˜¯ä¸€ä¸ª24å°æ—¶ä¸åœæœºä¸”å¸¦æœ‰ä¸€ä¸ªç‹¬ç«‹å…¬ç½‘IPçš„æœºå™¨ã€‚è¿™é‡Œæˆ‘ä»‹ç»ä¸€ä¸‹æˆ‘è·‘åœ¨VPSä¸Šçš„ä¸€äº›æœåŠ¡å’Œä½¿ç”¨ä¸­çš„ä¸€äº›ç»éªŒå’Œå»ºè®®ï¼Œå¸Œæœ›å¯ä»¥ç»™å„ä½å¸¦æ¥äº›è®¸çš„å¸®åŠ©å§ã€‚</p><h1 id="0X00-æ“ä½œç³»ç»Ÿ"><a href="#0X00-æ“ä½œç³»ç»Ÿ" class="headerlink" title="0X00 æ“ä½œç³»ç»Ÿ"></a>0X00 æ“ä½œç³»ç»Ÿ</h1><p>é€šå¸¸æˆ‘ä»¬è‡ªå·±çš„VPSæ€§èƒ½éƒ½ä¸æ€ä¹ˆå¼ºï¼Œå¾ˆå¤šäººéƒ½æ˜¯ä¹°çš„å•æ ¸512Må†…å­˜çš„ï¼Œæ‰€ä»¥Windows Serverç³»ç»Ÿé€šå¸¸æ˜¯ä¸ç”¨æƒ³äº†ã€‚é‚£ä¹ˆä¼—å¤šçš„Linuxå‘è¡Œç‰ˆæœ¬åˆè¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿå…¶å®å› ä¸ºæˆ‘ä»¬æ˜¯ä¸ªäººä½¿ç”¨ï¼Œä¸ç”¨è¿‡åˆ†è€ƒè™‘å‘è¡Œç‰ˆæœ¬çš„åŒºåˆ«ï¼Œå“ªä¸ªç”¨ç€ä¹ æƒ¯å°±ç”¨å“ªä¸ªã€‚æˆ‘è‡ªå·±çš„VPSç”¨è¿‡ä¸€æ®µæ—¶é—´çš„Fedoraå’ŒDebianï¼Œéƒ½æ˜¯å¾ˆä¸é”™çš„ã€‚å¦‚æœæ˜¯é’ˆå¯¹Linuxæ–°æ‰‹çš„è¯æˆ‘è¿˜æ˜¯æ¯”è¾ƒå»ºè®®ä½¿ç”¨Ubuntuå’ŒCentOSï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç³»ç»Ÿçš„ç”¨æˆ·ç¾¤ä½“å¾ˆå¤§ï¼Œå‡ºç°é—®é¢˜æ—¶å€™åœ¨ç½‘ç»œä¸Šä¹Ÿæ›´å®¹æ˜“æ‰¾åˆ°ç›¸å…³çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>è¿˜æœ‰å°±æ˜¯å›¾å½¢ç•Œé¢ï¼ŒLinuxä½œä¸ºæœåŠ¡å™¨æ“ä½œç³»ç»Ÿæ—¶æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦å®‰è£…å›¾å½¢ç•Œé¢çš„ã€‚æƒ³å¿…è´­ä¹°äº†VPSçš„ç”¨æˆ·åº”è¯¥ä¹Ÿå¤šå°‘èƒ½æ“ä½œä¸€ä¸‹Linuxï¼Œå°±æ›´æ²¡æœ‰å¿…è¦æµªè´¹ç³»ç»Ÿèµ„æºå’Œæ—¶é—´å»å®‰è£…å›¾å½¢ç•Œé¢å’ŒVNCäº†ã€‚</p><h1 id="0X01-æœºåœºå»ºè®¾"><a href="#0X01-æœºåœºå»ºè®¾" class="headerlink" title="0X01 æœºåœºå»ºè®¾"></a>0X01 æœºåœºå»ºè®¾</h1><p>å¤§å®¶å¦‚æœè´­ä¹°çš„æ˜¯å›½å¤–çš„VPSé‚£ä¹ˆå¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ä¸ºäº†è·¨è¿‡é•¿åŸï¼Œä¸è¿‡å¥½å¤šäººåœ¨ä½¿ç”¨çš„éƒ½æ˜¯åŸºäºå‘½ä»¤è¡Œçš„ShadowsocksæœåŠ¡ï¼Œä¸ä»…é…ç½®èµ·æ¥ä¸å¤ªç›´è§‚ï¼Œåˆ†äº«ç»™å…¶ä»–äººç”¨çš„æ—¶å€™ä¹Ÿä¸å¥½ç®¡ç†ã€‚æœ‰ä¸€ä¸ªå¼€æºé¡¹ç›®<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2dvLWlnbml0ZS9pZ25pdGU=" title="https://github.com/go-ignite/ignite">ignite<i class="fa fa-external-link"></i></span>å¯ä»¥éƒ¨ç½²ä¸€æ•´å¥—çš„Shadowsocksç®¡ç†ç³»ç»Ÿã€‚è¿™æ ·ä½ çš„VPSå°±ä¸å†æ˜¯é£æœºè·‘é“äº†ï¼Œè€Œæ˜¯è¿›åŒ–æˆäº†ä¸€ä¸ªå›½é™…æœºåœº :)</p><p>è¿™æ˜¯ä¸€ä¸ªGoè¯­è¨€å®ç°çš„åŸºäºWebçš„Shadowsocksç®¡ç†å·¥å…·ã€‚å¤šä¸ªç”¨æˆ·ä½¿ç”¨æ—¶ä¼šåˆ›å»ºå¤šä¸ªDockerå®¹å™¨ï¼Œæ¯ä¸ªè¿æ¥ä½¿ç”¨ç‹¬ç«‹çš„ç¯å¢ƒä¸å…¬ç½‘ç«¯å£ä¾¿äºç®¡ç†ã€‚</p><p>é…ç½®å¥½åå¯ä»¥åœ¨adminç«¯åˆ›å»ºé‚€è¯·ç ï¼Œæ¯ä¸ªé‚€è¯·ç å¯¹åº”ç€ä½¿ç”¨æ—¶é—´ä¸å¯ç”¨çš„æµé‡ã€‚å°†é‚€è¯·ç åˆ†å‘ç»™å…¶ä»–äººåï¼Œå…¶ä»–äººç™»å½•åˆ°ä½ çš„clientç«¯ä¾¿å¯ä»¥ä½¿ç”¨æ¿€æ´»ç æ³¨å†Œè‡ªå·±çš„ç”¨æˆ·ï¼Œå¹¶ä¸”å¯åŠ¨ä¸€ä¸ªæ–°çš„Shadowsocksè¿æ¥ã€‚ä½œä¸ºç®¡ç†å‘˜å¯ä»¥å®æ—¶è§‚å¯Ÿå„ä½ç”¨æˆ·çš„å‰©ä½™æ—¶é—´å’Œå‰©ä½™æµé‡ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œå»¶é•¿æ—¶é—´å’Œé‡ç½®æµé‡ç­‰æ“ä½œã€‚</p><a id="more"></a><h1 id="0X02-æ­å»ºåšå®¢"><a href="#0X02-æ­å»ºåšå®¢" class="headerlink" title="0X02 æ­å»ºåšå®¢"></a>0X02 æ­å»ºåšå®¢</h1><p>æ­å»ºåšå®¢ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§„æ“ä½œäº†ï¼Œé€šå¸¸çš„é€‰æ‹©æ˜¯ä¸¤ç§ï¼šä»¥<span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuLw==" title="https://hexo.io/zh-cn/">Hexo<i class="fa fa-external-link"></i></span>ä¸ºä»£è¡¨çš„é™æ€åšå®¢å’Œä»¥<span class="exturl" data-url="aHR0cHM6Ly9jbi53b3JkcHJlc3Mub3JnLw==" title="https://cn.wordpress.org/">Wordpress<i class="fa fa-external-link"></i></span>ä¸ºä»£è¡¨çš„åŠ¨æ€åšå®¢ã€‚è¿™é‡Œæ›´æ¨èä½¿ç”¨Hexoï¼Œè¿™ä¹Ÿæ˜¯å¤„äºå¯¹VPSæ€§èƒ½çš„è€ƒè™‘ã€‚æˆ‘ä»¬çš„VPSé€šå¸¸æ€§èƒ½éƒ½ä¸å¼ºåŠ²ï¼Œæ‰€ä»¥ä½¿ç”¨é™æ€åšå®¢å¯ä»¥æ¯æ¬¡ç¼–è¾‘å®Œåšæ–‡åç¼–è¯‘ä¸Šä¼ ï¼Œæ¯æ¬¡ç”¨æˆ·è®¿é—®æ—¶ä¹Ÿåªæ˜¯è®¿é—®äº†å‡ ä¸ªé™æ€æ–‡ä»¶ï¼Œå†åŠ ä¸ŠNginxçš„é…åˆå®Œå…¨å¯ä»¥å®ç°ä¸ªäººåšå®¢çš„éœ€æ±‚ã€‚Wordpressç±»çš„åŠ¨æ€åšå®¢è™½ç„¶æ‰©å±•æ€§å¾ˆå¼ºï¼Œè¯„è®ºå’Œæµè§ˆé‡ç­‰å¸¸è§åŠŸèƒ½çš„é«˜åº¦é›†æˆä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä¸è¿‡é—®é¢˜åœ¨äºåšå®¢çš„è¿è¡Œéœ€è¦æ•°æ®åº“æ¥æ”¯æŒï¼Œè¿™åœ¨æˆ‘ä»¬çš„ä½æ€§èƒ½VPSä¸Šé€šå¸¸ä¼šå¯¼è‡´è®¿é—®é€Ÿåº¦ç¼“æ…¢ã€‚</p><p>é™æ€åšå®¢å¯¹æ¯”ä¸åŠ¨æ€åšå®¢è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯éå¸¸ä¾¿äºè¿ç§»ï¼Œé’ˆå¯¹é™æ€åšå®¢åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹åœ°å€é‡æ–°å‘å¸ƒå°±ç®—æ˜¯å®Œæˆäº†è¿ç§»ï¼›ä½†æ˜¯åŠ¨æ€åšå®¢è¿ç§»ä¸ä»…è¦é‡æ–°é…ç½®PHPæˆ–æ˜¯å…¶ä»–è¯­è¨€çš„è¿è¡Œç¯å¢ƒï¼Œè¿˜éœ€è¦å¤‡ä»½å¹¶è¿ç§»æ•°æ®åº“ã€‚</p><p>ç›¸æ¯”æ¥è¯´åŠ¨æ€åšå®¢æœ€å¤§çš„ä¼˜åŠ¿å°±åœ¨äºå¤§é‡çš„æ’ä»¶ä¸â€œåŠ¨æ€â€æœ¬èº«ï¼Œå¾ˆå¤šæ¯”è¾ƒå¤§çš„ç½‘ç«™ä¹Ÿéƒ½æ˜¯ä½¿ç”¨Wordpressæ­å»ºçš„ã€‚</p><h1 id="0X03-è‡ªå·±çš„Github"><a href="#0X03-è‡ªå·±çš„Github" class="headerlink" title="0X03 è‡ªå·±çš„Github"></a>0X03 è‡ªå·±çš„Github</h1><p>ä¼—æ‰€å‘¨çŸ¥Githubä¸Šçš„ç§æœ‰ä»“åº“æ˜¯æ”¶è´¹çš„ï¼Œå›½å¤–çš„Gitlabä¸å›½å†…çš„giteeä¸ªäººæ˜¯å¯ä»¥ä½¿ç”¨å…è´¹ç§æœ‰ä»“åº“çš„ï¼Œä¸è¿‡æœ‰æ—¶å€™ä¸ºäº†æŠ˜è…¾æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥æ‰“é€ ä¸€ä¸ªè‡ªå·±çš„ç§äººGithubã€‚å…¶ä¸­<span class="exturl" data-url="aHR0cHM6Ly9nb2dzLmlvLw==" title="https://gogs.io/">Gogs<i class="fa fa-external-link"></i></span>å°±æ˜¯ä¸€ä¸ªææ˜“æ­å»ºçš„è‡ªåŠ©GitæœåŠ¡ï¼Œå¯ä»¥ç®€å•çš„ä½¿ç”¨dockeréƒ¨ç½²ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œã€‚è€Œä¸”Gogså¯¹ç³»ç»Ÿé…ç½®è¦æ±‚æä½ï¼Œè¿è¡Œåœ¨VPSç”šè‡³æ˜¯æ ‘æ¢…æ´¾ä¸Šéƒ½æ˜¯æ²¡é—®é¢˜çš„ã€‚</p><p>éƒ¨ç½²å¥½Gogsåä¹Ÿå¯ä»¥ä½¿ç”¨Webè¿›è¡Œä»“åº“ä¸ç”¨æˆ·çš„ç®¡ç†ï¼Œé€šè¿‡gitå‘½ä»¤è¿›è¡Œç‰ˆæœ¬æ§åˆ¶<code>push pull clone</code>ï¼Œå°±åƒGithubä¸€æ ·ã€‚å¹¶ä¸”ç”±äºæ˜¯å›½äººä¸»å¯¼å¼€å‘çš„é¡¹ç›®ï¼Œæ•´ä¸ªç³»ç»Ÿä¸å¸®åŠ©æ–‡æ¡£ç­‰éƒ½æ˜¯100%æ±‰åŒ–çš„ï¼Œå¯¹æ–°æ‰‹æ¥è¯´æ˜¯ç›¸å½“æœ‰å¥½çš„ã€‚</p><h1 id="0X04-ä»£ç†ä¸‹è½½ç‚¹"><a href="#0X04-ä»£ç†ä¸‹è½½ç‚¹" class="headerlink" title="0X04 ä»£ç†ä¸‹è½½ç‚¹"></a>0X04 ä»£ç†ä¸‹è½½ç‚¹</h1><p>ä»£ç†ä¸‹è½½ç‚¹å°±æ¯”è¾ƒç®€å•ï¼Œæ¯æ¬¡é‡åˆ°åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸­ä¸‹è½½ç‰¹åˆ«æ…¢çš„æ–‡ä»¶ï¼Œæˆ‘éƒ½å–œæ¬¢åœ¨VPSä¸Šä¸‹è½½å¥½å†ä»VPSä¸Šæ‹–å›æ¥ã€‚åœ¨VPSä¸Šå¯ä»¥ä½¿ç”¨aria2æ¥è¿›è¡Œå¤šçº¿ç¨‹ä¸‹è½½ï¼Œæ‹–å›æœ¬åœ°çš„æ—¶å€™å¯ä»¥åœ¨VPSä¸Šé•¿æœŸå¯ä¸€ä¸ªNginxä½œä¸ºä¸‹è½½ç«™ï¼Œä¹Ÿå¯ä»¥åœ¨æ–‡ä»¶ç›®å½•ä¸‹é€šè¿‡å‘½ä»¤<code>python3 -m http.server</code>ä¸´æ—¶å¯ä¸€ä¸ªwebæœåŠ¡ï¼Œç­‰æ–‡ä»¶æ‹–å›æ¥äº†å†å…³æ‰ã€‚</p><h1 id="0X05-æ³¨æ„å®‰å…¨"><a href="#0X05-æ³¨æ„å®‰å…¨" class="headerlink" title="0X05 æ³¨æ„å®‰å…¨"></a>0X05 æ³¨æ„å®‰å…¨</h1><p>æ¯•ç«Ÿæˆ‘ä»¬çš„VPSéƒ½æ˜¯å¤„åœ¨å…¬ç½‘ç¯å¢ƒä¸‹çš„ï¼Œæ‰€ä»¥ä¸€å®šè¦æ³¨æ„å®‰å…¨ã€‚æ¯”å¦‚é˜²ç«å¢™ä¸è¦å½»åº•å…³æ‰ï¼Œç”¨åˆ°å“ªä¸ªç«¯å£å°±å¼€æ”¾å“ªä¸ªç«¯å£ï¼›sshå°½é‡ä½¿ç”¨å…¬é’¥éªŒè¯ç™»å½•è€Œéå¯†ç ï¼›å¯¹å¤–å¼€æ”¾çš„æœåŠ¡æ¯”å¦‚æ•°æ®åº“æˆ–webç«¯çš„å¯†ç ä¸è¦ä½¿ç”¨å¼±å¯†ç ã€‚</p><p>ä¸€æ—¦è‡ªå·±çš„VPSè¢«æ‹¿ä¸‹ï¼Œè½»åˆ™è¢«åˆ åº“è·‘è·¯ï¼Œé‡åˆ™æ‹¿ç€ä½ çš„ç”¨æˆ·åå¯†ç åˆ°å¤„æ’åº“ï¼Œæä¸å¥½å°±ä¼šæœ‰æ›´å¤šçš„æŸå¤±ã€‚æ‰€ä»¥å¹³æ—¶è‡ªå·±ä¸åŒç½‘ç«™ä¸åŒç”¨æˆ·çš„å¯†ç ä¹Ÿå°½é‡åŒºåˆ†å¼€å§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> VPS </tag>
            
            <tag> Shadowsocks </tag>
            
            <tag> git </tag>
            
            <tag> Server </tag>
            
            <tag> blog </tag>
            
            <tag> proxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸Šçš„ç®€å•æ–‡æœ¬å¤„ç†</title>
      <link href="/2018/11/19/linux-text/"/>
      <url>/2018/11/19/linux-text/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‰è¨€"><a href="#0X00-å‰è¨€" class="headerlink" title="0X00 å‰è¨€"></a>0X00 å‰è¨€</h1><p>æœ€å¼€å§‹ä½¿ç”¨Linuxçš„æ—¶å€™ä¸€ç›´æä¸æ‡‚ä¸ºä»€ä¹ˆLinuxä¸‹ä¼šæœ‰è¿™ä¹ˆå¤šåœ¨å‘½ä»¤è¡Œé‡Œæ“ä½œæ–‡æœ¬çš„å·¥å…·ã€‚ä¸€åº¦ä»¥ä¸ºè¿™äº›ç©æ„å„¿æ²¡å•¥å¤§ç”¨ï¼Œä½†æ˜¯éšç€ä½¿ç”¨é¢‘ç‡ä¸å¼ºåº¦çš„å¢åŠ æ‰å‘ç°è¿™äº›ä¸œè¥¿æ˜¯Linuxä¸Šéå¸¸æœ‰é­…åŠ›çš„éƒ¨åˆ†ã€‚</p><h1 id="0X01-cat"><a href="#0X01-cat" class="headerlink" title="0X01 cat"></a>0X01 cat</h1><p><code>cat</code>å‘½ä»¤æ˜¯æœ€ç®€å•çš„ï¼Œ<code>cat filename</code>å°±æ˜¯å°†æ–‡ä»¶å†…å®¹ä»¥æ–‡æœ¬çš„å½¢å¼è¾“å‡ºåˆ°å‘½ä»¤è¡Œã€‚è¿™ä¸ªå‘½ä»¤ä¸»è¦æ˜¯ä½œä¸ºåé¢ç»„åˆæŠ€çš„åŸºç¡€ï¼Œå¨åŠ›åˆ°åé¢catçš„ä½œç”¨æ‰èƒ½å‘æŒ¥å‡ºæ¥ã€‚</p><h1 id="0X02-head"><a href="#0X02-head" class="headerlink" title="0X02 head"></a>0X02 head</h1><p><code>head</code>æ˜¯æŸ¥çœ‹æ–‡ä»¶çš„å‰é¢éƒ¨åˆ†ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯å‰10è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>-n</code>å‚æ•°æŒ‡å®šå…·ä½“çš„è¡Œæ•°ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªæ–‡ä»¶å·¨å¤§æ— æ¯”ï¼Œæ¯”å¦‚è¯´å‡ ä¸ªGï¼Œä¸”ä½ åªå…³å¿ƒå‰100è¡Œï¼Œé‚£æ€ä¹ˆæå‘¢ã€‚ä½¿ç”¨<code>cat</code>æ˜¯ä¸å¯èƒ½çš„äº†ï¼Œæ¯•ç«Ÿä½ catä¸€ä¸‹ä¹‹åå›å»ç¡ä¸€è§‰å±å¹•éƒ½å¯èƒ½è¿˜æ²¡æ»šå®Œï¼Œä½•å†µä½ è¿˜å¾—ç¿»å›æœ€ä¸Šé¢æŸ¥çœ‹å¼€å¤´çš„å†…å®¹ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head filename -n 100   <span class="comment"># æŸ¥çœ‹æ–‡ä»¶çš„å‰100è¡Œ</span></span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="0X03-tail"><a href="#0X03-tail" class="headerlink" title="0X03 tail"></a>0X03 tail</h1><p><code>tail</code>ç±»ä¼¼äº<code>head</code>å‘½ä»¤ï¼Œä¸è¿‡è¿™ä¸ªæ˜¯ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶æœ€åçš„ï¼ŒåŒæ ·æ”¯æŒä½¿ç”¨<code>-n</code>å‚æ•°æ¥æŒ‡å®šæœ€åå¤šå°‘è¡Œã€‚ä¸è¿‡è¿™ä¸ªå‘½ä»¤æœ€å¤šç”¨äºæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ã€‚ä¾‹å¦‚ä½ æœ‰ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶æ¯ç§’éƒ½åœ¨æºæºä¸æ–­çš„å†™å…¥æ–°å†…å®¹ï¼Œæ­¤æ—¶åˆæƒ³çœ‹æœ€æ–°çš„æ—¥å¿—æ€ä¹ˆæå‘¢ã€‚<code>tail</code>æä¾›äº†ä¸€ä¸ª<code>-f</code>çš„å‚æ•°ï¼Œä½¿ç”¨<code>tail filename -f</code>å°±å¯ä»¥è¾“å‡ºæ–‡ä»¶æœ€åçš„éƒ¨åˆ†ä¸”æ¯å½“æ–°å†…å®¹å†™å…¥æ–‡ä»¶æ—¶ä¼šè¿½åŠ æ˜¾ç¤ºï¼Œç›´åˆ°ä½ <code>Ctrl + C</code>ä¸ºæ­¢ã€‚</p><p>è¿™ä¸ªæŠ€èƒ½ä¹Ÿæ˜¯åé¢ç»„åˆæŠ€çš„åŸºç¡€æŠ€èƒ½ä¹‹ä¸€ï¼Œåœ¨ç»„åˆæŠ€ä¸­æ›´èƒ½å‘æŒ¥å¨åŠ›ã€‚</p><h1 id="0X04-grep"><a href="#0X04-grep" class="headerlink" title="0X04 grep"></a>0X04 grep</h1><p>æŸ¥æ‰¾æ–‡ä»¶ä¸­å¸¦æœ‰æŸäº›ç‰¹å¾çš„è¡Œã€‚ä¸€ä¸ªä¾‹å­ï¼šä½ æƒ³æ‰¾åˆ°æ–‡ä»¶<code>student_list.txt</code>ä¸­æ‰€æœ‰å¸¦æœ‰â€œå°æ˜â€çš„è¡Œï¼Œé‚£å°±å¯ä»¥<code>grep å°æ˜ student_list</code>ã€‚è¿™æ ·å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å«â€œå°æ˜â€çš„è¡Œï¼Œå¹¶ä¸”â€œå°æ˜â€äºŒå­—é€šå¸¸ä¼šé«˜äº®è¾“å‡ºï¼Œè€Œä¸åŒ…å«çš„åˆ™å®Œå…¨ä¸ä¼šè¾“å‡ºã€‚</p><p>å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯<code>grep</code>æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ£€ç´¢çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ­£åˆ™æ¥åŒ¹é…å†…å®¹ï¼Œæ‰€ä»¥grepçš„æˆ˜æ–—åŠ›å¾ˆå¼ºã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨grepé…åˆæ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æ—¥å¿—æ–‡ä»¶ä¸­æ‰€æœ‰ç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„å†…å®¹ã€‚</p><p>grepè¿˜æœ‰ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•ï¼Œè¯•æƒ³è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼šä½ çš„ä¸€ä¸ªç›®å½•é‡Œæœ‰å¤§é‡çš„æ–‡ä»¶ï¼Œä½ æƒ³æ‰¾åˆ°åŒ…å«<code>db_password</code>çš„è¡Œæ¥ä¿®æ”¹åˆšåˆšæ›´æ¢çš„å¯†ç ï¼Œä½†æ˜¯å·²ç»å¿˜äº†åœ¨å‡ ä¸ªåœ°æ–¹é…ç½®è¿‡äº†ï¼Œé‚£è¯¥å’‹æï¼Ÿå¯ä»¥åœ¨ç›®å½•ä¸­ä½¿ç”¨<code>grep -Rn &quot;db_password&quot; .</code>æ¥æŸ¥æ‰¾ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥é€’å½’çš„grepå½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæ‰¾åˆ°å«æœ‰<code>db_password</code>çš„è¡Œå¹¶å¸¦æœ‰æ–‡ä»¶åå’Œè¡Œå·ã€‚</p><p>grepæ˜¯ç»„åˆæŠ€ä¸­çš„ç¥æŠ€ï¼Œåœ¨grepçš„åŠ æŒä¸‹ç»„åˆæŠ€å¯ä»¥å˜å¾—æ›´å¼ºå¤§ã€‚</p><h1 id="0X05-ag"><a href="#0X05-ag" class="headerlink" title="0X05 ag"></a>0X05 ag</h1><p>ä¸Šé¢è°ˆåˆ°çš„<code>grep -Rn &quot;xxxxx&quot; .</code>çš„æ–¹æ³•å›ºç„¶å¥½ç”¨ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½å†™ä¸€ä¾¿è¿˜æ˜¯æœ‰äº›éº»çƒ¦ã€‚æ‰€ä»¥æœ‰äº†è¿™ä¸ªå‘½ä»¤<code>ag</code>ï¼Œå®ƒå¯ä»¥å®Œå…¨æ›¿æ¢æ‰è¿™ä¸ª<code>grep -Rn &quot;xxx&quot; .</code>çš„ç»„åˆï¼Œä¸ä»…çœæ—¶è€Œä¸”å¾—åˆ°çš„è¾“å‡ºä¹Ÿæ›´äººæ€§åŒ–æ›´å¥½çœ‹ã€‚</p><blockquote><p>é€šå¸¸ç³»ç»Ÿä¸ä¼šè‡ªå¸¦agå‘½ä»¤ï¼ŒåŒ…å«åœ¨ä¸€ä¸ªåä¸º<code>the_silver_searcher</code>çš„åŒ…ä¸­ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªçš„è¯å¯ä»¥æœç´¢å®‰è£…ä¸€ä¸‹ã€‚</p></blockquote><h1 id="0X06-jq"><a href="#0X06-jq" class="headerlink" title="0X06 jq"></a>0X06 jq</h1><p><code>jq</code>æ˜¯ä¸€ä¸ªç”¨äºåœ¨å‘½ä»¤è¡Œä¸­è§£æè¾“å‡ºJsonå†…å®¹å¹¶æ ¼å¼åŒ–é«˜äº®çš„å·¥å…·ï¼Œä»Šå¤©ä»–æ‰å¸®äº†æˆ‘çš„å¤§å¿™ã€‚jqå‘½ä»¤å¯ä»¥å°†å…¶ä¸­çš„å­—ç¬¦ä¸²è½¬ç ä¸ºäººç±»å¯è¯»çš„ç±»å‹ï¼Œå¹¶ä¸”è¿›è¡Œç¼©è¿›å’Œé«˜äº®ä¸Šè‰²ã€‚</p><p>å¦‚æœä½ æœ‰ä¸€ä¸ªåä¸º<code>test_file.json</code>çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºæ ‡å‡†çš„Jsonï¼Œæƒ³è¦æŸ¥çœ‹çš„è¯å°±å¯ä»¥ä½¿ç”¨<code>jq . test_file.json</code>å‘½ä»¤æ¥æŸ¥çœ‹æ ¼å¼åŒ–å¹¶é«˜äº®ä¹‹åçš„ç»“æœã€‚jqå·¥å…·ä¹Ÿå¯ä»¥ä½œä¸ºç»„åˆæŠ€çš„ä¸€éƒ¨åˆ†æå‡å·¥ä½œæ•ˆç‡ã€‚</p><h1 id="0X07-ç»„åˆæŠ€åŸºç¡€ï¼šç®¡é“"><a href="#0X07-ç»„åˆæŠ€åŸºç¡€ï¼šç®¡é“" class="headerlink" title="0X07 ç»„åˆæŠ€åŸºç¡€ï¼šç®¡é“"></a>0X07 ç»„åˆæŠ€åŸºç¡€ï¼šç®¡é“</h1><p>ç®¡é“å°±æ˜¯é”®ç›˜ä¸Šçš„é‚£ä¸ªå°ç«–çº¿<code>|</code>ï¼Œåœ¨Linuxä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚ç®€å•çš„ç†è§£å°±æ˜¯é€šè¿‡ç®¡é“è¿æ¥çš„ä¸¤ä¸²å‘½ä»¤å¯ä»¥å°†å‰é¢ä¸€ä¸²çš„è¾“å‡ºä½œä¸ºåé¢ä¸€ä¸²çš„è¾“å…¥ã€‚</p><p>å…·ä½“ç”¨æ³•å±•ç¤ºå°±åœ¨ä¸‹é¢çš„ç»„åˆæŠ€éƒ¨åˆ†å§ï¼Œç›´æ¥åœ¨è¿™é‡Œè¯´ä¹Ÿè¯´ä¸å¤ªæ¸…æ¥šã€‚</p><h1 id="0X08-é‡å®šå‘"><a href="#0X08-é‡å®šå‘" class="headerlink" title="0X08 é‡å®šå‘"></a>0X08 é‡å®šå‘</h1><p>é‡å®šå‘ç±»ä¼¼äºç®¡é“ï¼Œåªæ˜¯é‡å®šå‘æ˜¯å°†è¾“å‡ºä½œä¸ºæ–‡ä»¶æˆ–ä½¿ç”¨æ–‡ä»¶ä½œä¸ºè¾“å…¥ã€‚åœ¨å‘½ä»¤ä¸­é‡å®šå‘æ˜¯ä½¿ç”¨<code>&lt; / &gt;</code>è¿™å¯¹å¤§äºå¥½å’Œå°äºå·è¡¨ç¤ºçš„ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"hello,world"</span> &gt; new_file <span class="comment"># å°†æœ¬åº”è¯¥è¾“å‡ºçš„hello,worldå†™å…¥åˆ°åä¸ºnew_fileçš„æ–‡ä»¶ä¸­</span></span><br><span class="line">cat &lt; new_file  <span class="comment"># å°†new_fileçš„å†…å®¹ä½œä¸ºcatçš„ä¼ å…¥å‚æ•°</span></span><br></pre></td></tr></table></figure><h2 id="0X08-1-æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ã€æ ‡å‡†è¾“å…¥"><a href="#0X08-1-æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ã€æ ‡å‡†è¾“å…¥" class="headerlink" title="0X08-1 æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ã€æ ‡å‡†è¾“å…¥"></a>0X08-1 æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ã€æ ‡å‡†è¾“å…¥</h2><p>ç³»ç»Ÿä¸­å­˜åœ¨â€æ ‡å‡†è¾“å‡º/æ ‡å‡†è¾“å…¥/æ ‡å‡†é”™è¯¯â€ä¸‰ä¸ªæ¦‚å¿µï¼Œé€šå¸¸æ ‡å‡†è¾“å‡ºä¸æ ‡å‡†é”™è¯¯éƒ½æ˜¯æˆ‘ä»¬çš„ç»ˆç«¯ï¼Œè€Œæ ‡å‡†è¾“å…¥æ˜¯é”®ç›˜ã€‚<br>ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä¼šåˆ†ä¸ºâ€œæ ‡å‡†è¾“å‡ºâ€ä¸â€œæ ‡å‡†é”™è¯¯â€ã€‚é¡¾åæ€ä¹‰ï¼Œé€šå¸¸çš„å†…å®¹ä½¿ç”¨â€œæ ‡å‡†è¾“å‡ºâ€è¿›è¡Œè¾“å‡ºï¼Œâ€œæ ‡å‡†é”™è¯¯â€æ˜¯ç”¨æ¥è¾“å‡ºé”™è¯¯ä¿¡æ¯çš„ã€‚<br>ç›´æ¥ä½¿ç”¨ <code>echo &quot;hello,world&quot;</code> çš„æ—¶å€™æ˜¯å°†è¾“å‡ºå†…å®¹å®šå‘åˆ°â€œæ ‡å‡†è¾“å‡ºâ€çš„ï¼Œé»˜è®¤æ˜¯æˆ‘ä»¬çš„ç»ˆç«¯ã€‚ä½¿ç”¨å‘½ä»¤<code>ping baidu.com &gt; output</code>ä¸<code>ping baidu.com 1&gt; output</code>æ˜¯ä¸€æ ·çš„ï¼Œ<code>1&gt;</code>ä»£è¡¨æ ‡å‡†è¾“å‡ºï¼Œæ˜¯é»˜è®¤çš„<br>ä½¿ç”¨å‘½ä»¤<code>ping zdlkfjwle &gt; output</code>ä¼šå‘ç°è¿˜æ˜¯æœ‰å†…å®¹è¢«æ‰“å°åˆ°äº†ç»ˆç«¯ä¸Šï¼Œæ˜¯å› ä¸ºé”™è¯¯ä¿¡æ¯ä½¿ç”¨äº†â€œæ ‡å‡†é”™è¯¯â€æ¥è¾“å‡ºï¼Œæƒ³è¦é‡å®šå‘æ ‡å‡†é”™è¯¯çš„è¾“å‡ºå°±éœ€è¦ä½¿ç”¨<code>ping lkzsdjf  2&gt; output</code>äº†</p><h1 id="0X09-å¸¸ç”¨ç»„åˆæŠ€"><a href="#0X09-å¸¸ç”¨ç»„åˆæŠ€" class="headerlink" title="0X09 å¸¸ç”¨ç»„åˆæŠ€"></a>0X09 å¸¸ç”¨ç»„åˆæŠ€</h1><p>ç»„åˆæŠ€æ‰æ˜¯æœ¬æ¬¡çš„é‡ç‚¹ï¼Œè¿™é‡Œä»‹ç»å‡ ç§å¸¸ç”¨çš„ç»„åˆæŠ€ä¾›å¤§å®¶å‚è€ƒã€‚</p><p>è¿½è¸ªæ—¥å¿—ï¼š<br><code>tail -f nginx_xxx.log | grep timeout</code>å®æ—¶è¿½è¸ªåœ¨ä¸€ä¸ªæŒç»­è¿½åŠ çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶ä¸”åªå±•ç¤ºå…¶ä¸­åŒ…å«<code>timeout</code>çš„è¡Œ</p><p>è¿½è¸ªå¤šä¸ªæ—¥å¿—ï¼š<br><code>tail -f nginx_success.log nginx_error.log | grep submit</code>å®æ—¶è¿½è¸ªå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶å±•ç¤ºå…¶ä¸­åŒ…å«<code>submit</code>çš„è¡Œ</p><p>æ ¼å¼åŒ–ä¸€ä¸ªJsonæ–‡ä»¶ï¼š<br><code>cat old_file.json | jq &gt; new_file.json</code>å°†<code>old_file.json</code>æ ¼å¼åŒ–å¹¶ç”Ÿæˆä¸€ä¸ªæ–°æ–‡ä»¶<code>new_file.json</code></p><p>æ‰¾åˆ°è®°ä¸èµ·æ¥ipçš„æœåŠ¡å™¨ï¼š<br><code>history | grep ssh</code>å°†ä½ çš„å‘½ä»¤è¡Œå†å²ä¸­æ‰€æœ‰åŒ…å«sshçš„æ‰¾å‡ºæ¥</p><p>æŸ¥æ‰¾ä¸€äº›è¿›ç¨‹ï¼š<br><code>ps aux | grep java</code>æŸ¥æ‰¾ä½ çš„javaè¿›ç¨‹</p><p>ç»™æ–‡ä»¶è¡Œæ’åºï¼š<br><code>cat student.txt | sort &gt; new_student.txt</code>ç»™ä¸€ä¸ªåä¸ºstudent.txtçš„æ–‡ä»¶æ’åºå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„</p><p>å‡è£…æ¨¡ç³Šæœç´¢ï¼š<br><code>find . | grep xxx | grep yyy | grep zzz</code>ä½ å¿˜äº†æ–‡ä»¶åœ¨å“ªï¼Œæ–‡ä»¶åä¹Ÿè®°ä¸å…¨ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼ã€‚åœ¨æ¯ç›®å½•æ‰§è¡Œï¼Œç›¸å½“äºæ‰¾åˆ°æ‰€æœ‰å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸­åŒæ—¶åŒ…å«<code>xxx</code>å’Œ<code>yyy</code>å’Œ<code>zzz</code>çš„</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨noseä¸mockå¯¹Pythonç¨‹åºè¿›è¡Œç®€å•çš„å•å…ƒæµ‹è¯•</title>
      <link href="/2018/11/03/python-unittest/"/>
      <url>/2018/11/03/python-unittest/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-install"><a href="#0X00-install" class="headerlink" title="0X00 install"></a>0X00 install</h1><p>å®‰è£…noseï¼š<code>pip install nose</code><br>å®‰è£…mockï¼š<code>pip install mock</code></p><blockquote><p>Python3 ä¸­mockæ¨¡å—å·²æˆä¸ºæ ‡å‡†åº“ï¼Œæ— éœ€å•å®‰è£…</p></blockquote><p>åœ¨ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œ<code>nosetests</code>çœ‹åˆ°æœ‰è¾“å‡ºå°±æ˜¯å·²ç»å®‰è£…å¥½äº†<code>nose</code>ã€‚è¿›å…¥åˆ°<code>Python shell</code>ä¸­æ‰§è¡Œ<code>import mock</code>æ²¡æœ‰æŠ¥é”™ä¹Ÿå°±æ˜¯<code>mock</code>å®‰è£…å¥½äº†ã€‚</p><h1 id="0X01-ç”¨äºæµ‹è¯•çš„ä»£ç "><a href="#0X01-ç”¨äºæµ‹è¯•çš„ä»£ç " class="headerlink" title="0X01 ç”¨äºæµ‹è¯•çš„ä»£ç "></a>0X01 ç”¨äºæµ‹è¯•çš„ä»£ç </h1><p>è¿™é‡Œå…ˆè´´å‡ºè¿™æ¬¡è¢«æµ‹çš„ä»£ç <code>simple_math.py</code>ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ•°å­—è®¡ç®—ç±»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyMath</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_add</span><span class="params">(self, a, b)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_subtraction</span><span class="params">(self, a, b)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> a <span class="keyword">and</span> b:</span><br><span class="line">            <span class="keyword">return</span> a - b</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ¯•ç«Ÿæ˜¯è¦æ‹¿æ¥ä½œä¸ºå•å…ƒæµ‹è¯•çš„æ ·ä¾‹çš„å˜›ã€‚</p></blockquote><a id="more"></a><h1 id="0X02-ç¼–å†™å•å…ƒæµ‹è¯•"><a href="#0X02-ç¼–å†™å•å…ƒæµ‹è¯•" class="headerlink" title="0X02 ç¼–å†™å•å…ƒæµ‹è¯•"></a>0X02 ç¼–å†™å•å…ƒæµ‹è¯•</h1><p>æˆ‘ä»¬è¦é’ˆå¯¹ä¸Šè¿°æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„<code>test.py</code>æ¥æµ‹è¯•å…¶ä¸­çš„<code>MyMath</code>ç±»ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> simple_math <span class="keyword">import</span> MyMath</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mt = MyMath()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_add</span><span class="params">()</span>:</span></span><br><span class="line">    res = mt.my_add(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">assert</span> res == <span class="number">8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_001</span><span class="params">()</span>:</span></span><br><span class="line">    res = mt.my_subtraction(<span class="number">233</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">assert</span> res == <span class="number">233</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_002</span><span class="params">()</span>:</span></span><br><span class="line">    res = mt.my_subtraction(<span class="number">233</span>, <span class="number">11</span>)</span><br><span class="line">    <span class="keyword">assert</span> res == <span class="number">222</span></span><br></pre></td></tr></table></figure></p><p>ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°é¦–å…ˆå¯¼å…¥äº†éœ€è¦æµ‹è¯•çš„ç±»<code>MyMath</code>ï¼Œç„¶åå°±å†™äº†å‡ ä¸ª<code>test_</code>å¼€å¤´çš„æ–¹æ³•ï¼Œæ–¹æ³•å†…éƒ¨æ˜¯æ¨¡æ‹Ÿè°ƒç”¨<code>MyMath</code>ä¸­çš„æ–¹æ³•ï¼Œå¹¶å°†å¾—åˆ°çš„ç»“æœä¸é¢„æœŸç»“æœç›¸äº’åŒ¹é…ï¼Œæœ€ç»ˆä½¿ç”¨<code>assert</code>è¯­æ³•æ¥åˆ¤æ–­æ˜¯å¦è¿”å›äº†ç†æƒ³çš„å€¼ã€‚æµ‹è¯•ä»£ç å†™å¥½ä¹‹ååœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œ<code>nosetest -v</code>æ¥è¿è¡Œæˆ‘ä»¬çš„å•å…ƒæµ‹è¯•å§ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">test.test_add ... ok</span><br><span class="line">test.test_subtraction_001 ... FAIL</span><br><span class="line">test.test_subtraction_002 ... ok</span><br><span class="line"></span><br><span class="line">======================================================================</span><br><span class="line">FAIL: test.test_subtraction_001</span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;/usr/lib/python2.7/site-packages/nose/case.py&quot;, line 197, in runTest</span><br><span class="line">    self.test(*self.arg)</span><br><span class="line">  File &quot;/home/shawn/Workstadion/utils_test/test.py&quot;, line 17, in test_subtraction_001</span><br><span class="line">    assert res == 233</span><br><span class="line">AssertionError</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line">Ran 3 tests in 0.002s</span><br><span class="line"></span><br><span class="line">FAILED (failures=1)</span><br></pre></td></tr></table></figure><h1 id="0X003-ç®€å•è§£é‡Šä¸€ä¸‹"><a href="#0X003-ç®€å•è§£é‡Šä¸€ä¸‹" class="headerlink" title="0X003 ç®€å•è§£é‡Šä¸€ä¸‹"></a>0X003 ç®€å•è§£é‡Šä¸€ä¸‹</h1><p>ä¸Šé¢çš„æµ‹è¯•å°±æ‰§è¡Œå®Œäº†ï¼Œé‚£æˆ‘ä»¬æ¥æ‹†åˆ†ä¸€ä¸‹è¿™ä¸ªå•å…ƒæµ‹è¯•çš„æµç¨‹å§ã€‚</p><ol><li>é¦–å…ˆæˆ‘ä»¬æ‰§è¡Œäº†<code>nosetest -v</code>å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å°±æ˜¯å¼€å§‹è¿›è¡Œå•å…ƒæµ‹è¯•çš„ï¼Œå…¶ä¸­<code>-v</code>å‚æ•°æ˜¯ç”¨æ¥å±•ç¤ºæ›´åŠ ä¸°å¯Œçš„è¾“å‡ºçš„ï¼Œå¦‚æœä¸åŠ è¿™ä¸ªå‚æ•°çš„è¯è¿è¡Œç»“æœä¼šæ›´æ¸…çˆ½ä¸€äº›</li><li>æ‰§è¡Œå‘½ä»¤ä¹‹ånoseä¼šè‡ªå·±æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹åä¸º<code>test.py</code>æˆ–å…¶ä»–ä»¥<code>test_</code>å¼€å¤´çš„pythonæ–‡ä»¶ï¼Œå¹¶ä¸”æ‰§è¡Œè¿™äº›æ–‡ä»¶ä¸­ç¼–å†™å¥½çš„ä»¥<code>test_</code>å¼€å¤´çš„æ–¹æ³•ï¼ˆå°±æ¯”å¦‚æˆ‘ä»¬ä»£ç ä¸­çš„<code>test_add/test_subtraction</code>ï¼‰</li><li>é€ä¸ªæ‰§è¡Œä¸Šé¢æ‰¾åˆ°çš„æ–¹æ³•</li><li>è¾“å‡ºæœ€åç»“æœ</li></ol><p>å¦‚æœåœ¨æ‰§è¡Œå•ä¸ª<code>test_xxx</code>æ–¹æ³•çš„æ—¶å€™æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªæµ‹è¯•(test case)æ˜¯é€šè¿‡äº†çš„ï¼Œå¦‚æœæŠ›å‡ºäº†å¼‚å¸¸åˆ™è®¤ä¸ºæ­¤å¤„çš„æµ‹è¯•ä¸èƒ½é€šè¿‡ã€‚ä½†æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­æœ‰ä¸€ç‚¹ä¸æ™®é€šPythonç¨‹åºä¸åŒï¼Œæ™®é€šPythonç¨‹åºé‡åˆ°æŠ›å‡ºçš„å¼‚å¸¸æ—¶å°±ä¼šå±‚å±‚ä¸ŠæŠ›ï¼Œè€Œè¿™é‡Œä¼šæ”¶é›†å±•ç¤ºå‡ºæ¥ï¼Œç„¶åç»§ç»­è¿è¡Œä¸‹é¢çš„æµ‹è¯•ã€‚</p><h1 id="0X04-æ¢ä¸€ä¸ªå§¿åŠ¿å†™æµ‹è¯•"><a href="#0X04-æ¢ä¸€ä¸ªå§¿åŠ¿å†™æµ‹è¯•" class="headerlink" title="0X04 æ¢ä¸€ä¸ªå§¿åŠ¿å†™æµ‹è¯•"></a>0X04 æ¢ä¸€ä¸ªå§¿åŠ¿å†™æµ‹è¯•</h1><p>è¿˜æ˜¯ä¸Šé¢çš„è¢«æµ‹ä»£ç ï¼Œè¿™æ¬¡ä¸æ˜¯å•çº¯ä½¿ç”¨å¤šä¸ªæ–¹æ³•æ¥å®Œæˆæµ‹è¯•äº†ã€‚é¢å‘å¯¹è±¡çš„æ€æƒ³ä¹Ÿå¯ä»¥å¯¹åº”çš„æ”¾åˆ°å•å…ƒæµ‹è¯•ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬é’ˆå¯¹<code>MyMath</code>ç±»æä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•å†…å®¹ä¹Ÿæ•´ç†ä¸ºä¸€ä¸ªç±»ï¼Œä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯<strong>è¿™é‡Œçš„ç±»åä¸€å®šè¦ä¸º<code>TestClass</code></strong>å¦åˆ™æ˜¯è¿è¡Œä¸åˆ°çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> simple_math <span class="keyword">import</span> MyMath</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add</span><span class="params">(self)</span>:</span></span><br><span class="line">        mt = MyMath()</span><br><span class="line">        res = mt.my_add(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">8</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_001</span><span class="params">(self)</span>:</span></span><br><span class="line">        mt = MyMath()</span><br><span class="line">        res = mt.my_subtraction(<span class="number">233</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">233</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_002</span><span class="params">(self)</span>:</span></span><br><span class="line">        mt = MyMath()</span><br><span class="line">        res = mt.my_subtraction(<span class="number">233</span>, <span class="number">11</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">222</span></span><br></pre></td></tr></table></figure><h1 id="0X05-setupä¸teardownæ–¹æ³•"><a href="#0X05-setupä¸teardownæ–¹æ³•" class="headerlink" title="0X05 setupä¸teardownæ–¹æ³•"></a>0X05 setupä¸teardownæ–¹æ³•</h1><p>ä¸Šé¢çš„æµ‹è¯•ä¸­æˆ‘ä»¬æ¯ä¸€ä¸ªtest_caseä¸­éƒ½æœ‰ä¸€è¡Œ<code>mt = MyMath()</code>æ˜¯ä¸æ˜¯æ„Ÿè§‰æœ‰äº›è ¢ï¼Œå…¶å®æ˜¯å¯ä»¥é¿å…è¿™ä¸ªæ–¹æ³•çš„ã€‚å®šä¹‰ä¸¤ä¸ªæ–¹æ³•<code>setup/teardown</code>ï¼Œè¿™äº›æ–¹æ³•åœ¨æ¯æ‰§è¡Œä¸€ä¸ªtestcaseçš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œï¼Œä¸åŒçš„æ˜¯<code>setup</code>æ‰§è¡Œåœ¨testcaseä¹‹å‰ï¼Œè€Œ<code>teardown</code>æ‰§è¡Œåœ¨testcaseä¹‹åã€‚ä¸‹é¢ä¾‹å­ä¸­å°±æ˜¯è¿™æ ·çš„ï¼Œæ¯æ¬¡ä½¿ç”¨<code>mt</code>å¯¹è±¡æ—¶éƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ï¼Œç”¨å®Œå†åˆ æ‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> simple_math <span class="keyword">import</span> MyMath</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.mt = MyMath()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teardown</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.mt = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_add</span><span class="params">(self)</span>:</span></span><br><span class="line">        res = self.mt.my_add(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">8</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_001</span><span class="params">(self)</span>:</span></span><br><span class="line">        res = self.mt.my_subtraction(<span class="number">233</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">233</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_subtraction_002</span><span class="params">(self)</span>:</span></span><br><span class="line">        res = self.mt.my_subtraction(<span class="number">233</span>, <span class="number">11</span>)</span><br><span class="line">        <span class="keyword">assert</span> res == <span class="number">222</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ä¸Šé¢çš„<code>mt</code>å¯¹è±¡æ²¡æœ‰å¿…è¦æ¯æ¬¡ç”Ÿæˆæ–°çš„ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹å…¶å®æ˜¯éœ€è¦æˆ‘ä»¬è¿™ä¹ˆåšçš„ã€‚è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼šæœ‰ä¸€ä¸ª<code>class Student</code>éœ€è¦æµ‹è¯•ï¼Œè€Œä¸”å¾…æµ‹æ–¹æ³•æœ‰éå¸¸éå¸¸å¤šï¼Œä¸ä»…ä¼šè®¡ç®—Studentå®ä¾‹çš„å„ä¸ªå±æ€§ï¼Œè¿˜è¦å¯¹å…¶è¿›è¡Œæ›´æ–°ã€æ·»åŠ ã€åˆ é™¤ç­‰æ“ä½œã€‚é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹æ¯æ¬¡æ“ä½œéƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„Studentå®ä¾‹å¹¶ä¸”åœ¨testcaseç»“æŸä¹‹ååˆ æ‰å®ƒå°±æ˜¯éå¸¸æœ‰å¿…è¦çš„äº†ã€‚</p><blockquote><p>å› ä¸ºæˆ‘ä»¬ä¸èƒ½ä¿è¯æ¯ä¸ªæ–¹æ³•çš„å¹‚ç­‰æ€§ï¼Œæ¯”å¦‚ä¸‡ä¸€è¿™ä¸ªStudentæ˜¯ç”·çš„ï¼Œä½ åœ¨æµ‹è¯•äº†<code>student.change_sex()</code>æ–¹æ³•ä¹‹åæ˜¾ç„¶ä»–å°±ä¸å†æ˜¯ç”·çš„äº†ã€‚é‚£æ¥ä¸‹æ¥å†æµ‹è¯•ä¸€äº›ä¾èµ–ä¸æ€§åˆ«çš„åœ°æ–¹æ—¶å°±ä¼šå‡ºé—®é¢˜ï¼Œæ¯”å¦‚<code>get_gender()</code>æ–¹æ³•ä½ å¾ˆæœ‰å¯èƒ½ä¼šå†™<code>assert student.get_gender() == &quot;Male&quot;</code>ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±å‡ºé”™äº†ã€‚</p></blockquote><h1 id="0X06-æ¨¡æ‹Ÿä¸€äº›å¯¹è±¡"><a href="#0X06-æ¨¡æ‹Ÿä¸€äº›å¯¹è±¡" class="headerlink" title="0X06 æ¨¡æ‹Ÿä¸€äº›å¯¹è±¡"></a>0X06 æ¨¡æ‹Ÿä¸€äº›å¯¹è±¡</h1><p>å¯¹ï¼Œä½ æ²¡æœ‰å¯¹è±¡çš„æ—¶å€™å¯ä»¥æ¨¡æ‹Ÿå¯¹è±¡å‡ºæ¥(hhhã€‚</p><p>è¿˜æ˜¯ï¼Œé¦–å…ˆæœ‰ä¸€ä¸ªåœºæ™¯ï¼šå·¥ä½œä¸­ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œè¢«æµ‹åŠŸèƒ½ç®€å•è¯´æ˜¯â€œä»æŸä¸€æ¥å£æ‹¿åˆ°æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†â€ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å†™æˆè¿™ä¹ˆä¸€ä¸ªæ“ä½œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_operation_data_from_api</span><span class="params">(parms)</span>:</span></span><br><span class="line">    response = get_data_from_api(parms)</span><br><span class="line">    op_result = operation_data(</span><br><span class="line">        id=response.id,</span><br><span class="line">        order_type=response.order_type,</span><br><span class="line">        administrator_name=response.administrator_name,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">assert</span> op_result.status == <span class="string">'success'</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çœ‹èµ·æ¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœ<code>get_data_from_api</code>è°ƒç”¨çš„APIæ˜¯æ”¶è´¹APIå‘¢ï¼Œæ¯æ¬¡è·‘å•å…ƒæµ‹è¯•éƒ½è¦å»è¯·æ±‚ä¸€æ¬¡å—ï¼Ÿå¦‚æœAPIå·¨æ…¢æ— æ¯”ï¼Œæ¯æ¬¡éƒ½è¦å‡ ç§’é’Ÿæ‰å›å¾—æ¥ï¼Œæ‰€æœ‰æµ‹è¯•æœ‰éœ€è¦è°ƒç”¨ä¸Šç™¾æ¬¡è¿™ä¸ªæ¥å£å‘¢ï¼Œæˆ‘ä»¬å°±å¹²ç­‰ç€å—ï¼Ÿè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨æœ€åˆæåˆ°çš„<code>mock</code>æ¥æ¨¡æ‹Ÿæ•°æ®ä»è€Œè§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mock</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_operation_data_from_api</span><span class="params">(parms)</span>:</span></span><br><span class="line">    response = mock.Mock(   <span class="comment"># Mockå¯ä»¥æ¨¡æ‹Ÿå‡ ä¹æ‰€æœ‰å¯¹è±¡ã€æ–¹æ³•ç­‰</span></span><br><span class="line">        id=<span class="number">3</span>,</span><br><span class="line">        order_type=<span class="string">'cpu'</span>,</span><br><span class="line">        administrator_name=<span class="string">'root'</span></span><br><span class="line">    )</span><br><span class="line">    op_result = operation_data(</span><br><span class="line">        id=response.id,</span><br><span class="line">        order_type=response.order_type,</span><br><span class="line">        administrator_name=response.administrator_name,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">assert</span> op_result.status == <span class="string">'success'</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡å¯¹responseçš„æ¨¡æ‹Ÿï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸ç”¨çœŸæ­£å»è¯·æ±‚APIå°±èƒ½ç»§ç»­æµ‹è¯•çš„æ–¹æ³•ã€‚å› ä¸ºæˆ‘ä»¬è¿™é‡Œç¼–å†™æµ‹è¯•çš„ç›®çš„æ˜¯æ­£ç¡®å¤„ç†responseæ‰€ä»¥å¯ä»¥æ¨¡æ‹Ÿresponseã€‚å¦‚æœæˆ‘ä»¬çš„ç›®çš„æ˜¯æµ‹è¯•<code>get_data_from_api()</code>è¿™ä¸ªæ–¹æ³•çš„è¯é‚£å°±ä¸èƒ½æƒ³è¿™æ ·æ¨¡æ‹Ÿäº†ã€‚</p><h1 id="0X07-Mockæ¨¡æ‹Ÿå…¶ä»–ä¸œè¥¿"><a href="#0X07-Mockæ¨¡æ‹Ÿå…¶ä»–ä¸œè¥¿" class="headerlink" title="0X07 Mockæ¨¡æ‹Ÿå…¶ä»–ä¸œè¥¿"></a>0X07 Mockæ¨¡æ‹Ÿå…¶ä»–ä¸œè¥¿</h1><p>mockå¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªå±æ€§ï¼Œå¤šå±‚å±æ€§è¿˜èƒ½æ¨¡æ‹Ÿæ–¹æ³•ã€‚æ¨¡æ‹Ÿå¤šä¸ªå±æ€§ä¸æ¨¡æ‹Ÿä¸€ä¸ªå±æ€§æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦ä¸€è·¯<code>.</code>ä¸‹å»å°±å¯ä»¥ã€‚ä¸­é€”é‡åˆ°æ²¡æœ‰è‡ªå·±å®šä¹‰è¿‡çš„ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª<code>mock.Mock()</code>æ”¾è¿›å»ã€‚æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯æ¨¡æ‹Ÿæ–¹æ³•ï¼Œä½¿ç”¨<code>Mock.method_name.return_value</code>å°±å¯ä»¥æ¨¡æ‹Ÿ<code>method_name</code>æ–¹æ³•ï¼Œå¹¶ä¸”<code>return_value</code>å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿä¸€ä¸ªå±æ€§</span></span><br><span class="line">    mk = mock.Mock()</span><br><span class="line">    mk.name = <span class="number">233</span></span><br><span class="line">    <span class="keyword">print</span> mk.name</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿå¤šå±‚å±æ€§</span></span><br><span class="line">    mk = mock.Mock()</span><br><span class="line">    mk.base_attribute.name = <span class="string">'Shawn'</span></span><br><span class="line">    <span class="keyword">print</span> mk.base_attribute.name</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">    mk = mock.Mock()</span><br><span class="line">    mk.get_data_from_api.return_value = &#123;<span class="string">'data'</span>: []&#125;</span><br><span class="line">    <span class="keyword">print</span> mk.get_data_from_api()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Mock </tag>
            
            <tag> nose </tag>
            
            <tag> unittest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST frameworkä¸­ä¸é‚£ä¹ˆå¸¸ç”¨çš„Fields</title>
      <link href="/2018/10/13/drf-fields/"/>
      <url>/2018/10/13/drf-fields/</url>
      
        <content type="html"><![CDATA[<p>å¹³æ—¶ä½¿ç”¨Django REST frameworkçš„æ—¶å€™é™¤äº†å¸¸ç”¨çš„å‡ ä¸ªå­—æ®µç±»å‹ä¹‹å¤–å…¶å®æ²¡æœ‰å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„äº†ï¼Œä¸è¿‡äº†è§£ä¸€ä¸‹è¿™äº›ã€Œéå¿…éœ€ã€çš„å­—æ®µèƒ½ç»™æ—¥å¸¸çš„ç¼–ç¨‹ä»»åŠ¡å¸¦æ¥å¤§å¹…åº¦çš„æ•ˆç‡æå‡å‘¢ã€‚</p><h1 id="0X00-EmailField"><a href="#0X00-EmailField" class="headerlink" title="0X00 EmailField"></a>0X00 EmailField</h1><p>é¦–å…ˆæ˜¯<code>EmailField</code>ï¼Œè¿™ä¸ªå­—æ®µæœ¬è´¨ä¸Šæ˜¯<code>CharField</code>ä½†æ˜¯å•çº¯çš„æ·»åŠ äº†ä¸€ä¸ªå®Œå–„çš„æ ¡éªŒï¼Œå¯ä»¥å…å»æˆ‘ä»¬æ‰‹å·¥ç¼–å†™æ­£åˆ™å’Œå¯¹åº”æŠ¥é”™ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œç®€å•åœ°å®šä¹‰ä¹‹åå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_email = EmailFIeld(</span><br><span class="line">  min_length=<span class="number">5</span>,</span><br><span class="line">  max_length=<span class="number">30</span>,</span><br><span class="line">  allow_blank=<span class="literal">False</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X01-URLField"><a href="#0X01-URLField" class="headerlink" title="0X01 URLField"></a>0X01 URLField</h1><p>è¿™é‡Œçš„<code>URLField</code>è·Ÿä¸Šé¢çš„<code>EmailField</code>ç±»ä¼¼ï¼Œåœ¨<code>CharField</code>çš„æœ¬è´¨ä¸Šæ·»åŠ äº†å¯¹åº”çš„æ ¡éªŒï¼Œä½¿ç”¨æ—¶ä¼šæ ¡éªŒè¯¥å­—æ®µæ˜¯å¦ç¬¦åˆurlçš„æ ¡éªŒè§„åˆ™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">article_url = URLField(</span><br><span class="line">  min_length=<span class="number">10</span>,</span><br><span class="line">  max_length=<span class="number">100</span>,</span><br><span class="line">  allow_blank=<span class="literal">False</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="0X02-IPAddressField"><a href="#0X02-IPAddressField" class="headerlink" title="0X02 IPAddressField"></a>0X02 IPAddressField</h1><p><code>IPAddressField</code>ä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªæ˜¯åœ¨<code>CharField</code>ä¸Šæ·»åŠ æ ¡éªŒã€‚ä¸è¿‡æœ‰ä¸€ä¸ªé’ˆå¯¹ipçš„å‚æ•°<code>protocol</code>ï¼Œé¡¾åæ€ä¹‰ï¼Œå¯ä»¥è®¾å®šæ ¡éªŒä¸åŒç‰ˆæœ¬çš„ipåœ°å€ã€‚<code>protocol</code>å‚æ•°çš„å€¼ä»è¿™ä¸‰ä¸ªä¸­é€‰ä¸€ä¸ª<code>both/IPv4/IPv6</code>ï¼Œå…¶ä¸­é»˜è®¤é€‰æ‹©çš„æ˜¯<code>both</code>ï¼Œä¹Ÿå°±æ˜¯è¯´åŒæ—¶ä¼šæ¥å—IPv4å’ŒIPv6ä¸¤ç§åœ°å€ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">source_ip4 = IPAddressField(</span><br><span class="line">  required=<span class="literal">True</span>,</span><br><span class="line">  protocol=<span class="string">'IPv4'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">source_ip6 = IPAddressField(</span><br><span class="line">  required=<span class="literal">True</span>,</span><br><span class="line">  protocol=<span class="string">'IPv6'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X03-DecimalField-å¸¦æœ‰ç²¾åº¦çš„"><a href="#0X03-DecimalField-å¸¦æœ‰ç²¾åº¦çš„" class="headerlink" title="0X03 DecimalField  å¸¦æœ‰ç²¾åº¦çš„"></a>0X03 DecimalField  å¸¦æœ‰ç²¾åº¦çš„</h1><p>ä¸<code>FloatField</code>ä¸åŒçš„æ˜¯ï¼Œ<code>DecimalField</code>ä¼šæ ¡éªŒå°æ•°ç‚¹ä½æ•°ï¼Œä¸¤ä¸ªé‡è¦å‚æ•°ï¼š<code>max_digits</code>æ•°å­—æ€»é•¿åº¦(ä¸å«å°æ•°ç‚¹)ï¼Œ<code>decimal_places</code>å°æ•°ç‚¹åå‡ ä½ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸å«å°æ•°ç‚¹æœ€é•¿5ä½ï¼Œç²¾ç¡®åˆ°2ä½å°æ•°ï¼›ä¹Ÿå°±æ˜¯è¯´æœ€å¤§ä¸º999.99</span></span><br><span class="line">num_a = DecimalField(</span><br><span class="line">  max_digits=<span class="number">5</span>,</span><br><span class="line">  decimal_places=<span class="number">2</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸å«å°æ•°ç‚¹æœ€é•¿7ä½ï¼Œç²¾ç¡®åˆ°3ä½å°æ•°ï¼›ä¹Ÿå°±æ˜¯è¯´æœ€å¤§ä¸º9999.999</span></span><br><span class="line">num_b = DecimalField(</span><br><span class="line">  max_digits=<span class="number">7</span>,</span><br><span class="line">  decimal_places=<span class="number">3</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X04-DurationField"><a href="#0X04-DurationField" class="headerlink" title="0X04 DurationField"></a>0X04 DurationField</h1><p>å…³äºæ—¶é—´çš„å­—æ®µç”¨çš„æœ€å¤šçš„å°±æ˜¯<code>DateTimeField/DateField/TimeField</code>äº†ï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯æ—¶é—´ç‚¹ï¼Œè€Œ<code>DurationField</code>æ˜¯æ—¶é—´æ®µï¼Œå°±åƒPythonä¸­<code>datetime.timedelta</code>ä¸€æ ·ï¼Œä½¿ç”¨çš„æ˜¯<code>[DD] [HH:[MM:]]ss[.uuuuuu]</code>æ ¼å¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">work_duration = DurationField(</span><br><span class="line">  min_value=datetime.timedelta(days=<span class="number">12</span>, hours=<span class="number">10</span>, minutes=<span class="number">32</span>, seconds=<span class="number">4</span>, microseconds=<span class="number">3</span>),</span><br><span class="line">  max_value=datetime.timedelta(days=<span class="number">10</span>, hours=<span class="number">1</span>, minutes=<span class="number">2</span>, seconds=<span class="number">4</span>, microseconds=<span class="number">3</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X05-ListField"><a href="#0X05-ListField" class="headerlink" title="0X05 ListField"></a>0X05 ListField</h1><p>åˆ—è¡¨ç±»å‹ï¼Œè‡ªèº«æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œéœ€è¦å•ç‹¬æŒ‡å®š<code>child</code>çš„ç±»å‹ã€‚create/updateçš„æ—¶å€™éœ€è¦æä¾›ç±»ä¼¼è¿™æ ·çš„å‚æ•°<code>name_list = [&#39;shawn&#39;, &#39;nwahs&#39;, &#39;shanw&#39;, &#39;sahwn&#39;]</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">email_list = ListField(</span><br><span class="line">  min_length=<span class="number">3</span>,         <span class="comment"># åˆ—è¡¨æœ€å°‘æœ‰3ä¸ªå…ƒç´ </span></span><br><span class="line">  max_length=<span class="number">100</span>,       <span class="comment"># åˆ—è¡¨æœ€å¤šæœ‰100ä¸ªå…ƒç´ </span></span><br><span class="line">  child=EmailField(     <span class="comment"># åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ºEmailField</span></span><br><span class="line">    min_length=<span class="number">5</span>,</span><br><span class="line">    max_length=<span class="number">30</span>,</span><br><span class="line">    allow_blank=<span class="literal">False</span>,</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X06-DictField"><a href="#0X06-DictField" class="headerlink" title="0X06 DictField"></a>0X06 DictField</h1><p>ä¸<code>ListField</code>å¾ˆç±»ä¼¼ï¼Œ<code>DictField</code>ä¹Ÿéœ€è¦å•ç‹¬æŒ‡å®š<code>child</code>çš„ç±»å‹ï¼Œè¿™é‡Œçš„childæŒ‡çš„æ˜¯dictçš„valueï¼Œè€Œkeyåˆ™é»˜è®¤ä¸ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">email_list = DictField(</span><br><span class="line">  child=EmailField(     <span class="comment"># dictä¸­çš„å…ƒç´ ä¸ºEmailField</span></span><br><span class="line">    min_length=<span class="number">5</span>,</span><br><span class="line">    max_length=<span class="number">30</span>,</span><br><span class="line">    allow_blank=<span class="literal">False</span>,</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="0X07-HiddenField"><a href="#0X07-HiddenField" class="headerlink" title="0X07 HiddenField"></a>0X07 HiddenField</h1><p>æœ‰äº›å­—æ®µéœ€è¦ç”¨ï¼Œä½†æ˜¯åˆä¸éœ€è¦ç”¨æˆ·æä¾›ï¼Œæ¯”å¦‚è¯´æŸæ¡æ•°æ®çš„æ›´æ–°æ—¶é—´åº”è¯¥åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œè€Œéç”¨æˆ·ä¼ é€’çš„å€¼ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ª<code>HiddenField</code><br>å­—æ®µã€‚è¿™ä¸ªå­—æ®µå¯¹ç”¨æˆ·æ¥è¯´æ˜¯éšå½¢çš„ï¼Œåªéœ€è¦è‡ªå·±åœ¨serializerä¸­è®¾å®šå¥½å°±å¯ä»¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update_time = HiddenField(default=datetime.datetime.now())</span><br></pre></td></tr></table></figure><blockquote><p>å…³äºDjango REST frameworkä¸­Serializer fieldsæ›´å¤šçš„å†…å®¹å¯ä»¥å‚è€ƒ<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy9hcGktZ3VpZGUvZmllbGRzLyNzZXJpYWxpemVyLWZpZWxkcw==" title="https://www.django-rest-framework.org/api-guide/fields/#serializer-fields">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST framework </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŒåœºæ–°äººåŸ¹è®­æ€»ç»“</title>
      <link href="/2018/09/19/ks-course/"/>
      <url>/2018/09/19/ks-course/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šå‘¨å‚ä¸äº†å…¬å¸ä¸¾åŠçš„é’ˆå¯¹åº”å±Šæ¯•ä¸šç”Ÿå‘˜å·¥çš„ä¸€æ¬¡åŸ¹è®­è¯¾ç¨‹ï¼Œè®²åˆ°äº†èŒåœºæ–°äººéœ€è¦æ³¨æ„çš„ä¸€äº›é—®é¢˜ã€‚æ¯ä¸ªäººçš„æ”¶è·éƒ½æ˜¯ä¸åŒçš„ï¼Œé’ˆå¯¹æˆ‘è‡ªå·±è®¤ä¸ºçš„é‡ç‚¹æ€»ç»“ä¸€ä¸‹ä¹Ÿç®—æ˜¯ç»™ä¸¤å¤©çš„æ—¶é—´ä¸€ä¸ªäº¤ä»£ã€‚</p><h1 id="0X00-åŒç†å¿ƒä¸åŒæƒ…å¿ƒ"><a href="#0X00-åŒç†å¿ƒä¸åŒæƒ…å¿ƒ" class="headerlink" title="0X00 åŒç†å¿ƒä¸åŒæƒ…å¿ƒ"></a>0X00 åŒç†å¿ƒä¸åŒæƒ…å¿ƒ</h1><p>åŒæƒ…å¿ƒå’ŒåŒç†å¿ƒæˆ‘ä»¬å¤§å®¶å¤šå°‘éƒ½ä¼šå¬è¿‡ï¼Œä¸è¿‡å¤šæ•°äººå¯èƒ½éƒ½ä¼šåƒæˆ‘ä¸€æ ·æ²¡æœ‰æ€è€ƒè¿‡å…¶ä¸­çš„åŒºåˆ«ã€‚å…¶å®åŒæƒ…å¿ƒå¤§å®¶éƒ½ä¼šæœ‰ï¼Œæ¯”å¦‚ä½ çœ‹åˆ°ä¸€ä¸ªäººæµç¦»å¤±æ‰€ï¼Œè¢«å®¶äººæœ‹å‹æŠ›å¼ƒï¼Œèº«ä¸Šç ´ç ´çƒ‚çƒ‚è¹²åœ¨é©¬è·¯è¾¹ä¹è®¨ï¼Œå¤šå°‘éƒ½ä¼šæœ‰äº›åŒæƒ…ä»–ï¼Œæ¯”å¦‚ç»™ä»–ä¸€äº›é›¶é’±ä¹‹ç±»çš„ã€‚è¿™èƒ½å¤Ÿç®—æ˜¯åŒæƒ…å¿ƒï¼Œä½†æ˜¯åŒæƒ…å¿ƒå¹¶ä¸æ˜¯å¸®åŠ©åˆ«äººçš„è‰¯å¥½æ–¹æ¡ˆã€‚æˆ‘ä»¬å¤äººå°±æœ‰â€œå—Ÿæ¥ä¹‹é£Ÿâ€ä¹‹è¯´ï¼šä¸€ä½ä¹è®¨çš„äººåœ¨é¢å¯¹åˆ«äººç”¨è„šè¸¢æ¥çš„é£Ÿç‰©æ—¶å®å¯é¥¿æ­»ä¹Ÿä¸ä¼šåƒä¸€å£ã€‚æˆ‘ä»¬ä¹Ÿéƒ½çŸ¥é“æ—¢ç„¶è¦ç»™åˆ«äººé£Ÿç‰©å°±ä¸åº”è¯¥ç”¨è„šè¸¢è¿‡å»ã€‚æ‰€ä»¥è¿™ä¸ªæä¾›é£Ÿç‰©çš„äººæ˜¯å…·æœ‰åŒæƒ…å¿ƒçš„ï¼Œä½†æ˜¯ä¸å…·æœ‰åŒç†å¿ƒã€‚åŒç†å¿ƒå¼ºè°ƒâ€œæ„ŸåŒèº«å—â€ï¼Œè¿™ä¸æ˜¯éšéšä¾¿ä¾¿å°±èƒ½åšåˆ°çš„ã€‚</p><p>å…·æœ‰åŒç†å¿ƒçš„äººè‚¯å®šä¸ä¼šç”¨è„šè¸¢è¿‡å»ï¼Œå¯èƒ½ä¼šå¸¦ç€é£Ÿç‰©è¿‡å»ä»–æ—è¾¹èŠèµ·å¤©æ¥ã€‚è¯´ä¸€è¯´è‡ªå·±ä»¥å‰çª˜å›°çš„æ—¶å€™ä¹Ÿæ˜¯é¥¥ä¸æ‹©é£Ÿï¼ŒçœŸåˆ‡çš„ä½“ä¼šä»–æ­¤æ—¶çš„ç—›è‹¦ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¤§å®¶æ‰èƒ½äº’ç›¸å¦è¯šçš„äº¤æµã€‚</p><p>åŒäº‹ä¹‹é—´ç›¸å¤„ä¹Ÿæ˜¯è¿™æ ·ï¼Œä¸€å¤©ä½ çš„åŒäº‹è¯´æœ€è¿‘å·¥ä½œä¸é¡ºåˆ©ç”Ÿæ´»ä¹Ÿä¸å¦‚æ„è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœä½ å†²ä¸Šå»è¯´â€œäººç”Ÿä¸å¦‚æ„åæœ‰å…«ä¹ï¼Œæ—©æ™šéƒ½ä¼šè¿‡å»çš„â€ã€‚å¬èµ·æ¥æ˜¯åœ¨å®‰æ…°ä»–ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰ç”¨ï¼Œç”šè‡³è¿˜ä¼šè®©ä»–å˜å¾—æ›´ä¸§æ›´ä¸å¼€å¿ƒã€‚å¦‚æœä½ èƒ½ååœ¨ä»–æ—è¾¹åˆ†äº«åˆ†äº«è‡ªå·±å·¥ä½œä¸é¡ºåˆ©çš„æ—¶å€™ï¼Œå†è¯¢é—®ä¸€ä¸‹ä»–çš„å…·ä½“æƒ…å†µï¼Œæœ€åå†ç»“åˆè‡ªå·±ä»¥å‰çš„ç»å†ç»™æä¾›ä¸€äº›å¥½çš„å»ºè®®ï¼Œä»–ä¸€å®šä¼šå¥½èµ·æ¥çš„ã€‚</p><blockquote><p>è¿™é‡Œä¸è®¨è®ºâ€œå¯æ€œä¹‹äººå¿…æœ‰å¯æ¨ä¹‹å¤„â€ç­‰é—®é¢˜ï¼Œä¹Ÿæ²¡æœ‰åˆ«çš„ä»€ä¹ˆæ„æ€ï¼Œåªæ˜¯ä¸¾ä¾‹è€Œå·²</p></blockquote><a id="more"></a><h1 id="0X01-é€šè¿‡å¤šä¸ªWhyæ‰¾åˆ°æœ¬è´¨"><a href="#0X01-é€šè¿‡å¤šä¸ªWhyæ‰¾åˆ°æœ¬è´¨" class="headerlink" title="0X01 é€šè¿‡å¤šä¸ªWhyæ‰¾åˆ°æœ¬è´¨"></a>0X01 é€šè¿‡å¤šä¸ªWhyæ‰¾åˆ°æœ¬è´¨</h1><p>æœ‰ä¸€ä¸ªä¾‹å­ï¼šæœ‰ä¸€å¤©ä¸‹åˆä½ åŒäº‹ä¹°äº†ä¸€ç½â€œæ­»äº¡ä¹‹ç¿¼â€(ä¸€ç§é«˜å’–å•¡å› å«é‡çš„å’–å•¡)ï¼Œä¸ºäº†é˜»æ­¢ä¸‹åˆå·¥ä½œçš„æ—¶å€™çŠ¯å›°ã€‚è¿™ä¸ªé—®é¢˜çœ‹èµ·æ¥å¾ˆåˆç†å®é™…ä¸Šå¦‚æœæˆ‘ä»¬å°è¯•è¿™é€šè¿‡å‡ ä¸ªâ€œä¸ºä»€ä¹ˆâ€æ¥æ‰¾åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› å°±å¯ä»¥æ›´å½»åº•çš„è§£å†³é—®é¢˜ã€‚</p><ul><li>A: ä¸ºä»€ä¹ˆè¦ä¹°é«˜å› å’–å•¡å‘¢ï¼Ÿ</li><li>S: å› ä¸ºä¸‹åˆä¼šå›°ã€Œè§£å†³ç‚¹1ã€</li><li>A: ä¸ºä»€ä¹ˆä¸‹åˆä¼šå›°å‘¢ï¼Ÿ</li><li>S: å› ä¸ºæ™šä¸Šæ²¡ç¡å¥½ã€Œè§£å†³ç‚¹2ã€</li><li>A: ä¸ºä»€ä¹ˆæ™šä¸Šæ²¡ç¡å¥½ï¼Ÿ</li><li>S: å› ä¸ºä¸‰ç‚¹é’Ÿæ‰ç¡çš„ã€Œè§£å†³ç‚¹3ã€</li><li>A: ä¸ºä»€ä¹ˆä¸‰ç‚¹é’Ÿæ‰ç¡çš„ï¼Ÿ</li><li>S: å› ä¸ºæ˜¨å¤©ä¸‹åˆå–äº†å¤ªå¤šå’–å•¡ã€Œè§£å†³ç‚¹4ã€</li><li>A: ä¸ºä»€ä¹ˆå–äº†å¤ªå¤šå’–å•¡ï¼Ÿ</li><li>S: å› ä¸ºä¸‹åˆå¤ªå›°</li></ul><p>çœ‹ä¼¼åƒæ˜¯ä¸€ä¸ªæ™ºéšœä¸€æ ·çš„å¯¹è¯ï¼Œå¦‚æœæˆ‘ä»¬ä»ä¸åŒçš„åœ°æ–¹ç€æ‰‹è§£å†³å°±ä¼šå¾—åˆ°ä¸åŒçš„æ–¹æ¡ˆã€‚å½“ç„¶è¿™é‡Œåªæ˜¯ä¸€ä¸ªä¾‹å­å“ˆï¼Œå…¶å®æ˜¯çœŸçš„æŒºæ™ºéšœçš„ï¼Œå“ˆå“ˆã€‚åœ¨é€šå¸¸é€»è¾‘ä¸‹æˆ‘ä»¬ä¼šå› ä¸ºä¸‹åˆå›°å°±å»ä¹°ä¸€æ¯å’–å•¡ï¼Œä½†æ˜¯å¦‚æœå¤šé—®ä¸€ä¸ªâ€œä¸ºä»€ä¹ˆâ€ä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ç­”æ¡ˆï¼Œå°±å¯ä»¥ç€æ‰‹ä»ã€Œè§£å†³ç‚¹2ã€æ¥è§£å†³é—®é¢˜ã€‚ã€Œè§£å†³ç‚¹2ã€çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½ä¼šå°½å¯èƒ½æ”¹å–„ç¡çœ è´¨é‡ï¼Œæ¯”å¦‚æ”¹é€ å§å®¤éš”éŸ³ï¼Œæ›´æ¢åºŠå«è¢«è¤¥æ•å¤´ç­‰ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å†ä¸€æ¬¡æ·±å…¥ä¸‹å»å¾—åˆ°ã€Œè§£å†³ç‚¹3ã€ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªâ€œæ—©ç¡â€çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœç»§ç»­æ·±å…¥ä¸‹å»å¾—åˆ°ã€Œè§£å†³ç‚¹4ã€ï¼Œå…¶å®å°±å¾—åˆ°äº†æœ€ç»ˆçš„åŸå› ï¼šè¿™æ˜¯ä¸€ä¸ªæ¶æ€§å¾ªç¯ï¼Œå¯èƒ½æ˜¯å› ä¸ºæŸä¸€å¤©çš„ç‰¹æ®ŠåŸå› å¯¼è‡´ä¼‘æ¯ä¸å¥½-&gt;ä¸‹åˆå°±å–äº†å¾ˆå¤šå’–å•¡-&gt;å¯¼è‡´æ™šä¸Šç¡ä¸ç€-&gt;ç™½å¤©çŠ¯å›°-&gt;ä¸‹åˆæ›´å›°-&gt;ä¸‹åˆå–å¤§é‡å’–å•¡-&gt;æ™šä¸Šç¡ä¸å¥½ã€‚ã€‚ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦å…‹æœä¸‹æ¥ä¸€å¤©çš„ä¸‹åˆï¼Œæ™šä¸Šå°±èƒ½ç¡ä¸ªå¥½è§‰ï¼Œç¬¬äºŒå¤©ä¹Ÿèƒ½ç²¾ç¥é¥±æ»¡çš„å·¥ä½œäº†ã€‚</p><p>è¿™ä¸ªé—®é¢˜è™½ç„¶è¯´èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯çœŸæ­£è¿ç”¨èµ·æ¥çš„æ—¶å€™å¹¶ä¸æ˜¯è¿™ä¹ˆç®€å•ã€‚å°±æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œâ€œä¸ºä»€ä¹ˆæ™šä¸Šæ²¡ç¡å¥½ï¼Ÿâ€ä¹‹åå°±ä¼šæœ‰å¤šä¸ªåŸå› ï¼Œæ¯ä¸ªåŸå› å†è¿½é—®ä¸‹å»å¯èƒ½è¿˜ä¼šå¾—åˆ°æ›´å¤šçš„åŸå› ï¼Œä»è€Œè¿œç¦»çœŸå®çš„åŸå› ã€‚</p><h1 id="0X02-æˆ‘è¯´æ˜ç™½äº†å—ï¼Ÿä½ å¬æ‡‚äº†å—ï¼Ÿ"><a href="#0X02-æˆ‘è¯´æ˜ç™½äº†å—ï¼Ÿä½ å¬æ‡‚äº†å—ï¼Ÿ" class="headerlink" title="0X02 æˆ‘è¯´æ˜ç™½äº†å—ï¼Ÿä½ å¬æ‡‚äº†å—ï¼Ÿ"></a>0X02 æˆ‘è¯´æ˜ç™½äº†å—ï¼Ÿä½ å¬æ‡‚äº†å—ï¼Ÿ</h1><p>å¦‚æœæœ‰äººè·Ÿä½ è¯´è¯çš„æ—¶å€™ä¸€ç›´åœ¨é—®â€œä½ å¬æ‡‚äº†å—ï¼Ÿç†è§£å—ï¼Ÿæ˜ç™½äº†å—ï¼Ÿâ€ï¼Œå¯èƒ½ä½ ä¼šè§‰å¾—ä»–æŠŠä½ å½“æˆæ™ºéšœäº†ã€‚è°é•¿æœŸé¢å¯¹è¿™ç§å¯¹è¯éƒ½æ˜¯ä¼šä¸å¤ªèˆ’æœçš„ï¼Œå¦‚æœæœ‰äººç»™ä½ è®²ä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œé‡åˆ°é‡ç‚¹éš¾ç‚¹é—®çš„æ˜¯â€œæˆ‘è¯´æ˜ç™½äº†å˜›ï¼Ÿæˆ‘è¯´çš„æ¸…æ¥šå˜›ï¼Ÿâ€ï¼Œå°±ä¼šèˆ’æœå¤šäº†ã€‚æ‰€ä»¥åœ¨è·Ÿåˆ«äººäº¤æµçš„æ—¶å€™å°½é‡å¤šè¯´â€œæˆ‘è¯´æ˜ç™½äº†å—ï¼Ÿâ€è€Œéâ€œä½ å¬æ‡‚äº†å—ï¼Ÿâ€ã€‚</p><h1 id="0X03-å¦‚ä½•å‡èŒåŠ è–ª"><a href="#0X03-å¦‚ä½•å‡èŒåŠ è–ª" class="headerlink" title="0X03 å¦‚ä½•å‡èŒåŠ è–ª"></a>0X03 å¦‚ä½•å‡èŒåŠ è–ª</h1><p>è€æ¿æ‰‹ä¸‹æœ‰åä¸ªæ¯•ä¸šç”Ÿï¼Œå·¥èµ„éƒ½æ˜¯5Kï¼Œå¤§å®¶çš„èƒ½åŠ›åˆ†å¸ƒåœ¨â€œ4~8Kâ€ä¹‹é—´ï¼Œè€æ¿ç°åœ¨è¦æ¶¨è–ªäº†ä¼šä¸»è¦æ¶¨è°çš„å‘¢ï¼Ÿè‚¯å®šæ˜¯ä¼˜å…ˆé€‰æ‹©èƒ½åŠ›æ›´å¼ºçš„å˜›ï¼Œå‡è®¾è¦ç»™å…¶ä¸­ä¸€ä¸ªæ¶¨è–ªåˆ°8Kï¼Œè‚¯å®šä¼šé€‰æ‹©å®åŠ›æœ¬æ¥å°±å·²ç»ä»·å€¼8Kçš„ã€‚æ¯•ç«ŸæŠŠå·¥èµ„ç»™ä»·å€¼5Kçš„å‘˜å·¥å…·æœ‰èµŒåšæ€§è´¨ï¼Œä¸çŸ¥é“ä»–æœªæ¥ä»€ä¹ˆæ—¶å€™ä¼šæœ‰æˆ–è€…æ ¹æœ¬ä¼šä¸ä¼šæœ‰8Kçš„èƒ½åŠ›ã€‚å…¶å®ä¸€çœ‹å°±çŸ¥é“äº†ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶å¯èƒ½æ²¡æœ‰æƒ³åˆ°è¿™é‡Œã€‚</p><blockquote><p>â€œåº”è¯¥æ˜¯è–ªèµ„è¿½èƒ½åŠ›ï¼Œè€Œä¸æ˜¯èƒ½åŠ›è¿½è–ªèµ„â€</p></blockquote><h1 id="0X04-äº‹å®ä¸æ•…äº‹"><a href="#0X04-äº‹å®ä¸æ•…äº‹" class="headerlink" title="0X04 äº‹å®ä¸æ•…äº‹"></a>0X04 äº‹å®ä¸æ•…äº‹</h1><p>å‡ ä¹æ‰€æœ‰äººéƒ½ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªè¡Œä¸ºé€»è¾‘â€œçœ‹åˆ°/å¬åˆ°äº‹å®-&gt;è®²æ•…äº‹-&gt;äº§ç”Ÿæƒ…ç»ª-&gt;é‡‡å–è¡ŒåŠ¨â€ã€‚æ¯”å¦‚æœ‰ä¸€å¤©ä½ çœ‹åˆ°ä¸€ä¸ªäººèººåœ¨ä¸€è¾†å¥”é©°é¢å‰ï¼Œåœ°ä¸Šç“œæœæ’’äº†ä¸€åœ°ï¼Œå¥”é©°çš„å¸æœºç«™åœ¨è½¦æ—è¾¹æŒ‡ç€èººåœ¨åœ°ä¸Šçš„äººå¤§å¼å¤§å«ã€‚ä¸€èˆ¬ä¼šæ€ä¹ˆæƒ³å‘¢ï¼Ÿâ€œå‘€ï¼å¥”é©°æŠŠäººæ’å€’äº†è¿˜ä¸æƒ³èµ”é’±ï¼Wocè¿™äººçœŸåï¼Œæ°”æ­»è€å­äº†ï¼è¿™äº›æœ‰é’±äººä»—åŠ¿æ¬ºäººæ²¡ä¸€ä¸ªå¥½ä¸œè¥¿ï¼â€</p><p>å…¶å®è¿™æ ·çš„æ€ç»´æ¨¡å¼å®Œç¾çš„å¥‘åˆäº†ä¸Šé¢çš„æµç¨‹ï¼š</p><ul><li>çœ‹åˆ°/å¬åˆ°äº‹å®ï¼šåœ°ä¸Šèººç€äººï¼Œå¥”é©°å¸æœºåœ¨å¼å«</li><li>è®²æ•…äº‹ï¼šå¸æœºæ’äº†äººè¿˜ä¸æƒ³èµ”é’±</li><li>äº§ç”Ÿæƒ…ç»ªï¼šå¼€å§‹å˜å¾—æ„¤æ€’</li><li>å¼€å§‹è¡ŒåŠ¨ï¼šå†…å¿ƒä¸‹äº†â€œæœ‰é’±äººæ²¡ä¸€ä¸ªå¥½ä¸œè¥¿â€çš„å®šè®º</li></ul><p>å®é™…ä¸Šäº‹å®å¯èƒ½å®Œå…¨ä¸æ˜¯è¿™ä¸ªæ ·å­ï¼Œä½ çœ‹åˆ°çš„äº‹å®åªæœ‰â€œæŸä¸€æ—¶åˆ»å¥”é©°å¸æœºæ­£åœ¨å¯¹èººåœ¨åœ°ä¸Šçš„äººå¤§å¼å¤§å«â€ã€‚ä½ ä¸çŸ¥é“è¿™ä¸ªäººæ˜¯ç¢°ç£çš„è¿˜æ˜¯çœŸçš„è½¦ç¥¸å—å®³è€…ï¼Œç”šè‡³ä¸çŸ¥é“ç“œæœæ˜¯ä¸æ˜¯ä»–çš„ï¼Œå¥”é©°è½¦æ˜¯ä¸æ˜¯â€œå¸æœºâ€çš„ä¹Ÿä¸å¥½è¯´ã€‚</p><p>æˆ‘ä»¬å¾ˆå®¹æ˜“å°±è¢«ä¸Šé¢çš„æ€ç»´é€»è¾‘å¹²æ‰°ï¼ŒåŠ¨ä¸åŠ¨å°±æ ¹æ®è‡ªå·±çœ‹åˆ°å¬åˆ°çš„äº‹å®å»æ£æµ‹ä¸€ä¸ªâ€œæ•…äº‹â€å‡ºæ¥å¹¶ä¸”å¯¹è‡ªå·±æ£æµ‹å‡ºæ¥çš„æ•…äº‹æ·±ä¿¡ä¸ç–‘ã€‚æ‰€ä»¥å½“å‘ç”Ÿè¿™ç§äº‹æƒ…çš„æ—¶å€™è¦é™åˆ¶ä½è‡ªå·±åˆ›é€ æ•…äº‹çš„èƒ½åŠ›ï¼Œæœ€èµ·ç è¦é˜»æ­¢è‡ªå·±è®²â€œæ•…äº‹â€å˜æˆâ€œäº‹å®â€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> log </tag>
            
            <tag> life </tag>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½œä¸ºå®ä¹ ç”Ÿçš„ä¸€å¹´</title>
      <link href="/2018/09/18/practice-year/"/>
      <url>/2018/09/18/practice-year/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-When-and-Why"><a href="#0X00-When-and-Why" class="headerlink" title="0X00 When and Why"></a>0X00 When and Why</h1><p>æˆ‘æ˜¯å¤§ä¸‰ä¸‹å­¦æœŸå³å°†ç»“æŸçš„æ—¶å€™å‡ºæ¥å®ä¹ äº†ï¼Œæ•…äº‹è¯´æ¥æ¯”è¾ƒè¯¡å¼‚ã€‚ä¸€å¤©ä¸‹åˆåƒå¾€å¸¸ä¸€æ ·èƒŒç€åŒ…åˆ°æ•™å®¤å‡†å¤‡ä¸Šå°å­¦æœŸçš„è¯¾ç¨‹ï¼ˆå°å­¦æœŸå°±æ˜¯ä¸ºæœŸä¸€ä¸ªæœˆçš„ç»¼åˆå®è·µï¼‰ï¼Œä¸€ä¸ªæœ‹å‹è·‘è¿‡æ¥æ‚„æ‚„è·Ÿæˆ‘è¯´â€œhey å¤§å®¶éƒ½åœ¨æ‰¾å®ä¹ äº†ï¼Œä½ æ€ä¹ˆè¿˜ä¸ç€æ‰‹æ‰¾å“‡â€ã€‚å½“æ—¶ä¸€å¬æˆ‘å°±æ…Œäº†ï¼Œå¾ˆæ…Œçš„é‚£ç§æ…Œï¼Œç„¶åé‚£å¤©ä¸‹åˆæŠŠä¹‹å‰å‡†å¤‡çš„ç®€å†æŠ•äº†å‡ºå»ã€‚æ¯•ç«Ÿå­¦æœŸå³å°†ç»“æŸï¼Œå…¶å®æˆ‘æ˜¯æƒ³è¦å›å®¶è¿‡ä¸€ä¸ªæš‘å‡çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±æ²¡æ‰“ç®—çœŸçš„æ‰¾åˆ°å®ä¹ ï¼Œåªæ˜¯è¯´å°è¯•ç€é¢è¯•ä¸€ä¸‹èµšä¸€äº›é¢è¯•ç»éªŒã€‚é‚£æ—¢ç„¶ç›®æ ‡æ˜¯èµšå–é¢è¯•ç»éªŒå°±åªæŠ•å¤§å‚å‘—ï¼Œå°å…¬å¸é¢è¯•ç»å†çš„ç”¨å¤„å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¤§ã€‚å½“å¤©ä¸‹åˆæˆ‘å°±åªæŠ•é€’äº†â€œçŸ¥é“åˆ›å®‡/çŸ¥ä¹/é™Œé™Œâ€ä¸‰å®¶ï¼Œç»“æœè¿˜æ²¡ä¸‹åˆè¯¾ç¨‹è¿˜æ²¡ç»“æŸå‘¢å°±æ”¶åˆ°äº†åˆ›å®‡çš„é¢è¯•é€šçŸ¥ã€‚å¦å¤–ä¸¤å®¶å…¶ä¸­ä¸€å®¶æ‹’ç»äº†æˆ‘ï¼Œå¦ä¸€å®¶ä¸€ç›´æ²¡æœ‰å›é¦ˆä¿¡æ¯ã€‚</p><p>åæ¥é¢è¯•è¿˜ç®—æ¯”è¾ƒé¡ºåˆ©ï¼Œæ‹¿åˆ°äº†offeråå°±å’¬ç‰™æ”¾å¼ƒäº†æœ€åä¸€ä¸ªæš‘å‡å›å®¶çš„æœºä¼šï¼Œé€€æ‰äº†å¥½ä¸å®¹æ˜“æŠ¢åˆ°çš„ç«è½¦ç¥¨ï¼Œåœ¨2017-07-24å°±æ­£å¼å…¥èŒåˆ›å®‡çš„å®ä¹ ç”Ÿå²—äº†ã€‚æ‰€ä»¥è¯´æˆ‘å‡ ä¹æ˜¯è¢«æœ‹å‹å¿½æ‚ å‡ºæ¥å®ä¹ çš„ï¼Œå†åŠ ä¸Šè¿æ°”å¥½æ‹¿åˆ°äº†åˆ›å®‡çš„offerï¼Œè¦ä¸ç„¶æˆ‘è¿˜è¦å›å®¶è¿‡æš‘å‡å‘¢ï¼Œå“ˆå“ˆ</p><h1 id="0X01-é¢è¯•-amp-ç¬”è¯•"><a href="#0X01-é¢è¯•-amp-ç¬”è¯•" class="headerlink" title="0X01 é¢è¯•&amp;ç¬”è¯•"></a>0X01 é¢è¯•&amp;ç¬”è¯•</h1><p>é¢è¯•å½“å¤©åˆ°äº†å…¬å¸ï¼Œåœ¨å‰å°ç™»è®°åç»™äº†æˆ‘ä¸€ä»½ç¬”è¯•é¢˜ï¼Œå†…å®¹æ˜¯çœŸçš„è®°ä¸èµ·æ¥äº†ï¼Œä¸è¿‡éƒ½æ¯”è¾ƒç®€å•ã€‚å¤šæ˜¯å…³äºPythonè¯­è¨€çš„ä¸€äº›é—®é¢˜å’ŒLinuxç³»ç»Ÿæ“ä½œçš„ä¸€äº›é—®é¢˜è¿˜æœ‰ä¸€äº›åŸºç¡€çš„SQLï¼Œæ²¡æœ‰é—®åˆ°å…³äºæˆ‘åº”è˜å²—ä½ä½¿ç”¨çš„Djangoæ¡†æ¶ã€‚ç¬”è¯•é¢˜ç­”å¥½åæˆ‘ç°åœ¨çš„éƒ¨é—¨æ€»ç›‘å°±æ¥å¼€å§‹é¢è¯•äº†ï¼Œé™¤äº†é—®æˆ‘ç¬”è¯•é¢˜çš„ç­”é¢˜æ€è·¯ä»¥å¤–è¿˜é—®äº†äº›æˆ‘æä¸æ‡‚ä¸ºä»€ä¹ˆé—®çš„é—®é¢˜ã€‚æ¯”å¦‚é—®äº†æˆ‘â€œæ ˆæº¢å‡ºæ”»å‡»â€ï¼Œç„¶è€Œæˆ‘å¹¶ä¸æ‡‚å®‰å…¨è€Œä¸”éƒ¨é—¨ä¹Ÿä¸æ˜¯å®‰å…¨äº§å“éƒ¨é—¨ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰ç­”å‡ºæ¥ï¼Œåæ¥è¿˜æ˜¯é¢è¯•å®˜ç»™æˆ‘ç§‘æ™®äº†ä¸€ä¸‹â€œæ ˆæº¢å‡ºæ”»å‡»â€æ˜¯ä»€ä¹ˆã€‚æˆ‘è®°å¾—åé¢é—®çš„æœ€å…·æŠ€æœ¯æ€§çš„é—®é¢˜å°±æ˜¯æˆ‘å­¦è¿‡ä»€ä¹ˆWebæ¡†æ¶ï¼Œæˆ‘è¯´äº†è§£è¿‡ä¸€ç‚¹ç‚¹Flaskåé¢è¯•å®˜é—®äº†æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©ä¼˜å…ˆå­¦ä¹ Flaskã€‚åœ¨æ­¤ä¹‹åå°±æ˜¯â€œä¼šä¸ä¼šç”¨æ¢¯å­ï¼Ÿæ¢¯å­æ˜¯ä¹°çš„è¿˜æ˜¯å“ªé‡Œçš„ï¼Ÿä¼šä¸ä¼šç”¨Linuxï¼Ÿç”¨çš„ä»€ä¹ˆæµè§ˆå™¨ï¼Ÿâ€è¿™ç±»æ›´åå‘â€œç¨‹åºå‘˜æ–‡åŒ–â€çš„ä¸œè¥¿äº†ã€‚æœ€åé¢è¯•ç»“æŸçš„æ—¶å€™é—®äº†æˆ‘ç®€å†ä¸Šçš„ä¸ªäººåšå®¢å’ŒGithubæœ‰æ²¡æœ‰åœ¨æ›´æ–°ï¼Œæˆ‘è¯´åœ¨æ›´æ–°åé¢è¯•å°±å·®ä¸å¤šç»“æŸäº†ã€‚</p><p>å› ä¸ºäº’ç›¸åŠ äº†QQï¼Œåœ¨å…¥èŒä¹‹å‰è¿˜ç»™æˆ‘è¯´è¿‡æ„Ÿè§‰æˆ‘Githubä¸Šé¡¹ç›®çš„ä»£ç æ¯”è¾ƒæ•´æ´ï¼ŒæŒºåˆæ ¼çš„ã€‚å…¶å®å½“æ—¶æˆ‘Githubä¸Šå°±ä¸€ä¸ªå°é¡¹ç›®ï¼Œå¾ˆå°å¾ˆå°çš„é‚£ç§ï¼Œæ‰€ä»¥è¯´Githubåœ¨æ±‚èŒè¿‡ç¨‹ä¸­è¿˜æ˜¯éå¸¸éå¸¸æœ‰ç”¨çš„ã€‚</p><a id="more"></a><h1 id="0X02-å…¥èŒæ—¶çš„æ°´å¹³"><a href="#0X02-å…¥èŒæ—¶çš„æ°´å¹³" class="headerlink" title="0X02 å…¥èŒæ—¶çš„æ°´å¹³"></a>0X02 å…¥èŒæ—¶çš„æ°´å¹³</h1><p>å½“æ—¶åˆšåˆšå…¥èŒçš„æ—¶å€™ï¼Œéƒ¨é—¨çš„æŠ€æœ¯æ ˆå‡ ä¹æ˜¯å…¨ä¸æ‡‚ï¼ˆå…¨ä¸è€Œéå…¨éƒ¨ï¼Œæ˜¯çœŸçš„ä¸ä¼šï¼‰ã€‚åªæœ‰äº†è§£è¿‡ä¸€ç‚¹ç‚¹docker/flask/æ“ä½œç³»ç»Ÿ/ç½‘ç»œç­‰çŸ¥è¯†ï¼Œå¯¹Linuxçš„ä½¿ç”¨å’Œæ“ä½œæ¯”è¾ƒç†Ÿæ‚‰ï¼ŒPythonåªæœ‰åœ¨è¯­è¨€ä¸Šæ¯”è¾ƒç†Ÿæ‚‰ï¼Œè€Œé¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨çš„æ¡†æ¶Djangoå’Œgitå·¥å…·æ˜¯ä»æ¥æ²¡æœ‰ç”¨è¿‡çš„ã€‚</p><p>ç°åœ¨æƒ³æ¥ï¼Œå…¶å®ä¸ç®¡ä»€ä¹ˆè¯­è¨€ä»€ä¹ˆæ¡†æ¶çš„å…¬å¸ï¼Œç†Ÿç»ƒæŒæ¡â€æ“ä½œç³»ç»Ÿã€ç½‘ç»œã€Linuxã€gitâ€œç­‰è¿™ç§é€šç”¨çš„ç†è®ºå’ŒæŠ€èƒ½éƒ½æ˜¯ç»å¯¹æ²¡æœ‰é”™çš„ã€‚æ‰€ä»¥å¤§å®¶ä¸çŸ¥é“å­¦ä»€ä¹ˆçš„æ—¶å€™å°±å¯ä»¥å»å­¦ä¹ è¿™äº›é€šç”¨çŸ¥è¯†ï¼Œä»»ä½•æ—¶å€™å­¦ä¹ é€šç”¨çŸ¥è¯†å’ŒæŠ€èƒ½éƒ½æ˜¯ç»å¯¹ä¸ä¼šé”™è¯¯çš„ã€‚</p><h1 id="0X03-å®ä¹ ä¸€å¹´åœ¨å¹²å˜›"><a href="#0X03-å®ä¹ ä¸€å¹´åœ¨å¹²å˜›" class="headerlink" title="0X03 å®ä¹ ä¸€å¹´åœ¨å¹²å˜›"></a>0X03 å®ä¹ ä¸€å¹´åœ¨å¹²å˜›</h1><p>ä»æœ€åˆå…¥èŒçš„æ—¶å€™å†™å•å…ƒæµ‹è¯•å¼€å§‹ï¼Œå› ä¸ºå†™å•å…ƒæµ‹è¯•å¯ä»¥æ¯”è¾ƒå¿«é€Ÿçš„äº†è§£é¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿä¼šçœ‹å¤§é‡çš„ä¸šåŠ¡ä»£ç ï¼Œæ˜¯æ–°æ‰‹ä¸Šæ‰‹ä¸€ä¸ªæˆç†Ÿé¡¹ç›®çš„è‰¯å¥½åŠæ³•ã€‚ä¹‹åå°±ä»å•å…ƒæµ‹è¯•-&gt;å°åŠŸèƒ½-&gt;ä»0åˆ°1çš„å°é¡¹ç›®-&gt;å‡ ä¸ªå°é¡¹ç›®çš„ä¸»è¦ç»´æŠ¤äººã€‚ç°åœ¨å°±æ˜¯åœ¨è´Ÿè´£å‡ ä¸ªæ¯”è¾ƒå°çš„é¡¹ç›®ï¼Œæ„Ÿè§‰è™½ç„¶æ²¡æœ‰æ‰›èµ·é‡æ‹…ï¼Œä½†æ˜¯èµ·ç èƒ½å¤Ÿç‹¬ç«‹æ‹…ä»»ä¸€äº›å°é¡¹ç›®çš„å„é¡¹é€‚å®œäº†ã€‚</p><p>è¿™ä¸€å¹´é‡Œä¹Ÿé€æ­¥çš„å­¦ä¹ äº†æ›´å¤šçš„ä¸œè¥¿ï¼Œç›®å‰æ¥è¯´å·¥å…·ä¸Šçš„gitå’Œdockerå·²ç»å’Œå…¶ä»–åŒäº‹å·®ä¸å¤šåŒæ°´å¹³äº†ï¼Œæœ€é‡è¦çš„Djangoéƒ¨åˆ†ä¹Ÿæ˜¯ä¸€ç›´åœ¨å˜å¾—æ›´å¥½ã€‚æœ€è¿‘å› ä¸ºå‰ç«¯äººæ‰‹ä¸å¤Ÿç”¨ï¼Œè¿˜å¼€å§‹æ¥æ‰‹ä¸€äº›å‰åç«¯ç»‘å®šçš„ä»»åŠ¡ï¼Œç€æ‰‹å†™ä¸€äº›åŠŸèƒ½ç®€å•çš„Vueã€‚</p><p>å½“ç„¶äº†ï¼Œä½œä¸ºä¸€ä¸ªå®ä¹ ç”Ÿä¸­é€”è‚¯å®šå¤šå°‘ä¼šæœ‰ä¸€äº›åšé›¶æ´»çš„æ—¶å€™ï¼Œæ¯”å¦‚æä¸€äº›Excelä¹‹ç±»çš„ã€‚ä¸è¿‡å…¬å¸è¿™ç‚¹è¿˜æ˜¯å¾ˆæ£’ï¼Œæ‹›å®ä¹ ç”Ÿçš„ç›®çš„å°±æ˜¯æœªæ¥æˆä¸ºæ­£å¼å‘˜å·¥ï¼Œæ‰€ä»¥æ²¡æœ‰ç»™å®‰æ’å¾ˆå¤šé›¶æ´»ï¼Œå¤§å¤šéƒ½æ˜¯ç¬¦åˆå½“å‰å®šä½ä¸”å¯¹è½¬æ­£åå·¥ä½œåˆå¸®åŠ©çš„ä»»åŠ¡ã€‚</p><h1 id="0X04-åˆ›å®‡çœŸçš„å¥½ï¼Ÿ"><a href="#0X04-åˆ›å®‡çœŸçš„å¥½ï¼Ÿ" class="headerlink" title="0X04 åˆ›å®‡çœŸçš„å¥½ï¼Ÿ"></a>0X04 åˆ›å®‡çœŸçš„å¥½ï¼Ÿ</h1><p>æœ€åˆé¢è¯•çš„æ—¶å€™ï¼Œæˆ‘çš„é¢è¯•å®˜ç»™æˆ‘è¯´â€æˆ‘ä»¬éƒ¨é—¨ä¸åŠ ç­çš„â€œã€‚å…¶å®å½“æ—¶æˆ‘æ˜¯ä¸ä¿¡çš„ï¼Œä¸è¿‡åæ¥æ‰å‘ç°æ˜¯çœŸçš„ï¼Œå®ä¹ æ•´æ•´ä¸€å¹´åæˆ‘æçš„åŠ ç­éƒ½ä¸åˆ°16å°æ—¶ï¼ˆä¸¤ä¸ªå·¥ä½œæ—¥ï¼‰ã€‚è¿™æ— ç–‘æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¯±æƒ‘å§ï¼Œä¸€å®¶ç¨‹åºå‘˜ä¸åŠ ç­çš„å…¬å¸è°ä¸å–œæ¬¢å‘¢ã€‚</p><p>è¿˜æœ‰å°±æ˜¯å…¬å¸å€¡å¯¼çš„æ‰å¹³åŒ–ç®¡ç†ï¼Œè™½ç„¶é¢†å¯¼å°±åœ¨åŒä¸€ä¸ªåŠå…¬å®¤ï¼Œæˆ–è€…å°±ååœ¨ä½ éš”å£ä½ å¯¹é¢ï¼Œä½†æ˜¯å¤§å®¶å®Œå…¨ä¸ä¼šæ‹˜è°¨ã€‚äº’ç›¸ä¹‹é—´åªä¼šå–ŠXå“¥æˆ–è€…å…¶ä»–ç»°å·ï¼Œå³ä½¿æ˜¯ä¸Šçº§å«ä¸‹çº§ä¹Ÿæ˜¯ç›´æ¥å«Xå“¥æˆ–è€…ç»°å·ï¼Œå¾ˆå°‘ç›´æ¥å«åå­—çš„ã€‚è€Œä¸”ä¸Šçº§å®‰æ’å·¥ä½œä¹Ÿæ˜¯ä¼šçœŸæ­£çš„è€ƒè™‘åˆ°å¤§å®¶çš„æ„Ÿå—ï¼Œå¹¶ä¸ä¼šå¼ºè¡Œå®‰æ’å·¥ä½œåˆ°å¤´ä¸Šã€‚</p><p>å…¬å¸è¿˜ä¼šç»™æä¾›åŸ¹è®­çš„æœºä¼šï¼Œæ¯”å¦‚å‚ä¸å„ç§ç›¸å…³äº¤æµä¼šã€åˆ†äº«ä¼šç­‰ï¼Œå„ç§ä¼šè®®çš„å…¥åœºè´¹éƒ½æ˜¯å¯ä»¥æŠ¥é”€çš„ã€‚è€Œä¸”å…¬å¸ä¹Ÿä¼šæ—¶ä¸æ—¶ä¸¾è¡Œå†…éƒ¨çš„åŸ¹è®­ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯é’ˆå¯¹æŠ€æœ¯çš„è€Œéä¸€å‘³å¼ºè°ƒæˆ˜ç•¥ã€ç®¡ç†ã€æ–‡åŒ–è¿™äº›ã€‚ä¸Šå‘¨æ‰åˆšåˆšå‚ä¸äº†å…¬å¸ä¸“é—¨é’ˆå¯¹åº”å±Šæ¯•ä¸šç”Ÿçš„åŸ¹è®­ã€‚æ•´æ•´ä¸¤å¤©çš„æ—¶é—´ï¼Œå…¬å¸çš„é”€å”®æ€»ç›‘ã€äººäº‹è¡Œæ”¿æ€»ç›‘ç­‰é«˜ç®¡ä¸“ç¨‹ä»åŒ—äº¬é£åˆ°æˆéƒ½æ¥ç»™æˆ‘ä»¬ä¸Šè¯¾ã€‚</p><p>è¿™è¿˜ä¸æ˜¯æˆ‘å¯¹å…¬å¸å°è±¡æœ€å¥½çš„åœ°æ–¹ï¼Œæˆ‘è§‰å¾—åˆ›å®‡æœ€æ£’çš„åœ°æ–¹åœ¨äºä½ çš„åŒäº‹ä¼šåƒå­¦æ ¡é‡Œçš„è€å¸ˆä¸€æ ·ç»™äºˆæŒ‡å¯¼ã€‚æˆ‘çš„mentoræ›¾å¤šæ¬¡ç«™åœ¨æˆ‘èº«åç»™æˆ‘è®²ä»£ç å’Œä¸šåŠ¡é€»è¾‘è¶…è¿‡åŠä¸ªå°æ—¶ï¼Œä»æ¥ä¸ä¼šè¯´å› ä¸ºè‡ªå·±æ²¡ç©ºå°±ä¸æä¾›æŒ‡å¯¼ï¼Œæ›´ä¸ä¼šå› ä¸ºè‡ªå·±æ²¡æœ‰å¥½å¤„æ‹¿å°±æ‰¾å€Ÿå£ä¸ç®¡ã€‚æœ€è¿‘æˆ‘åœ¨æ¥è§¦Vueçš„æ—¶å€™ä¹Ÿæ˜¯ï¼Œå‰ç«¯åŒäº‹å¤šæ¬¡ç«™åœ¨æˆ‘èº«åç»™æˆ‘è®²å‰ç«¯éœ€è¦æ³¨æ„çš„ä¸œè¥¿ï¼Œç»™æˆ‘è¯´éœ€è¦çœ‹å“ªä¸ªæ•™ç¨‹ï¼Œç”šè‡³ä¼šç»™æˆ‘å¸ƒç½®ä½œä¸šã€‚è¿™ç§ç»†è‡´å…¥å¾®çš„æŒ‡å¯¼ææ€•å¾ˆå¤šå­¦æ ¡çš„è€å¸ˆéƒ½åšä¸åˆ°å§ã€‚æœ‰ç€è¿™ä¹ˆå¥½çš„æ¡ä»¶ï¼Œä¸ä»…èƒ½å¤Ÿå­¦åˆ°ä¸œè¥¿è¿˜èƒ½æ‹¿åˆ°ä¸é”™çš„å·¥èµ„ï¼Œèƒ½ä¸å–œæ¬¢æ‰æ€ªå‘¢ã€‚</p><h1 id="0X05-è°éƒ½æœ‰æŒ«æŠ˜"><a href="#0X05-è°éƒ½æœ‰æŒ«æŠ˜" class="headerlink" title="0X05 è°éƒ½æœ‰æŒ«æŠ˜"></a>0X05 è°éƒ½æœ‰æŒ«æŠ˜</h1><p>å½“ç„¶äº†ï¼Œå·¥ä½œä¸ä¼šæ˜¯ä¸€å¸†é£é¡ºçš„ã€‚æœ€åˆå¼€å§‹åšä¸€äº›åŠŸèƒ½æ€§ä»»åŠ¡çš„æ—¶å€™ï¼Œå—åˆ°æŒ«æŠ˜æœ€å¤§çš„ä¸€æ¬¡ï¼Œè‡ªå·±æäº¤çš„ä¸€ä¸ªcommitæ€»å…±åªæœ‰200è¡Œå·¦å³çš„ä»£ç ï¼Œåœ¨Reviewçš„è¿‡ç¨‹ç»™æ‰“å›äº†80å¤š90ä¸ªä¿®æ”¹æ„è§ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸¤ä¸‰è¡Œå°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ã€‚é‚£æ®µæ—¶é—´å†™å®Œä»£ç éƒ½ä¸æ•¢æPRä¸Šå»ï¼Œæäº†PRä¸Šå»ä¹‹åæ•´ä¸ªäººéƒ½æ˜¯æå¿ƒåŠèƒ†çš„ã€‚</p><p>åœ¨å¯¹è¯­è¨€å’Œæ¡†æ¶ç†Ÿæ‚‰ä¸€äº›åï¼Œä»£ç Reviewä¸Šçš„é—®é¢˜è¶Šæ¥è¶Šå°‘äº†ï¼Œå†™ä»£ç ä¹Ÿå°±å¿«äº†èµ·æ¥ã€‚ä¸è¿‡è¿™æ ·ä¸€æ¥Bugä¹Ÿå°±éšä¹‹å‡ºç°äº†ï¼Œæœ€å¤šçš„æ—¶å€™ä¸€ä¸ªæœˆå‡ºç°è¿‡ä¸¤æ¬¡è½»å¾®çš„çº¿ä¸Šbugå’Œä¸€æ¬¡å°çš„ç”Ÿäº§äº‹æ•…ã€‚æ‰€ä»¥åæ¥æ¯æ¬¡å‘å¸ƒå¸¦æœ‰æˆ‘ä»£ç çš„ç‰ˆæœ¬æ—¶ï¼Œæ•´ä¸ªäººä¹Ÿéƒ½æ˜¯è™šçš„ï¼Œæ€»è§‰çš„é©¬ä¸Šå°±ä¼šçˆ†å‘çº¿ä¸ŠBUGç”šè‡³æ˜¯ç”Ÿäº§äº‹æ•…ã€‚</p><p>ä¸ç®¡æ˜¯ä¹‹å‰çš„Code Reviewææ…Œè¿˜æ˜¯åé¢çš„BUGææ…Œï¼Œéƒ½æ›¾ç»æœ‰è¿‡â€è¦ä¸ç¦»èŒå§â€œçš„æƒ³æ³•ã€‚åæ¥æƒ³äº†æƒ³ï¼Œè™½ç„¶è¢«é¡¹ç›®ç»ç†å«å‡ºå»è°ˆè¿‡è¯ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯è®©æˆ‘å†å¤šæ³¨æ„ä¸€äº›ï¼Œå¹¶æ²¡æœ‰å¾ˆæš´èºæˆ–æ˜¯æœ‰è®©æˆ‘èµ°äººçš„æ„æ€ã€‚æ‰€ä»¥åº”è¯¥è¿˜æ²¡æœ‰åˆ°èµ°äººçš„ç¨‹åº¦ï¼Œæ¯•ç«Ÿä½œä¸ºå®ä¹ ç”Ÿå…¬å¸æ˜¯å¯ä»¥éšä¾¿è®©æˆ‘èµ°äººçš„ã€‚é‚£æ®µæ—¶é—´æˆ‘å°±ä¸€ç›´åœ¨è°ƒæ•´çŠ¶æ€ï¼Œä¹Ÿä¸€ç›´åœ¨å­¦ä¹ ï¼Œæ›´è¦éšæ—¶æ³¨æ„ç»†èŠ‚ï¼Œé˜²æ­¢å†æ¬¡å‘ç”Ÿé—®é¢˜ã€‚åœ¨ç»è¿‡è¿™äº›äº‹æƒ…ä¹‹åï¼Œç°åœ¨æ„Ÿè§‰æ¯”ä»¥å‰å¥½äº†ä¸€äº›äº†ï¼Œèµ·ç ä¸ä¼šè§‰å¾—è‡ªå·±è¦ç¦»èŒäº†ã€‚è°çš„èŒä¸šç”Ÿæ¶¯ä¼šæ˜¯ä¸€å¸†é£é¡ºçš„å‘¢ï¼Œå¹¸å¥½æˆ‘åšæŒè¿‡äº†é‚£æ®µå‹åŠ›å¾ˆå¤§çš„æ—¶å€™ï¼Œæ„Ÿè°¢è‡ªå·±å§ã€‚</p><h1 id="0X06-ç›®å‰æ°´å¹³"><a href="#0X06-ç›®å‰æ°´å¹³" class="headerlink" title="0X06 ç›®å‰æ°´å¹³"></a>0X06 ç›®å‰æ°´å¹³</h1><p>è¿™ä¸€å¹´å®ä¹ ä¸‹æ¥ï¼Œåœ¨Pythonçš„è¯­è¨€å’ŒLinuxä¸Šæ²¡æœ‰æ˜æ˜¾çš„è¿›æ­¥ï¼Œæ¯•ç«ŸPythonå¸¸ç”¨åˆ°çš„åœ°æ–¹ä¹Ÿå°±è¿™äº›ï¼Œé‚£äº›é«˜çº§ç”¨æ³•ç”¨åˆ°äº†å†å»æŸ¥ä¸€æŸ¥ä¹Ÿæ— å¯åšéï¼Œè€ŒLinuxçš„å“é¢ç‰ˆä¹Ÿæ•´æ•´ç”¨äº†ä¸€å¹´äº†ï¼Œè™½ç„¶æ²¡æœ‰å¤ªå¤šè¿ç»´æŠ€æœ¯ä¸Šçš„æå‡ä½†æ˜¯èµ·ç ç”¨çš„æ›´åŠ ç†Ÿæ‚‰äº†ï¼Œä¹Ÿæ‰¾åˆ°äº†ä¸€äº›é€‚åˆæˆ‘ä½¿ç”¨ä¹ æƒ¯çš„è½¯ä»¶æ¥æ”¯æŒæˆ‘ã€‚</p><p>ä¸€å¹´æ¥è¿›æ­¥æ¯”è¾ƒå¤§çš„å°±æ˜¯Djangoå’Œä¸¤ä¸ªå·¥å…·ï¼šDockerå’Œgitäº†ã€‚Djangoä»å…¥èŒæ—¶å€™çš„0åŸºç¡€ï¼Œåˆ°ç°åœ¨å¯ä»¥ç‹¬ç«‹è´Ÿè´£ä¸€äº›å°é¡¹ç›®ï¼Œåº”è¯¥ä¹Ÿç®—æ˜¯å…¥é—¨äº†å§ã€‚Dockerå’Œgitä¸¤ä¸ªå·¥å…·å¹³æ—¶ç”¨çš„å¾ˆå¤šä½†æ˜¯å´ç”¨ä¸åˆ°æ¯”è¾ƒæ·±å…¥çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å·²ç»å’Œå…¶ä»–åŒäº‹çš„æ°´å¹³å·®ä¸å¤šé½å¹³äº†ã€‚</p><p>æœ€è¿‘ä¸¤ä¸ªæœˆä»¥æ¥ï¼Œè‡ªä»æ¥è§¦äº†SpaceVimä¹‹åä½¿ç”¨Vimçš„æ¯”ä¾‹å¤§å¹…åº¦æé«˜ï¼ŒVimçš„æŠ€èƒ½æ¯”åŸæ¥é«˜äº†å¥½å¤šï¼Œå“ˆå“ˆå“ˆ</p><h1 id="0X07-æœªæ¥çš„è®¡åˆ’ç‚¹"><a href="#0X07-æœªæ¥çš„è®¡åˆ’ç‚¹" class="headerlink" title="0X07 æœªæ¥çš„è®¡åˆ’ç‚¹"></a>0X07 æœªæ¥çš„è®¡åˆ’ç‚¹</h1><p>ç›®å‰æŠ€æœ¯ä¸Šæœ€é‡è¦çš„å°±æ˜¯Django/DRFæ¡†æ¶å’Œå‰ç«¯çš„Vueã€‚Django/DRFå†å¤šå­¦å¤šç”¨ä¸€äº›ï¼Œäº‰å–å°½å¿«è¾¾åˆ°å…¶ä»–åŒäº‹çš„æ°´å¹³å’Œå¤§å®¶è¿½å¹³å§ï¼›Vueå°±æ…¢æ…¢æ¥ï¼Œäº‰å–èƒ½å¤Ÿè‡ªå·±ç‹¬ç«‹å®Œæˆä¸€äº›å‰åç«¯æ•°æ®å¯¹æ¥å’Œç®€å•é€»è¾‘çš„å·¥ä½œã€‚</p><p>è¿˜æœ‰æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹å°±æ˜¯æå‡è‡ªå·±çš„è½¯å®åŠ›ï¼Œå…¶å®å¥½å¤šæ—¶å€™å»åˆ†æé‡åˆ°çš„é—®é¢˜éƒ½ä¸æ˜¯ç›´æ¥çš„æŠ€æœ¯ä¸è¶³å¯¼è‡´çš„ï¼Œæ‰€ä»¥æ—¶åˆ»æ³¨æ„æå‡è‡ªå·±çš„ä¸“æ³¨åŠ›ã€æ€ç»´å‘æ•£èƒ½åŠ›ã€äº§å“æ€ç»´ä¹Ÿæ˜¯éå¸¸é‡è¦çš„å‘¢ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> log </tag>
            
            <tag> life </tag>
            
            <tag> work </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¸­çš„ä¸€äº›éå…¥é—¨çº§ç”¨æ³•</title>
      <link href="/2018/09/06/django-queryset/"/>
      <url>/2018/09/06/django-queryset/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºä»€ä¹ˆè¿™é‡Œè¯´æ˜¯â€éå…¥é—¨çº§â€ç”¨æ³•å‘¢ï¼Œå› ä¸ºæˆ‘ä¸ªäººè§‰å¾—è¿™æ˜¯æˆ‘æ¥è§¦Djangoä¹‹åä¸€æ®µæ—¶é—´æ‰å¼€å§‹äº†è§£çš„ç”¨æ³•ï¼Œä½†æ˜¯è¯´æ˜¯é«˜çº§ç”¨æ³•åˆå¤ªå¤¸å¼ äº†ï¼Œæ‰€ä»¥ç”¨äº†è¿™ä¹ˆä¸€ä¸ªè¯¡å¼‚çš„â€éå…¥é—¨çº§â€œçš„å®šä½ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä½¿ç”¨ä¸‹é¢çš„modelï¼Œç®€å•æè¿°ä¸€ä¸‹å¹¶éçœŸå®ä»£ç <br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Staff</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    age = models.IntegerField()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    staff = models.ForeignKey(  <span class="comment"># è®¢å•è´Ÿè´£äºº</span></span><br><span class="line">        <span class="string">'Staff'</span>,</span><br><span class="line">        null=<span class="literal">True</span>,</span><br><span class="line">        on_delete=models.SET_NULL,</span><br><span class="line">    )</span><br><span class="line">    price = models.IntegerField()   <span class="comment"># è®¢å•çš„ä»·å€¼</span></span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X00-ä½¿ç”¨Avg-Sum-Count-Max-Min"><a href="#0X00-ä½¿ç”¨Avg-Sum-Count-Max-Min" class="headerlink" title="0X00 ä½¿ç”¨Avg()/Sum()/Count()/Max()/Min()"></a>0X00 ä½¿ç”¨Avg()/Sum()/Count()/Max()/Min()</h1><p>è¿™äº›æ–¹æ³•çš„ç”¨æ³•å¾ˆç®€å•ï¼Œé¡¾åæ€ä¹‰ã€‚ä¸è¿‡éœ€è¦é…åˆä¸‹é¢ä»‹ç»çš„<code>annotate()</code>æˆ–<code>aggregate()</code>ä½¿ç”¨ã€‚</p><p><code>from django.db.models import Avg, Sum, Count, Max, Min</code></p><table><thead><tr><th>name</th><th>function</th></tr></thead><tbody><tr><td>Avg</td><td>æ±‚å¹³å‡æ•°</td></tr><tr><td>Sum</td><td>æ±‚å’Œ</td></tr><tr><td>Count</td><td>è®¡æ•°</td></tr><tr><td>Max</td><td>æ±‚æœ€å¤§</td></tr><tr><td>Min</td><td>æ±‚æœ€å°</td></tr></tbody></table><h1 id="0X01-ä½¿ç”¨annotate"><a href="#0X01-ä½¿ç”¨annotate" class="headerlink" title="0X01 ä½¿ç”¨annotate()"></a>0X01 ä½¿ç”¨annotate()</h1><p>æœ€åŸºç¡€çš„æŸ¥è¯¢å°±æ˜¯ä»ä¸€å¼ è¡¨ä¸­æŸ¥è¯¢ç¬¦åˆæŸæ¡ä»¶çš„å­—æ®µï¼Œè€Œä½¿ç”¨<code>annotate()</code>å¯ä»¥å¾—åˆ°ä¸€äº›æˆ‘ä»¬æ‰‹åŠ¨è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œå¹¶å°†å…¶ä½œä¸ºQuerysetä¸­Itemçš„ä¸€ä¸ªå±æ€§æ¥è°ƒç”¨ã€‚</p><p>å¦‚æœæˆ‘æƒ³è¦æŸ¥è¯¢æ¯ä¸ªäºº(Staff)æ‰‹ä¸‹æœ‰å¤šå°‘ä¸ªè®¢å•(Order)ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆæŸ¥å‘¢ï¼Œä½¿ç”¨åˆçº§çš„ç”¨æ³•å¯ä»¥å†™å‡ºç±»ä¼¼ä¸‹é¢çš„ä»£ç ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ¯”è¾ƒä¸¥è‚ƒçš„é—®é¢˜ï¼šä¼šäº§ç”Ÿ<code>ç”¨æˆ·æ•°é‡ + 1</code>æ¬¡çš„æŸ¥è¯¢ã€‚è¿™é‡Œåªæœ‰å°‘æ•°ç”¨æˆ·é—®é¢˜ä¸å¤§ï¼Œå¦‚æœæœ‰ä¸Šåƒç”šè‡³ä¸Šä¸‡ä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå‡ åƒå‡ ä¸‡æ¬¡æŸ¥è¯¢ï¼Œé‚£å¯¹æ•°æ®åº“çš„å‹åŠ›æ˜¯å¾ˆææ€–çš„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">staff_list = Staff.objects.filter()</span><br><span class="line"><span class="keyword">for</span> staff <span class="keyword">in</span> staff_list:</span><br><span class="line">    order_count = Order.objects.filter(staff=staff).count()</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<code>annotate()</code>æ–¹æ³•å°±å¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">staff_queryset = Staff.objects.filter().annotate(staff_order_count=Count(<span class="string">'order'</span>))</span><br><span class="line"><span class="keyword">for</span> staff <span class="keyword">in</span> staff_queryset:</span><br><span class="line">    print(staff.staff_order_count)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„<code>staff_order_count</code>å­—æ®µæ˜¯è¡¨ä¸­å¹¶ä¸å­˜åœ¨çš„ï¼Œæ˜¯é€šè¿‡<code>annotate()</code>æ–¹æ³•ä¸´æ—¶å­˜å‚¨çš„ä¸€ä¸ªå­—æ®µã€‚åŒæ ·çš„ï¼Œå†ä¸€ä¸ª<code>annotate()</code>æ–¹æ³•ä¸­å¯ä»¥åŠ å…¥å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨åŒæ ·çš„æ–¹æ³•å»ç»Ÿè®¡å’Œè·å–æ•°æ®å³å¯ã€‚</p><blockquote><p>åœ¨<code>annotate()</code>ä¸­ä½¿ç”¨<code>Count()</code>ä¸€å®šè¦æ˜¯æœ‰å¤–é”®å…³è”æ‰è¡Œã€‚ä¾‹å¦‚æœ¬ä¾‹ä¸­ï¼ŒOrderè¡¨ä¸­æœ‰ä¸€ä¸ªå¤–é”®å­—æ®µstaffä¸è¡¨Staffå…³è”èµ·æ¥äº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨Djangoä¸­é€šè¿‡Staff.order_setæ¥è·å–å…³è”åˆ°Staffçš„Orderï¼Œæ‰€ä»¥ä¹Ÿå°±å¯ä»¥ä½¿ç”¨<code>Count()</code>æ–¹æ³•æ¥è¿›è¡Œç»Ÿè®¡äº†ã€‚</p></blockquote><p>ç”ŸæˆæŸ¥è¯¢çš„SQLè¯­å¥ä¹Ÿæ‰“å‡ºæ¥æ–¹ä¾¿ç†è§£ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">"Post_staff"</span>.<span class="string">"id"</span>, <span class="string">"Post_staff"</span>.<span class="string">"name"</span>, <span class="string">"Post_staff"</span>.<span class="string">"age"</span>, <span class="keyword">COUNT</span>(<span class="string">"Post_order"</span>.<span class="string">"id"</span>) <span class="keyword">AS</span> <span class="string">"x"</span> <span class="keyword">FROM</span> <span class="string">"Post_staff"</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> <span class="string">"Post_order"</span> <span class="keyword">ON</span> (<span class="string">"Post_staff"</span>.<span class="string">"id"</span> = <span class="string">"Post_order"</span>.<span class="string">"staff_id"</span>) <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="string">"Post_staff"</span>.<span class="string">"id"</span>, <span class="string">"Post_staff"</span>.<span class="string">"name"</span>, <span class="string">"Post_staff"</span>.<span class="string">"age"</span></span><br></pre></td></tr></table></figure></p><h1 id="0X02-ä½¿ç”¨aggregate"><a href="#0X02-ä½¿ç”¨aggregate" class="headerlink" title="0X02 ä½¿ç”¨aggregate()"></a>0X02 ä½¿ç”¨aggregate()</h1><p>ä½¿ç”¨<code>aggregate()</code>å¯ä»¥ä½¿å¾—æŸ¥è¯¢çš„è¿”å›å€¼ç”±ä¸€ä¸ª<code>Queryset</code>å˜æˆä¸€ä¸ª<code>dict</code>ï¼Œæ¯ä¸ªkeyå’Œå¯¹åº”çš„valueç”±è‡ªå·±è®¡ç®—å¾—åˆ°ã€‚</p><p>å¦‚æœæˆ‘éœ€è¦è®¡ç®—å‡ºæ‰€æœ‰äººä¸­å¹´é¾„æœ€å¤§ã€æœ€å°ã€å¹³å‡å€¼è¯¥æ€ä¹ˆåŠï¼Ÿåˆçº§ç”¨æ³•å¯èƒ½éœ€è¦å…ˆç”¨ä¸€ä¸ªæŸ¥è¯¢å¾—å‡ºæ‰€æœ‰äººçš„å¹´é¾„ï¼Œç„¶åå†å•ç‹¬å»è®¡ç®—æœ€å¤§æœ€å°å¹³å‡å€¼ã€‚å†™å‡ºç±»ä¼¼å¦‚ä¸‹ä»£ç ï¼Œè™½ç„¶ç›®å‰é—®é¢˜ä¸å¤§ï¼Œä¸è¿‡å½“é€»è¾‘å¤æ‚èµ·æ¥ä¹‹åå°±ä¼šéš¾ä»¥ç†è§£å¹¶ä¸”ä»£ç é‡è¾ƒå¤§ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">queryset = Staff.objects.filter()</span><br><span class="line">age_list = [staff.age <span class="keyword">for</span> staff <span class="keyword">in</span> queryset]</span><br><span class="line"></span><br><span class="line">age_sum = sum(age_list)</span><br><span class="line">age_max = max(age_list)</span><br><span class="line">age_min = min(age_list)</span><br><span class="line">age_avg = (sum(age_list) * <span class="number">1.0</span>) / len(age_list)</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯å¦‚æœä½¿ç”¨<code>aggregate()</code>æ–¹æ³•å†™å‡ºä¸ä»…é€»è¾‘æ¸…æ™°ä¸æ˜“å‡ºé”™ï¼Œè€Œä¸”ä»£ç é‡å°‘äº†å¾ˆå¤šï¼Œæ›´ç®€å•æ˜“è¯»ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Staff.objects.filter().aggregate(</span><br><span class="line">    age_sum=Sum(<span class="string">'age'</span>),</span><br><span class="line">    age_max=Max(<span class="string">'age'</span>),</span><br><span class="line">    age_min=Min(<span class="string">'age'</span>),</span><br><span class="line">    age_avg=Avg(<span class="string">'age'</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>è¿™æ®µä»£ç å°±ä¼šç›´æ¥è¾“å‡ºå¦‚ä¸‹dictï¼Œéœ€è¦çš„æ•°æ®ç›´æ¥å–å³å¯ã€‚<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"age_sum"</span>: <span class="number">71</span>,</span><br><span class="line">    <span class="attr">"age_max"</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">"age_min"</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="attr">"age_avg"</span>: <span class="number">23.666666666666668</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="0X03-ä½¿ç”¨Case-When"><a href="#0X03-ä½¿ç”¨Case-When" class="headerlink" title="0X03 ä½¿ç”¨Case/When"></a>0X03 ä½¿ç”¨Case/When</h1><p>Djangoä¸­çš„<code>Case()/When()</code>æ˜¯éå¸¸å®ç”¨ä¸€å¯¹æ–¹æ³•ï¼Œæ°å½“ä½¿ç”¨å¯ä»¥å¤§å¹…åº¦å‡å°ç»Ÿè®¡åŠŸèƒ½çš„ä»£ç é‡ã€é€»è¾‘å¤æ‚åº¦ç­‰ã€‚</p><p>å‡è®¾æœ‰å¦‚ä¸‹éœ€æ±‚â€å¹´é¾„å°äº18çš„ä¸ºæœªæˆå¹´(1)ï¼Œå¹´é¾„åœ¨19~30ä¹‹é—´çš„ä¸ºé’å¹´(2)ï¼Œå¹´é¾„åœ¨31~60çš„ä¸ºä¸­å¹´(3)ï¼Œå…¶ä»–ä¸ºè€å¹´(0)â€œï¼Œé‚£ä¹ˆä½¿ç”¨<code>Case/When</code>æ–¹æ³•å†é…åˆ<code>annotate()</code>æ–¹æ³•å°±å¯ä»¥ä¼˜é›…å¾—å®ç°åŠŸèƒ½ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Staff.objects.filter().annotate(</span><br><span class="line">    age_tag = Case(</span><br><span class="line">        When(</span><br><span class="line">            age__lt=<span class="number">18</span>,</span><br><span class="line">            then=<span class="number">1</span>ï¼Œ</span><br><span class="line">        )ï¼Œ</span><br><span class="line">        When(</span><br><span class="line">            age__lt=<span class="number">30</span>,</span><br><span class="line">            then=<span class="number">2</span>,</span><br><span class="line">        )</span><br><span class="line">        When(</span><br><span class="line">            age__lt=<span class="number">60</span>,</span><br><span class="line">            then=<span class="number">3</span>,</span><br><span class="line">        )</span><br><span class="line">        default=<span class="number">0</span>,</span><br><span class="line">        output_field=IntegerField(),</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šé¢çš„ä»£ç ç±»ä¼¼äºè¿™ç§</span></span><br><span class="line">age_tag = <span class="number">1</span> <span class="keyword">if</span> age &lt; <span class="number">18</span> <span class="keyword">else</span> <span class="number">2</span> <span class="keyword">if</span> age &lt; <span class="number">30</span> <span class="keyword">else</span> <span class="number">3</span> <span class="keyword">if</span> age &lt; <span class="number">60</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># emm...è¿™ç§æ›´å½¢è±¡ä¸€ç‚¹</span></span><br><span class="line"><span class="keyword">if</span> age &lt; <span class="number">18</span>:</span><br><span class="line">    age_tag = <span class="number">1</span></span><br><span class="line"><span class="keyword">elif</span> age &lt; <span class="number">30</span>:</span><br><span class="line">    age_tag = <span class="number">2</span></span><br><span class="line"><span class="keyword">elif</span> age &lt; <span class="number">60</span>:</span><br><span class="line">    age_tag = <span class="number">3</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    age_tag = <span class="number">0</span></span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢æ˜¯è®¡ç®—ä¸€ä¸ªQueyrSetä¸­æ¯ä¸€ä¸ªitemçš„æƒ…å†µï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ç»Ÿè®¡ä¸€ä¸ªmodelä¸­æ‰€æœ‰æ•°æ®ï¼Œä¾‹å¦‚è¿™ä¸ªéœ€æ±‚ï¼šâ€ç»Ÿè®¡æ‰€æœ‰Orderä¸­ï¼Œå•ä»·æœ€é«˜ã€æœ€ä½å’Œå¹³å‡å€¼â€œã€‚ä½¿ç”¨<code>Case()/When()</code>ä¹Ÿå¯ä»¥å®Œæˆä»»åŠ¡ï¼Œå¹¶ä¸”æ¯”åˆçº§ç”¨æ³•æ›´å¥½ä¸€äº›ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Order.objects.filter().aggregate(</span><br><span class="line">    max_price=Max(<span class="string">'price'</span>),</span><br><span class="line">    min_price=Min(<span class="string">'price'</span>),</span><br><span class="line">    avg_price=Avg(<span class="string">'price'</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><blockquote><p>å†…å®¹æ•´ç†çš„æœ‰ç‚¹å·®ï¼Œå„ä½å‘ç°äº†ä»€ä¹ˆç–æ¼å’Œé”™è¯¯è¯·åŠæ—¶è”ç³»æˆ‘ï¼Œé˜²æ­¢è¯¯å¯¼åˆ«äººã€‚å¦‚æœæ–‡ç« å¯¹å¤§å®¶å¸¦æ¥äº†å¸®åŠ©ï¼Œé‚£æˆ‘è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ å˜¿å˜¿</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ ä¸ºä»€ä¹ˆéœ€è¦ä¸€å°NAS</title>
      <link href="/2018/08/31/why-nas/"/>
      <url>/2018/08/31/why-nas/</url>
      
        <content type="html"><![CDATA[<p>è‡ªä»ä¸€å’¬ç‰™è´­å…¥äº†ä¸€å°Synologyä¹‹åæ„Ÿè§‰ç½‘ç»œå’Œå­˜å‚¨çš„ä½“éªŒæå‡äº†å¾ˆå¤šã€‚åœ¨è¿™é‡Œæ€»ç»“ä¸€ä¸‹è´­ä¹°ç†ç”±ï¼Œæ–¹ä¾¿çŠ¹è±«ä¸å†³çš„æœ‹å‹åšä¸ªå‚è€ƒã€‚</p><h1 id="0X00-æ¥è‡ªç™¾åº¦äº‘ç›˜çš„æƒŠæ‚šäº‹ä»¶"><a href="#0X00-æ¥è‡ªç™¾åº¦äº‘ç›˜çš„æƒŠæ‚šäº‹ä»¶" class="headerlink" title="0X00 æ¥è‡ªç™¾åº¦äº‘ç›˜çš„æƒŠæ‚šäº‹ä»¶"></a>0X00 æ¥è‡ªç™¾åº¦äº‘ç›˜çš„æƒŠæ‚šäº‹ä»¶</h1><p>å›½å†…äº‘ç›˜ä¸€æ³¢æ´—ç‰Œè¿‡åï¼Œå¸¸ç”¨çš„å‡ å®¶éƒ½å·²ç»GGäº†ï¼Œä»…æœ‰ä¸€å®¶ç™¾åº¦è¿˜å­˜æ´»ç€ã€‚ä¸è¿‡ç™¾åº¦äº‘è¯´èµ·æ¥æ˜¯å…è´¹çš„ï¼Œå®é™…å¦‚æœä½¿ç”¨çš„æ¯”è¾ƒå¤šçš„è¯å°±ä¼šå‘ç°ï¼Œå¦‚æœä¸å……å€¼ä¸ºä¼šå‘˜çš„è¯ï¼Œé€Ÿåº¦å°±ä¼šéå¸¸çš„æ…¢ã€‚æ‰€ä»¥è¯´ç™¾åº¦äº‘ç›˜ä¹Ÿå‡ ä¹æ˜¯ä¸€ä¸ªæ”¶è´¹çš„ç½‘ç›˜ï¼Œè¶…çº§ä¼šå‘˜ç®—ä¸‹æ¥è¦å°†è¿‘30å…ƒ/æœˆã€‚</p><p>å…¶å®æ”¶è´¹æ— å¯åšéï¼Œæ¯•ç«Ÿå¤§å®¶èŠ±é’±äº«å—æœåŠ¡å˜›ã€‚ä¸è¿‡ç›´åˆ°ä¸€å¤©ï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°äº†è¿™æ ·ä¸€ä»¶äº‹ï¼š</p><blockquote><p>ä¸€ä¸ªäººåœ¨è‡ªå·±çš„ç™¾åº¦äº‘ç›˜ä¸­ä¸Šä¼ äº†å¤§é‡è‡ªå·±æ‹æ‘„çš„ç…§ç‰‡ï¼ˆçº¯ä¸€æ‰‹è‡ªå·±æ‹æ‘„çš„ï¼‰ï¼Œè¿‡æ®µæ—¶é—´åå› ä¸ºä¸€äº›åŸå› ä»ç™¾åº¦äº‘ç›˜æ‰‹åŠ¨åˆ é™¤äº†ã€‚<strong>åˆè¿‡äº†ä¸çŸ­çš„ä¸€æ®µæ—¶é—´</strong>ï¼Œè¯¥ç”¨æˆ·å†æ¬¡å°†è‡ªå·±çš„è¿™äº›ç…§ç‰‡ä¸Šä¼ è‡³ç™¾åº¦äº‘ç›˜ï¼Œå‘ç°å±…ç„¶æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯ä½¿ç”¨ <strong>æ€¥é€Ÿç§’ä¼ </strong> çš„æ–¹å¼ä¸Šä¼ çš„ã€‚é‚£ä¹ˆå°±å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ€¥é€Ÿç§’ä¼ ä½¿ç”¨çš„æ˜¯æ–‡ä»¶æ‘˜è¦å€¼å¯¹æ¯”åé€‰æ‹©æ€§ä¸Šä¼ çš„ä¸€ä¸ªæŠ€æœ¯ã€‚é‚£é—®é¢˜å°±æ¥äº†ï¼Œè¯¥ç”¨æˆ·è‡ªå·±çº¯ä¸€æ‰‹æ‹æ‘„çš„ç…§ç‰‡ï¼Œåœ¨æ²¡æœ‰åˆ†äº«ç»™ä»»ä½•äººçš„æƒ…å†µä¸‹åˆ é™¤äº†ï¼Œè€Œä¸”æ˜¯è¿‡äº†ä¸çŸ­çš„ä¸€æ®µæ—¶é—´å†æ¬¡ä¸Šä¼ ï¼Œå±…ç„¶æ˜¯ç§’ä¼ ã€‚é‚£å°±æ„å‘³ç€ç™¾åº¦çš„æœåŠ¡å™¨ä¸Šå­˜å‚¨äº†è¯¥ç”¨æˆ·çš„è¿™äº›æ•°æ®ï¼Œä½†æ˜¯ç”¨æˆ·å·²ç»åˆ é™¤äº†è¿™äº›æ•°æ®ã€‚æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿç™¾åº¦æ ¹æœ¬æ²¡æœ‰åˆ é™¤ç”¨æˆ·çš„æ•°æ®ï¼Œåœ¨ç”¨æˆ·åˆ é™¤ä¹‹åä¹Ÿåªæ˜¯ä¸å±•ç¤ºç»™ç”¨æˆ·çœ‹äº†è€Œå·²ã€‚</p></blockquote><p>ç°åœ¨æƒ³æƒ³æ˜¯ä¸æ˜¯ä¸å¯’è€Œæ —ï¼Ÿ</p><a id="more"></a><h1 id="0X01-å¤§å®¶çš„å¸¦å®½ä¹Ÿæ²¡é‚£ä¹ˆå¤§"><a href="#0X01-å¤§å®¶çš„å¸¦å®½ä¹Ÿæ²¡é‚£ä¹ˆå¤§" class="headerlink" title="0X01 å¤§å®¶çš„å¸¦å®½ä¹Ÿæ²¡é‚£ä¹ˆå¤§"></a>0X01 å¤§å®¶çš„å¸¦å®½ä¹Ÿæ²¡é‚£ä¹ˆå¤§</h1><p>è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯â€æ­¤æ—¶æ­¤åˆ»å¤§å®¶çš„å¸¦å®½è¿˜æ²¡æœ‰é‚£ä¹ˆå¤§â€ã€‚è¯´æ˜¯äº‘æ—¶ä»£å·²ç»åˆ°æ¥äº†ï¼Œå¯æ˜¯æˆ‘ä»¬çš„æ‰‹æœºè¿˜æ˜¯éœ€è¦64Gï¼Œ128Gä¹ƒè‡³æ›´å¤§çš„å­˜å‚¨ï¼Œå¹¶ä¸èƒ½å®Œå…¨å°†æ•°æ®å­˜å‚¨åˆ°äº‘ç«¯ï¼›æˆ‘ä»¬çš„PCä¹Ÿæ˜¯åŠ¨è¾„TBçº§ï¼Œå¹¶ä¸èƒ½åœ¨çº¿è§‚çœ‹çœŸæ­£çš„è“å…‰åŸç›˜ï¼›ç”šè‡³ä½ çš„PS4ä¹Ÿéœ€è¦æ›´å¤§çš„ç¡¬ç›˜ä»¥å­˜å‚¨æ›´å¤šçš„æ¸¸æˆï¼Œä¸èƒ½ä»æœåŠ¡å™¨ä¸ŠåŠ è½½æ¸¸æˆï¼›è¿™äº›é—®é¢˜çš„ä¸€ä¸ªäº¤æ±‡ç‚¹å°±åœ¨â€œå¸¦å®½&amp;æµé‡â€ä¸Šã€‚æ‰€ä»¥å¯¹äºæœ‰å¤§é‡æ•°æ®å­˜å‚¨ä¸åˆ†äº«éœ€æ±‚çš„ç”¨æˆ·ï¼Œè¿˜æ˜¯å¯ä»¥åœ¨å®¶é‡Œéƒ¨ç½²ä¸€å°NASï¼Œæ¯•ç«Ÿç°åœ¨çš„ç”µè„‘ã€æ‰‹æœºéƒ½æ˜¯1000Mçš„ç½‘å¡ï¼Œç†è®ºå¯ä»¥è¾¾åˆ°100m/sçš„ä¼ è¾“é€Ÿåº¦è¿˜æ˜¯è¦è¿œè¿œé«˜äºæˆ‘ä»¬çš„äº’è”ç½‘å¸¦å®½ã€‚è€Œä¸”å½“ä½ è¦å¤‡ä»½æ•°æ®åˆ°äº‘ç«¯çš„æ—¶å€™ï¼Œç”±äºæˆ‘ä»¬å¤§å¤šæ•°éƒ½æ˜¯ADSLçš„ç½‘ç»œï¼Œä¼šå¯¼è‡´ä¸Šä¼ é€Ÿåº¦è¿œä½äºä¸‹è½½é€Ÿåº¦ã€‚</p><p>åœ¨æˆ‘çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œå¦‚æœæˆ‘è¦å¤‡ä»½ä¸€ä¸ª5GBçš„æ–‡ä»¶åˆ°äº’è”ç½‘çš„äº‘ä¸Šï¼Œæ²¡æœ‰ä¸€ä¸ªåŠå°æ—¶å‡ ä¹æ˜¯å®Œæˆä¸äº†çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä½¿ç”¨å†…ç½‘çš„NASçš„è¯ï¼Œå°±å¯ä»¥åœ¨ä¸€åˆ†åŠä»¥å†…å®Œæˆã€‚</p><h1 id="0X02-å¤šè®¾å¤‡åŒæ­¥ç›®å½•"><a href="#0X02-å¤šè®¾å¤‡åŒæ­¥ç›®å½•" class="headerlink" title="0X02 å¤šè®¾å¤‡åŒæ­¥ç›®å½•"></a>0X02 å¤šè®¾å¤‡åŒæ­¥ç›®å½•</h1><p>å¦‚æœå®¶ä¸­æœ‰å¤šå°è®¾å¤‡éœ€è¦å…±äº«ä¸€äº›æ–‡ä»¶ï¼Œæ¯”å¦‚ç…§ç‰‡/æ–‡æ¡£ç­‰ã€‚åœ¨Synologyä¸­å¯ä»¥è½»æ¾å®ç°å¤šå°è®¾å¤‡åŒæ­¥ç›®å½•ï¼Œä½ åœ¨ä¸€å°è®¾å¤‡ä¸Šè¿›è¡Œçš„æ”¹åŠ¨ä¼šç¬é—´åŒæ­¥è‡³æ‰€æœ‰è®¾å¤‡ã€‚è™½ç„¶å¾ˆå¤šå…¬ç½‘äº‘å­˜å‚¨æä¾›äº†è¿™é¡¹æœåŠ¡ï¼Œä½†æ˜¯æ¯•ç«Ÿè¿™æ˜¯å†…ç½‘ç¯å¢ƒçš„ï¼Œç¡¬ç›˜å°±åœ¨ä½ å®¶é‡Œï¼Œèµ„æ–™çš„ç§å¯†æ€§ä¼šå¾ˆé«˜ã€‚</p><h1 id="0X03-æ— å¤„ä¸åœ¨çš„æ–‡ä»¶"><a href="#0X03-æ— å¤„ä¸åœ¨çš„æ–‡ä»¶" class="headerlink" title="0X03 æ— å¤„ä¸åœ¨çš„æ–‡ä»¶"></a>0X03 æ— å¤„ä¸åœ¨çš„æ–‡ä»¶</h1><p>ç°åœ¨çš„NASéƒ½å¯ä»¥é…ç½®å¤–éƒ¨ä»‹å…¥ï¼Œä»¥æˆ‘ç”¨çš„Synologyä¸ºä¾‹ã€‚å¦‚æœè‡ªå·±å®¶çš„å®½å¸¦å¯ä»¥ç”³è¯·å…¬ç½‘IPæœ€å¥½ï¼Œå¦‚æœä¸èƒ½ä¹Ÿå¯ä»¥åœ¨Synologyçš„æ§åˆ¶é¢æ¿ä¸­é…ç½®å¤–éƒ¨è¿æ¥ã€‚ä¸ç®¡ä½ èº«åœ¨ä½•å¤„ï¼Œåªè¦èƒ½è¿æ¥åˆ°ç½‘ç»œå°±å¯ä»¥è®¿é—®åˆ°è‡ªå·±çš„æ–‡ä»¶ï¼Œè€Œä¸”ä¸éœ€è¦è´­ä¹°èŠ±ç”Ÿå£³ç­‰æœåŠ¡ï¼Œé€Ÿåº¦ä¹Ÿè¿˜å¯ä»¥æ¥å—ã€‚</p><h1 id="0X04-NFS-SMB"><a href="#0X04-NFS-SMB" class="headerlink" title="0X04 NFS/SMB"></a>0X04 NFS/SMB</h1><p>Synologyä¸­æä¾›äº†å…±äº«ç›®å½•çš„å¤šç§åè®®ï¼Œåœ¨Linuxä¸Šæˆ‘ä½¿ç”¨NFSæ¥æŒ‚è½½æˆ‘çš„ç›®å½•ï¼ŒWindowsç¯å¢ƒä¸‹ä½¿ç”¨SMBä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½¿ç”¨NFSæˆ–SMBæŒ‚è½½ç›®å½•åå°±å¯ä»¥å°†NASä¸­çš„å…±äº«ç›®å½•å½“ä½œè‡ªå·±çš„ç£ç›˜æ¥è®¿é—®äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><h1 id="0X05-git-server"><a href="#0X05-git-server" class="headerlink" title="0X05 git server"></a>0X05 git server</h1><p>Synologyçš„å¥—ä»¶ä¸­å¿ƒä¸­æä¾›äº†git serverï¼Œå¯ä»¥åœ¨å®¶ä¸­éƒ¨ç½²ä¸€ä¸ªç§æœ‰git serverã€‚å®‰å…¨å¯é ã€‚</p><h1 id="0X06-docker"><a href="#0X06-docker" class="headerlink" title="0X06 docker"></a>0X06 docker</h1><p>é«˜çº§çš„Synologyç‰ˆæœ¬æä¾›dockeræœåŠ¡ï¼Œæœ‰äº†dockerå†åŠ ä¸Šè¿œç¨‹è®¿é—®å’Œç«¯å£è½¬å‘åï¼Œä½ çš„Synologyå°±å‡ ä¹æˆä¸ºäº†ä¸€å°çœŸæ­£çš„æœåŠ¡å™¨äº†ã€‚</p><h1 id="0X07-VideoStadion"><a href="#0X07-VideoStadion" class="headerlink" title="0X07 VideoStadion"></a>0X07 VideoStadion</h1><p>Synologyä¸­çš„VideoStadionå¥—ä»¶å¯ä»¥åˆ†æä½ NASä¸­å­˜å‚¨çš„ç”µå½±ï¼Œè‡ªåŠ¨å¸®ä½ æ•´ç†ã€ä¸‹è½½å°é¢ã€ä¸‹è½½å½±ç‰‡ä»‹ç»ã€ä¸‹è½½å­—å¹•ï¼Œç®€ç›´å°±æ˜¯ä¸€ä¸ªå®¶ç”¨çš„å¤šåª’ä½“ä¸­å¿ƒã€‚è™½ç„¶å‡ ä¹æ¯æ¬¡çœ‹NASä¸­çš„ç”µå½±éƒ½æ˜¯ä½¿ç”¨æœ¬åœ°æ’­æ”¾å™¨åœ¨æ’­æ”¾ï¼Œä¸è¿‡è¿˜æ˜¯è¦æ‰¿è®¤Synologyä¸­çš„VideoStadionå¥—ä»¶æ˜¯å¾ˆæ£’çš„,å¯èƒ½åªæ˜¯æˆ‘ä¸å¤ªå–œæ¬¢ç”¨è€Œå·²ã€‚</p><h1 id="0X08-DownloadStadion"><a href="#0X08-DownloadStadion" class="headerlink" title="0X08 DownloadStadion"></a>0X08 DownloadStadion</h1><p>è¿™ä¸ªæ˜¯æˆ‘çœ¼ä¸­çš„å¤§æ€å™¨ã€‚å‡è®¾ä½ åªæœ‰ä¸€å°ç¬”è®°æœ¬ï¼Œå¦‚æœä½ æƒ³è¦ä¸‹è½½å‡ éƒ¨é«˜æ¸…ç”µå½±ç©ºäº†çœ‹ï¼Œé‚£ä¹ˆå°±åªèƒ½åœ¨æ™šä¸Šçš„æ—¶å€™æŒ‚æœºä¸‹è½½ï¼Œç™½å¤©äº†å†æš‚åœå¸¦èµ°å»å·¥ä½œã€‚æ‹¥æœ‰äº†Synologyåå¯ä»¥æŠŠåå‡ ä¸ªç§å­ã€ç£åŠ›é“¾æ¥ã€httpåœ°å€ä¸¢åœ¨DownloadStadionä¸­ï¼Œè®¾å®šå¥½ä¸‹è½½æ—¶é—´å°±ä¸ç”¨å†ç®¡ä»–äº†ã€‚æˆ‘çš„DownloadStadionå°±æ˜¯æ¯å‘¨ä¸€è‡³å‘¨äº”çš„2:00åˆ°19:00è¿›è¡Œæ•°æ®ä¸‹è½½ï¼Œå…¶ä»–æ—¶é—´ç©ºé—²ã€‚</p><p>è€Œä¸”é…åˆè¿œç¨‹æ“ä½œå’Œæœç´¢åŠŸèƒ½ï¼Œå¯ä»¥å®ç°åœ¨ä»»ä½•åœ°æ–¹æå‡ºæ‰‹æœºå‘½ä»¤å®¶é‡Œçš„Synologyä¸‹è½½æ–‡ä»¶ï¼Œç­‰ä½ åˆ°å®¶æ–‡ä»¶æ—©å°±ä¸‹è½½å¥½äº†ã€‚</p><h1 id="0X09-å…¶ä»–ä¼˜åŠ¿"><a href="#0X09-å…¶ä»–ä¼˜åŠ¿" class="headerlink" title="0X09 å…¶ä»–ä¼˜åŠ¿"></a>0X09 å…¶ä»–ä¼˜åŠ¿</h1><p>ç†è®ºä¸Šä¸€å°HTPCç»è¿‡ä¸€ç•ªé…ç½®éƒ¨ç½²ä¹Ÿå¯ä»¥è¾¾åˆ°Synologyçš„æ•ˆæœï¼Œä¸è¿‡Synologyæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä¸€å°HTPCæ‰€ä¸èƒ½æ¯”æ‹Ÿçš„ã€‚Synologyéå¸¸çœç”µï¼Œé€šå¸¸æƒ…å†µä¸‹å®ƒåªæœ‰10Wå·¦å³çš„åŠŸç‡ï¼›è€Œä¸”Synologyçš„æœåŠ¡å¾ˆå…¨é¢ï¼ŒåŸºæœ¬ä¸Šä½ éœ€è¦çš„åŠŸèƒ½éƒ½åœ¨äº†ï¼Œä¸éœ€è¦ä½ è¿‡å¤šæŠ˜è…¾ï¼›è¿˜æœ‰å°±æ˜¯ä¸“ä¸šçš„NASä¼šå¾ˆç¨³å®šï¼ŒæŒç»­è¿è¡Œå¾ˆä¹…éƒ½æ²¡æœ‰é—®é¢˜ã€‚</p><h1 id="0X0A-åŠ£åŠ¿"><a href="#0X0A-åŠ£åŠ¿" class="headerlink" title="0X0A åŠ£åŠ¿"></a>0X0A åŠ£åŠ¿</h1><p>Synologyæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯æ–¹ä¾¿çœäº‹ï¼Œä½†æ˜¯æœ€å¤§çš„åŠ£åŠ¿å´æ˜¯â€œéº»çƒ¦è´¹äº‹â€ã€‚å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½æœ‰è¶³å¤Ÿçš„è®¡ç®—æœºåŸºç¡€ï¼Œå¯¹äºå¤§å¤šæ•°æ²¡æœ‰è®¡ç®—æœºåŸºç¡€çš„äººæ¥è¯´è¿™ä¸œè¥¿è¿˜æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œè€Œä¸”å¤§å¤šæ•°äººä¹Ÿå¹¶ä¸ä¼šæœ‰è´­ä¹°ä¸€å°NASçš„éœ€æ±‚ã€‚</p><h1 id="0X0B-ä¸€äº›æ›¿ä»£æ–¹æ¡ˆ"><a href="#0X0B-ä¸€äº›æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="0X0B ä¸€äº›æ›¿ä»£æ–¹æ¡ˆ"></a>0X0B ä¸€äº›æ›¿ä»£æ–¹æ¡ˆ</h1><p>å¦‚æœä¸æƒ³è´­ä¹°ä¸€å°NASçš„è¯ä¹Ÿæœ‰ä¸€äº›æ›¿ä»£å“ï¼Œæ®æˆ‘æ‰€çŸ¥ä¸é”™çš„æ–¹æ¡ˆæœ‰è¿™å‡ ä¸ªï¼š</p><ol><li>è‡ªå»ºâ€œé»‘ç¾¤æ™–â€ï¼ˆæ®è¯´å¾ˆéº»çƒ¦ï¼Œå‘å¾ˆå¤šï¼‰</li><li>OwnCloud/NextCloudç­‰äº‘å­˜å‚¨ç¨‹åº</li><li>ä½¿ç”¨OpenNASè‡ªå»ºåŠŸèƒ½å®Œå–„çš„NAS</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Synology </tag>
            
            <tag> NAS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¸­çš„F()</title>
      <link href="/2018/08/29/django-f-object/"/>
      <url>/2018/08/29/django-f-object/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸åˆ†æ ‡é¢˜"><a href="#0X00-å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸åˆ†æ ‡é¢˜" class="headerlink" title="0X00 å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸åˆ†æ ‡é¢˜"></a>0X00 å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸åˆ†æ ‡é¢˜</h1><p>æˆ‘ä»¬å¯¹Djangoä¸­çš„modelè¿›è¡ŒæŸ¥è¯¢æ—¶é€šå¸¸æ˜¯<strong>æŸä¸ªå­—æ®µå’Œä¸€ä¸ªå¸¸é‡</strong>å¯¹æ¯”ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§å†™æ³•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student.objects.filter(name=<span class="string">'shawn'</span>)</span><br><span class="line">Student.objects.filter(age=<span class="number">233</span>)</span><br><span class="line">Student.objects.filter(gender__in=(<span class="string">'F'</span>, <span class="string">'M'</span>))</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>å¦‚æœé‡åˆ°é«˜çº§çš„æŸ¥è¯¢å¯èƒ½ä¼šä½¿ç”¨<code>Q()</code>æŸ¥è¯¢ï¼Œä¸è¿‡ä¹Ÿåªæ˜¯è¿›è¡Œå¤šä¸ªæ¡ä»¶çš„æŸ¥è¯¢<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Student.objects.filter(</span><br><span class="line">    Q(name=<span class="string">'shawn'</span>) | Q(gender=<span class="string">'M'</span>)</span><br><span class="line">)</span><br><span class="line">Student.objects.filter(</span><br><span class="line">    Q(gender=<span class="string">'F'</span>) | ~Q(age=<span class="number">233</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><blockquote><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmp1c3Q2NjYuY24vMjAxOC8wNS8yMC9kamFuZ28tcXVlcnktcS8=" title="https://blog.just666.cn/2018/05/20/django-query-q/">è¿™é‡Œæ˜¯æˆ‘çš„å¦ä¸€ç¯‡ä»‹ç»Q()çš„åšæ–‡ã€‚<i class="fa fa-external-link"></i></span></p></blockquote><p>ä½†æ˜¯å¦‚æœæœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šâ€æŸ¥è¯¢è®¢å•ä¸­ç»“æŸæ—¶é—´å’Œå¼€å§‹æ—¶é—´çš„é—´éš”å¤§äº45åˆ†é’Ÿçš„â€œã€‚é‚£åº”è¯¥æ€ä¹ˆåŠçš„ï¼Ÿå› ä¸ºè®¢å•çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´éƒ½æ˜¯ä¸€ä¸ªå­—æ®µï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯”åŒä¸€æ¡æ•°æ®ä¸­çš„ä¸¤ä¸ªå­—æ®µã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨<code>F()</code>æ¥æŸ¥è¯¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> F</span><br><span class="line"><span class="keyword">from</span> my_project.models.Order</span><br><span class="line"></span><br><span class="line">forty_five_minutes = datetime.timedelta(minutes=<span class="number">45</span>)</span><br><span class="line">Order.objects.filter(end_time__gt=F(<span class="string">'start_time'</span>) + forty_five_minutes) <span class="comment"># æŸ¥è¯¢ç»“æŸæ—¶é—´å¤§äºå¼€å§‹æ—¶é—´åŠ ä¸Š45åˆ†é’Ÿçš„è®¢å•</span></span><br><span class="line">Order.objects.filter(operator__age__lte=F(<span class="string">'client__age'</span>))   <span class="comment"># æŸ¥è¯¢è®¢å•æ“ä½œå‘˜å¹´é¾„å°äºç­‰äºå®¢æˆ·çš„ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æœ‰å•¥ç”¨ï¼Œä¾‹å­è€Œå·²ï¼‰</span></span><br><span class="line"></span><br><span class="line">one_second = datetime.timedelta(seconds=<span class="number">1</span>)</span><br><span class="line">OldMan.objects.filter(age__gt=F(<span class="string">'age'</span>) + one_second)    <span class="comment"># æŸ¥è¯¢å¹´é¾„æ¯”è‡ªå·±å¹´é¾„å¤š1Sçš„å¤§äººï¼Ÿå“ˆå“ˆå“ˆ</span></span><br></pre></td></tr></table></figure><blockquote><p>æœ¬æ®µå†…å®¹çš„å®˜æ–¹æ–‡æ¡£ï¼š<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL2VuLzIuMS9yZWYvbW9kZWxzL2V4cHJlc3Npb25zLyNmLWV4cHJlc3Npb25z" title="https://docs.djangoproject.com/en/2.1/ref/models/expressions/#f-expressions">https://docs.djangoproject.com/en/2.1/ref/models/expressions/#f-expressions<i class="fa fa-external-link"></i></span><br>æœ¬æ®µå†…å®¹çš„å¦ä¸€ç¯‡åšå®¢ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vbGl1cS9wLzU5NDY4MDMuaHRtbA==" title="https://www.cnblogs.com/liuq/p/5946803.html">https://www.cnblogs.com/liuq/p/5946803.html<i class="fa fa-external-link"></i></span></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºPythonå‡½æ•°é»˜è®¤å€¼çš„å°é—®é¢˜</title>
      <link href="/2018/08/27/python-default-params/"/>
      <url>/2018/08/27/python-default-params/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Pythonä¸€åˆ‡çš†å¯¹è±¡</p></blockquote><h1 id="0X00-å›°æ‰°æˆ‘çš„ä¸€ä¸ªé—®é¢˜"><a href="#0X00-å›°æ‰°æˆ‘çš„ä¸€ä¸ªé—®é¢˜" class="headerlink" title="0X00 å›°æ‰°æˆ‘çš„ä¸€ä¸ªé—®é¢˜"></a>0X00 å›°æ‰°æˆ‘çš„ä¸€ä¸ªé—®é¢˜</h1><p>å‰ä¸¤å¤©åœ¨å·¥ä½œä¸Šé‡åˆ°äº†ä¸ªé—®é¢˜ï¼Œè¯´æ¥å¾ˆç®€å•ï¼šæˆ‘è¦åœ¨æ¯å¤©çš„å›ºå®šæ—¶åˆ»ç»Ÿè®¡ç³»ç»Ÿä¸­å½“å¤©äº§ç”Ÿçš„ä¸€äº›æ•°æ®å¹¶ä¸”ç”¨é‚®ä»¶å‘é€ç»™æŒ‡å®šçš„äººï¼Œåˆè€ƒè™‘åˆ°äº†ç¨‹åºçš„å¯å¤ç”¨æ€§(ç»Ÿè®¡å…¶ä»–æ—¥æœŸ)æˆ‘å¹¶æ²¡æœ‰æŠŠå‚æ•°å†™æ­»ï¼Œè€Œæ˜¯å°†å…¶é»˜è®¤ä¸ºå½“å¤©çš„æ—¥æœŸå¹¶å¯ä»¥æŒ‡å®šå‚æ•°ã€‚å¾ˆå®¹æ˜“æˆ‘å°±å†™å‡ºäº†ç±»ä¼¼ä¸‹é¢çš„ä»£ç ã€‚Ps.ä¼ªä»£ç ï¼Œä¸è¦è¿‡åˆ†çº ç»“ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">export_statistic</span><span class="params">(export_date=datetime.date.today<span class="params">()</span>)</span>:</span></span><br><span class="line">    result = get_statistic_for_day(export_date)</span><br><span class="line">    sendmail(<span class="string">'ä»Šæ—¥æ•°æ®ç»Ÿè®¡ç»“æœ'</span>, result, receiver_list)</span><br></pre></td></tr></table></figure></p><p>å¹¶ä¸”å°†å…¶é…ç½®åœ¨Celeryä¸­ï¼Œæ¯æ™šæ‰§è¡Œï¼Œå¹¶ä¸”åœ¨å¾—åˆ°äº†ç¬¬ä¸€å¤©çš„æ­£ç¡®æ•°æ®åé»˜è®¤ç¨‹åºæ­£ç¡®äº†ã€‚ç¬¬äºŒæ™šè™½ç„¶æ”¶åˆ°äº†ç»Ÿè®¡æ•°æ®çš„é‚®ä»¶ï¼Œä½†æ˜¯å‘ç°æ—¥æœŸæ˜¯å‰ä¸€å¤©çš„ã€‚ä»¥ä¸ºæ˜¯Celeryæˆ–æ˜¯æœåŠ¡å™¨æ—¶é—´åŒæ­¥é—®é¢˜æˆ–æ˜¯ç¼“å­˜ç­‰å¯¼è‡´çš„ï¼Œä½†æ˜¯åœ¨å¤šæ¬¡æ£€æŸ¥åæ²¡æœ‰å‘ç°è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚æ•…ä¸´æ—¶ä½¿ç”¨<code>crontab</code>å»æ‰§è¡Œè¿™ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä½†è¿™å¹¶ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ã€‚</p><a id="more"></a><h1 id="0X01-åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#0X01-åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="0X01 åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ"></a>0X01 åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ</h1><p>çº ç»“é—®é¢˜æ‰€åœ¨çš„æ—¶å€™çªç„¶æƒ³åˆ°â€œä¼šä¸ä¼šå‡½æ•°çš„é»˜è®¤å€¼åœ¨å‡½æ•°åˆæ¬¡åˆå§‹åŒ–çš„æ—¶å€™ç”Ÿæˆå¥½å°±ä¸å†å˜äº†ï¼Ÿâ€æ•…è€Œä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç æ¥æ£€éªŒè‡ªå·±çš„æ¨æ–­ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(date=datetime.now<span class="params">()</span>)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> date</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        test()</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><p>æœç„¶è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¥å‰çš„è®¾æƒ³ä¸åŒï¼ŒæŒ‰ç…§æˆ‘ä»¥å‰çš„æƒ³æ³•åº”è¯¥æ˜¯è¾“å‡ºçš„å‡ ä¸ªæ—¶é—´é—´éš”ä¸º1sï¼Œä½†æ˜¯ç»“æœå´æ˜¯æ¯ä¸€è¡Œéƒ½ç›¸åŒï¼ˆæœç„¶æˆ‘çš„1sä¸è§äº†ï¼‰ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br><span class="line">2018-08-27 23:04:53.008236</span><br></pre></td></tr></table></figure></p><h1 id="0X02-é‚£æ˜¯ä¸ºä»€ä¹ˆå‘¢"><a href="#0X02-é‚£æ˜¯ä¸ºä»€ä¹ˆå‘¢" class="headerlink" title="0X02 é‚£æ˜¯ä¸ºä»€ä¹ˆå‘¢"></a>0X02 é‚£æ˜¯ä¸ºä»€ä¹ˆå‘¢</h1><p><strong>Pythonä¸€åˆ‡çš†å¯¹è±¡</strong>è¿™å¥è¯çœ‹æ¥çœŸçš„ä¸æ˜¯è¯´ç€ç©å„¿çš„ã€‚å…¶å®Pythonä¸­çš„ä¸€ä¸ªå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå¯¹è±¡å°±ä¼šæœ‰åˆå§‹åŒ–çš„æ—¶å€™ã€‚Pythonçš„å‡½æ•°åœ¨ä½œä¸ºå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™å°±è®¡ç®—äº†â€œé»˜è®¤å‚æ•°â€ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨å‡½æ•°<code>def test(date=datetime.now())</code>åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»è®¡ç®—äº†<code>date=datetime.now()</code>ä¸º<code>2018-08-27 23:04:53.008326</code>ï¼Œæ‰€ä»¥ä»¥åæ¯æ¬¡è°ƒç”¨çš„å‡½æ•°testé»˜è®¤å‚æ•°éƒ½æ˜¯è¿™ä¸ªå€¼ï¼Œæœ‰ä¸€ä¸ªç»å…¸çš„æ¡ˆä¾‹å¯ä»¥å‚è€ƒã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a, b=[])</span>:</span></span><br><span class="line">    b.append(a)</span><br><span class="line">    <span class="keyword">print</span> b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        test(i)</span><br></pre></td></tr></table></figure></p><p>æŒ‰ç…§æˆ‘ä¹‹å‰çš„æƒ³æ³•ï¼Œè¾“å‡ºçš„åº”è¯¥æ˜¯<code>[0], [1], [2]...</code>è¿™ç§ï¼Œæ¯æ¬¡åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶è€Œäº‹å®ä¸Šæ˜¯è¿™æ ·çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[0]</span><br><span class="line">[0, 1]</span><br><span class="line">[0, 1, 2]</span><br><span class="line">[0, 1, 2, 3]</span><br><span class="line">[0, 1, 2, 3, 4]</span><br><span class="line">[0, 1, 2, 3, 4, 5]</span><br><span class="line">[0, 1, 2, 3, 4, 5, 6]</span><br><span class="line">[0, 1, 2, 3, 4, 5, 6, 7]</span><br><span class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8]</span><br><span class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥é€šè¿‡<code>id()</code>æ¥æ£€æŸ¥ä¸€ä¸‹åŸå› ã€‚Pythonä¸­çš„<code>id(foo)</code>ä¼šè¿”å›fooåœ¨å†…å­˜ä¸­çš„å”¯ä¸€æ ‡è¯†ï¼Œç¨ä½œä¿®æ”¹æŠŠä»£ç æ”¹æˆå¦‚ä¸‹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a, b=[])</span>:</span></span><br><span class="line">    b.append(a)</span><br><span class="line">    <span class="keyword">print</span> id(b), b  <span class="comment"># åªæ˜¯åœ¨è¿™é‡Œæ–°å¢äº†id(b)çš„è¾“å‡º</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        test(i)</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®<code>b=[]</code>åªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ¯æ¬¡ä½¿ç”¨çš„bå¹¶ä¸æ˜¯æˆ‘ä»¬è‡†æƒ³ä¸­é‡æ–°åˆå§‹åŒ–çš„ï¼Œè€Œæ˜¯ä¸€ä¸ªç°æœ‰çš„ã€‚</p><h1 id="0X03-å†æ¬¡è¯å®"><a href="#0X03-å†æ¬¡è¯å®" class="headerlink" title="0X03 å†æ¬¡è¯å®"></a>0X03 å†æ¬¡è¯å®</h1><p>è‡ªå·±å†™äº†å‡ è¡Œä»£ç æ¥ç®€å•è¯æ˜è¿™ä¸ªäº‹æƒ…ï¼ŒæŒ‰ç…§æˆ‘ä¹‹å‰çš„è‡†æƒ³è¿™ä¸ªç¨‹åºåº”è¯¥æ˜¯çœ‹ä¸åˆ°printè¾“å‡ºçš„ï¼Œå› ä¸ºçœ‹èµ·æ¥<code>hello()</code>å¹¶æ²¡æœ‰è¢«è°ƒç”¨åˆ°ï¼Œä½†æ˜¯å…¶å®å‘¢ï¼Ÿ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(a=<span class="string">'hello'</span>)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> a</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">world</span><span class="params">(b=hello<span class="params">()</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p><p>è§£é‡Šå™¨åœ¨æ‰§è¡Œ<code>def hello(a=&#39;hello&#39;)</code>çš„æ—¶å€™æ­£å¸¸ä¸‹å»äº†ï¼Œç”Ÿæˆäº†ä¸€ä¸ª<code>hello()</code>æ–¹æ³•çš„å‡½æ•°å¯¹è±¡ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œåˆ°<code>def world(b=hello())</code>çš„æ—¶å€™ä¹Ÿè¦å°†<code>world()</code>åˆå§‹åŒ–ä¸ºä¸€ä¸ªå›ºå®šçš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±åŠ¿å¿…æ‰§è¡Œäº†<code>b=hello()</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€ç»ˆè¿˜æ˜¯ä¼šæœ‰ä¸€ä¸ª<code>hello</code>çš„è¾“å‡ºã€‚</p><blockquote><p>1sä¸è§äº†å½“ç„¶ä¸æ˜¯å› ä¸ºæ—¶é—´è¢«è½¬ç§»èµ°äº†-_-</p></blockquote><blockquote><p>æ–‡ç« å‚è€ƒè‡ª<span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vY3JhenlydW5uaW5nL3AvNjg2Nzg0OS5odG1s" title="https://www.cnblogs.com/crazyrunning/p/6867849.html">Pythonè¿›é˜¶-å‡½æ•°é»˜è®¤å‚æ•° çæ¨±ç¼¤çº·-cnblogs<i class="fa fa-external-link"></i></span></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æå‡Gitæ–°æ‰‹æ•ˆç‡çš„å°æŠ€å·§</title>
      <link href="/2018/08/22/git-skill/"/>
      <url>/2018/08/22/git-skill/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹æ¯”è¾ƒå°‘ï¼Œåªæ˜¯ä»Šæ™šç¿»çœ‹æ•™ç¨‹çš„æ—¶å€™å‘ç°çš„å‡ ä¸ªå¯ä»¥æ›¿æ¢è°ƒæˆ‘ä»¥å‰ä¸€äº›è¯¡å¼‚æ“ä½œçš„æ–¹æ³•ï¼Œå°†å…¶æ•´ç†è´´å‡ºã€‚</p><h1 id="0X00-git-blame"><a href="#0X00-git-blame" class="headerlink" title="0X00 git blame"></a>0X00 git blame</h1><p>æ˜¯è°åœ¨ä»£ç é‡Œä¸‹äº†æ¯’ï¼Ÿæ˜¯è°ç”¨äº†ä¸€ä¸ªè¶…é…·ç‚«çš„æ–¹æ³•è§£å†³äº†ä½ è§£å†³ä¸äº†çš„é—®é¢˜ï¼Ÿå½“ä½ æƒ³çŸ¥é“ä»“åº“ä¸­çš„æŸè¡Œä»£ç æ˜¯è°æäº¤çš„ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚<code>git blame hello.py</code>å¯ä»¥çœ‹åˆ°hello.pyè¿™ä¸ªæ–‡ä»¶æ‰€æœ‰è¡Œçš„æäº¤äººæ˜¯è°ï¼Œäºä½•æ—¶æäº¤çš„ã€‚è€Œä¸”è¿™ä¸ªå‘½ä»¤æœ€å¸¸ç”¨çš„æ˜¯å’Œ<code>grep</code>åˆç”¨ï¼Œ<code>git blame hello.py | grep prinft</code>(æ˜¯è°å†™é”™äº†è¿™ä¸ªå•è¯+_+)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   1) &lt;p align=&quot;center&quot;&gt;</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   2)   &lt;img src=&quot;https://s3.amazonaws.com/ohmyzsh/oh-my-zsh-logo.png&quot; alt=&quot;Oh My Zsh&quot;&gt;</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   3) &lt;/p&gt;</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   4) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   5) Oh My Zsh is an open source, community-driven framework for managing your [zsh](https://www.zsh.org/) configuration.</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   6) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   7) Sounds boring. Let&apos;s try again.</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   8) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200   9) _Oh My Zsh will not make you a 10x developer...but you might feel like one.__</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  10) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  11) Once installed, your terminal shell will become the talk of the town _or your money back!_ With each keystroke in your command prompt, you&apos;ll take advantage of the hundreds of powerful plugins and beautiful themes. Strangers will come up to you in cafÃ©s and ask you, _&quot;that is amazing! are you some sort of genius?&quot;_</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  12) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  13) Finally, you&apos;ll begin to get the sort of attention that you have always felt you deserved. ...or maybe you&apos;ll use the time that you&apos;re saving to start flossing more often. ğŸ˜¬</span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  14) </span><br><span class="line">^9544316 (Lars Schneider 2018-07-24 22:55:48 +0200  15) To learn more, visit [ohmyz.sh](https://ohmyz.sh) and follow [@ohmyzsh](https://twitter.com/ohmyzsh) on Twitter.</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢çš„ä¾‹å­æ˜¯<code>oh-my-zsh</code>ä¸­READMEçš„éƒ¨åˆ†è¾“å‡º</p></blockquote><a id="more"></a><h1 id="0X01-git-commit-â€“amend"><a href="#0X01-git-commit-â€“amend" class="headerlink" title="0X01 git commit â€“amend"></a>0X01 git commit â€“amend</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim xxx.py</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"naruto! sasuke!"</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸å°å¿ƒæŠŠåˆšåˆšçš„commitå†™é”™äº†ï¼Œç°åœ¨è¿˜æ¥å¾—åŠåæ‚”ã€‚</p><p>å¦‚æœä½ åˆšåˆšcommitï¼Œè¿˜æ²¡æœ‰è¿›è¡Œæ–°çš„æ”¹åŠ¨ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>git commit --amend</code>æ¥ä¿®æ”¹ä¸Šä¸€æ¬¡çš„commitã€‚è¾“å…¥å‘½ä»¤å›è½¦ä¹‹åä¼šæ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œæœ€ä¸Šé¢çš„å°±æ˜¯æœ¬æ¬¡æäº¤çš„commit messageï¼ŒåŠ¨æ‰‹ä¿®æ”¹ä¹‹åä¿å­˜å°±å¯ä»¥äº†ã€‚å¦‚æœcommitä¹‹åæ”¹åŠ¨äº†å¾ˆå¤šæ‰æƒ³èµ·æ¥é‚£ä¹Ÿå¯ä»¥å…ˆ<code>git add .</code>å†<code>git stash</code>ï¼Œå°†æ”¹åŠ¨å…ˆä¸´æ—¶å­˜èµ·æ¥å†æ‰§è¡Œ<code>git commit --amend</code>ï¼Œä¿®æ”¹å¥½äº†commit messageä¹‹åå†ç”¨<code>git stash pop</code>æŠŠåˆšåˆšçš„æ”¹åŠ¨ç»™popå‡ºæ¥ã€‚</p><blockquote><p>ps.åœ¨gité‡Œå‡ ä¹ä¸€åˆ‡éƒ½æ˜¯æ¥å¾—åŠçš„ï¼Œå…è®¸åæ‚”è¯çš„å­˜åœ¨ã€‚</p></blockquote><h1 id="0X02-git-checkout-â€“-filename"><a href="#0X02-git-checkout-â€“-filename" class="headerlink" title="0X02 git checkout â€“ filename"></a>0X02 git checkout â€“ filename</h1><p>ä¸ç®¡å‡ºäºä»€ä¹ˆåŸå› ï¼Œå¤§å®¶éƒ½æœ‰å¯èƒ½éœ€è¦åˆ é™¤æ‰å¯¹æŸä¸€ä¸ªæ–‡ä»¶çš„æ”¹åŠ¨ã€‚å¦‚æœæ˜¯æ‰€æœ‰çš„æ”¹åŠ¨éƒ½éœ€è¦åˆ é™¤ï¼Œé‚£ä¹ˆå¯ä»¥ç®€å•çš„<code>git add .; git stash; git stash drop</code>ä¸¢å¼ƒè¿™äº›æ”¹åŠ¨ã€‚å¦‚æœæ”¹åŠ¨æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªæ–‡ä»¶éœ€è¦å›é€€ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨<code>git checkout -- hello.py</code>æ¥åˆ é™¤hello.pyçš„æ”¹åŠ¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitä¸­çš„bare Repository</title>
      <link href="/2018/08/19/git-bare-responsitory/"/>
      <url>/2018/08/19/git-bare-responsitory/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-é‡åˆ°äº†ä»€ä¹ˆ"><a href="#0X00-é‡åˆ°äº†ä»€ä¹ˆ" class="headerlink" title="0X00 é‡åˆ°äº†ä»€ä¹ˆ"></a>0X00 é‡åˆ°äº†ä»€ä¹ˆ</h1><p>æˆ‘ä»¬ä½¿ç”¨gitï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯å¤§äºç­‰äºä¸€ä¸ªäººè¿›è¡Œä»£ç ç¼–è¾‘ï¼Œç„¶åå°†è‡ªå·±çš„æ”¹åŠ¨æäº¤åˆ°<code>github/gitlab/gogs</code>ç­‰ä»“åº“ï¼Œç„¶åå†é€šè¿‡<code>pull request/merge request</code>çš„æ–¹å¼è¿›è¡Œä»£ç åˆå¹¶ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯å…ˆä»<code>github</code>ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œç„¶åæŒ‰ç…§å‘å¯¼åœ¨è‡ªå·±çš„æœ¬åœ°<code>git clone</code>ä¸‹æ¥ä¸€ä¸ªç©ºé¡¹ç›®ï¼Œå†æäº¤ä»£ç ä¸Šå»ï¼›æˆ–è€…<code>fork &amp; clone</code>çš„æµç¨‹ã€‚</p><p>ä»¥å‰ä»æ¥æ²¡æœ‰å»æƒ³è¿‡<code>github</code>ä¸Šçš„ä»“åº“æ˜¯ä¸æ˜¯å’Œæˆ‘æœ¬åœ°çš„ç›¸åŒï¼Œä»¥è‡³äºä»Šå¤©ç¬¬ä¸€æ¬¡æ­å»ºè‡ªå·±çš„gitæœåŠ¡æ—¶é‡åˆ°äº†é—®é¢˜ã€‚æˆ‘ä»æœåŠ¡å™¨ä¸Šä¸€é¡¿æ“ä½œçŒ›å¦‚è™<code>mkdir xxx; cd xxx; git init; touch README.md; git add .; git commit -m &quot;init the repository&quot;</code>ï¼Œç»“æœä¸å°å¿ƒæˆäº†äºŒç™¾äº”ã€‚å› ä¸ºè¿™ä¸ªä»“åº“æ ¹æœ¬ä¸èƒ½cloneåˆ°æˆ‘æœ¬åœ°ï¼Œç»è¿‡ä¸€ç•ªæœç´¢å‘ç°äº†gitä¸­ä»“åº“ä¹‹é—´çš„å…³ç³»æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚</p><a id="more"></a><h1 id="0X01-gitä¸­ä¸€èˆ¬çš„repository"><a href="#0X01-gitä¸­ä¸€èˆ¬çš„repository" class="headerlink" title="0X01 gitä¸­ä¸€èˆ¬çš„repository"></a>0X01 gitä¸­ä¸€èˆ¬çš„repository</h1><p>gitä¸­ä¸€èˆ¬çš„repositoryé€šå¸¸æœ‰ä¸¤ä¸ªæ¥æºï¼š<code>git clone</code>æˆ–è€…åœ¨<code>git init</code>ã€‚è¿™ç§ä»“åº“é€šå¸¸æ˜¯æˆ‘ä»¬ç”¨æ¥æ­£å¸¸å·¥ä½œçš„ä»“åº“ï¼Œæˆ‘ä»¬çš„ä»£ç éƒ½åœ¨è¿™é‡Œé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä»“åº“é‡Œå°½æƒ…ä½¿ç”¨<code>git add/rm/status/log</code>ç­‰å¸¸è§æ“ä½œã€‚ä¹Ÿå¯ä»¥å°†ä»£ç pushåˆ°<code>origin/upstream</code>ç­‰ä¸Šæ¸¸ä»“åº“ï¼Œè¿™ç±»ä»“åº“æ˜¯æœ€å¸¸è§çš„äº†ã€‚</p><p>ä»“åº“ä¸­ä¸ä»…å­˜æœ‰æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„ä»£ç ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶<code>.gitignore</code>å’Œ<code>.git</code>ã€‚å…¶ä¸­<code>.gitignore</code>è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œæ˜¯ç”¨æ¥åˆ¤æ–­å“ªäº›æ–‡ä»¶éœ€è¦æˆ–ä¸éœ€è¦æäº¤åˆ°repositoryä¸­çš„ï¼›å¦ä¸€ä¸ª<code>.git</code>å°±æ˜¯gitå®ç°ç‰ˆæœ¬æ§åˆ¶çš„é‡è¦æ–‡ä»¶äº†ã€‚æˆ‘ä»¬å¯¹ä»£ç çš„æ”¹åŠ¨ã€ä¸åŒçš„åˆ†æ”¯ã€commitçš„å˜åŒ–éƒ½æ˜¯åœ¨è¿™ä¸ªç›®å½•ä¸­å­˜å‚¨çš„ã€‚</p><blockquote><p>ä¸å»ºè®®ç›´æ¥åŠ¨æ‰‹ä¿®æ”¹<code>.git</code>ç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆå¥‡æ€ªçš„é—®é¢˜è€Œæ— æ³•è§£å†³ã€‚</p></blockquote><h1 id="0X02-gitä¸­çš„bare-repository"><a href="#0X02-gitä¸­çš„bare-repository" class="headerlink" title="0X02 gitä¸­çš„bare repository"></a>0X02 gitä¸­çš„bare repository</h1><p>å…¶å®gitä¸­è¿˜æœ‰ä¸€ç§<code>bare repository</code>ï¼Œè¿™ç§ä»“åº“ä¸­æ–‡å¯ä»¥ç§°ä¹‹ä¸º<code>è£¸ä»“åº“</code>ã€‚è¿™ç§ä»“åº“ä¸­æ²¡æœ‰æˆ‘ä»¬æ­£å¸¸ä½¿ç”¨çš„ä»£ç ï¼Œä¹Ÿæ²¡æœ‰<code>.gitignore</code>å’Œ<code>.git</code>æ–‡ä»¶ã€‚ä¸è¿‡å¯ä»¥æŠŠè¿™ç§ä»“åº“ç†è§£æˆå°†<code>.git</code>ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶éƒ½æ‹¿åˆ°<code>bare repository</code>ä»“åº“çš„æ ¹ç›®å½•äº†ã€‚<code>bare repository</code>å­˜å‚¨ä¸åŒåˆ†æ”¯ä¸å„ä¸ªcommitç­‰ä¸ç‰ˆæœ¬æ§åˆ¶ç›¸å…³çš„æ•°æ®ï¼Œä½†æ˜¯ä¸ä¼šä¿å­˜æ•´æ•´ä¸€ä»½ä»£ç ã€‚</p><p>ä½†æ˜¯è¿™ç§ä»“åº“å¯ä»¥ä½¿ç”¨<code>git clone</code>æ¥cloneä»“åº“åˆ°æœ¬åœ°ï¼Œæ‰€ä»¥é€šå¸¸è¢«å½“ä½œå…±äº«ä»“åº“ã€‚ä¾‹å¦‚ä½ çš„å›¢é˜Ÿæ²¡æœ‰åœ¨ä½¿ç”¨githubæˆ–æ˜¯gitlabç­‰å·¥å…·ï¼Œé‚£å°±å¯ä»¥åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ª<code>bare repository</code>ï¼Œç„¶åå¤§å®¶å‡ä»æ­¤ä»“åº“cloneä»£ç ï¼Œç„¶åå†ä¸€èµ·æäº¤è‡³æ­¤ä»¥å®ç°gitçš„å·¥ä½œæµã€‚</p><p>è¦ç”Ÿæˆä¸€ä¸ªç©ºçš„<code>bare repository</code>å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ä¸€ä¸ªç©ºç›®å½•ä¸­<code>git init --bare</code>å°±å¯ä»¥äº†ï¼Œç”Ÿæˆå¥½ä¹‹åå°±å¯ä»¥ä»è¯¥ä»“åº“<code>clone</code>ä»£ç äº†ã€‚</p><h1 id="0X03-éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„repository"><a href="#0X03-éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„repository" class="headerlink" title="0X03 éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„repository"></a>0X03 éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„repository</h1><p>åˆ°è¿™é‡Œéƒ¨ç½²ä¸€å°åˆä½œç”¨çš„æœåŠ¡å™¨ä¸Šçš„repositoryå°±å˜å¾—å®¹æ˜“å¤šäº†ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªgitä½¿ç”¨çš„ç”¨æˆ·ï¼Œå†ä½¿ç”¨gitç”¨æˆ·åˆ›å»ºå¯¹åº”çš„è£¸ä»“åº“ï¼Œå†ä»å®¢æˆ·æœºcloneåˆ°æœ¬åœ°ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨<code>commit/push/pull</code>ç­‰æ“ä½œäº†ã€‚</p><ol><li>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªgitç”¨æˆ·<code>user add git</code></li><li>ç„¶åä¸ºå…¶åˆ›å»ºhomeç›®å½•<code>mkdir /home/git</code></li><li>å†ä¿®æ”¹æ‰€å±äººä¸ºgit<code>chown git.git /home/git</code></li><li>åˆ‡æ¢æˆgitç”¨æˆ·å¹¶è¿”å›homeç›®å½•<code>su git;  cd</code></li><li>åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç©ºç›®å½•<code>mkdir .ssh</code></li><li>åœ¨<code>.ssh</code>ï¼Œç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>authorized_keys</code>çš„æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¡«å…¥è‡ªå·±çš„sshå…¬é’¥</li><li>åœ¨æœ¬åœ°å·²ç»å¯ä»¥cloneä¸‹æ¥å•¦<code>git clone ssh://git@xxx.xxx.xxx.xxx/xxx/xxx.git</code></li><li>ä¸ºäº†å®‰å…¨å¯ä»¥ä¿®æ”¹<code>git</code>ç”¨æˆ·çš„é»˜è®¤shell<code>usermod git -s /bin/git-shell</code></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹æ—¥å¸¸ä½¿ç”¨è½¯ä»¶æ¨è</title>
      <link href="/2018/08/12/why-linux/"/>
      <url>/2018/08/12/why-linux/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ¥å‡†å¤‡æ€»ç»“ä¸€ä¸‹Linuxæ¡Œé¢ç³»ç»Ÿä½¿ç”¨ä¸€å¹´ä»¥æ¥çš„ä¸€äº›æ„Ÿå—ï¼Œä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©Linuxä½œä¸ºæ¡Œé¢ç³»ç»Ÿå·¥ä½œå­¦ä¹ çš„ï¼Œä½†æ˜¯æ„æ€äº†åŠä¸ªå°æ—¶ä¹Ÿæ²¡èƒ½æƒ³åˆ°è¦å†™äº›ä»€ä¹ˆã€‚æ‰€ä»¥è¿˜æ˜¯æ¥æ¨èä¸€ä¸‹ä¸€å¹´ä»¥æ¥åœ¨Linuxæ¡Œé¢å¹³å°ä¸‹çš„è½¯ä»¶ä½“éªŒå’Œæ¨èå§ã€‚ç”±äºæˆ‘è¿™ä¸€å¹´å¤šä»¥æ¥ä¸€ç›´ä½¿ç”¨çš„æ˜¯Fedora Workstadionï¼Œæ‰€ä»¥å¹¶ä¸èƒ½ä¿è¯è¿™äº›è½¯ä»¶èƒ½åœ¨å…¶ä»–å¹³å°ä¸‹çš„ä½“éªŒä¸æˆ‘ä¸€è‡´ï¼Œä¸è¿‡ä¸€èˆ¬æ¥è¯´éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„å‘¢ã€‚</p><h1 id="0X00-vim-spacevim"><a href="#0X00-vim-spacevim" class="headerlink" title="0X00 vim + spacevim"></a>0X00 vim + spacevim</h1><p>é¦–å…ˆè¯´æ˜æˆ‘ä¸è®¤ä¸ºVimæ¯”IDEå†™ä»£ç æ›´å¥½ç”¨ï¼Œä½†æ˜¯æˆ‘ä»ç„¶åœ¨ä½¿ç”¨vimã€‚ä¸€ä¸ªåŸå› æ˜¯è§‰å¾—ä½¿ç”¨ç›—ç‰ˆIDEæœ‰äº›ä¸å¤ªé“å¾·ï¼Œå¦ä¸€ä¸ªä¹Ÿæ˜¯æƒ³è¦æå‡ä¸€ä¸‹è‡ªå·±çš„ä»£ç æ°´å¹³ï¼Œæ¯•ç«Ÿvimç»™å‡ºçš„æç¤ºä¼šæ›´å°‘ä¸€äº›ã€‚IDEç”¨æˆ·å¯ä»¥åœ¨IDEä¸Šå®‰è£…vimçš„æ“ä½œæ’ä»¶ï¼Œæ¯•ç«Ÿvimçš„æ“ä½œæ–¹å¼è¿˜æ˜¯èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šæå‡æ•ˆç‡çš„ã€‚</p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NwYWNlVmltL1NwYWNlVmlt" title="https://github.com/SpaceVim/SpaceVim">SpaceVim<i class="fa fa-external-link"></i></span> å‘¢æ˜¯vimçš„ä¸€ä¸ªæ’ä»¶æ‰“åŒ…é…ç½®é›†æˆä¹‹åçš„ä¸€ä¸ªç‰ˆæœ¬ã€‚ç”±äºå®ƒé›†æˆäº†å¤§é‡ç²¾é€‰æ’ä»¶å’Œé…ç½®ï¼Œæ‰€ä»¥ç”¨èµ·æ¥å¾ˆèˆ’æœï¼Œå°±æŠŠä»–å½“æˆä¸€ä¸ªé«˜çº§çš„æ–‡æœ¬ç¼–è¾‘å™¨æ¥ç”¨å°±å¥½çš„ã€‚spacevimè¿˜æœ‰å®˜æ–¹çš„ä¸­æ–‡æ–‡æ¡£å¯ä»¥æŸ¥é˜…ï¼Œè™½ç„¶å­¦ä¹ æˆæœ¬ç›¸å¯¹é«˜ä¸€äº›ï¼Œä½†æ˜¯å¸¦æ¥æ•ˆç‡å’Œçˆ½å¿«æ„Ÿçš„æå‡å¯ä¸æ˜¯ä¸€ç‚¹ç‚¹çš„ã€‚</p><h1 id="0X01-ulaunch"><a href="#0X01-ulaunch" class="headerlink" title="0X01 ulaunch"></a>0X01 ulaunch</h1><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1VsYXVuY2hlci9VbGF1bmNoZXI=" title="https://github.com/Ulauncher/Ulauncher">ulaunch<i class="fa fa-external-link"></i></span>æ˜¯ä¸€ä¸ªå¿«é€Ÿå¯åŠ¨å™¨ï¼ŒæŒ‰ä¸‹å¿«æ·é”®åå±å¹•ä¸­é—´ä¼šå‡ºç°ä¸€ä¸ªæœç´¢æ¡†ï¼Œå¯ä»¥å¿«æ·æ‰“å¼€è½¯ä»¶å’Œæ–‡ä»¶ã€‚é…åˆä¸€äº›æ’ä»¶å¯ä»¥å®ç°åœ¨æœç´¢æ¡†ä¸­ç¿»è¯‘ç­‰å·¥ä½œï¼Œè€Œä¸”è½¯ä»¶å’Œæ’ä»¶éƒ½æ˜¯Pythonå†™çš„å¯ä»¥è½»æ¾åˆ¶ä½œè‡ªå·±çš„æ’ä»¶ã€‚</p><a id="more"></a><h1 id="0X02-plank"><a href="#0X02-plank" class="headerlink" title="0X02 plank"></a>0X02 plank</h1><p>plankæ˜¯ä¸€ä¸ªç®€å•è½»ä¾¿çš„dockæ ï¼Œåœ¨Fedoraçš„å®˜æ–¹ä»“åº“é‡Œå°±æœ‰çš„ï¼Œç›´æ¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å°±èƒ½ä¸€é”®å®‰è£…ã€‚</p><h1 id="0X03-audacity"><a href="#0X03-audacity" class="headerlink" title="0X03 audacity"></a>0X03 audacity</h1><p>audacityæ˜¯ä¸€ä¸ªlinuxä¸‹çš„æœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨ï¼Œç®€å•å¥½ç”¨ï¼Œæ²¡æœ‰å¤šä½™çš„å¤æ‚åŠŸèƒ½ï¼Œæ¨èä¸€æ³¢ã€‚</p><h1 id="0X04-vlc"><a href="#0X04-vlc" class="headerlink" title="0X04 vlc"></a>0X04 vlc</h1><p>vlcåº”è¯¥æ˜¯Linuxä¸‹æœ€å¥½çš„è§†é¢‘æ’­æ”¾å™¨ä¹‹ä¸€äº†ï¼Œå„ç§æ ¼å¼çš„è§†é¢‘éŸ³é¢‘éƒ½ä¸æ˜¯é—®é¢˜ã€‚</p><h1 id="0X04-filezilla"><a href="#0X04-filezilla" class="headerlink" title="0X04 filezilla"></a>0X04 filezilla</h1><p>è¿™æ˜¯ä¸€æ¬¾è€ç‰Œçš„FTPå·¥å…·ï¼Œè™½ç„¶å¤§å¤šæ•°æ—¶å€™æ–‡ä»¶ç®¡ç†å™¨å·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬å¯¹FTPçš„ä¸€äº›åŸºæœ¬éœ€æ±‚äº†ï¼Œä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šæœ‰ä¸€äº›æ»¡è¶³ä¸äº†çš„ä¸œè¥¿ï¼Œè¿™æ—¶å€™filezillaå°±èƒ½å‘æŒ¥ä½œç”¨äº†ï¼Œç•™ä¸€ä¸ªæœ‰å¤‡æ— æ‚£å˜›ã€‚</p><h1 id="0X05-electronic-wechat"><a href="#0X05-electronic-wechat" class="headerlink" title="0X05 electronic wechat"></a>0X05 electronic wechat</h1><p>é¹…å‚æ²¡æœ‰Linuxä¸‹çš„å¾®ä¿¡ï¼Œä¸è¿‡å¹¸å¥½æœ‰äººåˆ¶ä½œäº†è¿™ä¸ªåŸºäºç½‘é¡µç‰ˆå¾®ä¿¡çš„å¾®ä¿¡å®¢æˆ·ç«¯ï¼Œä½¿ç”¨ä½“éªŒè‰¯å¥½ï¼Œæ¨èï¼</p><h1 id="0X06-electronic-ssr"><a href="#0X06-electronic-ssr" class="headerlink" title="0X06 electronic ssr"></a>0X06 electronic ssr</h1><p>shadowsocksRæ²¡çš„è§£é‡Šã€‚å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªShadowsocks-QT5ä¹Ÿå¾ˆæ£’ï¼Œä¸è¿‡ä¸æ”¯æŒSSRç½¢äº†ï¼Œçœ‹éœ€æ±‚é€‰æ‹©ã€‚</p><h1 id="0X07-zsh-ohmyzsh"><a href="#0X07-zsh-ohmyzsh" class="headerlink" title="0X07 zsh + ohmyzsh"></a>0X07 zsh + ohmyzsh</h1><p>å‘½ä»¤è¡Œç»„åˆï¼Œå†æ­é…ä¸Šohmyzshçš„ä¸€äº›æ’ä»¶ï¼Œä¸ä»…ç»ˆç«¯éå¸¸æ¼‚äº®æ•ˆç‡è¿˜éå¸¸é«˜ã€‚è¯´åˆ°zshå°±ä¸å¾—ä¸è¯´fishï¼Œç›¸å¯¹æ¥è¯´zshæ˜¯å’Œbashé«˜åº¦å…¼å®¹çš„ï¼Œè™½ç„¶æ¯”fishæ…¢äº†ä¸€ç‚¹ï¼Œä½†æˆ‘æ›´å–œæ¬¢ä¸bashçš„é«˜åº¦å…¼å®¹ï¼Œæ ¹æ®å–œå¥½é€‰æ‹©å•¦ã€‚</p><h1 id="0X08-jq"><a href="#0X08-jq" class="headerlink" title="0X08 jq"></a>0X08 jq</h1><p>jqå‘½ä»¤æ˜¯ç”¨æ¥æ ¼å¼åŒ–jsonè¾“å‡ºçš„ã€‚æ¯”å¦‚ä½ çš„<code>curl -XGET xxxx</code>å’Œ<code>cat xxx.json</code>çš„è¾“å‡ºç»“æœï¼Œé€šå¸¸éƒ½æ˜¯æ²¡æœ‰æ ¼å¼åŒ–çš„ï¼Œå¦‚æœä½ å®‰è£…äº†jqçš„è¯å°±å¯ä»¥<code>cat xxx.json | jq</code>æŠŠè¾“å‡ºå˜æˆæ ¼å¼åŒ–çš„ï¼Œè€Œä¸”å¸¦æœ‰é«˜äº®ã€‚æ³¨æ„å“¦ï¼Œè¿™ä¸ªåŒ…åœ¨fedoraä¸­å°±ç›´æ¥å«åš<code>jq</code>æ‰€ä»¥åªéœ€è¦<code>dnf install jq</code>å°±å¯ä»¥äº†ï¼Œå…¶ä»–çš„å‘è¡Œç‰ˆæœ¬è‡ªå·±æ‰¾ä¸€ä¸‹å“ˆã€‚</p><h1 id="0X09-ag"><a href="#0X09-ag" class="headerlink" title="0X09 ag"></a>0X09 ag</h1><p>agæ˜¯åˆä¸€ä¸ªè¶…çŸ­è¶…å¥½ç”¨çš„å‘½ä»¤ã€‚æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä½ åœ¨ä»£ç åº“çš„æ ¹ç›®å½•ä¸‹ï¼Œæƒ³è¦æ‰¾å‡ ç™¾å‡ åƒä¸ªæºç æ–‡ä»¶ä¸­çš„<code>pdb</code>è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿç†Ÿæ‚‰linuxçš„å¾ˆå®¹æ˜“å†™å‡º<code>grep -Rn &quot;pdb&quot; .</code>ï¼Œä»è€Œæ‰¾åˆ°æ‰€æœ‰åŒ…å«pdbçš„è¡Œã€‚agå°±æ˜¯ç”¨æ¥æ›¿æ¢è¿™æ¡è¾ƒé•¿ä¸”ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤çš„ï¼Œä½ åªéœ€è¦ç”¨<code>ag pdb</code>å°±å¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœï¼Œè€Œä¸”è¾“å‡ºç»“æœè¿˜æ¯”grepçš„æ›´ç¾è§‚æ›´ç›´æ¥ã€‚</p><blockquote><p>åœ¨fedoraä¸­è¿™ä¸ªåŒ…åæ˜¯<code>the_silver_searcher</code>ã€‚</p></blockquote><h1 id="0X0A-vnote"><a href="#0X0A-vnote" class="headerlink" title="0X0A vnote"></a>0X0A vnote</h1><p>åœ¨githubä¸­æœç´¢å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸ºVnoteçš„é¡¹ç›®ï¼Œè¿™ä¸ªæ˜¯æˆ‘ç”¨è¿‡Linuxä¸‹æœ€å¥½ç”¨çš„ç¦»çº¿ç¬”è®°è½¯ä»¶äº†ã€‚æ”¯æŒåŠ å¯†ã€markdownã€å…¬å¼æ¸²æŸ“ã€æµç¨‹å›¾æ¸²æŸ“ã€å¤šç¬”è®°æœ¬ã€å¤šå±‚ç›®å½•ç­‰ç­‰ç‰¹æ€§ã€‚è€Œä¸”åªéœ€è¦è·Ÿè‡ªå·±çš„åŒæ­¥äº‘ç›˜é…åˆä¸€ä¸‹å°±ç›´æ¥å˜æˆäº†ä¸€ä¸ªäº‘ç¬”è®°ï¼Œå®Œç¾ã€‚</p><h1 id="0X0B-ç»“å°¾"><a href="#0X0B-ç»“å°¾" class="headerlink" title="0X0B ç»“å°¾"></a>0X0B ç»“å°¾</h1><p>Linuxä¸‹çš„å¥½è½¯ä»¶å¹¶éåªæœ‰è¿™äº›ï¼Œè¿™äº›åªæ˜¯æˆ‘åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å‘ç°çš„å¥½ç”¨çš„å·¥å…·ã€‚å…¶ä¸­äººäººçš†çŸ¥çš„å°±æ²¡æœ‰å†é‡å¤å†™è¿›æ¥ï¼Œåªå†™äº†ä¸€äº›ä¸æ˜¯å¾ˆçŸ¥åçš„æˆ–æ˜¯å¥‡æ€ªç”¨æ³•çš„è½¯ä»¶ã€‚å¦‚æœå„ä½æœ‰ä»€ä¹ˆæ¨èçš„å·¥å…·å¯ä»¥ç•™è¨€å“ˆã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockeréƒ¨ç½²SentryæœåŠ¡</title>
      <link href="/2018/08/08/install-sentry-with-docker/"/>
      <url>/2018/08/08/install-sentry-with-docker/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Sentryæ˜¯ä»€ä¹ˆ"><a href="#0X00-Sentryæ˜¯ä»€ä¹ˆ" class="headerlink" title="0X00 Sentryæ˜¯ä»€ä¹ˆ"></a>0X00 Sentryæ˜¯ä»€ä¹ˆ</h1><p>Sentryæ˜¯ä¸€ä¸ªç»Ÿä¸€æ”¶é›†æ•´ç†ç¨‹åºå¼‚å¸¸é”™è¯¯çš„æœåŠ¡ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªç¨‹åºåœ¨è·‘ï¼Œå¹¶ä¸”é…ç½®äº†æ—¥å¿—ï¼Œé‚£ä¹ˆå¯ä»¥è½»æ¾çš„æ‰¾åˆ°ç¨‹åºå‡ºé”™çš„åœ°æ–¹ï¼›ç”šè‡³å¯ä»¥åœ¨æŠ¥é”™åå‘é‚®ä»¶é€šçŸ¥è‡ªå·±ä»¥ä¾¿æŠ“ç´§å¤„ç†ã€‚ä½†æ˜¯å¦‚æœä½ çš„å›¢é˜Ÿæœ‰10ä¸ªé¡¹ç›®å’Œ50ä¸ªäººï¼Œå¹¶ä¸”è¿™50ä¸ªäººå¹¶ä¸æ˜¯æ¯äººåªè´Ÿè´£ä¸€ä¸ªé¡¹ç›®ï¼Œæ­¤æ—¶æ­¤åˆ»è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿéš¾é“ä¸ºæ¯ä¸ªé¡¹ç›®éƒ½é…ç½®å¾ˆå¤šäººï¼Œå¹¶ä¸”åœ¨äººå‘˜å˜åŠ¨å’Œé¡¹ç›®å˜åŠ¨çš„æ—¶å€™éƒ½å»å†ä¿®æ”¹å—ï¼Ÿè¿™æ ·å°±æœªå…æœ‰ç‚¹å‚»äº†ï¼ŒSentryå°±æ˜¯ç”¨æ¥åšè¿™ä¸ªçš„ã€‚</p><p>ä½ å¯ä»¥åœ¨Sentryä¸Šä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ªProjectç”¨äºæ”¶é›†é¡¹ç›®çš„é”™è¯¯ï¼Œå†ä¸ºæ¯ä½æˆå‘˜åˆ›å»ºç”¨æˆ·ï¼Œç”±ç”¨æˆ·å»å…³æ³¨é¡¹ç›®ï¼Œå°±å¯ä»¥å®ç°ä¸Šè¿°å¤æ‚çš„åŠŸèƒ½äº†ã€‚</p><h1 id="0X01-å¦‚ä½•éƒ¨ç½²"><a href="#0X01-å¦‚ä½•éƒ¨ç½²" class="headerlink" title="0X01 å¦‚ä½•éƒ¨ç½²"></a>0X01 å¦‚ä½•éƒ¨ç½²</h1><p>ä¸ºäº†æµç¨‹ç®€æ´ï¼Œé»˜è®¤å®‰è£…äº†<code>docker</code>å’Œ<code>docker-compose</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†ä¸€ä¸ªé…ç½®å¥½çš„ä½¿ç”¨docker-composeéƒ¨ç½²Sentryç»™<span class="built_in">clone</span>ä¸‹æ¥</span></span><br><span class="line">git clone https://github.com/getsentry/onpremise.git</span><br><span class="line"></span><br><span class="line">cd onpremise</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæ‰€éœ€çš„ç›®å½•</span></span><br><span class="line">mkdir -p data/&#123;sentry,postgres&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç”Ÿæˆä¸€ä¸ªsecret-key</span></span><br><span class="line">docker-compose run --rm web config generate-secret-key</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œè¾“å‡ºçš„æœ€åä¸€è¡Œç±»ä¼¼ä¹±ç çš„ä¸œè¥¿æ˜¯æˆ‘ä»¬æ‰€éœ€çš„secret-keyï¼Œå°†å…¶å¤åˆ¶ç²˜è´´ä¹‹<code>docker-compose.yml</code>æ–‡ä»¶çš„<code>SENTRY_SECRET_KEY</code>åé¢ï¼Œå½¢ä¼¼<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SENTRY_SECRET_KEY: '*********************'</span><br><span class="line">SENTRY_MEMCACHED_HOST: memcached</span><br></pre></td></tr></table></figure></p><p>ç„¶ååˆå§‹åŒ–æ•°æ®åº“<code>docker-compose run --rm web upgrade</code>ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè¦æ±‚åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼Œæ ¹æ®æµç¨‹çš„æç¤ºæ“ä½œæ—¢å¯ã€‚æ“ä½œå®Œæˆåæ‰§è¡Œ<code>docker-compose up -d</code>å°±å¯ä»¥å°†æ•´å¥—SentryæœåŠ¡å¯åŠ¨èµ·æ¥äº†ã€‚æ­¤æ—¶å¦‚æœæƒ³è¦è®¿é—®Sentryçš„webæœåŠ¡éœ€è¦è®¿é—®<code>ip:9000</code>ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•ä¸ºå…¶é…ç½®nginxçš„åå‘ä»£ç†ã€‚</p><h1 id="0X02-Nginxåå‘ä»£ç†"><a href="#0X02-Nginxåå‘ä»£ç†" class="headerlink" title="0X02 Nginxåå‘ä»£ç†"></a>0X02 Nginxåå‘ä»£ç†</h1><p>å‘nxingé…ç½®çš„<code>http</code>æ¨¡å—å†…éƒ¨æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼Œå¹¶é‡æ–°è½½å…¥/é‡å¯Nginxåå°±å¯ä»¥ä½¿ç”¨åŸŸåè®¿é—®Sentryäº†ã€‚æ³¨æ„å°†å…¶ä¸­çš„<code>xxxx.example.com</code>æ”¹ä¸ºè‡ªå·±è§£æäº†çš„åŸŸåã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name xxxx.example.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass  http://127.0.0.1:9000;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header  X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-Host $remote_addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    client_max_body_size 10m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ°æ­¤ä¸ºæ­¢Sentryå°±ç®—æ˜¯é…ç½®å®Œæˆäº†ã€‚</p><h1 id="0X03-é›†æˆåˆ°è‡ªå·±çš„ç¨‹åºä¸­"><a href="#0X03-é›†æˆåˆ°è‡ªå·±çš„ç¨‹åºä¸­" class="headerlink" title="0X03 é›†æˆåˆ°è‡ªå·±çš„ç¨‹åºä¸­"></a>0X03 é›†æˆåˆ°è‡ªå·±çš„ç¨‹åºä¸­</h1><p>åœ¨Sentryçš„webæœåŠ¡ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„Projectï¼Œåˆ›å»ºæ—¶éœ€è¦é€‰æ‹©è‡ªå·±ç¨‹åºçš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯<code>Django</code>è¿˜æ˜¯<code>Flask</code>æˆ–æ˜¯å…¶ä»–ï¼Œåˆ›å»ºå¥½åä¼šæœ‰æç¤ºï¼ŒæŒ‰ç…§æç¤ºå°±å¯ä»¥å°†Sentryé›†æˆåˆ°è‡ªå·±çš„ç¨‹åºä¸­äº†ã€‚è¿‡ç¨‹éƒ½éå¸¸ç®€å•ï¼Œæ¯”å¦‚åœ¨çº¯Pythonç¨‹åºä¸­é›†æˆä¸€ä¸ªSentryä¹Ÿå°±å››äº”è¡Œçš„äº‹æƒ…ï¼Œè€Œåœ¨Djangoä¸­ä¹Ÿä¸è¿‡10è¡Œä»£ç ã€‚</p><h1 id="0X04-é…ç½®å‘é€é‚®ä»¶"><a href="#0X04-é…ç½®å‘é€é‚®ä»¶" class="headerlink" title="0X04 é…ç½®å‘é€é‚®ä»¶"></a>0X04 é…ç½®å‘é€é‚®ä»¶</h1><p>æ­¤æ—¶çš„Sentryè¿˜åªèƒ½æ¥æ”¶é”™è¯¯ï¼Œå¦‚æœæƒ³è¦ä½¿å…¶èƒ½å¤Ÿå‘é€é‚®ä»¶ï¼Œéœ€è¦ä¿®æ”¹<code>docker-compose.yml</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°å‡ ä¸ªä»¥<code>SENTRY_XXX</code>å¼€å¤´çš„åœ°æ–¹ï¼Œåœ¨è¿™é‡Œé…ç½®å¥½è‡ªå·±éœ€è¦ä½¿ç”¨çš„å‘ä»¶é…ç½®ï¼Œä¾‹å¦‚<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SENTRY_SERVER_EMAIL:</span> <span class="string">sender@example.com</span></span><br><span class="line"><span class="attr">SENTRY_EMAIL_HOST:</span> <span class="string">smtp.example.com</span></span><br><span class="line"><span class="attr">SENTRY_EMAIL_PASSWORD:</span> <span class="string">examplepassword</span></span><br><span class="line"><span class="attr">SENTRY_EMAIL_USER:</span> <span class="string">sender@example.com</span></span><br><span class="line"><span class="attr">SENTRY_EMAIL_PORT:</span> <span class="number">587</span>  <span class="comment"># å¦‚æœä½¿ç”¨TLSåŠ å¯†ä¸”é‡‡ç”¨465ç«¯å£å¤±æ•ˆæ—¶å¯ä»¥å°è¯•å°†ç«¯å£æ”¹ä¸º587è¯•è¯•</span></span><br><span class="line"><span class="attr">SENTRY_EMAIL_USE_TLS:</span> <span class="string">'True'</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åæŠŠç”Ÿæˆçš„å®¹å™¨åœæ­¢åˆ é™¤å¹¶é‡å»ºä¸€ä¸‹ï¼Œå°±å¯ä»¥äº†ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker-compose stop</span><br><span class="line">docker-compose rm</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸Šé¢ä¸¤ä¸ªæ“ä½œåœ¨æ–°ç‰ˆæœ¬çš„docker-composeä¸­å¯ä»¥ä½¿ç”¨docker-compose downæ¥æ›¿ä»£</span></span><br><span class="line"></span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure></p><h1 id="0XFFFF-Done"><a href="#0XFFFF-Done" class="headerlink" title="0XFFFF Done!"></a>0XFFFF Done!</h1><p>æ•´ä½“çš„å¤§æ–¹é¢çš„é…ç½®å°±æ˜¯è¿™æ ·äº†ï¼Œå…·ä½“çš„å¯ä»¥æ…¢æ…¢åœ¨webç•Œé¢æ‘¸ç´¢ä¸€ä¸‹ï¼Œå°±è¿™æ ·å•¦</p><p>\å£-å£/</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Docker </tag>
            
            <tag> Sentry </tag>
            
            <tag> Exception </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¸­äº‹åŠ¡çš„ä¸‰ç§ç®€å•ç”¨æ³•</title>
      <link href="/2018/07/10/django-transactions/"/>
      <url>/2018/07/10/django-transactions/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯â€œäº‹åŠ¡â€"><a href="#0X00-ä»€ä¹ˆæ˜¯â€œäº‹åŠ¡â€" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯â€œäº‹åŠ¡â€"></a>0X00 ä»€ä¹ˆæ˜¯â€œäº‹åŠ¡â€</h1><p>â€œäº‹åŠ¡â€ç®€å•çš„è¯´å°±æ˜¯æŠŠä¸€äº›æ•°æ®åº“æ“ä½œæ‰“åŒ…èµ·æ¥ï¼Œè¦ä¹ˆå°±å…¨éƒ¨æ‰§è¡Œè¦ä¹ˆå°±å…¨éƒ¨ä¸æ‰§è¡Œã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªæ“ä½œæ˜¯æ–°å»ºä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯ï¼Œæœ‰å¤šå¼ è¡¨åˆ†åˆ«è®°å½•äº†â€œåŸºæœ¬ä¿¡æ¯ã€å®¶åº­ä¿¡æ¯ã€å­¦æ ¡ä¿¡æ¯ç­‰â€œï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†æˆå¤šæ­¥æ¥æ–°å¢è¿™ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ã€‚ä½†æ˜¯å¦‚æœåœ¨æ·»åŠ äº†â€åŸºæœ¬ä¿¡æ¯å’Œå®¶åº­ä¿¡æ¯â€œä¸¤å¼ è¡¨çš„å†…å®¹ååœ¨æ·»åŠ â€å­¦æ ¡ä¿¡æ¯â€œæ—¶å‡ºç°äº†é”™è¯¯é‚£ä¹ˆæ•°æ®åº“ä¸­å°±ä¼šå­˜åœ¨è¯¥å­¦ç”Ÿéƒ¨åˆ†ä¿¡æ¯ï¼Œä»è€Œä½¿å¾—æ•°æ®åº“ä¸­çš„æ•°æ®å‡ºç°é”™è¯¯ã€‚</p><p>å¦‚æœå°†è¿™äº›æ“ä½œæ”¾åˆ°ä¸€ä¸ªâ€äº‹åŠ¡â€œä¸­æ‰§è¡Œå°±å¯ä»¥åœ¨ä¸­é€”å‡ºç°é”™è¯¯çš„æ—¶å€™æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½ä¸ç”Ÿæ•ˆï¼Œå½“é¡ºåˆ©æ‰§è¡Œå®Œæˆä¹‹åä½¿æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½ç”Ÿæ•ˆã€‚æ€»çš„æ¥è¯´å°±æ˜¯â€äº‹åŠ¡ä¸­å‡ºç°é”™è¯¯åˆ™æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½ä¸ç”Ÿæ•ˆï¼Œå¦åˆ™æ‰€æœ‰æ•°æ®åº“æ“ä½œå‡ç”Ÿæ•ˆâ€œã€‚</p><p>å…·ä½“å¯å‚è§ä¸‹é¢å‡ ä¸ªé“¾æ¥<br><span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGF0YWJhc2VfdHJhbnNhY3Rpb24=" title="https://en.wikipedia.org/wiki/Database_transaction">Database transaction - Wikipedia<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9kZXYubXlzcWwuY29tL2RvYy9yZWZtYW4vOC4wL2VuL2NvbW1pdC5odG1s" title="https://dev.mysql.com/doc/refman/8.0/en/commit.html">MySQL Document<i class="fa fa-external-link"></i></span></p><a id="more"></a><h1 id="0X01-å°†äº‹åŠ¡ç»‘å®šåˆ°httpè¯·æ±‚"><a href="#0X01-å°†äº‹åŠ¡ç»‘å®šåˆ°httpè¯·æ±‚" class="headerlink" title="0X01 å°†äº‹åŠ¡ç»‘å®šåˆ°httpè¯·æ±‚"></a>0X01 å°†äº‹åŠ¡ç»‘å®šåˆ°httpè¯·æ±‚</h1><p>åœ¨Djangoä¸­å®ç°æ•°æ®åº“äº‹åŠ¡æœ€ç®€å•æ˜äº†çš„æ–¹æ³•å°±æ˜¯åœ¨æ•°æ®åº“çš„é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª<code>ATOMIC_REQUESTS=True</code>ã€‚æ·»åŠ è¿™ä¸ªæ“ä½œåDjangoä¼šæŠŠæ¯ä¸€ä¸ªè¯·æ±‚åˆ°å“åº”çš„è¿‡ç¨‹è§†ä¸ºä¸€ä¸ªâ€äº‹åŠ¡â€œï¼Œä»è€Œåœ¨è¯·æ±‚è·å¾—æ­£ç¡®å“åº”æ—¶åº”ç”¨è¿™äº›æ•°æ®åº“æ“ä½œã€‚å¦‚æœåœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æŠ›å‡ºäº†å¼‚å¸¸é‚£ä¹ˆDjangoå°±ä¼šå›æ»šè¿™æ¬¡äº‹åŠ¡ã€‚</p><p><strong>*</strong> æ³¨æ„ï¼š ** æ­¤æ—¶çš„æ‰€æœ‰å¤„ç†çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«åŒ…è£…æˆäº‹åŠ¡ï¼</p><p>å¦‚æœéœ€è¦å£°æ˜æŸäº›viewä¸éœ€è¦ä½¿ç”¨äº‹åŠ¡ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•é˜»æ­¢viewä½¿ç”¨äº‹åŠ¡<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="meta">@transaction.non_atomic_requests</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    do_stuff()</span><br></pre></td></tr></table></figure></p><p>è€Œä¸”äº‹åŠ¡ä¼šå¯¹æ•°æ®åº“å’ŒDjangoé€ æˆæ›´å¤§çš„å‹åŠ›ï¼Œæ‰€ä»¥æ­¤ç§æ–¹å¼å¹¶ä¸æ˜¯æœ€å¥½çš„ä½¿ç”¨äº‹åŠ¡çš„æ–¹æ³•ã€‚</p><h1 id="0X02-ä½¿ç”¨-transaction-atomic-è£…é¥°å™¨"><a href="#0X02-ä½¿ç”¨-transaction-atomic-è£…é¥°å™¨" class="headerlink" title="0X02 ä½¿ç”¨`@transaction.atomic`è£…é¥°å™¨"></a>0X02 ä½¿ç”¨<span class="exturl" data-url="bWFpbHRvOmBAdHJhbnNhY3Rpb24uYXRvbWlj" title="mailto:`@transaction.atomic">`@transaction.atomic<i class="fa fa-external-link"></i></span>`è£…é¥°å™¨</h1><p>æˆ‘ä»¬ä½¿ç”¨äº‹åŠ¡é€šå¸¸æ˜¯æ˜ç¡®çŸ¥é“å“ªäº›æ–¹æ³•éœ€è¦ä½¿ç”¨ï¼Œè€Œä¸æ˜¯åƒä¸Šé¢é‚£ç§ç›´æ¥ç»™æ‰€æœ‰viewæ·»åŠ äº‹åŠ¡å†ä¸€ä¸€æ’é™¤é‚£äº›ä¸éœ€è¦çš„ã€‚</p><p>æ‰€ä»¥Djangoä¸­ä¹Ÿæœ‰ä¸€ç§ç›´æ¥ç»™æŸä¸ªæ–¹æ³•æ ‡è®°ä¸ºä½¿ç”¨äº‹åŠ¡çš„æ–¹æ³•ï¼šä½¿ç”¨<span class="exturl" data-url="bWFpbHRvOmBAdHJhbnNhY3Rpb24uYXRvbWlj" title="mailto:`@transaction.atomic">`@transaction.atomic<i class="fa fa-external-link"></i></span>`è£…é¥°å™¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå¦‚æœä½ åªéœ€è¦ç»™æŸä¸ªviewä½¿ç”¨äº‹åŠ¡æˆ–è€…åªæ˜¯éœ€è¦ç»™æŸä¸ªå…¶ä»–çš„æ–¹æ³•ä½¿ç”¨äº‹åŠ¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è£…é¥°functionï¼Œä»è€Œä½¿å…¶åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="meta">@transaction.atomic</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_view</span><span class="params">(request)</span>:</span></span><br><span class="line">    do_stuff()</span><br><span class="line"></span><br><span class="line"><span class="meta">@transaction.atomic</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">    do_stuff()</span><br></pre></td></tr></table></figure></p><h1 id="0X03-ä½¿ç”¨with-transaction-atomic-è¯­å¥"><a href="#0X03-ä½¿ç”¨with-transaction-atomic-è¯­å¥" class="headerlink" title="0X03 ä½¿ç”¨with transaction.atomic:è¯­å¥"></a>0X03 ä½¿ç”¨<code>with transaction.atomic:</code>è¯­å¥</h1><p>ä½¿ç”¨<span class="exturl" data-url="bWFpbHRvOmBAdHJhbnNhY3Rpb24uYXRvbWlj" title="mailto:`@transaction.atomic">`@transaction.atomic<i class="fa fa-external-link"></i></span>`è£…é¥°å™¨æ˜¯ç›´æ¥ç»™æŸä¸ªfunctionæ‰“åŒ…ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹è¿˜ä¼šæœ‰æ›´å°ç²’åº¦çš„äº‹åŠ¡éœ€æ±‚ï¼Œä¸‹é¢ç»™å‡ºä¸€ä¸ªæƒ…å†µã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> my_project <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">    models.AAAAA.objects.filter().update(aaa=<span class="string">'456'</span>)</span><br><span class="line">    models.BBBBB.objects.filter().update(bbb=<span class="string">'789'</span>)</span><br><span class="line">    models.CCCCC.objects.filter().update(ccc=<span class="string">'123'</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'æ±ŸXXXï¼Œäº¦XXX'</span></span><br><span class="line">    <span class="string">'........'</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¿™æ®µä»£ç åœ¨æ›´æ–°modelï¼š<code>BBBBB</code>çš„æ—¶å€™å‡ºç°äº†é”™è¯¯ï¼Œé‚£ä¹ˆå…¶å®AAAAAæ˜¯æ›´æ–°äº†çš„ï¼Œä¸”ç”±äºæŠ›å‡ºäº†å¼‚å¸¸æ‰€ä»¥BBBBBå’ŒCCCCCéƒ½æ²¡æœ‰è¢«æ›´æ–°ã€‚æ­¤æ—¶æ•°æ®åº“ä¸­çš„æ•°æ®å°±æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>with transaction.atomic</code>çš„æ–¹æ³•æ¥å°†ä¸€ä¸ªä»£ç å—æ‰“åŒ…ä¸ºä¸€ä¸ªäº‹åŠ¡ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> my_project <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">some_func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> transaction.atomic:</span><br><span class="line">        models.AAAAA.objects.filter().update(aaa=<span class="string">'456'</span>)</span><br><span class="line">        models.BBBBB.objects.filter().update(bbb=<span class="string">'789'</span>)</span><br><span class="line">        models.CCCCC.objects.filter().update(ccc=<span class="string">'123'</span>)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'æ±ŸXXXï¼Œäº¦XXX'</span></span><br><span class="line">    <span class="string">'........'</span></span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶AAAAA/BBBBB/CCCCCè¿™ä¸‰ä¸ªmodelçš„æ“ä½œå·²ç»â€åŒç”ŸåŒæ­»â€œäº†ã€‚</p><blockquote><p>å‚è€ƒè‡ªï¼š <span class="exturl" data-url="aHR0cHM6Ly95aXlpYm9va3MuY24veHgvRGphbmdvXzEuMTEuNi90b3BpY3MvZGIvdHJhbnNhY3Rpb25zLmh0bWw=" title="https://yiyibooks.cn/xx/Django_1.11.6/topics/db/transactions.html">Djangoä¸­æ–‡æ–‡æ¡£<i class="fa fa-external-link"></i></span></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Transaction </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoä¸Django REST Frameworkä¸­çš„è¿™äº›&quot;ç©º&quot;</title>
      <link href="/2018/05/23/django-some-blank/"/>
      <url>/2018/05/23/django-some-blank/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Django-Modelä¸­çš„ç©º"><a href="#0X00-Django-Modelä¸­çš„ç©º" class="headerlink" title="0X00 Django Modelä¸­çš„ç©º"></a>0X00 Django Modelä¸­çš„ç©º</h1><p>Djangoçš„Modelå¸¸è§ä¸¤ä¸ªä¸ç©ºæœ‰å…³çš„å‚æ•°ï¼š<code>null</code>å’Œ<code>blank</code>ã€‚å…¶ä¸­<code>null</code>æ˜¯æ•°æ®åº“å±‚é¢çš„æ˜¯å¦å…è®¸ä¸ºNullï¼Œè€Œ<code>blank</code>åˆ™å°†ç©ºå¤„ç†ä¸ºç©ºå€¼ã€‚æ¯”å¦‚ä¸€ä¸ª<code>CharField</code>çš„<code>blank=True</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µåœ¨æ²¡æœ‰èµ‹å€¼çš„æƒ…å†µä¸‹å…¥åº“ï¼Œè¿™ä¸ªå­—æ®µå°±ä¼šæ˜¯ç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯Nullã€‚</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: s = Student()</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: s.age=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: s.save()</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: s.name</span><br><span class="line">Out[<span class="number">16</span>]: <span class="string">u''</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå°†<code>blank=False</code>å†ä¸èµ‹å€¼è¯¥å­—æ®µè¿›è¡Œä¿å­˜åˆ™å…¥åº“çš„å°±æ˜¯<code>Null</code>ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">3</span>]: s = Student()</span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: s.age = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: s.save()</span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: s.name</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: type(s.name)</span><br><span class="line">Out[<span class="number">7</span>]: NoneType</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥æ¢å¥è¯è¯´ï¼Œ<code>null=True</code>æ˜¯æ•°æ®åº“å±‚é¢å…è®¸å­˜å‚¨Nullï¼Œè€Œ<code>blank=True</code>åˆ™æ˜¯å…è®¸å­˜å…¥â€ç©ºå­—ç¬¦ä¸²â€ç­‰è¡¨ç¤ºç©ºçš„å€¼ã€‚</p><h1 id="0X01-Django-REST-frameworkä¸­çš„ç©º"><a href="#0X01-Django-REST-frameworkä¸­çš„ç©º" class="headerlink" title="0X01 Django REST frameworkä¸­çš„ç©º"></a>0X01 Django REST frameworkä¸­çš„ç©º</h1><p>åœ¨Django REST frameworkçš„serializerä¸­çš„å­—æ®µï¼Œæœ‰ä¸‰ä¸ªä¸ç©ºæœ‰å…³çš„ï¼Œéƒ½æ˜¯åœ¨åˆ›å»ºæˆ–æ›´æ–°ä¸­ç”Ÿæ•ˆã€‚åˆ†åˆ«æ˜¯<code>allow_blank/allow_null/require</code>è¿™ä¸‰ä¸ªã€‚å…¶ä¸­<code>allow_blank=True</code>è¡¨ç¤ºç€<code>CharField/ListField</code>ç­‰å…è®¸ä¼ å…¥<code>&quot;&quot;/[]</code>ç­‰ç©ºå€¼ï¼›<code>allow_null=True</code>è¡¨ç¤ºç€å…è®¸ä¼ å…¥<code>{&quot;name&quot;: null, &quot;age&quot;: null}</code>è¿™ç§<code>null</code>ç©ºï¼›<code>require=True</code>åˆ™è¡¨ç¤ºç€å­—æ®µå¿…å¡«ï¼Œå¦‚æœnameå­—æ®µè¢«è®¾å®šäº†<code>require=True</code>é‚£ä¹ˆåœ¨<code>POST/PUT/PATCH</code>ç­‰åˆ›å»ºæˆ–æ›´æ–°æ•°æ®æ—¶è¿™ä¸ªå­—æ®µæ˜¯å¿…é¡»è¦å¡«å†™çš„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST framework </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Django REST Frameworkä¸­è¦æ³¨æ„çš„å‡ ä¸ªç‚¹</title>
      <link href="/2018/05/23/django-rest-framework-tips/"/>
      <url>/2018/05/23/django-rest-framework-tips/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Modelä¸­è¦æ³¨æ„çš„å‡ ç‚¹"><a href="#0X00-Modelä¸­è¦æ³¨æ„çš„å‡ ç‚¹" class="headerlink" title="0X00 Modelä¸­è¦æ³¨æ„çš„å‡ ç‚¹"></a>0X00 Modelä¸­è¦æ³¨æ„çš„å‡ ç‚¹</h1><h2 id="verbose-name-å’Œ-help-text-å±æ€§"><a href="#verbose-name-å’Œ-help-text-å±æ€§" class="headerlink" title="verbose_name å’Œ help_text å±æ€§"></a>verbose_name å’Œ help_text å±æ€§</h2><p>Modelä¸­é€šå¸¸ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„æ˜¯<code>verbose_name</code>ï¼Œè¿˜è¦æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ª<code>help_text</code>å±æ€§ã€‚å…¶ä¸­<code>verbose_name</code>å±æ€§æ˜¯ç”¨æ¥æˆ‘ä»¬è‡ªå·±è¯»çš„ï¼Œè€Œ<code>help_text</code>æ˜¯ç”¨äºæä¾›å­—æ®µæè¿°ç±»çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨DJango Adminä¸­<code>verbose_name</code>ä¼šå˜æˆå­—æ®µçš„ä¸­æ–‡åï¼Œè€Œ<code>help_text</code>åˆ™ä¼šå˜æˆæ”¹å­—æ®µçš„æè¿°ã€‚</p><a id="more"></a><h2 id="unicode-æ–¹æ³•"><a href="#unicode-æ–¹æ³•" class="headerlink" title="unicode æ–¹æ³•"></a><strong>unicode</strong> æ–¹æ³•</h2><p>æ¯ä¸€ä¸ªModelç±»æˆ‘ä»¬æœ€å¥½éƒ½è¦é‡å†™ä¸€ä¸‹è¿™ä¸ª<code>__unicode__</code>æ–¹æ³•ï¼Œä½¿ä¹‹è¿”å›ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ•°æ®ã€‚æ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯çš„Modelï¼Œæˆ‘ä»¬ä¸å»é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œæœ€ååœ¨<code>ipython</code>ä¸­æˆ–æ˜¯é¡¹ç›®ä¸­ç›´æ¥è°ƒçš„è¯å°±æ˜¯è¿™ä¸ªæ ·å­çš„<code>&lt;QuerySet &lt;Student: 1&gt;, &lt;Student: 2&gt;, &lt;Student: 3&gt;]&gt;</code>ã€‚å¦‚æœæˆ‘ä»¬é‡å†™äº†è¿™ä¸ªæ–¹æ³•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__unicode__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'(&#123;gender&#125;)&#123;name&#125;'</span>.format(gender=self.gender, name=self.name)</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆè¿”å›å€¼å°±æ˜¯<code></code>&lt;QuerySet &lt;Student: (ç”·)å°æ˜&gt;, &lt;Student: (å¥³)å°çº¢&gt;, &lt;Student: (å¥³)å°å…°d&gt;]&gt;`ã€‚ä¸ä»…æ˜¯åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­è¿˜æ˜¯ç¨‹åºé‡Œéƒ½ä¼šæœ‰ä¸é”™çš„æ•ˆæœã€‚</p><h2 id="å…³äºchoices"><a href="#å…³äºchoices" class="headerlink" title="å…³äºchoices"></a>å…³äºchoices</h2><p>åœ¨è®¾è®¡Modelä¸­å¸¸ä¼šç”¨åˆ°choiceså±æ€§ï¼Œæ¯”è¾ƒå¥½çš„ç”¨æ³•æ˜¯è¿™æ ·çš„ã€‚å‘½åçš„æ—¶å€™ä½¿ç”¨åœ¨å­—æ®µåååŠ <code>choice</code>çš„å…¨å¤§å†™ï¼Œä¹Ÿå°±æ˜¯ï¼š<code>GENDER_CHOICE</code>ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GENDER_CHOICE = (</span><br><span class="line">    (<span class="string">'male'</span>, <span class="string">u'ç”·'</span>),</span><br><span class="line">    (<span class="string">'female'</span>, <span class="string">u'å¥³'</span>),</span><br><span class="line">    (<span class="string">'other'</span>, <span class="string">u'å…¶ä»–'</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">gender = models.Charfield(</span><br><span class="line">    <span class="string">u'æ€§åˆ«'</span>,</span><br><span class="line">    help_text=<span class="string">u'æ€§åˆ«'</span>,</span><br><span class="line">    max_length=<span class="number">100</span>,</span><br><span class="line">    choices=GENDER_CHOICE,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><h1 id="0X01-Serializerä¸­è¦æ³¨æ„çš„å‡ ç‚¹"><a href="#0X01-Serializerä¸­è¦æ³¨æ„çš„å‡ ç‚¹" class="headerlink" title="0X01 Serializerä¸­è¦æ³¨æ„çš„å‡ ç‚¹"></a>0X01 Serializerä¸­è¦æ³¨æ„çš„å‡ ç‚¹</h1><h2 id="é’ˆå¯¹listæ–¹æ³•çš„Serializer"><a href="#é’ˆå¯¹listæ–¹æ³•çš„Serializer" class="headerlink" title="é’ˆå¯¹listæ–¹æ³•çš„Serializer"></a>é’ˆå¯¹listæ–¹æ³•çš„Serializer</h2><p>è¿˜æ˜¯ä¸Šé¢å­¦ç”Ÿä¿¡æ¯çš„è¿™ä¸ªä¾‹å­ï¼Œå‰ç«¯è°ƒç”¨<code>GET</code>æ–¹æ³•åæƒ³è¦å¾—åˆ°çš„æ˜æ˜¾æ˜¯<code>ç”·ã€å¥³ã€æœªçŸ¥</code>è¿™ç§ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¸ºæ‰€æœ‰ç±»ä¼¼çš„å­—æ®µæ­é…è¿”å›ä¸€ä¸ªå¯¹åº”çš„å¯è¯»å­—æ®µã€‚ä¾‹å¦‚åœ¨è·å–å­¦ç”Ÿä¿¡æ¯æ—¶å¯ä»¥è¿™æ ·å†™Serializerã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListStudentSerialzier</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    gender_cn = serializers.SerializerMethodField()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_gender_cn</span><span class="params">(self, obj)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> obj.get_gender_display()</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Student</span><br><span class="line">        fields = ( </span><br><span class="line">            <span class="string">'id'</span>,</span><br><span class="line">            <span class="string">'name'</span>,</span><br><span class="line">            <span class="string">'gender'</span>,</span><br><span class="line">            <span class="string">'gender_cn'</span>,</span><br><span class="line">            <span class="string">'birthday'</span>,</span><br><span class="line">            <span class="string">'hobbys'</span>,</span><br><span class="line">        )</span><br></pre></td></tr></table></figure></p><p>åœ¨é’ˆå¯¹<code>List</code>çš„Serializerä¸­æ·»åŠ å­—æ®µ<code>gender_cn</code>ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ€§åˆ«çš„ä¸­æ–‡ï¼Œå®šä¹‰ä¸º<code>serializers.SerializerMethodField()</code>ï¼Œå®šä¸”åœ¨ä¸‹é¢è·Œä¸€ä¸ªåä¸º<code>def get_gender_ch(self, obj)</code>çš„æ–¹æ³•ï¼Œç»„è£…å¥½æ‰€éœ€è¦çš„æ•°æ®è¿”å›å°±å¯ä»¥äº†ã€‚å‚æ•°ä¸­çš„<code>obj</code>å°±æ˜¯éƒ½åº”çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œåœ¨æ­¤å¤„ä¹Ÿå°±æ˜¯ä¸€ä¸ª<code>Student</code>å¯¹è±¡ã€‚<br>æœ€åè¦åœ¨<code>Meta</code>ä¸­çš„<code>fields</code>é‡ŒåŠ ä¸Šè¿™ä¸ªå­—æ®µã€‚</p><p>å¦å¤–ï¼Œå¦‚æœå°†Modelä¸­ä¸€ä¸ªå­—æ®µå®šä¹‰ä¸º<code>CharField</code>ä¸”Serializerå¤„ä½¿ç”¨<code>ListField</code>è¿›è¡Œæ ¡éªŒå­˜å‚¨çš„è¯ï¼Œæ•°æ®åº“ä¸­å°±ä¼šæ˜¯ç±»ä¼¼<code>&quot;[1, 2, 3, 4, 5]&quot;</code>çš„â€œåˆ—è¡¨æ ·å­çš„å­—ç¬¦ä¸²â€ã€‚å¦‚æœæƒ³è®©è¿™ç§ç±»å‹çš„å­—ç¬¦ä¸²ä»¥ä¸€ä¸ªæ­£ç¡®çš„åˆ—è¡¨æ–¹å¼è¿”å›ï¼Œä¾‹å¦‚å­—æ®µ<code>hobbys</code>ï¼Œé‚£ä¹ˆåº”è¯¥åƒ<code>gender_cn</code>ä¸€æ ·ç¼–å†™ä¸€ä¸ªgetæ–¹æ³•ï¼Œä½¿ç”¨<code>json.loads()</code>çš„æ–¹å¼å°†â€œåˆ—è¡¨æ ·å­çš„å­—ç¬¦ä¸²â€è½¬æ¢ä¸ºçœŸæ­£çš„åˆ—è¡¨è¿”å›ã€‚</p><h2 id="é’ˆå¯¹Createå’ŒUpdateçš„Serializer"><a href="#é’ˆå¯¹Createå’ŒUpdateçš„Serializer" class="headerlink" title="é’ˆå¯¹Createå’ŒUpdateçš„Serializer"></a>é’ˆå¯¹Createå’ŒUpdateçš„Serializer</h2><p>é’ˆå¯¹Createå’ŒUpdateçš„Serializeræ˜¯è¦å‘<code>Django</code>æ¨æ•°æ®çš„ï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„å­—æ®µçš„åˆæ³•æ€§æ ¡éªŒã€‚è¦æ³¨æ„<code>Serializer</code>ä¸<code>Model</code>ä¸­å­—æ®µç±»å‹çš„å¯¹åº”ï¼Œä¾‹å¦‚Serializerä¸­çš„<code>ListFIeld</code>å…¶å®å°±æ˜¯Modelä¸­çš„<code>CharField</code>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> Django REST framework </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Djangoä¸­çš„Qå¯¹è±¡æŸ¥è¯¢</title>
      <link href="/2018/05/20/django-query-q/"/>
      <url>/2018/05/20/django-query-q/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ™®é€šçš„æŸ¥è¯¢"><a href="#0X00-æ™®é€šçš„æŸ¥è¯¢" class="headerlink" title="0X00 æ™®é€šçš„æŸ¥è¯¢"></a>0X00 æ™®é€šçš„æŸ¥è¯¢</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line">queryset.filter(Q(age=<span class="number">233</span>)) <span class="comment"># æ‰¾åˆ°233å²çš„äºº</span></span><br><span class="line">queryset.filter(Q(name=<span class="string">'shawn'</span>)) <span class="comment"># æ‰¾åˆ°åä¸ºshawnçš„äºº</span></span><br></pre></td></tr></table></figure><p>è¿™ç§æŸ¥è¯¢æ–¹å¼ä¸æ™®é€šçš„æ–¹å¼æ¯”èµ·æ¥æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">queryset.filter(age=<span class="number">233</span>)</span><br><span class="line">queryset.filter(name=<span class="string">'shawn'</span>)</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X01-AND"><a href="#0X01-AND" class="headerlink" title="0X01 AND"></a>0X01 AND</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line">queryset.filter(Q(age__range=(<span class="number">18</span>, <span class="number">25</span>), Q(gender=<span class="string">'F'</span>), Q(beautiful=<span class="literal">True</span>)) <span class="comment"># æ‰¾åˆ°18åˆ°25å²çš„æ¼‚äº®å¥³ç”Ÿ</span></span><br></pre></td></tr></table></figure><p>æŠŠå¤šä¸ªæ¡ä»¶ç”¨é€—å·åˆ†å‰²å¼€å°±å¯ä»¥äº†ï¼Œæˆ–è€…ä½¿ç”¨<code>&amp;</code>ç¬¦åˆ†å‰²å¼€ã€‚</p><h1 id="0X02-OR"><a href="#0X02-OR" class="headerlink" title="0X02 OR"></a>0X02 OR</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line">queryset.filter(Q(gender=<span class="string">'F'</span>) | Q(province=<span class="string">u'å››å·'</span>) | Q(name=<span class="string">u'ç‹é“è›‹'</span>))</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨<code>|</code>ç¬¦å·åˆ†å‰²å¼€ç­›é€‰æ¡ä»¶ï¼Œæœ€ç»ˆç­›é€‰å¾—åˆ°çš„æ˜¯â€æ‰€æœ‰å¥³ç”Ÿã€å››å·äººå’Œå«ç‹é“è›‹çš„äººâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å½“äºåˆ†åˆ«ç­›é€‰äº†è¿™ä¸‰ä¸ªæ¡ä»¶ï¼Œæœ€ç»ˆå–äº†å¹¶é›†ã€‚è¿™ç§æŸ¥è¯¢å¦‚æœç”¨æ™®é€šæ–¹æ³•è¿›è¡ŒæŸ¥è¯¢å°±ä¼šå¾ˆéº»çƒ¦ï¼Œå¯èƒ½è¦å†™æˆä¸‹é¢è¿™æ ·ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryset.filter(gender=<span class="string">'f'</span>) | queryset.filter(province=<span class="string">u'province=u'</span>å››å·<span class="string">') | queryset.filter(name=u'</span>ç‹é“è›‹<span class="string">')</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-NOT"><a href="#0X03-NOT" class="headerlink" title="0X03 NOT"></a>0X03 NOT</h1><p>ä½¿ç”¨NotæŸ¥è¯¢çš„æ–¹å¼å°±æ¯”è¾ƒè¯¡å¼‚äº†<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line">queryset.filter(~Q(gender=<span class="string">'M'</span>)) <span class="comment"># æ‰¾åˆ°éç”·ç”Ÿ</span></span><br></pre></td></tr></table></figure></p><h1 id="0X04-ç»„åˆæŠ€"><a href="#0X04-ç»„åˆæŠ€" class="headerlink" title="0X04 ç»„åˆæŠ€"></a>0X04 ç»„åˆæŠ€</h1><p>æœ‰çš„æ—¶å€™ç»å¸¸éœ€è¦æŸ¥è¯¢åŒæ ·çš„æ¡ä»¶å¤šæ¬¡ï¼Œè¿™ç§æ–¹æ³•å°±å¯ä»¥ä¸€æ¬¡ç¼–å†™æŸ¥è¯¢æ¡ä»¶å¤šæ¬¡æ‰§è¡Œ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> operator</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"></span><br><span class="line">q1 = reduce(operator.and_, Q(gender=<span class="string">'F'</span>, age__range=(<span class="number">18</span>, <span class="number">25</span>)))</span><br><span class="line">q2 = reduce(operator.or_, Q(gender=<span class="string">'M'</span>, age__range(<span class="number">3</span>, <span class="number">5</span>)))</span><br><span class="line"></span><br><span class="line">queryset.filter(q1)</span><br><span class="line">queryset.filter(q2)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fedoraä¸­dnfå‘½ä»¤ä½¿ç”¨Socks5ä»£ç†</title>
      <link href="/2018/03/14/dnf-proxy/"/>
      <url>/2018/03/14/dnf-proxy/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Linuxä¸‹å®‰è£…è½¯ä»¶é€šå¸¸ä¼šä½¿ç”¨åŒ…ç®¡ç†å·¥å…·è‡ªåŠ¨å¤„ç†ä¾èµ–é—®é¢˜ï¼Œåœ¨Fedoraä¸‹ä¸€èˆ¬ä½¿ç”¨<code>dnf</code>åŒ…ç®¡ç†å·¥å…·ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šç»™è‡ªå·±çš„æºè®¾ç½®ä¸ºå›½å†…çš„é•œåƒæºï¼Œæ¯”å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://mirrors.tuna.tsinghua.edu.cn</span><br><span class="line">https://mirrors.ustc.edu.cn</span><br><span class="line">https://mirrors.163.com</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯æœ‰çš„æ—¶å€™è¿˜æ˜¯é¿å…ä¸äº†ä»å›½å¤–æºä¸‹è½½æ•°æ®ï¼Œè¿™ç§æƒ…å†µä¸‹ç»å¸¸å‡ºç°é€Ÿåº¦å·¨æ…¢æ— æ¯”ç”šè‡³ä¼šæ–­å¼€çš„æƒ…å†µã€‚è¿™ç§æ—¶å€™æˆ‘ä»¬å¯ä»¥ç»™<code>dnf</code>è®¾ç½®é€šè¿‡ä»£ç†è¿æ¥ç½‘ç»œï¼Œè¿™æ ·ä¸€æ¥ä¸‹è½½é€Ÿåº¦å°±ä¼šå¿«å¾—å¤šäº†ã€‚</p><p><code>sudo vim /etc/dnf/dnf.conf</code>ç¼–è¾‘<code>dnf</code>çš„é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œä¿å­˜åå†æ‰§è¡Œ<code>dnf</code>å‘½ä»¤å°±å¯ä»¥ä½¿ç”¨ä»£ç†çš„æ–¹å¼è¿æ¥äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy=socks5://127.0.0.1:1080</span><br><span class="line">proxy_username=shawn</span><br><span class="line">proxy_password=shawn</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</p><ol><li>æœ¬ç¤ºä¾‹åªæ˜¯é’ˆå¯¹æˆ‘è‡ªå·±çš„ç”µè„‘ï¼Œå¦‚æœä½ è‡ªå·±çš„Shadowsocksé…ç½®è·Ÿæˆ‘çš„ä¸åŒï¼Œè¯·æ ¹æ®è‡ªå·±çš„é…ç½®è‡ªè¡Œä¿®æ”¹ï¼ˆæ²¡æœ‰å¯†ç çš„å¯ä»¥ä¸å†™åä¸¤é¡¹ï¼‰</li><li>ç¤ºä¾‹ä¸­ä½¿ç”¨äº†<code>socks4://</code>çš„åè®®ï¼Œå¦‚æœè‡ªå·±æœ‰å…¶ä»–æ–¹å¼çš„ä»£ç†ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚<code>http://</code>ç­‰</li><li>å½“ä¸å†ä½¿ç”¨çš„æ—¶å€™è®°å¾—å°†é…ç½®æ³¨é‡Šæ‰ï¼Œä»¥é˜²è¿æ¥å›½å†…æºä¹Ÿä½¿ç”¨ä»£ç†</li></ol><a id="more"></a>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Fedora </tag>
            
            <tag> Proxy </tag>
            
            <tag> Shadowsocks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Git Stash Saveå°†æš‚å­˜åŒºå‘½å</title>
      <link href="/2018/03/05/git-stash/"/>
      <url>/2018/03/05/git-stash/</url>
      
        <content type="html"><![CDATA[<h1 id="git-stash-save-apply-pop"><a href="#git-stash-save-apply-pop" class="headerlink" title="git stash save/apply/pop"></a>git stash save/apply/pop</h1><p>åœ¨ç”¨gitçš„æ—¶å€™ç»å¸¸ä¼šæœ‰éœ€è¦ä¸´æ—¶åˆ‡åˆ†æ”¯ç­‰æ“ä½œï¼Œä½†æ˜¯å¦‚æœå½“å‰å·¥ä½œåŒºè¿›è¡Œäº†ä¿®æ”¹å°±ä¸èƒ½ç›´æ¥åˆ‡åˆ†æ”¯ã€‚è¿™æ—¶å€™å‘¢å°±å¾—æŠŠå½“å‰çš„ä»£ç æš‚å­˜èµ·æ¥ï¼Œå¯ä»¥è¿™ä¹ˆæ“ä½œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git stash</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å§ä¸Šæ¬¡commitåˆ°ç°åœ¨çš„ä¿®æ”¹éƒ½æš‚å­˜èµ·æ¥äº†ï¼Œå¯ä»¥ä½¿ç”¨<code>git stash show</code>æ¥æŸ¥çœ‹æš‚å­˜åŒºã€‚æˆ‘ä»¥å‰å°±æ˜¯è¿™æ ·çš„ï¼Œæ¯æ¬¡ç”±ä¸¤ä¸ªæˆ–æ˜¯ä¸¤ä¸ªä»¥ä¸Šçš„stashä¹‹åå°±è’™åœˆäº†ï¼Œä¸çŸ¥é“é‚£ä¸ªstashåšäº†å“ªäº›æ”¹å˜ã€‚è™½ç„¶<code>git stash show</code>å¯ä»¥çœ‹åˆ°æ¯ä¸ªstashä¿®æ”¹äº†å“ªäº›æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½å‡†ç¡®çš„å®šä½åˆ°è‡ªå·±éœ€è¦çš„stashã€‚</p><p>åæ¥å‘ç°<code>git stash</code>åé¢è¿˜èƒ½ç»§ç»­æ¥å‚æ•°ï¼Œè¿™é‡Œå¾—æ„Ÿè°¢<code>git plugin for oh-my-zsh</code>ã€‚å½“ä¸´æ—¶ä¿å­˜ä¸€äº›ä¿®æ”¹çš„æ—¶å€™å¯ä»¥è¿™æ ·ï¼š<code>git stash save &quot;fix:xxxxx&quot;</code>ï¼Œæœ‰å¤šä¸ªstashçš„æ—¶å€™ä¹Ÿå¯ä»¥ç”¨<code>git stash show</code>æ¥çœ‹åˆ°æ¯ä¸ªstashçš„å¤‡æ³¨ï¼Œå°±æ–¹ä¾¿å¤šäº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git on î‚  new_branch [$?] via simple took 2s</span><br><span class="line">âœ git stash show stash@\&#123;0\&#125;</span><br><span class="line">stash@&#123;0&#125;: On new_branch: feature:xxxxx (38 seconds ago)               stash@&#123;3&#125;: On new_branch: create new file named hello.py (4 days ago)</span><br><span class="line">stash@&#123;1&#125;: On new_branch: fix:xxxxx (53 seconds ago)                   stash@&#123;4&#125;: WIP on master: 75e1918 add a (7 weeks ago)                </span><br><span class="line">stash@&#123;2&#125;: On new_branch: create file zzz (4 days ago)</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>å…¶ä¸­<code>git stash pop</code>æ˜¯åº”ç”¨ä¸€ä¸ªstashï¼Œå¹¶åˆ é™¤è¿™ä¸ªstashã€‚<code>git stash apply</code>æ˜¯åªåº”ç”¨ä¸åˆ é™¤ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">git on î‚  new_branch [$] via simple</span><br><span class="line">âœ git stash pop stash@\&#123;0\&#125;</span><br><span class="line">On branch new_branch</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">new file:   a</span><br><span class="line"></span><br><span class="line">Dropped stash@&#123;0&#125; (163b1e2391b4c8bd792701ac4318d928e0e12556)</span><br><span class="line"></span><br><span class="line">git on î‚  new_branch [$] via simple</span><br><span class="line">âœ git stash apply stash@\&#123;1\&#125;</span><br><span class="line">On branch new_branch</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</span><br><span class="line"></span><br><span class="line">new file:   a</span><br></pre></td></tr></table></figure></p><p>å–„ç”¨gitå¯ä»¥å¤§å¹…æå‡æ•ˆç‡å“¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerä¸­å¤‡ä»½ä¸æ¢å¤é•œåƒ</title>
      <link href="/2018/02/15/docker-load-save/"/>
      <url>/2018/02/15/docker-load-save/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜"><a href="#0X00-é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜" class="headerlink" title="0X00 é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜"></a>0X00 é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜</h1><p>å‰æ®µæ—¶é—´è‡ªå·±çš„ç”µè„‘é‡è£…äº†ç³»ç»Ÿï¼Œç„¶åå…¬å¸å†…ç½‘çš„Docker hubå‡ºäº†ç‚¹é—®é¢˜ï¼Œæ²¡åŠæ³•ç»§ç»­å¼€å‘ã€‚åæ¥ç»è¿‡ä¸€æ³¢Googleæ‰¾åˆ°äº†ä¸€ä¸ªå¯ä»¥å¤‡ä»½ä¸æ¢å¤Imageçš„æ–¹æ³•ï¼Œä½¿ç”¨<code>docker save / docker load</code>å‘½ä»¤ã€‚</p><h1 id="0X01-å¤‡ä»½ä¸å¯¼å…¥é•œåƒ"><a href="#0X01-å¤‡ä»½ä¸å¯¼å…¥é•œåƒ" class="headerlink" title="0X01 å¤‡ä»½ä¸å¯¼å…¥é•œåƒ"></a>0X01 å¤‡ä»½ä¸å¯¼å…¥é•œåƒ</h1><p>é¦–å…ˆæŸ¥çœ‹è‡ªå·±çš„é•œåƒï¼Œç„¶åæ‰¾ä¸€ä¸ªå‡†å¤‡å¤‡ä»½çš„é•œåƒï¼Œæ‰¾åˆ°ä»–çš„<code>IMAGE ID</code>ï¼Œå‡è®¾é€‰ä¸­çš„æ˜¯<code>ubuntu</code>çš„é•œåƒï¼Œé‚£å°±ä½¿ç”¨<code>dokcer save 0458a4468cbc --output ubuntu.tar</code>å°±å¯ä»¥æŠŠubuntu.taræ–‡ä»¶æ‹·è´åˆ°å…¶ä»–ç”µè„‘ä¸Šã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nextcloud                      latest              9d7d01184cbf        9 days ago          593MB</span><br><span class="line">rabbitmq                       latest              72cee1616e73        2 weeks ago         127MB</span><br><span class="line">ubuntu                         latest              0458a4468cbc        2 weeks ago         112MB</span><br><span class="line">redis                          latest              861cc310cd91        3 weeks ago         107MB</span><br><span class="line">mysql                          5.7.17              9546ca122d3a        10 months ago       407MB</span><br><span class="line">mongo                          3.4.2               5bc602c0b7fe        10 months ago       360MB</span><br></pre></td></tr></table></figure></p><p>åˆ°å¦å¤–ä¸€å°ç”µè„‘ä¸Šæ‰§è¡Œ<code>docker load --input ubuntu.tar</code>å°±å¯ä»¥æŠŠè¿™ä¸ªé•œåƒå¯¼å…¥è¿›å»ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„enumerate()æ–¹æ³•</title>
      <link href="/2017/12/24/python-enumerate/"/>
      <url>/2017/12/24/python-enumerate/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-enumerateæ˜¯ä»€ä¹ˆ"><a href="#0X00-enumerateæ˜¯ä»€ä¹ˆ" class="headerlink" title="0X00 enumerateæ˜¯ä»€ä¹ˆ"></a>0X00 enumerateæ˜¯ä»€ä¹ˆ</h1><p><code>enumerate()</code>æ˜¯ä¸€ä¸ªPythonè‡ªå¸¦çš„å‡½æ•°ï¼Œç”¨æ¥åŒæ—¶éå†åˆ»ç¢Ÿå¸¦å¯¹è±¡å’Œç´¢å¼•å€¼ï¼</p><h1 id="0X01-enumerateæ€ä¹ˆç”¨"><a href="#0X01-enumerateæ€ä¹ˆç”¨" class="headerlink" title="0X01 enumerateæ€ä¹ˆç”¨"></a>0X01 enumerateæ€ä¹ˆç”¨</h1><p>å¦‚æœä¸åœ¨ä¸ä½¿ç”¨<code>enumerate()</code>çš„æƒ…å†µä¸‹å»é™¤ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼ï¼Œé‚£ä¹ˆé€šå¸¸ä¼šå†™å‡ºä¸‹é¢è¿™ç§ç¨‹åºï¼<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">my_list = [<span class="string">"   æä¸ªå¤§  æ–°é—»"</span>, <span class="string">"æˆ‘ä½œ  ä¸ºä¸€ ä¸ªé•¿è€…"</span>, <span class="string">"æ¯” è°è·‘ çš„éƒ½å¿«"</span>,</span><br><span class="line">           <span class="string">"å“ª ä¸ªå›½å®¶ æˆ‘æ²¡ å»è¿‡"</span>, <span class="string">"æ¯”ä½ ä»¬ä¸  çŸ¥é“     é«˜åˆ° å“ªé‡Œå»äº†"</span>,</span><br><span class="line">           <span class="string">"è°ˆ ç¬‘é£ç”Ÿ  "</span>, <span class="string">"å½“ç„¶ æ”¯æŒ    å•Š"</span>, <span class="string">"éµå¾ª  åŸºæœ¬æ³•  çš„   "</span>]</span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> my_list:</span><br><span class="line">    my_list[index] = item.replace(<span class="string">' '</span>, <span class="string">''</span>)</span><br><span class="line">    index = index + <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°å…‰æ˜¯å¤„ç†ç©ºæ ¼éƒ½ç”¨äº†å››è¡Œï¼Œè€Œä¸”è¿˜å¹¶ä¸æ€ä¹ˆä¼˜é›…ï¼é‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>enumerate()</code>æ¥ä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªç¨‹åºï¼<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">my_list = [<span class="string">"   æä¸ªå¤§  æ–°é—»"</span>, <span class="string">"æˆ‘ä½œ  ä¸ºä¸€ ä¸ªé•¿è€…"</span>, <span class="string">"æ¯” è°è·‘ çš„éƒ½å¿«"</span>,</span><br><span class="line">           <span class="string">"å“ª ä¸ªå›½å®¶ æˆ‘æ²¡ å»è¿‡"</span>, <span class="string">"æ¯”ä½ ä»¬ä¸  çŸ¥é“     é«˜åˆ° å“ªé‡Œå»äº†"</span>,</span><br><span class="line">           <span class="string">"è°ˆ ç¬‘é£ç”Ÿ  "</span>, <span class="string">"å½“ç„¶ æ”¯æŒ    å•Š"</span>, <span class="string">"éµå¾ª  åŸºæœ¬æ³•  çš„   "</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> enumerate(my_list):</span><br><span class="line">    my_list[index] = item.replace(<span class="string">' '</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure></p><p>è¯­æ³•å¤§æ¦‚å°±æ˜¯è¿™<code>for ç´¢å¼•, å¯¹è±¡ in enumerate(å¯è¿­ä»£å¯¹è±¡)</code>ï¼ç”¨èµ·æ¥ä¸ä»…å¹²å‡€ä¼˜é›…è€Œä¸”å¯è¯»æ€§ä¹Ÿæ›´å¼ºäº†ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> enumerate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„pycæ–‡ä»¶</title>
      <link href="/2017/12/23/python-pyc/"/>
      <url>/2017/12/23/python-pyc/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨ç¼–å†™Pythonç¨‹åºçš„æ—¶å€™ä¼šå‘ç°åœ¨æˆ‘ä»¬çš„ç›®å½•ä¸­å¯èƒ½ä¼šå‡ºç°ä¸æºä»£ç åŒåçš„pycæ–‡ä»¶ç”Ÿæˆï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªæºç æ–‡ä»¶æ˜¯<code>hello.py</code>é‚£ä¹ˆå¯èƒ½ä¼šç”Ÿæˆä¸€ä¸ª<code>hello.pyc</code>æ–‡ä»¶å‡ºæ¥ï¼è¿™ä¸ªpycæ–‡ä»¶æ˜¯Pythonçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œå°±ç±»ä¼¼äºJavaä¸­çš„<code>hello.class</code>ä¸€æ ·ï¼</p><p>Pythonè™½ç„¶æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œä½†è¿˜æ˜¯å¯ä»¥æœ‰ä¸€ä¸ªç¼–è¯‘çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡æ˜¯ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶ç½¢äº†ï¼å¦‚æœæˆ‘ä»¬çš„æºç å¸¦æœ‰åŒ…å«å…³ç³»ï¼Œæ¯”å¦‚æºç <code>a.py</code>é‡Œé¢<code>import</code>äº†æºç æ–‡ä»¶<code>b.py</code>ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ<code>python a.py</code>çš„æ—¶å€™å°±ä¼šå°†<code>b.py</code>ç¼–è¯‘æˆ<code>b.pyc</code>ï¼</p><p>ä¸‹æ¬¡å†è¿è¡Œ<code>python a.py</code>çš„æ—¶å€™è§£é‡Šå™¨ä¼šæ£€æŸ¥<code>b.py</code>ä¸<code>b.pyc</code>çš„ä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœä¸€è‡´å°±ä»£è¡¨æºç æ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è°ƒç”¨<code>b.pyc</code>æ¥æ›´å¿«çš„æ‰§è¡Œç¨‹åºï¼Œå¦‚æœæ—¶é—´ä¸åŒé‚£å°±è¯æ˜<code>b.py</code>è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™ä¼šé‡æ–°ç¼–è¯‘<code>b.py</code>ï¼</p><p>å…¶ä¸­<code>pyc</code>æ–‡ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥åŠ å¿«ç¨‹åºæ‰§è¡Œé€Ÿåº¦çš„ï¼Œè™½ç„¶ç¼–è¯‘å‡ºæ¥çš„<code>pyc</code>æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸èƒ½çœ‹åˆ°å†…éƒ¨çš„å†…å®¹ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸è¦æŠŠè¿™ç§æ–¹å¼ä½œä¸ºä¿æŠ¤æºç çš„æ–¹æ³•ï¼å› ä¸ºè¿™ç§<code>pyc</code>æ–‡ä»¶æ˜¯å¯ä»¥è½»æ˜“è¢«åç¼–è¯‘çš„ï¼Œæœ‰å¾ˆå¤šå¼€æºåº“å¯ä»¥è½»æ¾çš„åç¼–è¯‘<code>pyc</code>æ–‡ä»¶ï¼Œç”šè‡³éƒ½æœ‰webç¨‹åºæ¥åç¼–è¯‘<code>pyc</code>æ–‡ä»¶ï¼Œæ¯”å¦‚è¿™ä¸ª<span class="exturl" data-url="aHR0cHM6Ly90b29sLmx1L3B5Yy8=" title="https://tool.lu/pyc/">tool.lu<i class="fa fa-external-link"></i></span>å°±å¯ä»¥é€šè¿‡ä¸Šä¼ æ–‡ä»¶<code>pyc</code>æ–‡ä»¶çš„æ–¹å¼åç¼–è¯‘ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> pyc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨uwsgiå’Œsupervisoréƒ¨ç½²Djangoç¨‹åº</title>
      <link href="/2017/12/23/django-uwsgi-supervisor/"/>
      <url>/2017/12/23/django-uwsgi-supervisor/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä½¿ç”¨uwsgiå¯åŠ¨Django"><a href="#0X00-ä½¿ç”¨uwsgiå¯åŠ¨Django" class="headerlink" title="0X00 ä½¿ç”¨uwsgiå¯åŠ¨Django"></a>0X00 ä½¿ç”¨uwsgiå¯åŠ¨Django</h1><p>é¦–å…ˆå®‰è£…uwsgiï¼Œ<code>pip install uwsgi</code>å°±å¯ä»¥è£…å¥½ï¼ç„¶åæ‰¾åˆ°Djangoç”Ÿæˆçš„<code>wsgi.py</code>æ–‡ä»¶ï¼Œè¿™æ–‡ä»¶é€šå¸¸å®åœ¨ä¸é¡¹ç›®ååŒåçš„appç›®å½•ä¸‹çš„ï¼Œæ¯”å¦‚æˆ‘çš„é¡¹ç›®åä¸º<code>django_test</code>é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶åº”è¯¥å°±åœ¨<code>django_test/wsgi.py</code>ï¼ç„¶åæ‰§è¡Œ<code>uwsgi --http 0.0.0.0:8080 --wsgi-file django_test/wssgi.py</code>å°±å¯ä»¥ç”¨uwsgiå¯åŠ¨ä½ çš„Djangoé¡¹ç›®äº†.<br>Djangoè‡ªå¸¦çš„<code>python manage.py runserver</code>ç”¨äºè°ƒè¯•è¿˜æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡å¦‚æœç”¨äºç”Ÿäº§ç¯å¢ƒçš„ä¸è®ºæ˜¯å®‰å…¨æ€§è¿˜æ˜¯æ€§èƒ½éƒ½ä¸è¶³ä»¥æ»¡è¶³ç”Ÿäº§ç¯å¢ƒçš„éœ€è¦.</p><h1 id="0X01-ä½¿ç”¨supervisorç»´æŒæœåŠ¡åœ¨çº¿"><a href="#0X01-ä½¿ç”¨supervisorç»´æŒæœåŠ¡åœ¨çº¿" class="headerlink" title="0X01 ä½¿ç”¨supervisorç»´æŒæœåŠ¡åœ¨çº¿"></a>0X01 ä½¿ç”¨supervisorç»´æŒæœåŠ¡åœ¨çº¿</h1><p>æˆ‘ä»¬çŸ¥é“ç”±äºLinuxç³»ç»Ÿçš„è¿›ç¨‹ç®¡ç†æœºåˆ¶ï¼Œå¯¼è‡´åœ¨bashé‡Œå¯åŠ¨çš„ç¨‹åºå¦‚æœé€€å‡ºbashå°±ä¼šè‡ªåŠ¨è¢«killæ‰ï¼æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½è®©è¿›ç¨‹ä¸€ç›´æ´»ä¸‹å»çš„æ–¹æ³•ï¼Œå…¶ä¸­<code>nohup</code>æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•ä¹Ÿåªæ˜¯èƒ½è®©è¿›ç¨‹æ´»åœ¨åå°ç½¢äº†ï¼Œå¹³æ—¶è·‘ä¸ªè„šæœ¬æˆ–æ˜¯å…¶ä»–å°ç¨‹åºè¿˜å¯ä»¥ï¼Œå¦‚æœæ˜¯éƒ¨ç½²ä¸€ä¸ªæœåŠ¡çš„è¯å°±ä¸åˆé€‚äº†ï¼è¿™é‡Œæˆ‘ä»¬é€‰ç”¨<code>supervisor</code>æ¥ç»´æŒæœåŠ¡ï¼</p><a id="more"></a><p>è¿™ä¸ªå·¥å…·ä¹Ÿæ˜¯Pythonå†™çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨pipå®‰è£…<code>pip install supervisor</code>ï¼ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ª<code>supervisor</code>çš„é…ç½®æ–‡ä»¶<code>django_test_supervisor.conf</code>ï¼Œå¯åŠ¨supervissorçš„æ—¶å€™ä¼šæŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸åƒæ˜¯å…¶ä»–é…ç½®é‚£æ ·å…¨å±€ä½¿ç”¨ï¼é…ç½®æ–‡ä»¶ç®€å•ä¸­çš„å‘½ä»¤å’Œæ—¥å¿—éœ€è¦è‡ªè¡Œä¿®æ”¹ï¼Œå…¶ä¸­å‘½ä»¤è¦ä¿®æ”¹æˆè‡ªå·±ä½¿ç”¨uwsgiå¯åŠ¨Djangoçš„å‘½ä»¤ï¼Œæ—¥å¿—ä½ç½®è¦å­˜åœ¨ï¼Œä¸è¦æ²¡æœ‰é‚£ä¸ªç›®å½•ï¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[unix_http_server]</span><br><span class="line">file=/tmp/supervisor.sock   ; (the path to the socket file)</span><br><span class="line"></span><br><span class="line">[inet_http_server]         ; inet (TCP) server disabled by default</span><br><span class="line">port=127.0.0.1:9001        ; (ip_address:port specifier, *:port for all iface)</span><br><span class="line"></span><br><span class="line">[rpcinterface:supervisor]</span><br><span class="line">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br><span class="line"></span><br><span class="line">[supervisorctl]</span><br><span class="line">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br><span class="line"></span><br><span class="line">[supervisord]</span><br><span class="line">nodaemon=false  # å€¼ä¸ºfalseæ—¶supervisoråœ¨åå°è¿è¡Œ</span><br><span class="line">logfile=/data/log/supervisord.log   # supervisorã€€çš„æ—¥å¿—</span><br><span class="line">pidfile=/data/supervisord.pid       # supervisorã€€çš„æ—¥å¿—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[program:django_test]</span><br><span class="line">command=uwsgi --http 0.0.0.0:8080 --chdir /home/shawn/django_test --wsgi-file django_test/wsgi.py  ï¼ƒã€€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå…¶ä¸­chdiræŒ‡å®šçš„æ˜¯é¡¹ç›®çš„ç›®å½•</span><br><span class="line">stopsignal=HUP</span><br><span class="line">stopasgroup=true</span><br><span class="line">killasgroup=true</span><br><span class="line">autorestart=true</span><br><span class="line">stdout_logfile=/data/log/uwsgi.log  # uwsgiã€€çš„æ—¥å¿—</span><br><span class="line">stderr_logfile=/data/log/uwsgi.log  # uwsgiã€€çš„æ—¥å¿—</span><br><span class="line">stdout_logfile_maxbytes = 20MB</span><br><span class="line">stderr_logfile_maxbytes = 20MB</span><br><span class="line"></span><br><span class="line">[group:django_test]</span><br><span class="line">programs=django_test</span><br></pre></td></tr></table></figure></p><p>å†™å¥½é…ç½®æ–‡ä»¶ä¹‹åå¯åŠ¨supervisorï¼Œ<code>supervisord -c django_test_supervisor.conf</code>å°±å¯ä»¥æŠŠæœåŠ¡å¯åŠ¨èµ·æ¥äº†ï¼</p><p>å¯åŠ¨èµ·æ¥ä¹‹åå¯ä»¥è¿›å…¥æ§åˆ¶å°å»ç®¡ç†ä»»åŠ¡ï¼<code>supervisorctl -c django_test_supervisor.conf</code>å¯ä»¥è¿›å…¥åˆ°supervisorçš„å‘½ä»¤è¡Œï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°ç®¡ç†çš„è¿›ç¨‹ï¼å¯ä»¥é€šè¿‡<code>start django_test/stop django_test/restart django_test</code>ç­‰å‘½ä»¤å»æ“ä½œè¿›ç¨‹ï¼</p><h1 id="0X02-åè®°"><a href="#0X02-åè®°" class="headerlink" title="0X02 åè®°"></a>0X02 åè®°</h1><p>ç°åœ¨æœåŠ¡å·²ç»å¯ä»¥ç›´æ¥ä¸Šçº¿äº†ï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šè®©Nginxä»£ç†ä¸€ä¸‹åˆ°uwsgiï¼Œè¿™æ ·é™æ€æ–‡ä»¶ä»€ä¹ˆçš„å°±ä¸ä¼šå†èµ°ä¸€æ¬¡Pythonç¨‹åºäº†ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
            <tag> uWSGI </tag>
            
            <tag> Supervisor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonè‡ªåŠ¨åŒ–è¿ç»´ä¸è¿œç¨‹éƒ¨ç½²ï¼šfabric</title>
      <link href="/2017/12/10/python-fabric/"/>
      <url>/2017/12/10/python-fabric/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å®‰è£…fabric"><a href="#0X00-å®‰è£…fabric" class="headerlink" title="0X00 å®‰è£…fabric"></a>0X00 å®‰è£…fabric</h1><p>ä½¿ç”¨pipå¯ä»¥è½»æ¾åœ°å®‰è£…fabric<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install fabric</span><br></pre></td></tr></table></figure></p><h1 id="0X01-åˆæ¬¡è°ƒç”¨"><a href="#0X01-åˆæ¬¡è°ƒç”¨" class="headerlink" title="0X01 åˆæ¬¡è°ƒç”¨"></a>0X01 åˆæ¬¡è°ƒç”¨</h1><p>åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>fabfile.py</code>çš„æ–‡ä»¶ï¼Œå¡«å†™æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> fabric</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'hello,world'</span></span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤<code>fab test</code>å°±å¯ä»¥çœ‹åˆ°ä¸€æ¡<code>hello,world</code>è¾“å‡ºäº†ã€‚</p><h1 id="0X02-æµ…æ˜¾çš„é“ç†"><a href="#0X02-æµ…æ˜¾çš„é“ç†" class="headerlink" title="0X02 æµ…æ˜¾çš„é“ç†"></a>0X02 æµ…æ˜¾çš„é“ç†</h1><p>æ ¹æ®ä¸Šé¢ç®€å•çš„ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥fabå‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ä¼šé»˜è®¤æ‰¾åˆ°å½“å‰ç›®å½•ä¸‹çš„<code>fabfile.py</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°åä¼šç”¨fabå‘½ä»¤çš„å‚æ•°å»åŒ¹é…<code>fabfile.py</code>ä¸­çš„å‡½æ•°åï¼Œæ‰§è¡Œç›¸åº”çš„åŠŸèƒ½ã€‚</p><blockquote><p>å®é™…ä¸Šå½“å‰ç›®å½•å¯ä»¥æ²¡æœ‰<code>fabfile.py</code>ï¼Œå¦‚æœå½“å‰ç›®å½•çš„ä¸Šçº§ç›®å½•ä¸­æœ‰<code>fabfile.py</code>æ˜¯ä¼šé‡‡ç”¨ä¸Šçº§ç›®å½•ä¸­çš„<code>fabfile.py</code>çš„ã€‚è€Œä¸”æ–‡ä»¶åä¹Ÿä¸ä¸€å®šç”¨<code>fabfile.py</code>ï¼Œå‡è®¾å–äº†ä¸€ä¸ªåä¸º<code>asdf.py</code>çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆåªéœ€è¦æ‰§è¡Œ<code>fab -f asdf.py</code>å°±å¯ä»¥é‡‡ç”¨è¿™ä¸ª<code>fabfile</code>äº†ã€‚</p></blockquote><a id="more"></a><h1 id="0X03-æ‰§è¡Œæœ¬åœ°å‘½ä»¤"><a href="#0X03-æ‰§è¡Œæœ¬åœ°å‘½ä»¤" class="headerlink" title="0X03 æ‰§è¡Œæœ¬åœ°å‘½ä»¤"></a>0X03 æ‰§è¡Œæœ¬åœ°å‘½ä»¤</h1><p>ä½œä¸ºä¸€ä¸ªå¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–è¿ç»´å’Œè¿œç¨‹éƒ¨ç½²çš„åº“ï¼Œè¿è¡Œæœ¬åœ°å‘½ä»¤æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„åŠŸèƒ½ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> local</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_home_dir</span><span class="params">()</span>:</span></span><br><span class="line">    local(<span class="string">'ls ~/.'</span>)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„<code>local</code>æ–¹æ³•å°±æ˜¯æ‰§è¡Œæœ¬åœ°å‘½ä»¤ï¼Œå¹¶å°†è¾“å‡ºæ‰“å°å‡ºæ¥ã€‚ç„¶åè¿è¡Œ<code>fab list_home_dir</code>å°±å¯ä»¥çœ‹åˆ°è‡ªå·±<code>~</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ä»¬äº†ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å¸¦å‚æ•°çš„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cp_file</span><span class="params">(file_a, file_b)</span>:</span></span><br><span class="line">    local(<span class="string">'cp %s %s'</span> % (file_a, file_b))</span><br></pre></td></tr></table></figure></p><p>è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å¯ä»¥é€šè¿‡<code>fab cp_file:&quot;file_a=~/hello.py,file_b=~/hello_b.py&quot;</code>è¿™ä¸ªå‘½ä»¤å°†<code>~/hello.pyå¤åˆ¶åˆ°hello_b.py</code>ã€‚</p><h1 id="0X04-æ‰§è¡Œè¿œç¨‹å‘½ä»¤"><a href="#0X04-æ‰§è¡Œè¿œç¨‹å‘½ä»¤" class="headerlink" title="0X04 æ‰§è¡Œè¿œç¨‹å‘½ä»¤"></a>0X04 æ‰§è¡Œè¿œç¨‹å‘½ä»¤</h1><p>fabricç”¨å¤„æœ€å¤§çš„ä¸€ç‚¹å°±æ˜¯è¿œç¨‹æ‰§è¡Œå‘½ä»¤äº†ã€‚ä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç ï¼Œè¿è¡Œ<code>fab list_home</code>å<code>fabric</code>ä¼šä½¿ç”¨ä½ æä¾›çš„ç™»å½•ä¿¡æ¯é€šè¿‡<code>SSH</code>ç™»å½•åˆ°è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œ<code>ls ~/.</code>çš„å‘½ä»¤ã€‚å…¶ä¸­<code>run()</code>å°±æ˜¯åœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œå‘½ä»¤ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> run, env</span><br><span class="line"></span><br><span class="line">env.hosts = [<span class="string">'qcloud.just666.cn'</span>, ]</span><br><span class="line">env.user = <span class="string">'root'</span></span><br><span class="line">env.password = <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_home</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'ls ~/.'</span>)</span><br></pre></td></tr></table></figure></p><h1 id="0X05-å¤šå°æœºå™¨æ‰§è¡Œç›¸åŒçš„å‘½ä»¤"><a href="#0X05-å¤šå°æœºå™¨æ‰§è¡Œç›¸åŒçš„å‘½ä»¤" class="headerlink" title="0X05 å¤šå°æœºå™¨æ‰§è¡Œç›¸åŒçš„å‘½ä»¤"></a>0X05 å¤šå°æœºå™¨æ‰§è¡Œç›¸åŒçš„å‘½ä»¤</h1><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬æœ‰å¤šå°æœºå™¨ï¼Œéœ€è¦æ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œè¿™ç§æ—¶å€™å°±å¯ä»¥ç”¨<code>env.passwords</code>æ¥è§£å†³é—®é¢˜ã€‚é€šè¿‡<code>hosts</code>æŒ‡å®šç”¨æˆ·åå’Œä¸»æœºï¼Œç”¨<code>passwords</code>æŒ‡å®šå¯†ç ï¼Œå°±å¯ä»¥åŒæ—¶ç™»å½•åˆ°å¤šå°æœºå™¨ä¸Šäº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, run</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¸»æœº</span></span><br><span class="line">env.hosts = [</span><br><span class="line">    <span class="string">'root@qcloud.just666.cn'</span>,</span><br><span class="line">    <span class="string">'root@aliyun.just666.cn'</span>,</span><br><span class="line">    <span class="string">'root@aws.just666.cn'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šå¯†ç </span></span><br><span class="line">env.passwords = &#123;</span><br><span class="line">    <span class="string">'root@qcloud.just666.cn'</span>: <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span>,</span><br><span class="line">    <span class="string">'root@aliyun.just666.cn'</span>: <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span>,</span><br><span class="line">    <span class="string">'root@aws.just666.cn'</span>: <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'ls ~/.'</span>)</span><br></pre></td></tr></table></figure></p><p>å…¶å®æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚ï¼Œæ—¢ç„¶<code>env.passwords</code>éƒ½å·²ç»åˆ¶å®šäº†ç”¨æˆ·åï¼Œä¸»æœºå’Œå¯†ç ä¸ºä»€ä¹ˆè¿˜è¦ç”¨hostså†æŒ‡å®šä¸€æ¬¡å‘¢ï¼Ÿä¸æ˜¯å¾ˆæ‡‚ï¼Œæ³¨é‡Šè¿‡<code>hosts</code>ï¼Œå°±ä¸èƒ½ç”¨äº†ã€‚</p><h1 id="0X06-å¤šå°æœºå™¨æ‰§è¡Œä¸åŒå‘½ä»¤"><a href="#0X06-å¤šå°æœºå™¨æ‰§è¡Œä¸åŒå‘½ä»¤" class="headerlink" title="0X06 å¤šå°æœºå™¨æ‰§è¡Œä¸åŒå‘½ä»¤"></a>0X06 å¤šå°æœºå™¨æ‰§è¡Œä¸åŒå‘½ä»¤</h1><p>ä¸è¿‡é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯æœ‰ä¸æ­¢ä¸€å°è¿œç¨‹æœºå™¨çš„ï¼Œè¦ä¸ç„¶ä¹Ÿä¸ä¼šéœ€è¦ä»€ä¹ˆè‡ªåŠ¨åŒ–äº†ã€‚é‚£ä¹ˆå‡è®¾æˆ‘ä»¬æœ‰ä¸‰å°æœºå™¨ï¼Œåˆ†åˆ«æ˜¯<code>mysql/apache/nginx</code>è¿™ä¸‰ä¸ªæœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™è„šæœ¬ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>fab start_firewalld</code>å¯åŠ¨ä¸‰å°æœºå™¨çš„é˜²ç«å¢™ï¼Œä½¿ç”¨<code>fab start_mysql/start_httpd/start_nginx</code>åˆ†åˆ«å¯åŠ¨åœ¨è¿™ä¸‰å°æœºå™¨ä¸Šçš„ä¸‰ä¸ªæœåŠ¡ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, run, roles</span><br><span class="line"></span><br><span class="line">env.hosts = [</span><br><span class="line">    <span class="string">'root@mysql.just666.cn'</span>,</span><br><span class="line">    <span class="string">'root@apache.just666.cn'</span>,</span><br><span class="line">    <span class="string">'root@nginx.just666.cn'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">env.passwords = &#123;</span><br><span class="line">    <span class="string">'root@mysql.just666.cn'</span>: <span class="string">'zhangHAO8'</span>,</span><br><span class="line">    <span class="string">'root@apache.just666.cn'</span>: <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span>,</span><br><span class="line">    <span class="string">'root@nginx.just666.cn'</span>: <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">env.roledefs = &#123;</span><br><span class="line">    <span class="string">'all'</span>: [</span><br><span class="line">        <span class="string">'root@mysql.just666.cn'</span>,</span><br><span class="line">        <span class="string">'root@apache.just666.cn'</span>,</span><br><span class="line">        <span class="string">'root@nginx.just666.cn'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'mysql'</span>: [<span class="string">'root@mysql.just666.cn'</span>, ],</span><br><span class="line">    <span class="string">'apache'</span>: [<span class="string">'root@apache.just666.cn'</span>, ],</span><br><span class="line">    <span class="string">'nginx'</span>: [<span class="string">'root@nginx.just666.cn'</span>, ],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@roles('all')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_firewalld</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'systemctl start firewalld'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@roles('mysql')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_mysql</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'systemctl start mysql'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@roles('apache')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_httpd</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'systemctl start httpd'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@roles('nginx')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">start_nginx</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'systemctl start nginx'</span>)</span><br></pre></td></tr></table></figure></p><h1 id="0X07-å¹¶å‘ä»»åŠ¡"><a href="#0X07-å¹¶å‘ä»»åŠ¡" class="headerlink" title="0X07 å¹¶å‘ä»»åŠ¡"></a>0X07 å¹¶å‘ä»»åŠ¡</h1><p>é€šå¸¸æƒ…å†µä¸‹<code>fabric</code>æ˜¯ç©¿è¡Œæ‰§è¡Œä»»åŠ¡çš„ï¼Œå‡è®¾æœ‰100å°æœºå™¨è¦æ‰§è¡Œç›¸åŒçš„å‘½ä»¤ï¼Œè™½ç„¶æˆ‘ä»¬æ‰¹é‡åŒ–äº†ï¼Œä½†æ˜¯ä»–ä»¬ä¾æ—§æ˜¯ä¸²è¡Œçš„ï¼Œå¯¼è‡´æ•ˆç‡æ¯”è¾ƒä½ã€‚è¿™ç§æ—¶å€™æˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>@parallel</code>è£…é¥°å™¨æ¥ä½¿æ–¹æ³•å˜æˆå¹¶è¡Œçš„ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªæ–¹æ³•<code>def test_speed</code>ç”¨æ¥æµ‹è¯•æœºå™¨çš„ç½‘é€Ÿï¼Œéœ€è¦æŒç»­ä¸€åˆ†é’Ÿæ‰è¡Œï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šå°æœºå™¨ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>@parallel</code>å°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> parallel</span><br><span class="line"></span><br><span class="line"><span class="meta">@parallel</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_speed</span><span class="params">()</span>:</span></span><br><span class="line">    run(<span class="string">'test_speed'</span>)</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶è¿™äº›ä»»åŠ¡å°±æ˜¯å¹¶è¡Œçš„äº†ï¼Œä¼šå¿«å¾ˆå¤šã€‚ä¸è¿‡å¦‚æœçœŸçš„æœ‰éå¸¸å¤šçš„æœºå™¨è¦å¹¶è¡Œï¼Œé‚£ä¹ˆfabricå¯èƒ½æ‰›ä¸ä½ï¼Œå¯ä»¥ç»™å¹¶è¡Œæ•°é‡è®¾ç½®ä¸€ä¸ªä¸Šé™<code>@parallel(pool_size=10)</code>ï¼Œè¿™æ ·å°±æ˜¯æœ€é«˜10ä¸ªå¹¶è¡Œä»»åŠ¡äº†ã€‚</p><h1 id="0X08-ä¼ æ–‡ä»¶"><a href="#0X08-ä¼ æ–‡ä»¶" class="headerlink" title="0X08 ä¼ æ–‡ä»¶"></a>0X08 ä¼ æ–‡ä»¶</h1><p>æ–‡ä»¶ä¼ è¾“ç”¨çš„æ˜¯<code>scp</code>çš„åŸç†ï¼Œåˆ†æˆä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯<code>get/put</code>ï¼Œç”¨æ³•ä¹Ÿéå¸¸ç®€å•å°±åƒæ™®é€šçš„<code>cp</code>ä¸€æ ·ã€‚<code>get(&#39;remote_file&#39;, &#39;local_file&#39;)</code>å’Œ<code>put(&#39;local_file&#39;, &#39;remote_file&#39;)</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, get, put</span><br><span class="line"></span><br><span class="line">env.hosts = [<span class="string">'qcloud.just666.cn'</span>, ]</span><br><span class="line">env.user = <span class="string">'root'</span></span><br><span class="line">env.password = <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_vimrc</span><span class="params">()</span>:</span></span><br><span class="line">    get(<span class="string">'~/.vimrc'</span>, <span class="string">'~/.vimrc'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">put_vimrc</span><span class="params">()</span>:</span></span><br><span class="line">    put(<span class="string">'~/.vimrc'</span>, <span class="string">'~/.vimrc'</span>)</span><br></pre></td></tr></table></figure></p><h1 id="0X09-åˆ‡ç›®å½•"><a href="#0X09-åˆ‡ç›®å½•" class="headerlink" title="0X09 åˆ‡ç›®å½•"></a>0X09 åˆ‡ç›®å½•</h1><p>åœ¨<code>fabric</code>ä¸­åˆ‡ç›®å½•è¦é…åˆPythonçš„<code>with</code>è¯­æ³•ä½¿ç”¨ã€‚å…±æœ‰<code>cd/lcd</code>è¿™ä¸¤ç§åˆ‡ç›®å½•æ–¹æ³•ï¼Œå¯¹åº”çš„æ˜¯è¿œç¨‹ç›®å½•å’Œæœ¬åœ°ç›®å½•ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, cd, lcd</span><br><span class="line"></span><br><span class="line">env.hosts = [<span class="string">'qcloud.just666.cn'</span>, ]</span><br><span class="line">env.user = <span class="string">'root'</span></span><br><span class="line">env.password = <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_local_dir</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> lcd(<span class="string">'/'</span>):  <span class="comment"># åˆ‡åˆ°æœ¬åœ°æ ¹ç›®å½•</span></span><br><span class="line">      local(<span class="string">'ls'</span>) <span class="comment"># åœ¨ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">    <span class="keyword">with</span> lcd(<span class="string">'~'</span>):  <span class="comment"># åˆ‡åˆ°æœ¬åœ°ä¸»ç›®å½•</span></span><br><span class="line">      local(<span class="string">'ls'</span>) <span class="comment"># åœ¨ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_remote_dir</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> cd(<span class="string">'/'</span>):   <span class="comment"># åˆ‡åˆ°è¿œç¨‹æ ¹ç›®å½•</span></span><br><span class="line">      run(<span class="string">'ls'</span>) <span class="comment"># åœ¨ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">    <span class="keyword">with</span> cd(<span class="string">'~'</span>):   <span class="comment"># åˆ‡åˆ°è¿œç¨‹ä¸»ç›®å½•</span></span><br><span class="line">      run(<span class="string">'ls'</span>) <span class="comment"># åœ¨ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0A-PATH"><a href="#0X0A-PATH" class="headerlink" title="0X0A PATH"></a>0X0A PATH</h1><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸´æ—¶æ·»åŠ PATHï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, run, path</span><br><span class="line"></span><br><span class="line">env.hosts = [<span class="string">'qcloud.just666.cn'</span>, ]</span><br><span class="line">env.user = <span class="string">'root'</span></span><br><span class="line">env.password = <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> path(<span class="string">'/home/shawn/.envs/study_django/bin/'</span>): <span class="comment"># æ·»åŠ ç›®å½•åˆ°PATHä¸­</span></span><br><span class="line">        run(<span class="string">'echo $PATH'</span>) <span class="comment"># æŸ¥çœ‹æ–°çš„PATH</span></span><br><span class="line">    run(<span class="string">'echo $PATH'</span>) <span class="comment"># é€€å‡ºå»åPATHä¹Ÿè¢«åˆ é™¤äº†</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0B-ç¯å¢ƒå˜é‡"><a href="#0X0B-ç¯å¢ƒå˜é‡" class="headerlink" title="0X0B ç¯å¢ƒå˜é‡"></a>0X0B ç¯å¢ƒå˜é‡</h1><p>å¦‚æœè¦ä¸´æ—¶ä¿®æ”¹ç¯å¢ƒå˜é‡çš„è¯å¯ä»¥è¿™æ ·å­ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> env, run, local, shell_env</span><br><span class="line"></span><br><span class="line">env.hosts = [<span class="string">'qcloud.just666.cn'</span>, ]</span><br><span class="line">env.user = <span class="string">'root'</span></span><br><span class="line">env.password = <span class="string">'5L2g5b2T5oiR5YK75ZWK'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">with</span> shell_env(JAVA_HOME=<span class="string">'/opt/oracle/java'</span>):</span><br><span class="line">        run(<span class="string">'echo $JAVA_HOME'</span>)  <span class="comment"># è¿œç¨‹æœºå™¨çš„ç¯å¢ƒå˜é‡è¢«ä¿®æ”¹äº†</span></span><br><span class="line">        local(<span class="string">'echo $JAVA_HOME'</span>)  <span class="comment"># æœ¬åœ°çš„ç¯å¢ƒå˜é‡ä¹Ÿè¢«ä¸´æ—¶ä¿®æ”¹äº†ã€‚</span></span><br></pre></td></tr></table></figure></p><blockquote><p>ä¿®æ”¹åªæ˜¯æš‚æ—¶çš„ï¼Œé€€å‡º<code>with</code>ä¹‹åå°±ä¼šæ¢å¤åŸçŠ¶çš„ã€‚</p></blockquote><h1 id="0X0C-å¸¦é¢œè‰²è¾“å‡º"><a href="#0X0C-å¸¦é¢œè‰²è¾“å‡º" class="headerlink" title="0X0C å¸¦é¢œè‰²è¾“å‡º"></a>0X0C å¸¦é¢œè‰²è¾“å‡º</h1><p>æœ‰çš„æ—¶å€™ä¸ºäº†ä¾¿ä¸æŸ¥çœ‹è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦ç”¨ä¸åŒé¢œè‰²çš„å­—æ ‡ç¤ºä¸åŒçš„å†…å®¹ã€‚æ¯”å¦‚ç”¨çº¢è‰²æ ‡ç¤ºå¤±è´¥ï¼Œé»„è‰²æ ‡ç¤ºè­¦å‘Šï¼Œç»¿è‰²æ ‡ç¤ºæˆåŠŸç­‰ã€‚<code>fabric</code>ä¹Ÿå¯ä»¥è½»æ¾å®ç°è¿™ä¸ªåŠŸèƒ½çš„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fabric.colors <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_color</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> green(<span class="string">"OK."</span>)</span><br><span class="line">    <span class="keyword">print</span> yellow(<span class="string">"Warning"</span>)</span><br><span class="line">    <span class="keyword">print</span> red(<span class="string">"Error"</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> fabric </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„è¿­ä»£ã€ç”Ÿæˆå’Œyieldå…³é”®å­—</title>
      <link href="/2017/11/12/python-iteration-yield/"/>
      <url>/2017/11/12/python-iteration-yield/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å¯è¿­ä»£å¯¹è±¡"><a href="#0X00-å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="0X00 å¯è¿­ä»£å¯¹è±¡"></a>0X00 å¯è¿­ä»£å¯¹è±¡</h1><p>Pythonä¸­çš„åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—å…¸ï¼Œæ–‡ä»¶éƒ½æ˜¯å¯è¿­ä»£å¯¹ã€‚å¯è¿­ä»£å¯¹è±¡ç®€å•åœ°è¯´å°±æ˜¯å¯ä»¥ç”¨<code>for i in xxx:</code>æ¥éå†çš„å¯¹è±¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">my_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_llist:</span><br><span class="line">    <span class="keyword">print</span> i</span><br><span class="line"></span><br><span class="line">my_dict = &#123;</span><br><span class="line">    <span class="string">'a'</span>: <span class="string">u'è‹Ÿåˆ©å›½å®¶ç”Ÿæ­»ä»¥'</span>,</span><br><span class="line">    <span class="string">'b'</span>: <span class="string">u'å²‚å› ç¥¸ç¦é¿è¶‹ä¹‹'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_dict:</span><br><span class="line">    <span class="keyword">print</span> i</span><br></pre></td></tr></table></figure><p>ä¸è¿‡å¦‚æœæ•°æ®é‡éå¸¸éå¸¸åºå¤§çš„æ—¶å€™ï¼Œä¼šå¾ˆå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚è¿™ç§æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id="0X01-ç”Ÿæˆå™¨"><a href="#0X01-ç”Ÿæˆå™¨" class="headerlink" title="0X01 ç”Ÿæˆå™¨"></a>0X01 ç”Ÿæˆå™¨</h1><p>ç”Ÿæˆå™¨çš„ç”¨æ³•å’Œæ™®é€šçš„å¯è¿­ä»£å¯¹è±¡å·®ä¸å¤šï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ï¼šâ€œç”¨çš„æ—¶å€™æ‰å»è®¡ç®—â€ã€‚è¿™é‡Œå†™ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºä¸€ä¸‹æƒ…å†µã€‚ç¬¬ä¸€ç§ç”Ÿæˆè¶…å¤§åˆ—è¡¨çš„æ–¹å¼è¦é€é¡¹è®¡ç®—å®Œæ‰ç®—å¼„å‡ºæ¥äº†è¿™ä¸ª10000é•¿çš„åˆ—è¡¨ï¼Œè€Œåè€…æ˜¯ç”Ÿæˆå™¨ï¼Œåªæ˜¯å£°æ˜äº†æ€ä¹ˆç®—ï¼Œå¹¶æ²¡æœ‰çœŸçš„å»ç®—ï¼Œæ‰€ä»¥åœ¨é€Ÿåº¦ä¸Šæ‰æ˜¯å®Œå…¨ä¸èƒ½æ¯”çš„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    start = time.time()</span><br><span class="line">    [x**x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10000</span>)]    <span class="comment"># è¿™é‡Œç”Ÿæˆçš„æ˜¯ä¸€ä¸ªè¶…å¤§çš„åˆ—è¡¨</span></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">print</span> end - start</span><br><span class="line"></span><br><span class="line">    start = time.time()</span><br><span class="line">    (x**x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10000</span>))    <span class="comment"># è¿™é‡Œç”Ÿæˆä¸€ä¸ªè¶…å¤§çš„ç”Ÿæˆå™¨ï¼ˆæ³¨æ„çœ‹ï¼Œæ‹¬å·ä¸ä¸€æ ·ï¼‰</span></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">print</span> end - start</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shawn in ~ Î» python hello.py</span><br><span class="line">6.76475715637</span><br><span class="line">0.000135898590088</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X02-yieldå…³é”®å­—"><a href="#0X02-yieldå…³é”®å­—" class="headerlink" title="0X02 yieldå…³é”®å­—"></a>0X02 yieldå…³é”®å­—</h1><p>é‚£æ˜¯æ—¶å€™è‡ªå·±ç”Ÿæˆå¼„ä¸€ä¸ªç”Ÿæˆå™¨å‡ºæ¥äº†ï¼ŒPythonä¸­æä¾›çš„yieldå…³é”®å­—å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ï¼Œé€šè¿‡è¿™ä¸ªå…³é”®å­—å¯ä»¥åˆ›é€ è‡ªå·±çš„ç”Ÿæˆå™¨ã€‚<br>è¿˜æ˜¯ä¸Šé¢åŒæ ·çš„ä¾‹å­ï¼Œç¨åŠ æ”¹åŠ¨<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_list</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªæ™®é€šçš„åˆ—è¡¨</span></span><br><span class="line">    my_list = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">        my_list.append(x**x)</span><br><span class="line">    <span class="keyword">return</span> my_list</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_yield</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨yield</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">        <span class="keyword">yield</span> x**x</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    start = time.time()</span><br><span class="line">    a = create_list()</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">print</span> end - start</span><br><span class="line"></span><br><span class="line">    start = time.time()</span><br><span class="line">    a = test_yield()</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">print</span> end - start</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œèµ·æ¥çœ‹åˆ°çš„æ—¶é—´å·®è·å’Œåˆšåˆšæ¼”ç¤ºçš„ä¹Ÿå·®ä¸å¤š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shawn in ~ Î» python hello.py</span><br><span class="line">6.45007514954</span><br><span class="line">0.0080668926239</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Iteration </tag>
            
            <tag> yield </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gitåˆæ­¥ä½¿ç”¨ç»éªŒ</title>
      <link href="/2017/11/12/git-experience/"/>
      <url>/2017/11/12/git-experience/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ€æ ·æ­£ç¡®ä½¿ç”¨åˆ†æ”¯"><a href="#0X00-æ€æ ·æ­£ç¡®ä½¿ç”¨åˆ†æ”¯" class="headerlink" title="0X00 æ€æ ·æ­£ç¡®ä½¿ç”¨åˆ†æ”¯"></a>0X00 æ€æ ·æ­£ç¡®ä½¿ç”¨åˆ†æ”¯</h1><p>é€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªgitä»“åº“è¦ä¿æŒä¸‰ä¸ªåŠä»¥ä¸Šçš„åˆ†æ”¯ï¼ŒåŸºæœ¬çš„åˆ†æ”¯æ˜æ˜å¦‚ä¸‹ï¼š</p><table><thead><tr><th>name</th><th>function</th></tr></thead><tbody><tr><td>master</td><td>æ­£å¸¸è¿è¡Œçš„ç¨³å®šç‰ˆæœ¬</td></tr><tr><td>develop</td><td>æ­£å¸¸è¿è¡Œçš„å¼€å‘ç‰ˆ</td></tr><tr><td>feature</td><td>æ·»åŠ æ–°åŠŸèƒ½çš„åˆ†æ”¯</td></tr><tr><td>hotfix</td><td>ç´§æ€¥ä¿®å¤bugçš„åˆ†æ”¯</td></tr></tbody></table><p>å¦‚æœä½ å·²ç»forkäº†ä¸€ä»½ä»£ç åˆ°è‡ªå·±æœ¬åœ°ï¼Œå½“ä½ æƒ³æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½æ¯”å¦‚ã€Œç”¨æˆ·ç®¡ç†ã€çš„æ—¶å€™ï¼Œå°±åº”è¯¥å…ˆæ¢åˆ°<code>develop</code>åˆ†æ”¯ï¼Œç„¶åç”±è¿™ä¸ªåˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸º<code>feture_add_usermanager</code>çš„åˆ†æ”¯ã€‚åœ¨æ–°åˆ†æ”¯é‡Œç¼–å†™ä»£ç åå°†ä»£ç æäº¤ä¸€ä¸ªPullRequeståˆ°è‡ªå·±çš„<code>develop</code>åˆ†æ”¯ï¼Œåˆå¹¶èµ·æ¥åå†æäº¤ä¸€ä¸ªPullRequeståˆ°å›¢é˜Ÿçš„ä»“åº“ä¸­ï¼Œç­‰å¾…å›¢é˜Ÿå…¶ä»–æˆå‘˜reviewåå°±å¯ä»¥æ­£å¼å°†ä»£ç åˆå¹¶åˆ°å›¢é˜Ÿçš„<code>develop</code>ä¸­äº†ã€‚ç­‰ä¸‹ä¸€æ¬¡å‘å¸ƒæ–°ç‰ˆæœ¬çš„æ—¶å€™å°±å¯ä»¥å°†å›¢é˜Ÿçš„<code>develop</code>åˆ†æ”¯åˆå¹¶åˆ°å›¢é˜Ÿçš„<code>master</code>åˆ†æ”¯ä¸­äº†äº†ã€‚</p><p>å¦‚æœä¸­é€”é¡¹ç›®å‡ºç°äº†ä¸¥é‡bug(ä¸èƒ½ç™»å½•)éœ€è¦å³ä½¿ä¿®æ”¹ä¸Šçº¿ï¼Œé‚£å°±ä»è‡ªå·±çš„<code>master</code>åˆ†æ”¯ä¸Šæ–°å»ºä¸€ä¸ªåä¸º<code>hotfix_cantlogin</code>çš„åˆ†æ”¯ï¼Œä¿®æ”¹å®Œåç›´æ¥æäº¤PullRequeståˆ°å›¢é˜Ÿçš„<code>master</code>åˆ†æ”¯ï¼Œreviewä¸”åˆå¹¶åå°±å¯ä»¥å°†è¯¥åˆ†æ”¯åˆ é™¤äº†ã€‚</p><a id="more"></a><h1 id="0X01-åˆå¹¶å¤šæ¬¡commit"><a href="#0X01-åˆå¹¶å¤šæ¬¡commit" class="headerlink" title="0X01 åˆå¹¶å¤šæ¬¡commit"></a>0X01 åˆå¹¶å¤šæ¬¡commit</h1><p>æœ‰çš„æ—¶å€™ä¼šå‡ºç°è¿™ä¹ˆä¸€ç§æƒ…å†µï¼šè¿ç»­çš„næ¬¡commitè§£å†³çš„éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ï¼Œä¸ºäº†è®©æœ€ç»ˆçš„æäº¤è®°å½•æ¸…æ™°æ˜äº†ï¼Œå¯ä»¥å°†è¿™å‡ æ¬¡çš„commitåˆå¹¶ä¸ºä¸€æ¬¡ã€‚çœ‹ä¸‹é¢çš„å®ä¾‹ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">commit bc83e15e3245ad4064fdd9fe2bf105252d0c51fc (HEAD -&gt; develop)</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Mon Nov 6 00:52:43 2017 +0800</span><br><span class="line"></span><br><span class="line">    fix usermanager</span><br><span class="line"></span><br><span class="line">commit affc0acb9a3de30288f144ae2d0b28a9fd60af4b</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Mon Nov 6 00:52:33 2017 +0800</span><br><span class="line"></span><br><span class="line">    fix usermanager</span><br><span class="line"></span><br><span class="line">commit fcf13d712bd3dbd483442ffd316741e04acaaa3e</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Mon Nov 6 00:52:23 2017 +0800</span><br><span class="line"></span><br><span class="line">    fix usermanager</span><br><span class="line"></span><br><span class="line">commit 2812e2928913e9b3a7650e389602b8bb10ca388b</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Mon Nov 6 00:52:08 2017 +0800</span><br><span class="line"></span><br><span class="line">    fix usermanager</span><br><span class="line"></span><br><span class="line">commit f7f273d9c36d748183ac3e6a90f06ff14ed42f95</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Mon Nov 6 00:51:52 2017 +0800</span><br><span class="line"></span><br><span class="line">    add user_manager</span><br></pre></td></tr></table></figure></p><p>æœ€è¿‘çš„å››æ¬¡æäº¤å†…å®¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¿®æ”¹äº†å››æ¬¡bugæœ€ç»ˆæ‰è§£å†³äº†é—®é¢˜ï¼Œå› ä¸ºæœ€è¿‘å››æ¬¡çš„commitæ˜¯ç›¸åŒå«ä¹‰çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æœ€å¥½åˆå¹¶åœ¨ä¸€èµ·ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æœ€åæ¥çš„idæ˜¯ä½ åˆå¹¶çš„è¿™äº›commitä¹‹å‰çš„ä¸€ä¸ª</span></span><br><span class="line">git rebase -i f7f273d9c36d748183ac3e6a90f06ff14ed42f95</span><br><span class="line"></span><br><span class="line">ï¼ƒ è¾“å…¥å‘½ä»¤ä¹‹ååˆ°viç¯å¢ƒçš„ç•Œé¢</span><br><span class="line">pick 2812e29 fix usermanager</span><br><span class="line">pick fcf13d7 fix usermanager</span><br><span class="line">pick affc0ac fix usermanager</span><br><span class="line">pick bc83e15 fix usermanager</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆ‘ä»¬å°†å…¶ä¿®æ”¹ä¸º</span></span><br><span class="line">pick 2812e29 fix usermanager</span><br><span class="line">squash fcf13d7 fix usermanager</span><br><span class="line">squash affc0ac fix usermanager</span><br><span class="line">squash bc83e15 fix usermanager</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿å­˜é€€å‡ºï¼Œè¿›å…¥commit messageä¿®æ”¹çš„ç•Œé¢</span></span><br><span class="line">è¿™é‡Œä¼šå±•ç¤ºå‡ºåˆå¹¶çš„è¿™å‡ æ¬¡commitçš„messageï¼Œæˆ‘ä»¬é€‰æ‹©æ€§çš„ä¿®æ”¹ä¸€ä¸‹å°†è¿™å‡ æ¬¡çš„commit messageæ•´åˆä¸€ä¸‹ï¼Œç»§ç»­ä¿å­˜ã€‚è¿™æ¬¡ä¿å­˜ä¹‹åå°±ç›¸å½“æŠŠè¿™å‡ æ¬¡çš„commitåˆå¹¶æˆä¸€æ¬¡äº†ã€‚</span><br></pre></td></tr></table></figure></p><blockquote><p>æ³¨æ„ï¼Œå¦‚æœä½ æ˜¯ä»ä»“åº“ä¸­cloneä¸‹æ¥çš„é¡¹ç›®ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½åœ¨ä½ åˆå¹¶å®Œå‡ ä¸ªcommitåå†<code>git push</code>ä¼šæç¤ºé”™è¯¯ã€‚å‡è®¾ä»¥å‰æ˜¯æœ‰100æ¬¡commitçš„ï¼Œç°åœ¨ä½ åˆå¹¶äº†æœ€åçš„ä¸‰æ¬¡ï¼Œå†pushï¼Œå°±ä¼šå’Œè¿œç«¯çš„ä»“åº“å‡ºç°åˆ†æ­§ã€‚ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ç¡®è®¤è‡ªå·±çš„ä»£ç æ²¡é—®é¢˜ä¹‹åï¼Œä½¿ç”¨<code>git push -f</code>çš„æ–¹å¼å¼ºè¡ŒæŠŠä»£ç æ¨ä¸Šå»ï¼Œè¿™æ ·å°±ä¼šè¦†ç›–æ‰æœ€åçš„å‡ æ¬¡commitï¼Œä»¥ä½ æ–°pushçš„ä»£ç ä¸ºåŸºå‡†äº†ã€‚</p></blockquote><h1 id="0X02-è¿ç§»ä¸€æ¬¡commit"><a href="#0X02-è¿ç§»ä¸€æ¬¡commit" class="headerlink" title="0X02 è¿ç§»ä¸€æ¬¡commit"></a>0X02 è¿ç§»ä¸€æ¬¡commit</h1><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æŸä¸ªåˆ†æ”¯ä¸­çš„æŸæ¬¡æäº¤å¤åˆ¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œå…·ä½“ä½¿ç”¨æƒ…æ™¯æœ‰å¾ˆå¤šã€‚è¿™é‡Œå±•ç¤ºä¸€ä¸ªä½¿ç”¨æ ·ä¾‹ï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">git log æŸ¥çœ‹masteråˆ†æ”¯çš„commitï¼Œåªæœ‰è¿™ä¸€æ¬¡</span><br><span class="line"></span><br><span class="line">commit 2959f92753d84bff5b125b15cd9497c4d8dff637 (HEAD -&gt; master)</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:09:07 2017 +0800</span><br><span class="line"></span><br><span class="line">    å®ŒæˆXXXåŠŸèƒ½</span><br><span class="line"></span><br><span class="line">åˆ‡æ¢åˆ°devåˆ†æ”¯æŸ¥çœ‹commitï¼Œæœ‰å››æ¬¡</span><br><span class="line">commit bba77c7faf7821802b108688a17d8e6655975b7e (HEAD -&gt; dev)</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:11:47 2017 +0800</span><br><span class="line"></span><br><span class="line">    æ•´ç†XXX</span><br><span class="line"></span><br><span class="line">commit 9001f8250ce47a067c9af50bf62af025b872c3bc</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:11:37 2017 +0800</span><br><span class="line"></span><br><span class="line">    æ·»åŠ XXX</span><br><span class="line"></span><br><span class="line">commit 6e4171ad632a7627be08ec7c9afaf64f55ccc98d</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:11:21 2017 +0800</span><br><span class="line"></span><br><span class="line">    ä¿®å¤XXX</span><br><span class="line"></span><br><span class="line">commit 2959f92753d84bff5b125b15cd9497c4d8dff637 (master)</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:09:07 2017 +0800</span><br><span class="line"></span><br><span class="line">    å®ŒæˆXXXåŠŸèƒ½</span><br><span class="line"></span><br><span class="line">å¦‚æœæ­¤æ—¶æˆ‘æƒ³å°†é‚£ä¸ªâ€œæ·»åŠ XXXâ€çš„commitç§»åˆ°masteråˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨`git cherry-pick`</span><br><span class="line">å¯ä»¥çœ‹åˆ°â€œæ·»åŠ XXXâ€çš„é‚£æ¬¡commitçš„IDä¸º`6e4171ad632a7627be08ec7c9afaf64f55ccc98d`</span><br><span class="line">æˆ‘ä»¬å¤åˆ¶è¿™ä¸ªIDï¼Œåˆ‡åˆ°masteråˆ†æ”¯ï¼Œä½¿ç”¨`git cherry-pick commit_id`</span><br><span class="line">shawn in ~/test on master Î» git cherry-pick 6e4171ad632a7627be08ec7c9afaf64f55ccc98d</span><br><span class="line">[master f77b496] ä¿®å¤XXX</span><br><span class="line"> Date: Sun Nov 12 16:11:21 2017 +0800</span><br><span class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</span><br><span class="line"> create mode 100644 b</span><br><span class="line">shawn in ~/test on master Î» git log</span><br><span class="line">commit f77b49677efb1ba967dbc323332e2f8495fdbca1 (HEAD -&gt; master)</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:11:21 2017 +0800</span><br><span class="line"></span><br><span class="line">    ä¿®å¤XXX</span><br><span class="line"></span><br><span class="line">commit 2959f92753d84bff5b125b15cd9497c4d8dff637</span><br><span class="line">Author: shawn &lt;shawnbluce@gmail.com&gt;</span><br><span class="line">Date:   Sun Nov 12 16:09:07 2017 +0800</span><br><span class="line"></span><br><span class="line">    å®ŒæˆXXXåŠŸèƒ½</span><br><span class="line"></span><br><span class="line">è¿™æ ·ä¸€ä¸ªcommitå°±å¤åˆ¶è¿‡æ¥äº†ã€‚å¦‚æœæœ‰å†²çªçš„è¯éœ€è¦å°†å†²çªè§£å†³å®Œæ‰èƒ½åˆå¹¶ã€‚</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨å¥½Linuxä¹‹ï¼šè½¯ä»¶æ¨è</title>
      <link href="/2017/09/29/use-linux-better/"/>
      <url>/2017/09/29/use-linux-better/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ¨èä¸€æ³¢Linuxä¸‹çš„è½¯ä»¶"><a href="#0X00-æ¨èä¸€æ³¢Linuxä¸‹çš„è½¯ä»¶" class="headerlink" title="0X00 æ¨èä¸€æ³¢Linuxä¸‹çš„è½¯ä»¶"></a>0X00 æ¨èä¸€æ³¢Linuxä¸‹çš„è½¯ä»¶</h1><p>Linuxå¯¹äºæ™®é€šç”¨æˆ·å¯èƒ½ç¡®å®æ²¡æœ‰é‚£ä¹ˆå‹å¥½ï¼Œä½†æ˜¯å¯¹äºè®¡ç®—æœºâ€œä¸“ä¸šâ€äººå£«æ¥è¯´å°±å¥½å¤šäº†ã€‚æˆ‘ä»æ¥è§¦Linuxåˆ°ç°åœ¨ä¹Ÿæœ‰ä¸ªä¸‰ä¸¤å¹´äº†ï¼Œè€Œä¸”ç”¨Linuxæ¡Œé¢ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ã€‚è¿™æ®µæ—¶é—´é‡Œä¹Ÿå‘ç°äº†ä¸å°‘å¥½ç”¨çš„è½¯ä»¶å’Œå·¥å…·ï¼Œåœ¨è¿™é‡Œæ•´ç†ä¸€ä¸‹ä¹Ÿå‘å¤§å®¶æ¨èä¸€æ³¢ã€‚è¿™äº›å·¥å…·æœ‰äº›æ˜¯ç”¨æ¥æå‡å·¥ä½œæ•ˆç‡çš„ï¼Œæœ‰äº›æ˜¯ç”¨æ¥å¨±ä¹çš„ç­‰ç­‰ã€‚ã€‚ä¸è¿‡æ¯ä¸€ä¸ªéƒ½æ˜¯æˆ‘ç¦»ä¸å¼€çš„å¥½å·¥å…·ã€‚<br>éå¸¸é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘æ¨èçš„è¿™äº›è½¯ä»¶é™¤äº†ä¸ºçŸ¥ç¬”è®°ä»¥å¤–éƒ½æ˜¯ <strong>å…è´¹çš„</strong> ï¼Œè€Œä¸”è¿˜æœ‰ä¸€å¤§åŠæ˜¯ <strong>å¼€æºçš„</strong>ã€‚</p><h1 id="0X01-zsh"><a href="#0X01-zsh" class="headerlink" title="0X01 zsh"></a>0X01 zsh</h1><p>LinuxçœŸæ­£æ•ˆç‡é«˜çš„åœ°æ–¹å°±åœ¨äºTerminalï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦é€‰ä¸€ä¸ªå¥½ç”¨çš„SHELLã€‚ç›®å‰ç»å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆæœ¬éƒ½é»˜è®¤ä½¿ç”¨Bashï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨éå¸¸æˆç†Ÿçš„SHELLã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ›´å¥½ç”¨çš„Shellå«åšzshï¼Œå¯ä»¥ä»å®˜ç½‘å®‰è£…ä¹Ÿå¯ä»¥ç›´æ¥<code>apt install zsh</code>å°±è£…ä¸Šäº†ã€‚è¿™ä¸ªshellä¸€å®šè¦é…åˆç€<code>oh-my-zsh</code>æ¥ä½¿ç”¨ã€‚<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvYmJ5cnVzc2VsbC9vaC1teS16c2g=" title="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh<i class="fa fa-external-link"></i></span>å¯ä»¥è®©ä½ çš„SHELLå‘æŒ¥æœ€å¤§çš„æ•ˆç‡ã€‚</p><a id="more"></a><h1 id="0X02-vim"><a href="#0X02-vim" class="headerlink" title="0X02 vim"></a>0X02 vim</h1><p>vim çš„å¥½å¤„å°±ä¸å¤šè¯´äº†ã€‚åœ¨è¿™é‡Œæ¨èä¸€å¥—å¼€æºçš„é…ç½®ï¼Œåœ¨è‡ªå·±æ²¡æœ‰é…ç½®vimçš„æƒ…å†µä¸‹ç›´æ¥å®‰è£…å°±å¥½äº†ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/vince67/v7_config/master/vim.sh</span><br><span class="line">bash vim.sh</span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™ä¸ªè„šæœ¬å®˜æ–¹åªæ”¯æŒMacå’ŒDebianç³»ï¼Œå¦‚æœæ˜¯å…¶ä»–ç³»éœ€è¦è‡ªè¡Œä¿®æ”¹ä¸€ä¸‹è¿™ä¸ªè„šæœ¬é‡Œçš„å†…å®¹ã€‚<br>ä¾‹å¦‚ï¼šå¦‚æœæ˜¯CentOSçš„è¯å°±å°†é‡Œé¢å®‰è£…è½¯ä»¶çš„<code>apt-get</code>ä¿®æ”¹æˆ<code>yum</code>ï¼Œå®‰è£…å°±èƒ½é¡ºåˆ©è¿›è¡Œäº†ã€‚</p></blockquote><p>è¿™ä¸ªå®‰è£…å¥½äº†ä¹‹åvimå¸¸ç”¨çš„æ’ä»¶å’Œé…ç½®å°±éƒ½æå®šäº†ï¼Œé»˜è®¤æƒ…å†µä¸‹å†™Pythonå°±å¯ä»¥æ‹¥æœ‰éå¸¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚å…·ä½“ç”¨æ³•ç®€å•çœ‹ä¸€ä¸‹<code>~/.vimrc</code>å°±å¯ä»¥äº†è§£åˆ°äº†ã€‚</p><h1 id="0X03-htop"><a href="#0X03-htop" class="headerlink" title="0X03 htop"></a>0X03 htop</h1><p>åœ¨Linuxå‘½ä»¤è¡Œä¸­æŸ¥çœ‹ç³»ç»Ÿèµ„æºæ¯”å¦‚CPUã€å†…å­˜ã€è¿›ç¨‹ç­‰è¦ç”¨åˆ°<code>topã€free</code>ç­‰å‘½ä»¤ï¼Œç°åœ¨ä¸€ä¸ª<code>htop</code>å°±è§£å†³äº†é—®é¢˜ï¼Œè€Œä¸”æ˜¯å½©è‰²è¾“å‡ºè¿˜æ”¯æŒé¼ æ ‡ç‚¹å‡»æ’åºã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/shawn-bluce.github.io/enclosure/image/htop.png" alt="htopæˆªå›¾"><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install htop</span><br><span class="line">sudo yum install htop</span><br></pre></td></tr></table></figure></p><h1 id="0X04-mycli"><a href="#0X04-mycli" class="headerlink" title="0X04 mycli"></a>0X04 mycli</h1><p>MySQLæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€æ¬¾æ•°æ®åº“äº†ï¼Œæœ‰çš„æ—¶å€™éœ€è¦è¿åˆ°æ•°æ®åº“é‡ŒæŸ¥ä¸€äº›ä¸œè¥¿æˆ–æ˜¯ä¸€äº›ä»€ä¹ˆæ“ä½œã€‚é€šå¸¸æˆ‘ä»¬ä¼šé€‰ç”¨<code>mysql</code>å‘½ä»¤æ¥è¿æ¥æ•°æ®åº“ï¼Œä½†æ˜¯è¿™ä¸ªå·¥å…·æŒºä¸å¥½ç”¨çš„ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°äº†è¿™ä¹ˆä¸€æ¬¾ç¥å™¨<code>mycli</code>ã€‚ç”±äºæ˜¯ç”¨Pythonå†™çš„ï¼Œè¿˜å°è£…äº†pipï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆç®€å•ï¼Œä¸€æ¡å‘½ä»¤<code>pip install mycli</code>å°±æå®šäº†ã€‚è¿™ä¸ªå·¥å…·å’Œ<code>mysql</code>å‘½ä»¤ç”¨æ³•æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä»–çš„ç‰¹ç‚¹å°±æ˜¯æ”¯æŒè‡ªåŠ¨è¡¥å…¨å’ŒSQLé«˜äº®ï¼Œè€Œä¸”è¾“å‡ºé»˜è®¤æ˜¯ä½¿ç”¨<code>less</code>å±•ç¤ºçš„ï¼Œå¯ä»¥ç›´æ¥ç”¨é”®ç›˜ä¸Šä¸‹æ»šåŠ¨ï¼Œä¸éœ€è¦é¼ æ ‡é”®ç›˜ä¹±æ¢ç€ç”¨ã€‚<br><img src="https://raw.githubusercontent.com/shawn-bluce/shawn-bluce.github.io/enclosure/image/mycli.png" alt="mycliæˆªå›¾"></p><h1 id="0X05-WPS"><a href="#0X05-WPS" class="headerlink" title="0X05 WPS"></a>0X05 WPS</h1><p><span class="exturl" data-url="aHR0cDovL2xpbnV4Lndwcy5jbi8=" title="http://linux.wps.cn/">WPS<i class="fa fa-external-link"></i></span>æ˜¯åœ¨Linuxä¸‹MS Officeçš„æœ€ä½³æ›¿ä»£å“äº†ã€‚è™½ç„¶åŠŸèƒ½å’Œæ˜“ç”¨æ€§ä¸Šä¸å¦‚MS Officeï¼Œä½†æ˜¯ä»–å…è´¹ï¼Œåœ¨Linuxä¸‹æ²¡æœ‰å¹¿å‘Šï¼Œè€Œä¸”å¯¹MS Officeçš„æ”¯æŒç‡è¿˜æ˜¯å¾ˆé«˜çš„ã€‚é€šå¸¸åªæ˜¯å†™ä¸ªç®€å•çš„æ–‡æ¡£æˆ–è€…å±•ç¤ºPPTä»€ä¹ˆçš„æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä¸è¿‡WPSæš‚æ—¶è¿˜æ²¡æœ‰å¼€æºï¼Œå€’æ˜¯æœ‰ä¸€ä¸ªå¼€æºçš„æ›¿ä»£å“LibreOfficeï¼Œä½†æ˜¯å®åœ¨æ˜¯ä¸å¥½ç”¨ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åŠ å…¥LibreOfficeçš„ç¤¾åŒºï¼Œå¸®åŠ©LibreOfficeå˜å¾—æ›´å¥½ã€‚<br>å¯¹äº†ï¼ŒWPSåœ¨Linuxä¸‹çš„å¯åŠ¨é€Ÿåº¦å¥‡å¿«ï¼Œåœ¨æˆ‘PCI-E Nvmeçš„ç¡¬ç›˜ä¸‹æ¯æ¬¡éƒ½æ˜¯ç§’å¼€ï¼Œæ¯”Office 2016è¦æ›´å¿«ä¸€ç­¹ã€‚</p><h1 id="0X06-Chrome-Firefox"><a href="#0X06-Chrome-Firefox" class="headerlink" title="0X06 Chrome/Firefox"></a>0X06 Chrome/Firefox</h1><p>è¿™ä¿©å°±æ²¡çš„è¯´äº†ï¼Œæˆ‘å°±ä»‹ç»ä¸€ä¸‹æˆ‘æ­£åœ¨ç”¨çš„å‡ ä¸ªChromæ‰©å±•å§</p><ol><li>Adblock Plus å»å¹¿å‘Šç¥å™¨</li><li>crxMouse Chrome Gestures  é¼ æ ‡æ‰‹åŠ¿ç¥å™¨</li><li>Draw.io Desktop  ä¸€ä¸ªåœ¨çº¿ç”»æµç¨‹å›¾çš„ChromAPP</li><li>Googleç¿»è¯‘ å¯ä»¥è®¾ç½®ä¸ºé€‰ä¸­ç¿»è¯‘ï¼Œå› ä¸ºGoogleç¿»è¯‘æ²¡æœ‰è¢«å¢™ï¼Œæ‰€ä»¥å¾ˆå¥½ç”¨</li><li>LastPass ä¸€æ¬¾å…è´¹çš„å¯†ç ç®¡ç†æ‰©å±•ï¼Œå®‰å…¨å¯é æ–¹ä¾¿æ˜“ç”¨</li><li>Postman ä¸€ä¸ªç”¨äºå¿«é€Ÿæ¨¡æ‹Ÿhttpè¯·æ±‚çš„ChromeAPP</li><li>Proxy SwitchOmega  ä¸€ä¸ªç”¨äºè®¾ç½®æµè§ˆå™¨ä»£ç†çš„æ‰©å±•ï¼Œé…åˆSSä½¿ç”¨æ„Ÿè§‰è‰¯å¥½</li><li>Search by Image ä»¥å›¾æœå›¾ï¼Œå¼€å¯åç½‘é¡µæ¯å¼ å›¾å³ä¸‹è§’éƒ½ä¼šå‡ºç°ä¸€ä¸ªå°Logoï¼Œç‚¹å‡»Logoå°±å¯ä»¥ç”¨Googleæœç´¢è¿™å¼ å›¾</li><li>Tamepermonkey ä¸€ä¸ªJSè„šæœ¬ç®¡ç†å™¨ï¼Œç¥å™¨<br>9.1. AC-baidu  å»ç™¾åº¦å¹¿å‘Š<br>9.2. ç™¾åº¦å¹¿å‘Šæ¸…ç† å»ç™¾åº¦å¹¿å‘Šå¯èƒ½éœ€è¦ä¸¤ä¸ªæ‰è¡Œ</li><li>Wappalyzer å¼€å‘è€…å¿…å¤‡ï¼Œå¯ä»¥æ˜¾ç¤ºå‡ºå½“å‰ç½‘é¡µ/ç½‘ç«™æ‰€ä½¿ç”¨çš„æŠ€æœ¯å’Œæ¡†æ¶</li><li>Vimium ç”¨vimå¿«æ·é”®æ¥æ“ä½œæµè§ˆå™¨ï¼Œç¥å™¨</li></ol><h1 id="0X07-ä¸ºçŸ¥ç¬”è®°-èš‚èšç¬”è®°"><a href="#0X07-ä¸ºçŸ¥ç¬”è®°-èš‚èšç¬”è®°" class="headerlink" title="0X07 ä¸ºçŸ¥ç¬”è®°/èš‚èšç¬”è®°"></a>0X07 ä¸ºçŸ¥ç¬”è®°/èš‚èšç¬”è®°</h1><p>åœ¨æˆ‘æ‰€çŸ¥é“çš„èŒƒå›´å†…ï¼ŒLinuxç¯å¢ƒä¸‹ä½“éªŒè¿˜ä¸é”™çš„ç¬”è®°è½¯ä»¶å°±è¿™ä¸¤æ¬¾ã€‚ç»™å¤§å®¶åˆ—ä¸ªè¡¨å¯¹æ¯”ä¸€ä¸‹ <span class="exturl" data-url="aHR0cDovL3d3dy53aXouY24v" title="http://www.wiz.cn/">ä¸ºçŸ¥ç¬”è®°<i class="fa fa-external-link"></i></span> å’Œ <span class="exturl" data-url="aHR0cHM6Ly9sZWFub3RlLmNvbS8=" title="https://leanote.com/">èš‚èšç¬”è®°<i class="fa fa-external-link"></i></span></p><table><thead><tr><th>ç‰¹æ€§</th><th>ä¸ºçŸ¥ç¬”è®°</th><th>èš‚èšç¬”è®°</th></tr></thead><tbody><tr><td>å®¢æˆ·ç«¯å¼€æº</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>æœåŠ¡ç«¯å¼€æº</td><td>å¦</td><td>å¦</td></tr><tr><td>æ”¶è´¹æƒ…å†µ</td><td>å…è´¹ä½“éªŒ100å¤©ï¼Œè¿‡å60ä¸€å¹´</td><td>å…è´¹ï¼ˆä¸èƒ½åŒæ­¥ï¼‰ã€50/å¹´ï¼ˆæ”¯æŒåŒæ­¥ï¼Œæµé‡è¾ƒå°‘ï¼‰ã€150/å¹´ï¼ˆæµé‡ä¸­ç­‰</td></tr><tr><td>ä¸€é”®å˜åšå®¢</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>ç§»åŠ¨ç«¯ä½“éªŒ</td><td>å¥½</td><td>è¾ƒå·®</td></tr></tbody></table><p>æ€»çš„æ¥è¯´ï¼Œä¸ºçŸ¥ç¬”è®°æ¯å¹´è¦èŠ±60å—é’±ï¼Œå¯ä»¥è·å¾—ä¸é”™çš„ä½¿ç”¨ä½“éªŒï¼›èš‚èšç¬”è®°æ¯å¹´è¦èŠ±150å—é’±æ‰èƒ½è·å¾—ä¸é”™çš„ä½“éªŒã€‚ä¸è¿‡ç”±äºèš‚èšç¬”è®°çš„æœåŠ¡ç«¯å¼€æºï¼Œæ‰€ä»¥å¯ä»¥å°†æœåŠ¡ç«¯éƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šä»¥å…è´¹è·å¾—æœ€å®Œæ•´çš„åŠŸèƒ½ã€‚ä¸»è¦å°±æ˜¯çœ‹å¤§å®¶å¯¹å“ªç‚¹çš„éœ€æ±‚æ›´å¤šäº†ã€‚</p><h1 id="0X08-ç½‘æ˜“äº‘éŸ³ä¹"><a href="#0X08-ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="0X08 ç½‘æ˜“äº‘éŸ³ä¹"></a>0X08 ç½‘æ˜“äº‘éŸ³ä¹</h1><p>ç½‘æ˜“äº‘éŸ³ä¹å°±æ²¡å¿…è¦è¿‡å¤šä»‹ç»äº†ã€‚å®˜æ–¹æ¨å‡ºäº†debåŒ…ï¼Œå‡ ä¹æ‰€æœ‰åŸºäºDebiançš„Linuxéƒ½èƒ½ä¸€é”®å®‰è£…ã€‚ä¹Ÿæœ‰æ°‘é—´ç©å®¶åˆ¶ä½œäº†rpmåŒ…ï¼Œæ²¡æœ‰ç”¨è¿‡ä¸çŸ¥é“ä½“éªŒæ€ä¹ˆæ ·ã€‚è¿˜æœ‰æ°‘é—´é«˜æ‰‹åœ¨åšçš„å‘½ä»¤è¡Œç‰ˆæœ¬çš„ç½‘æ˜“äº‘éŸ³ä¹ï¼ŒåŠŸèƒ½å·²ç»ç›¸å½“å®Œå–„äº†ã€‚ç›®å‰æœ‰<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RhcmtuZXNzb21pL211c2ljYm94" title="https://github.com/darknessomi/musicbox">Pythonç‰ˆæœ¬<i class="fa fa-external-link"></i></span>çš„å’Œ<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0JpbmFyeWlmeS9OZXRlYXNlQ2xvdWRNdXNpY0FwaQ==" title="https://github.com/Binaryify/NeteaseCloudMusicApi">NodeJSç‰ˆæœ¬<i class="fa fa-external-link"></i></span>çš„ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚ä¸åˆ°å¼€å‘è¿‡ç¨‹ä¸­æ¥ã€‚</p><h1 id="0X09-Atom-vscode"><a href="#0X09-Atom-vscode" class="headerlink" title="0X09 Atom/vscode"></a>0X09 Atom/vscode</h1><p>è¿™ä¸¤ä¸ªåº”è¯¥æ˜¯ç›®å‰ä¸ºæ­¢å›¾å½¢ç•Œé¢ä¸‹æœ€å¥½ç”¨çš„ä¸¤æ¬¾å¼€æºç¼–è¾‘å™¨äº†ã€‚<span class="exturl" data-url="aHR0cHM6Ly9hdG9tLmlvLw==" title="https://atom.io/">Atom<i class="fa fa-external-link"></i></span>æ˜¯ç”±Githubåˆ¶ä½œçš„ï¼Œ<span class="exturl" data-url="aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20v" title="https://code.visualstudio.com/">vscode<i class="fa fa-external-link"></i></span>æ˜¯ç”±Microsoftåˆ¶ä½œçš„ã€‚ä¸€ä¸ªæ˜¯æ‹¥æœ‰å…¨ä¸–ç•Œæœ€å‰å®³ç¨‹åºå‘˜çš„å¹³å°ï¼Œä¸€ä¸ªæ˜¯å…¨ä¸–ç•Œæœ€å‰å®³çš„è½¯ä»¶å…¬å¸ä¹‹ä¸€ã€‚è‡ªç„¶è½¯ä»¶çš„è´¨é‡æ²¡çš„è¯´äº†ï¼Œæˆ‘ä¸ªäººä¹Ÿåªæ˜¯è½»åº¦ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯çœ‹å¤–è§‚å’Œå¿ƒé‡Œåå‘è€Œå·²ã€‚æ¯”å¦‚æˆ‘å°±æ¯”è¾ƒå–œæ¬¢ç”¨Atomã€‚</p><h1 id="0X0A-Nylas"><a href="#0X0A-Nylas" class="headerlink" title="0X0A Nylas"></a>0X0A Nylas</h1><p>ç›®å‰ä¸ºæ­¢Linuxä¸‹æœ€æœ‰åçš„ä¸¤æ¬¾é‚®ä»¶å®¢æˆ·ç«¯åº”è¯¥æ˜¯é›·é¸Ÿå’ŒEVOäº†ï¼Œä¸è¿‡å‰æ®µæ—¶é—´å‡ºæ¥çš„è¿™æ¬¾<span class="exturl" data-url="aHR0cHM6Ly93d3cubnlsYXMuY29tL255bGFzLW1haWwv" title="https://www.nylas.com/nylas-mail/">Nylas<i class="fa fa-external-link"></i></span>ç‰¹å¥½ç”¨ï¼Œæˆ‘ä¸€ç›´åœ¨ç”¨ã€‚æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å¯ä»¥ä¸ç”¨æ¢¯å­å°±è®¿é—®Gmailã€‚ä¸è¿‡ç›®å‰é‡åˆ°çš„å”¯ä¸€ä¸€ä¸ªå‘å°±æ˜¯è¿æ¥QQä¼ä¸šé‚®ç®±çš„æ—¶å€™æœ‰é—®é¢˜ï¼Œæ¯æ¬¡éƒ½ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åˆèƒ½æ”¶åˆ°ä¿¡ï¼Œå¾ˆå¥‡æ€ªã€‚ç»™ç¤¾åŒºåé¦ˆè¿‡ï¼Œä¹Ÿæ²¡å¾—åˆ°ç­”å¤ã€‚ç„¶è€Œæˆ‘è¿˜æ˜¯å¼ºçƒˆæ¨èè¿™æ¬¾è½¯ä»¶ï¼ŒçœŸçš„æ˜¯å¥½ç”¨ã€‚</p><h1 id="0X0B-Guake"><a href="#0X0B-Guake" class="headerlink" title="0X0B Guake"></a>0X0B Guake</h1><p>è¿™ä¸ªåå­—å¯¹äºå¤§å­¦ç”Ÿæ¥è¯´éå¸¸ä¸å‹å¥½ï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆè¿™ä¹ˆå¥½çš„è½¯ä»¶æ€ä¹ˆå°±å–äº†ä¸ªâ€æŒ‚ç§‘â€çš„åå­—å‘¢ï¼Œå“ˆå“ˆã€‚æˆ‘ä»¬åœ¨ç”¨Linuxçš„æ—¶å€™å¶å°”ä¼šéœ€è¦è¾“å…¥ä¸€ä¸¤è¡Œå‘½ä»¤ï¼Œæˆ–è€…æ˜¯éœ€è¦ç”¨htopé•¿æœŸçœ‹ç€è‡ªå·±çš„æ€§èƒ½æŒ‡æ ‡ã€‚é‚£è¿™æ—¶å€™æ¯æ¬¡éƒ½æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å†è¾“å‘½ä»¤å—ï¼Ÿå½“ç„¶ä¸ç”¨ã€‚è£…ä¸€ä¸ª<code>Guake</code>ï¼Œç»™ä»–è®¾å®šä¸€ä¸ªå¿«æ·é”®ï¼Œæ¯æ¬¡éœ€è¦ä¸´æ—¶è°ƒå‡ºç»ˆç«¯çš„æ—¶å€™åªéœ€è¦æŒ‰ä¸€ä¸‹å¿«æ·é”®ï¼Œç»ˆç«¯å°±ä¼šä»å±å¹•é¡¶éƒ¨å¼¹ä¸‹æ¥ï¼Œè¿˜èƒ½è®¾ç½®å¤±å»ç„¦ç‚¹è‡ªåŠ¨éšè—ã€‚è¿™æ ·ç”¨èµ·æ¥å°±å¾ˆèˆ’æœäº†ã€‚</p><h1 id="0X0C-Virtualbox"><a href="#0X0C-Virtualbox" class="headerlink" title="0X0C Virtualbox"></a>0X0C Virtualbox</h1><p>è¿™æ¬¾è½¯ä»¶æƒ³å¿…ä¹Ÿä¸éœ€è¦ä»‹ç»ï¼Œæ˜¯ç›®å‰å…è´¹æ¡Œé¢è™šæ‹Ÿæœºè½¯ä»¶ä¸­æœ€å¥½çš„ä¸€æ¬¾äº†ã€‚å¤§é‡äººåœ¨ç”¨ç ´è§£çš„VMwareWorkstadionï¼Œè™½ç„¶æ¯”VirtualBoxå¥½ç”¨ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯åº”è¯¥æŒ‰ç‰ˆæƒæ¥ï¼Œä¸æƒ³èŠ±é’±å°±ç”¨VirtualBoxå§ï¼Œå†µä¸”ä¹ŸæŒºå¥½ç”¨çš„ã€‚æ¯”å¦‚ä½ åœ¨é•¿æœŸç”¨Linuxçš„ç¯å¢ƒä¸‹å¶å°”ä¹Ÿéœ€è¦ç”¨ä¸€ä¸‹Windowsï¼Œæ¯”å¦‚ä½ é•¿æœŸç”¨Fedoraå¶å°”ä¹Ÿè¦ç”¨ä¸€ä¸‹Ubuntuï¼Œè¿™å°±æ˜¯<span class="exturl" data-url="aHR0cHM6Ly93d3cudmlydHVhbGJveC5vcmcvd2lraS9Eb3dubG9hZHM=" title="https://www.virtualbox.org/wiki/Downloads">VirtualBox<i class="fa fa-external-link"></i></span>å‡ºåœºçš„æ—¶å€™äº†ã€‚</p><h1 id="0X0D-TeamViewer"><a href="#0X0D-TeamViewer" class="headerlink" title="0X0D TeamViewer"></a>0X0D TeamViewer</h1><p>å¹³æ—¶åœ¨Windowsä¸‹å¤§å®¶éƒ½ç”¨ä¹ æƒ¯äº†QQçš„è¿œç¨‹ååŠ©ï¼Œé‚£ä¹ˆåˆ°äº†Linuxä¸‹åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<span class="exturl" data-url="aHR0cHM6Ly93d3cudGVhbXZpZXdlci5jb20vemgv" title="https://www.teamviewer.com/zh/">Teamviewer<i class="fa fa-external-link"></i></span>åº”è¯¥å°±æ˜¯æœ€å¥½çš„é€‰æ‹©äº†ã€‚å…¶å®Teamvieweråœ¨æ€§èƒ½ä¸Šæ˜¯è¦æ¯”QQçš„è¿œç¨‹ååŠ©æ›´å¼ºçš„ã€‚æ³¨æ„ä¸€ç‚¹ï¼šè¿™æ¬¾è½¯ä»¶å¯¹ä¸ªäººå…è´¹ï¼Œä½†æ˜¯è¦åœ¨å…¬å¸é‡Œç”¨çš„è¯æ˜¯è¦èŠ±é’±ä¹°çš„ã€‚</p><h1 id="0X0E-æ·±åº¦ç»ˆç«¯"><a href="#0X0E-æ·±åº¦ç»ˆç«¯" class="headerlink" title="0X0E æ·±åº¦ç»ˆç«¯"></a>0X0E æ·±åº¦ç»ˆç«¯</h1><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZGVlcGluLm9yZy8yMDE2LzA5LzIyL2RlZXBpbi10ZXJtaW5hbC12Mi0wLXJlbGVhc2VkLWFsbC1jYW4tYmUtZG9uZS1pbi10ZXJtaW5hbC8=" title="https://www.deepin.org/2016/09/22/deepin-terminal-v2-0-released-all-can-be-done-in-terminal/">æ·±åº¦ç»ˆç«¯<i class="fa fa-external-link"></i></span>æ˜¯æˆ‘ç›®å‰åœ¨Linuxé‡Œç”¨è¿‡æœ€å¥½ç”¨çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨äº†ã€‚è‡ªå¸¦çš„ä¸»é¢˜å¾ˆæ¼‚äº®ï¼Œå¯¹ä¸­æ–‡æ”¯æŒå®Œç¾ï¼Œè€Œä¸”è¿˜é›†æˆäº†SSHç®¡ç†åŠŸèƒ½ã€‚</p><h1 id="0X0F-Shadowsocks-QT"><a href="#0X0F-Shadowsocks-QT" class="headerlink" title="0X0F Shadowsocks-QT"></a>0X0F Shadowsocks-QT</h1><p>ç¿»è¶Šé•¿åŸå¿…å¤‡ç¥å™¨ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NoYWRvd3NvY2tzL3NoYWRvd3NvY2tzLXF0NQ==" title="https://github.com/shadowsocks/shadowsocks-qt5">Shadowsocks-QT<i class="fa fa-external-link"></i></span>ã€‚ç›®å‰ä¸ºæ­¢è¿™ä¸œè¥¿æ˜¯æœ€å¥½ç”¨çš„ï¼Œä½†æ˜¯ä¸èƒ½åƒWindowså’ŒMacä¸­çš„é‚£æ ·ç›´æ¥æ”¯æŒPACï¼Œéœ€è¦æµè§ˆå™¨çš„æ‰©å±•æ¥é…åˆå®ç°PACåŠŸèƒ½ã€‚</p><h1 id="0X10-Jetbrains"><a href="#0X10-Jetbrains" class="headerlink" title="0X10 Jetbrains"></a>0X10 Jetbrains</h1><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS8=" title="https://www.jetbrains.com/">Jetbrains<i class="fa fa-external-link"></i></span>ä»–ä»¬çš„äº§å“ç®€ç›´æ˜¯å‰å®³ï¼Œå¦‚æœæ˜¯å­¦ç”Ÿçš„è¯å¯ä»¥å»ç”³è¯·å…¨éƒ¨è½¯ä»¶çš„ä¸“ä¸šç‰ˆã€‚æˆ‘ç”¨è¿‡çš„æœ‰WebStorm/PyCharm/IntellJ IDEA/DataGrip/Android Studioè¿™äº”æ¬¾ï¼Œå…¶ä¸­AndroidStudioå…è´¹ï¼ŒPyCharmå’ŒIDEAæä¾›ç¤¾åŒºç‰ˆã€‚ä»–ä»¬çš„è½¯ä»¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ç»Ÿä¸€æ€§å¼ºï¼Œä½ ç”¨è¿‡å…¶ä¸­ä¸€æ¬¾ä¹‹åå†å»ç”¨å…¶ä»–çš„å¾ˆå¿«å°±èƒ½ä¸Šæ‰‹ã€‚è€Œä¸”éƒ½éå¸¸æ™ºèƒ½ï¼Œè¿™æ‰æ˜¯IDEåº”è¯¥æœ‰çš„æ ·å­ã€‚</p><h1 id="0X11-Audacious"><a href="#0X11-Audacious" class="headerlink" title="0X11 Audacious"></a>0X11 Audacious</h1><p>å¦‚æœä½ æœ‰æŠŠéŸ³ä¹ä¸‹è½½åˆ°æœ¬åœ°å†å¬çš„ä¹ æƒ¯ï¼Œé‚£ä¹ˆè¿™æ¬¾è½¯ä»¶å°±ç‰¹åˆ«é€‚åˆã€‚è¿™æ¬¾è½¯ä»¶ç‰¹åˆ«å°ï¼Œç•Œé¢ç®€æ´ï¼Œä½¿ç”¨ç®€å•ã€‚æ˜¯æˆ‘ç”¨è¿‡Linuxä¸‹æœ€å¥½ç”¨çš„ç¦»çº¿æ’­æ”¾å™¨äº†ã€‚</p><h1 id="0X12-Wireshark"><a href="#0X12-Wireshark" class="headerlink" title="0X12 Wireshark"></a>0X12 Wireshark</h1><p>ä¸€æ¬¾å¯ä»¥ç”¨æ¥åˆ†æç½‘ç»œæµé‡åŒ…çš„è½¯ä»¶ï¼Œå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ä¹Ÿå¯ä»¥åœ¨åŒ…ç®¡ç†ä¸­å®‰è£…ä½¿ç”¨ã€‚è¿™åº”è¯¥æ˜¯å¼€å‘è€…å¿…å¤‡çš„å·¥å…·ä¹‹ä¸€äº†å§ï¼Œæœ‰çš„æ—¶å€™ä¸ºäº†åˆ†æä¸€æ³¢æµé‡æˆ–è€…çœ‹çœ‹è‡ªå·±çš„è¯·æ±‚åˆ°åº•æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ç­‰ç­‰ã€‚ã€‚ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯å¤§é»‘å®¢çš„è¯è¿˜èƒ½æœ‰æ›´ç‚«é…·çš„åº”ç”¨åœºæ™¯ã€‚</p><h1 id="0X13-Dia"><a href="#0X13-Dia" class="headerlink" title="0X13 Dia"></a>0X13 Dia</h1><p>ä¸€æ¬¾ç”¨æ¥ç”»å›¾çš„å¼€æºè½¯ä»¶ï¼Œå¯ä»¥ç®€å•çš„ç”»å‡ºæµç¨‹å›¾ï¼Œæ•°æ®åº“æ¨¡å‹ç­‰ç­‰ã€‚ã€‚ä½¿ç”¨ä½“éªŒè¿˜æ˜¯ä¸é”™ï¼Œå¦‚æœåªæ˜¯è½»åº¦ä½¿ç”¨çš„è¯è¶³å¤Ÿäº†ã€‚</p><h1 id="0X14-Stellarium"><a href="#0X14-Stellarium" class="headerlink" title="0X14 Stellarium"></a>0X14 Stellarium</h1><p>å¦‚æœä½ æ˜¯ä¸€ä¸ªç†ç§‘ç”Ÿç”šè‡³ä»¥ä¸ºå¤©æ–‡çˆ±å¥½è€…ï¼Œé‚£ä½ ä¸€å®šå¯¹å®‡å®™çš„æµ©ç€šå¾ˆç—´è¿·ã€‚è¿™æ¬¾è½¯ä»¶èƒ½å®æ—¶æ¨¡æ‹Ÿæ˜Ÿç©ºçš„è¿åŠ¨è½¨è¿¹ï¼Œè¿˜æœ‰å„ç§è¡Œæ˜Ÿã€æ’æ˜Ÿçš„æ•°æ®ï¼Œå®˜æ–¹ä¸­æ–‡ã€‚å¾ˆå€¼å¾—ä¸€ç©</p><h1 id="0X015-VLC"><a href="#0X015-VLC" class="headerlink" title="0X015 VLC"></a>0X015 VLC</h1><p>åº”è¯¥æ˜¯ä¸–ç•Œä¸Šæœ€å‰å®³çš„è§†é¢‘æ’­æ”¾å™¨ä¹‹ä¸€äº†ï¼Œæ¯•ç«Ÿæ˜¯å¼€æºè½¯ä»¶æ‰€ä»¥è‡ªå®šä¹‰ç¨‹åº¦éå¸¸å¼ºæ‚ã€‚æ˜¯æˆ‘åœ¨Linuxä¸­ç”¨è¿‡æœ€å¥½çš„è§†é¢‘æ’­æ”¾å™¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
            <tag> Shadowsocks </tag>
            
            <tag> Software </tag>
            
            <tag> Tools </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä½¿ç”¨virtualenvwapperç®¡ç†è™šæ‹Ÿç¯å¢ƒ</title>
      <link href="/2017/09/20/python-virtualenvwapper/"/>
      <url>/2017/09/20/python-virtualenvwapper/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-virtualenvå¥½ç”¨ä½†æœ‰ç“¶é¢ˆ"><a href="#0X00-virtualenvå¥½ç”¨ä½†æœ‰ç“¶é¢ˆ" class="headerlink" title="0X00 virtualenvå¥½ç”¨ä½†æœ‰ç“¶é¢ˆ"></a>0X00 virtualenvå¥½ç”¨ä½†æœ‰ç“¶é¢ˆ</h1><p>virtualenvå›ºç„¶å¥½ç”¨ï¼Œå¯ä»¥ç»™ä½ æ¯ä¸€ä¸ªPythoné¡¹ç›®åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonç¯å¢ƒäº’ä¸å¹²æ‰°ã€‚æœ‰ä¸‰äº”ä¸ªPythoné¡¹ç›®çš„æ—¶å€™ç”¨çš„å¾ˆå¼€å¿ƒï¼Œæœ‰åå‡ ä¸ªé¡¹ç›®çš„æ—¶å€™è¿˜å‡‘åˆï¼Œå¦‚æœæœ‰æ›´å¤šçš„é¡¹ç›®virtualenvå°±ä¼šå‡ºç°ç“¶é¢ˆã€‚å› ä¸ºvirtualenvä¼šç»™æ¯ä¸€ä¸ªPythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºä¸€ä¸ªç›®å½•æ¥ä¿å­˜ç›¸å…³æ–‡ä»¶ï¼Œé¡¹ç›®ä¸€å¤šè¿™ä¸ªè™šæ‹Ÿç¯å¢ƒçš„ç›®å½•ä¹Ÿå°±å¤šäº†èµ·æ¥ï¼Œæ¯æ¬¡åœ¨å¤šä¸ªç¯å¢ƒä¹‹é—´<code>source ../../../xxx/bin/active</code> å’Œ <code>deactive</code> ä¹ŸæŒºçƒ¦çš„ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“æŠŠæŸäº›ç¯å¢ƒæä¸¢ã€‚ä¸è¿‡å¼€æºä¸–ç•Œæœ€ä¸ç¼ºçš„å°±æ˜¯è§£å†³é—®é¢˜çš„æ–¹æ³•äº†ï¼Œæ—¢ç„¶æœ‰äººé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå…«æˆå°±å·²ç»æœ‰äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„å¥½åŠæ³•ã€‚</p><h1 id="0X01-virtualenvwrapper"><a href="#0X01-virtualenvwrapper" class="headerlink" title="0X01 virtualenvwrapper"></a>0X01 virtualenvwrapper</h1><p>è¿™ä¸ªä¸œè¥¿åå­—ç¡®å®æœ‰ç‚¹é•¿ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æŠŠvirtualenvåŒ…è£…èµ·æ¥ã€‚é¦–å…ˆæ¥å®‰è£…ä¸€æ³¢è¿™ä¸ªä¸œè¥¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install virtualenvwrapper  # Debianç³»</span><br><span class="line"></span><br><span class="line">sudo yum install virtualenvwrapper  # RHELç³»</span><br></pre></td></tr></table></figure></p><p>å®‰è£…å¥½åè¦è¿›è¡Œç®€å•çš„é…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc # æ·»åŠ ä¸€æ¡ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ç”¨çš„shellæ¥ä¿®æ”¹</span><br></pre></td></tr></table></figure></p><p>å‘æ–‡ä»¶ä¸­æ·»åŠ  <code>WORKON_HOME=~/Envs</code> è¡¨ç¤ºå°†æœªæ¥æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒéƒ½æ”¾åœ¨ <code>~/Envs</code> ä¸­ã€‚ç„¶ååˆ›å»ºè¿™ä¸ªç›®å½• <code>mkdir -p $WORKON_HOME</code> ã€‚æœ€å<code>source</code>ä¸€ä¸‹å®‰è£…æ–‡ä»¶ï¼Œ<code>source /usr/bin/virtualenvwrapper.sh</code> ä¼šæ˜¾ç¤ºåˆ›å»ºäº†å¾ˆå¤šæ–‡ä»¶ï¼Œåˆ°è¿™é‡Œå°±å®‰è£…å®Œæˆäº†ã€‚<br>å¦‚æœ<code>source</code>çš„æ—¶å€™æ²¡æœ‰è¿™ä¸ª<code>virtualenvwrapper.sh</code>æ–‡ä»¶ï¼Œé‚£å°±ç”¨<code>which virtualenvwrapper.sh</code>æ‰¾ä¸€ä¸‹ï¼Œä¸è¿‡å…«æˆéƒ½æ˜¯åœ¨<code>/usr/bin/virtualenvwrapper.sh</code></p><a id="more"></a><h1 id="0X02-æŠŠå®ƒç”¨èµ·æ¥"><a href="#0X02-æŠŠå®ƒç”¨èµ·æ¥" class="headerlink" title="0X02 æŠŠå®ƒç”¨èµ·æ¥"></a>0X02 æŠŠå®ƒç”¨èµ·æ¥</h1><p>ä»¥å‰ç”¨<code>virtualenv</code>çš„æ—¶å€™è¦æ¯æ¬¡<code>source xxx/bin/active</code>ï¼Œç”¨å®Œäº†å†<code>deactive</code>ï¼Œè¿™æ¬¡å°±æ–¹ä¾¿å¤šäº†ã€‚ä¸‹é¢åˆ—å‡ºå‡ ä¸ªå¸¸ç”¨å‘½ä»¤ã€‚</p><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>mkvirtualenv blog</td><td>åˆ›å»ºä¸€ä¸ªåä¸ºblogçš„è™šæ‹Ÿç¯å¢ƒï¼Œå¹¶åˆ‡æ¢è¿‡å»</td></tr><tr><td>workon blog</td><td>åˆ‡æ¢åˆ°åä¸ºblogçš„è™šæ‹Ÿç¯å¢ƒä¸­</td></tr><tr><td>workon</td><td>åˆ—å‡ºå½“å‰æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</td></tr><tr><td>rmvirtualenv blog</td><td>åˆ é™¤åä¸ºblogçš„è™šæ‹Ÿç¯å¢ƒ</td></tr><tr><td>deactive</td><td>é€€å‡ºå½“å‰æ‰€å¤„çš„è™šæ‹Ÿç¯å¢ƒ</td></tr></tbody></table><p>ä¸‹é¢æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ªç”¨æ³•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œåä¸ºblog</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkvirtualenv blog</span></span><br><span class="line">New python executable <span class="keyword">in</span> blog/bin/python</span><br><span class="line">Installing Setuptools..............................................................................................................................................................................................................................done.</span><br><span class="line">Installing Pip.....................................................................................................................................................................................................................................................................................................................................done.</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/blog/bin/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/blog/bin/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/blog/bin/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/blog/bin/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/blog/bin/get_env_details</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œåä¸ºstudent_admin</span></span><br><span class="line">(blog)[root@localhost ~]<span class="comment"># mkvirtualenv student_admin</span></span><br><span class="line">New python executable <span class="keyword">in</span> student_admin/bin/python</span><br><span class="line">Installing Setuptools..............................................................................................................................................................................................................................done.</span><br><span class="line">Installing Pip.....................................................................................................................................................................................................................................................................................................................................done.</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/student_admin/bin/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/student_admin/bin/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/student_admin/bin/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/student_admin/bin/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /root/Envs/student_admin/bin/get_env_details</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">(student_admin)[root@localhost ~]<span class="comment"># workon</span></span><br><span class="line">blog</span><br><span class="line">student_admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°blogç¯å¢ƒ</span></span><br><span class="line">(student_admin)[root@localhost ~]<span class="comment"># workon blog</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤student_adminç¯å¢ƒ</span></span><br><span class="line">(blog)[root@localhost ~]<span class="comment"># rmvirtualenv student_admin</span></span><br><span class="line">Removing student_admin...</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†çœ‹ä¸€ä¸‹æ‰€æœ‰ç¯å¢ƒï¼Œstudent_adminå·²ç»ä¸åœ¨äº†</span></span><br><span class="line">(blog)[root@localhost ~]<span class="comment"># workon</span></span><br><span class="line">blog</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€€å‡ºå½“å‰ç¯å¢ƒ</span></span><br><span class="line">(blog)[root@localhost ~]<span class="comment"># deactivate</span></span><br><span class="line">[root@localhost ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure></p><p><code>``</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Virtualenvwapper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„*argså’Œ**kwargs</title>
      <link href="/2017/09/05/python-args-kwargs/"/>
      <url>/2017/09/05/python-args-kwargs/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-argsæ˜¯ä»€ä¹ˆ"><a href="#0X00-argsæ˜¯ä»€ä¹ˆ" class="headerlink" title="0X00 *argsæ˜¯ä»€ä¹ˆ"></a>0X00 *argsæ˜¯ä»€ä¹ˆ</h1><p>æˆ‘ä»¬çŸ¥é“Python3ä¸­çš„printä»ä¸€ä¸ªå…³é”®å­—å˜æˆäº†ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥éšä¾¿æ¥å—å‡ ä¸ªå‚æ•°ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">1</span>, <span class="string">"hello"</span>, <span class="number">6.66</span>)</span><br><span class="line"><span class="number">1</span> hello <span class="number">6.66</span></span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±å®ç°ç±»ä¼¼è¿™æ ·â€˜å˜æ€â€™çš„å‡½æ•°è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°*argsäº†ï¼Œå¯ä»¥å°†ä¸€ä¸ªéé”®å€¼å¯¹çš„å¯å˜æ•°é‡çš„å‚æ•°åˆ—è¡¨ä¼ ç»™ä¸€ä¸ªå‡½æ•°ï¼ˆæ¢ä¸ªä¹¦ä½›å•Šï¼šå¯ä»¥ä¼ nä¸ªå‚æ•°ç»™å‡½æ•°ï¼Œè€Œä¸”nä¸æ˜¯å›ºå®šçš„ï¼‰ï¼Œä¸¾ä¸ªä¾‹å­å°±å®¹æ˜“ç†è§£å¤šäº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_something</span><span class="params">(*args)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">        <span class="keyword">print</span> i</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'--------'</span></span><br><span class="line"></span><br><span class="line">say_something(<span class="number">1</span>)</span><br><span class="line">say_something(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">say_something(<span class="string">'hello'</span>)</span><br><span class="line">say_something(<span class="string">'hello'</span>, <span class="string">'world'</span>)</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œè¿™ä¸ªä¾‹å­çš„è¾“å‡ºå°±æ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">--------</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">--------</span><br><span class="line">hello</span><br><span class="line">--------</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">--------</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>è¿˜æœ‰ä¸€ä¸ªæ›´æ£’çš„ä¾‹å­<span class="exturl" data-url="aHR0cHM6Ly9lYXN0bGFrZXNpZGUuZ2l0Ym9va3MuaW8vaW50ZXJweS16aC9jb250ZW50L2FyZ3Nfa3dhcmdzL1VzYWdlX2FyZ3MuaHRtbA==" title="https://eastlakeside.gitbooks.io/interpy-zh/content/args_kwargs/Usage_args.html">æ¥è‡ªGitbook<i class="fa fa-external-link"></i></span><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_var_args</span><span class="params">(f_arg, *args)</span>:</span></span><br><span class="line">    print(<span class="string">"first normal arg:"</span>, f_arg)</span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args:</span><br><span class="line">        print(<span class="string">"another arg through *args:"</span>, arg)</span><br><span class="line"></span><br><span class="line">test_var_args(<span class="string">'yasoob'</span>, <span class="string">'python'</span>, <span class="string">'eggs'</span>, <span class="string">'test'</span>)</span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">'first normal arg:'</span>, <span class="string">'yasoob'</span>)</span><br><span class="line">(<span class="string">'another arg through *args:'</span>, <span class="string">'python'</span>)</span><br><span class="line">(<span class="string">'another arg through *args:'</span>, <span class="string">'eggs'</span>)</span><br><span class="line">(<span class="string">'another arg through *args:'</span>, <span class="string">'test'</span>)</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªä¾‹å­å®Œæ•´çš„è¯´æ˜äº†<code>\*args</code>çš„ç”¨æ³•ï¼Œæˆ‘ä»¬ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°è¢«å‡½æ•°æŒ‡å®šçš„<code>f_arg</code>æ¥æ”¶åˆ°äº†ï¼Œå…¶ä½™çš„éƒ½è¢«<code>*args</code>æ¥æ”¶åˆ°äº†ã€‚</p><h1 id="0X01-kwargsæ˜¯ä»€ä¹ˆ"><a href="#0X01-kwargsæ˜¯ä»€ä¹ˆ" class="headerlink" title="0X01 **kwargsæ˜¯ä»€ä¹ˆ"></a>0X01 **kwargsæ˜¯ä»€ä¹ˆ</h1><p>å†™ä»£ç çš„æ—¶å€™è¿˜ä¼šæœ‰ä¸€ç§å‡½æ•°è°ƒç”¨ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­<code>json.dumps(dict_data)</code>å’Œ<code>json.dumps(dict_data, indent=4)</code>ã€‚å½“ç„¶ï¼Œå®ç°è¿™ç§çš„æ–¹å¼æœ‰ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯<code>def dumps(input_data, indent=0)</code>ã€‚åœ¨å¯é€‰å‚æ•°åªæœ‰ä¸€ä¸¤ä¸ªçš„æ—¶å€™è¿™ç§æ–¹å¼å›ºç„¶æ˜¯å¥½ç”¨çš„ï¼Œä½†æ˜¯å¦‚æœåƒæ˜¯requestsè¿™ç§åº“ä¸­çš„å¸¸ç”¨æ–¹æ³•ï¼Œæœ‰å¾ˆå¤šå¾ˆå¤šä¸ªå¯é€‰å‚æ•°é‚£å°±è¯¥ç”¨ä¸Šè¿™ä¸ª**kwargsäº†ã€‚é¡¾åæ€ä¹‰è¿™ä¸ªå°±æ˜¯<code>keyworkargs</code>çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯å¸¦æœ‰keyçš„å¯å˜å‚æ•°ã€‚å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªå‡½æ•°<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="keyword">print</span> key</span><br><span class="line">        <span class="keyword">print</span> kwargs[key]</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'-----'</span></span><br><span class="line"></span><br><span class="line">foo(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>, d=<span class="number">4</span>, e=<span class="number">5</span>)</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œå‡ºæ¥çš„ç»“æœå¯æƒ³è€ŒçŸ¥ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line">1</span><br><span class="line">-----</span><br><span class="line">c</span><br><span class="line">3</span><br><span class="line">-----</span><br><span class="line">b</span><br><span class="line">2</span><br><span class="line">-----</span><br><span class="line">e</span><br><span class="line">5</span><br><span class="line">-----</span><br><span class="line">d</span><br><span class="line">4</span><br><span class="line">-----</span><br></pre></td></tr></table></figure></p><h1 id="0X02-åˆåœ¨ä¸€èµ·æ€ä¹ˆç”¨"><a href="#0X02-åˆåœ¨ä¸€èµ·æ€ä¹ˆç”¨" class="headerlink" title="0X02 åˆåœ¨ä¸€èµ·æ€ä¹ˆç”¨"></a>0X02 åˆåœ¨ä¸€èµ·æ€ä¹ˆç”¨</h1><p>å€¼å¾—ä¸€æçš„æ˜¯å¦‚ä½•æŠŠè¿™ä¸¤ä¸ªæ”¾åœ¨ä¸€èµ·ç”¨ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸ªä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(name, sex, *args, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'name is '</span>, name</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'sex is '</span>, sex</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'other is '</span>, args</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> kwargs:</span><br><span class="line">        <span class="keyword">print</span> key, <span class="string">' is '</span>, kwargs[key]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'args is '</span>, args</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'kwargs is '</span>, kwargs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foo(<span class="string">'shawn'</span>, <span class="string">'???'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>, hobby=<span class="string">'computer'</span>, number=<span class="number">666</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">'--------------------------'</span></span><br><span class="line">bar(<span class="string">'shawn'</span>, <span class="string">'???'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>, hobby=<span class="string">'computer'</span>, number=<span class="number">666</span>)</span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºç»“æœæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">name is  shawn</span><br><span class="line">sex is  ???</span><br><span class="line">other is  (<span class="string">'hello'</span>, <span class="string">'world'</span>)</span><br><span class="line">hobby  is  computer</span><br><span class="line">number  is  666</span><br><span class="line">--------------------------</span><br><span class="line">args is  (<span class="string">'shawn'</span>, <span class="string">'???'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>)</span><br><span class="line">kwargs is  &#123;<span class="string">'hobby'</span>: <span class="string">'computer'</span>, <span class="string">'number'</span>: 666&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™é‡Œæœ‰éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼šå‚æ•°çš„åå­—ä¸ä¸€å®šéè¦æ˜¯<code>*args</code>å’Œ<code>**kwargs</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰å‡½æ•°çš„æ—¶å€™ä¸ä¸€å®šæ˜¯<code>def foo(*args, **kwargs):</code>ï¼Œä¹ŸåŒæ ·å¯ä»¥å®šä¹‰æˆ<code>def bar(*hehe, **haha):</code>ï¼Œè¿™é‡ŒçœŸæ­£æ ‡è¯†çš„æ˜¯æ˜Ÿå·è€Œä¸æ˜¯åå­—ã€‚ä¸è¿‡å»ºè®®å‘½åçš„æ—¶å€™ç¬¦åˆå¤§å®¶çš„ä¹ æƒ¯ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Paramenter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­Virtualenvå’Œpipçš„ç®€å•ç”¨æ³•</title>
      <link href="/2017/08/18/python-pip-virtualenv/"/>
      <url>/2017/08/18/python-pip-virtualenv/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å®‰è£…ç¯å¢ƒ"><a href="#0X00-å®‰è£…ç¯å¢ƒ" class="headerlink" title="0X00 å®‰è£…ç¯å¢ƒ"></a>0X00 å®‰è£…ç¯å¢ƒ</h1><p>æˆ‘ä»¬åœ¨Pythonå¼€å‘å’Œå­¦ä¹ è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°å„ç§åº“ï¼Œç„¶ååœ¨å„ä¸ªä¸åŒçš„é¡¹ç›®å’Œä½œå“é‡Œå¯èƒ½ç”¨çš„ç‰ˆæœ¬è¿˜ä¸ä¸€æ ·ï¼Œæ­£å› ä¸ºæœ‰è¿™ç§é—®é¢˜çš„å­˜åœ¨æ‰å‚¬ç”Ÿäº†<code>virtualenv</code>çš„è¯ç”Ÿã€‚virtualenvå¯ä»¥åœ¨ç”µè„‘ä¸Šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥é’ˆå¯¹æ¯ä¸€ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒå„ä¸ªä¸åŒçš„é¡¹ç›®ç”¨ä¸åŒç‰ˆæœ¬çš„åº“çš„æ—¶å€™å‡ºç°çš„å†²çªäº†ã€‚ <strong> ä¸‹é¢çš„å†…å®¹åªé€‚ç”¨äºLinux/OSXï¼Œæœªç»Windowsç¯å¢ƒæµ‹è¯• </strong></p><p>è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½è¿˜æ˜¯éœ€è¦å®‰è£…ï¼Œå®‰è£…virtualenvè‚¯å®šå°±å¾—ç›´æ¥ç”¨pipå®‰è£…äº†ï¼Œ<code>pip install virtualenv</code>å°±å¯ä»¥è½»æ¾è£…ä¸Šäº†ã€‚è£…å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ¥æµ‹è¯•ä¸€æ³¢äº†ã€‚</p><a id="more"></a><h1 id="0X01-åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å·¥ä½œç¯å¢ƒ"><a href="#0X01-åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å·¥ä½œç¯å¢ƒ" class="headerlink" title="0X01 åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å·¥ä½œç¯å¢ƒ"></a>0X01 åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å·¥ä½œç¯å¢ƒ</h1><p>é¦–å…ˆåœ¨ä¸€ä¸ªç©ºçš„ç¯å¢ƒä¸­æ‰§è¡Œ<code>virtualenv --no-site-packages test_env</code>ï¼Œå°±æ˜¯åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸ºtest_envçš„è™šæ‹Ÿç¯å¢ƒã€‚è¿™é‡Œ<code>--no-site-packages</code>å‚æ•°æ˜¯æŒ‡ä¸ä»å…¨å±€çš„Pythonä¸­æºå¸¦ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚å°±æ¯”å¦‚è¯´ä½ åœ¨å…¨å±€Pythonä¸­å®‰è£…äº†xxxåº“ï¼Œåœ¨ä¸ç”¨è¿™ä¸ªå‚æ•°æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œè™šæ‹Ÿç¯å¢ƒä¸­ä¹Ÿä¼šå¸¦ç€è¿™ä¸ªåº“ï¼›ä½†æ˜¯åŠ ä¸Šäº†è¿™ä¸ªå‚æ•°ï¼Œè™šæ‹Ÿç¯å¢ƒä¸­å°±æ˜¯ä¸€ä¸ªçº¯å‡€çš„Pythonï¼Œæ²¡æœ‰è¿™äº›åº“ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root <span class="keyword">in</span> ~ Î» virtualenv --no-site-packages test_env</span><br><span class="line">New python executable <span class="keyword">in</span> /root/test_env/bin/python</span><br><span class="line">Please make sure you remove any previous custom paths from your /root/.pydistutils.cfg file.</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br></pre></td></tr></table></figure></p><p>ç„¶åå¯ä»¥é€šè¿‡<code>source test_env/bin/activate</code>å¯ä»¥è¿›å…¥ï¼ˆæ¿€æ´»ï¼‰åˆ°è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒé‡Œå»ã€‚è¿›å…¥åˆ°è™šæ‹Ÿç¯å¢ƒä¸­ä¹‹åï¼Œé€šå¸¸æƒ…å†µä¸‹ä½ çš„å‘½ä»¤æç¤ºç¬¦æœ€å‰é¢ä¼šå‡ºç°ä¸€ä¸ªæ‹¬å·ï¼Œæ‹¬å·é‡Œé¢å†™ç€ä½ è™šæ‹Ÿç¯å¢ƒçš„åå­—ã€‚</p><blockquote><p>è¿™é‡Œè¯´æ˜¯è™šæ‹Ÿç¯å¢ƒï¼Œå…¶å®ä¸€åˆ‡éƒ½æ˜¯çœŸå®çš„ã€‚åªæ˜¯è¯´ä½ åœ¨æ¿€æ´»äº†è¿™ä¸ªç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸‹ç”¨pipå®‰è£…çš„åº“éƒ½æ”¾åœ¨ <code>test_env</code> ä¸­ã€‚</p></blockquote><p>ä¹Ÿå¯ä»¥é€šè¿‡<code>deactivate</code>æ¥é€€å‡ºè¿™ä¸ªç¯å¢ƒã€‚</p><h1 id="0X02-æ‰¹é‡å¯¼å‡ºå’Œå®‰è£…åº“"><a href="#0X02-æ‰¹é‡å¯¼å‡ºå’Œå®‰è£…åº“" class="headerlink" title="0X02 æ‰¹é‡å¯¼å‡ºå’Œå®‰è£…åº“"></a>0X02 æ‰¹é‡å¯¼å‡ºå’Œå®‰è£…åº“</h1><p>æ¯”å¦‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢ç”¨åˆ°äº†pymongo/requests/flask/pymysqlç­‰ç­‰ç­‰ç­‰åå‡ äºŒåä¸ªåº“ï¼Œè¿˜è¦æŒ‡å®šç‰¹å®šçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå½“æŠŠä¸€ä¸ªé¡¹ç›®ä»æœºå™¨Aè¿ç§»åˆ°æœºå™¨Bçš„æ—¶å€™å°±ä¼šå¾ˆéº»çƒ¦ã€‚éœ€è¦æ‰‹åŠ¨è®°å½•æ¯ä¸ªåº“å’Œç‰ˆæœ¬ï¼Œè¿˜è¦é€ä¸ªå»å®‰è£…ï¼Œéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥é’ˆå¯¹è¿™ä¸ªé—®é¢˜pipå·²ç»æœ‰äº†éå¸¸å®Œå–„çš„è§£å†³æ–¹æ¡ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(test_env) root <span class="keyword">in</span> ~ Î» pip freeze &gt; requirements.txt  <span class="comment"># å¯¼å‡ºå·²å®‰è£…çš„åº“</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å¯ä»¥å¯¼å‡ºå½“å‰ç¯å¢ƒä¸­å®‰è£…å¥½çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Œå¹¶ä¸”æ˜¯ä»¥ä¸€ä¸ªæ ‡å‡†çš„æ ¼å¼å¯¼å‡ºçš„ã€‚æ‰€ä»¥ä¸€èˆ¬ä¸€ä¸ªæ ‡å‡†çš„pythoné¡¹ç›®çš„æ ¹ç›®å½•éƒ½ä¼šæœ‰è¿™ä¸ªåä¸º<code>requirements.txt</code>çš„ä¾èµ–æ–‡ä»¶ã€‚</p><p>æ—¢ç„¶å¯ä»¥ä¸€æ¬¡æ€§å¯¼å‡ºï¼Œé‚£ä¹ˆå¿…ç„¶å¯ä»¥ä¸€æ¬¡æ€§å®‰è£…å–½ã€‚é€šè¿‡è¿™ç§æ–¹å¼å°±å¯ä»¥å°†ä¸Šé¢å¯¼å‡ºçš„ç‰¹å®šç‰ˆæœ¬çš„æ‰€æœ‰åº“ä¸€æ¬¡æ€§å…¨è£…ä¸Šã€‚é…åˆvirtualenvå¯ä»¥å¿«é€Ÿçš„éƒ¨ç½²ä¸€ä¸ªPythoné¡¹ç›®ï¼Œå¹¶ä¸”ä¸ä¼šæä¹±å…¶ä»–çš„Pythoné¡¹ç›®ç¯å¢ƒã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(test_env_1) root <span class="keyword">in</span> ~ Î» pip install -r requirements.txt</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> pip </tag>
            
            <tag> Virtualenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Pythonæ“ä½œæ¶ˆæ¯é˜Ÿåˆ—RabbitMQ</title>
      <link href="/2017/06/13/python-rabbitmq/"/>
      <url>/2017/06/13/python-rabbitmq/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹å‚è€ƒè‡ª<span class="exturl" data-url="aHR0cDovL3d3dy5jbmJsb2dzLmNvbS9wYW5nZ3VvcGluZy9wLzU3MjAxMzQuaHRtbA==" title="http://www.cnblogs.com/pangguoping/p/5720134.html">python - æ“ä½œRabbitMQ<i class="fa fa-external-link"></i></span></p><h1 id="0X00-å®‰è£…ç¯å¢ƒ"><a href="#0X00-å®‰è£…ç¯å¢ƒ" class="headerlink" title="0X00 å®‰è£…ç¯å¢ƒ"></a>0X00 å®‰è£…ç¯å¢ƒ</h1><p>é¦–å…ˆæ˜¯åœ¨Linuxä¸Šå®‰è£…rabbitmq<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¯å¢ƒä¸ºCentOS 7</span></span><br><span class="line">yum install rabbitmq-server<span class="comment"># å®‰è£…RabbitMQ</span></span><br><span class="line">systemctl start rabbitmq-server<span class="comment"># å¯åŠ¨</span></span><br><span class="line">systemctl <span class="built_in">enable</span> rabbitmq-server<span class="comment"># å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl stop firewall-cmd<span class="comment"># ä¸´æ—¶å…³é—­é˜²ç«å¢™</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åç”¨pipå®‰è£…Python3çš„å¼€å‘åŒ…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install pika</span><br></pre></td></tr></table></figure></p><p>å®‰è£…å¥½è½¯ä»¶ä¹‹åå¯ä»¥è®¿é—®<code>http://115.xx.xx.xx:15672/</code>æ¥è®¿é—®è‡ªå¸¦çš„webé¡µé¢æ¥æŸ¥çœ‹å’Œç®¡ç†RabbitMQã€‚é»˜è®¤ç®¡ç†å‘˜çš„ç”¨æˆ·å¯†ç éƒ½æ˜¯<code>guest</code></p><a id="more"></a><h1 id="0X01-ç®€å•çš„å‘é˜Ÿåˆ—ä¸­åŠ å…¥æ¶ˆæ¯"><a href="#0X01-ç®€å•çš„å‘é˜Ÿåˆ—ä¸­åŠ å…¥æ¶ˆæ¯" class="headerlink" title="0X01 ç®€å•çš„å‘é˜Ÿåˆ—ä¸­åŠ å…¥æ¶ˆæ¯"></a>0X01 ç®€å•çš„å‘é˜Ÿåˆ—ä¸­åŠ å…¥æ¶ˆæ¯</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># @Time    : 2017/6/13 19:25</span></span><br><span class="line"><span class="comment"># @Author  : Shawn</span></span><br><span class="line"><span class="comment"># @Blog    : https://blog.just666.cn</span></span><br><span class="line"><span class="comment"># @Email   : shawnbluce@gmail.com</span></span><br><span class="line"><span class="comment"># @purpose : RabbitMQ_Producer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿æ¥å¯¹è±¡</span></span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(host=<span class="string">'115.xx.xx.xx'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé¢‘é“å¯¹è±¡</span></span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¦‚æœè¯¥é˜Ÿåˆ—ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">'test_queue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    channel.basic_publish(exchange=<span class="string">''</span>, routing_key=<span class="string">'test_queue'</span>, body=<span class="string">'hello,world'</span> + str(i))</span><br><span class="line">    print(<span class="string">"sent..."</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h1 id="0X02-ç®€å•çš„ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯"><a href="#0X02-ç®€å•çš„ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯" class="headerlink" title="0X02 ç®€å•çš„ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯"></a>0X02 ç®€å•çš„ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># @Time    : 2017/6/13 19:40</span></span><br><span class="line"><span class="comment"># @Author  : Shawn</span></span><br><span class="line"><span class="comment"># @Blog    : https://blog.just666.cn</span></span><br><span class="line"><span class="comment"># @Email   : shawnbluce@gmail.com</span></span><br><span class="line"><span class="comment"># @purpose : RabbitMQ_Consumer</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">'guest'</span>, <span class="string">'guest'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥åˆ°RabbitMQæœåŠ¡å™¨</span></span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">'115.xx.xx.xx'</span>, <span class="number">5672</span>, <span class="string">'/'</span>, credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¦‚æœè¯¥é˜Ÿåˆ—ä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">'test_queue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback</span><span class="params">(ch, method, properties, body)</span>:</span></span><br><span class="line">    print(body.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘Šè¯‰RabbitMQä½¿ç”¨callbackæ¥æ¥æ”¶ä¿¡æ¯</span></span><br><span class="line">channel.basic_consume(callback, queue=<span class="string">'test_queue'</span>, no_ack=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'waiting...'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹æ¥æ”¶ä¿¡æ¯ï¼Œå¹¶è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œé˜Ÿåˆ—é‡Œæœ‰ä¿¡æ¯æ‰ä¼šè°ƒç”¨callbackè¿›è¡Œå¤„ç†ã€‚æŒ‰ctrl+cé€€å‡ºã€‚</span></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h1 id="0X03-ä¸‡ä¸€æ¶ˆè´¹è€…æ‰çº¿äº†"><a href="#0X03-ä¸‡ä¸€æ¶ˆè´¹è€…æ‰çº¿äº†" class="headerlink" title="0X03 ä¸‡ä¸€æ¶ˆè´¹è€…æ‰çº¿äº†"></a>0X03 ä¸‡ä¸€æ¶ˆè´¹è€…æ‰çº¿äº†</h1><p>æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼š</p><p>æ¶ˆè´¹è€…ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è·å–äº†næ¡æ•°æ®ï¼Œæ­£è¦å¤„ç†å‘¢ç»“æœå®•æœºäº†ï¼Œé‚£è¯¥æ€ä¹ˆåŠï¼Ÿåœ¨RabbieMQä¸­æœ‰ä¸€ä¸ªACKå¯ä»¥ç”¨æ¥ç¡®è®¤æ¶ˆè´¹è€…å¤„ç†ç»“æŸã€‚å°±æœ‰ç‚¹ç±»ä¼¼ç½‘ç»œä¸­çš„ACKï¼Œæ¶ˆè´¹è€…æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­è·å–äº†æ•°æ®ä¹‹åé˜Ÿåˆ—ä¸ä¼šç«‹åˆ»å°†æ•°æ®ç§»é™¤ï¼Œè€Œæ˜¯ç­‰å¾…å¯¹åº”çš„ACKã€‚æ¶ˆè´¹è€…è·å–åˆ°æ•°æ®å¹¶å¤„ç†å®Œæˆä¹‹åä¼šå‘é˜Ÿåˆ—å‘é€ä¸€ä¸ªACKåŒ…ï¼Œé€šçŸ¥RabbitMQè¿™å †æ¶ˆæ¯å·²ç»å¤„ç†å¦¥å½“äº†ï¼Œå¯ä»¥åˆ é™¤äº†ï¼Œè¿™æ—¶å€™RabbitMQæ‰ä¼šå°†æ•°æ®ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹å³ä½¿æ¶ˆè´¹è€…æ‰çº¿ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ•°æ®ä¾æ—§ä¼šåœ¨é˜Ÿåˆ—ä¸­å­˜åœ¨ï¼Œç•™ç»™å…¶ä»–æ¶ˆè´¹è€…å¤„ç†ã€‚</p><p>åœ¨Pythonä¸­è¿™æ ·å®ç°ï¼š</p><p>æ¶ˆè´¹è€…æœ‰è¿™æ ·ä¸€è¡Œä»£ç <code>channel.basic_consume(callback, queue=&#39;test_queue&#39;, no_ack=False)</code>ï¼Œå…¶ä¸­<code>no_ack=False</code>è¡¨ç¤ºä¸å‘é€ç¡®è®¤åŒ…ã€‚å°†å…¶ä¿®æ”¹ä¸º<code>no_ack=True</code>å°±ä¼šåœ¨æ¯æ¬¡å¤„ç†å®Œä¹‹åå‘RabbitMQå‘é€ä¸€ä¸ªç¡®è®¤åŒ…ï¼Œä»¥ç¡®è®¤æ¶ˆæ¯å¤„ç†å®Œæ¯•ã€‚</p><h1 id="0X04-ä¸‡ä¸€RabbitMQå®•æœºäº†å‘¢"><a href="#0X04-ä¸‡ä¸€RabbitMQå®•æœºäº†å‘¢" class="headerlink" title="0X04 ä¸‡ä¸€RabbitMQå®•æœºäº†å‘¢"></a>0X04 ä¸‡ä¸€RabbitMQå®•æœºäº†å‘¢</h1><p>è™½ç„¶æœ‰äº†ACKåŒ…ï¼Œä½†æ˜¯ä¸‡ä¸€RabbitMQæŒ‚äº†é‚£æ•°æ®è¿˜æ˜¯ä¼šæŸå¤±ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™RabbitMQè®¾ç½®ä¸€ä¸ªæ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚RabbitMQä¼šå°†æ•°æ®æŒä¹…åŒ–å­˜å‚¨åˆ°ç£ç›˜ä¸Šï¼Œä¿è¯ä¸‹æ¬¡å†å¯åŠ¨çš„æ—¶å€™é˜Ÿåˆ—è¿˜åœ¨ã€‚</p><p>åœ¨Pythonä¸­è¿™æ ·å®ç°ï¼š</p><p>æˆ‘ä»¬å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—æ˜¯è¿™æ ·çš„<code>channel.queue_declare(queue=&#39;test_queue&#39;)</code>ï¼Œå¦‚æœéœ€è¦æŒä¹…åŒ–ä¸€ä¸ªé˜Ÿåˆ—å¯ä»¥è¿™æ ·å£°æ˜<code>channel.queue_declare(queue=&#39;test_queue&#39;, durable=True)</code>ã€‚ä¸è¿‡è¿™è¡Œç›´æ¥æ”¾åœ¨ä»£ç ä¸­æ˜¯ä¸èƒ½æ‰§è¡Œçš„ï¼Œå› ä¸ºä»¥å‰å·²ç»æœ‰äº†ä¸€ä¸ªåä¸º<code>test_queue</code>çš„é˜Ÿåˆ—ï¼ŒRabbitMQä¸å…è®¸ç”¨ä¸åŒçš„æ–¹å¼å£°æ˜åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥å¯ä»¥æ¢ä¸€ä¸ªé˜Ÿåˆ—åæ–°å»ºæ¥æŒ‡å®šæ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚ä¸è¿‡å¦‚æœåªæ˜¯è¿™æ ·å£°æ˜çš„è¯ï¼Œåœ¨RabbitMQå®•æœºé‡å¯åç¡®å®é˜Ÿåˆ—è¿˜åœ¨ï¼Œä¸è¿‡é˜Ÿåˆ—é‡Œçš„æ•°æ®å°±æ²¡æœ‰äº†ã€‚é™¤éæˆ‘ä»¬è¿™æ ·æ¥å£°æ˜é˜Ÿåˆ—<code>channel.basic_publish(exchange=&#39;&#39;, routing_key=&quot;test_queue&quot;, body=message, properties=pika.BasicProperties(delivery_mode = 2,))</code>ã€‚</p><h1 id="0X05-æœ€ç®€å•çš„å‘å¸ƒè®¢é˜…"><a href="#0X05-æœ€ç®€å•çš„å‘å¸ƒè®¢é˜…" class="headerlink" title="0X05 æœ€ç®€å•çš„å‘å¸ƒè®¢é˜…"></a>0X05 æœ€ç®€å•çš„å‘å¸ƒè®¢é˜…</h1><p>æœ€ç®€å•çš„å‘å¸ƒè®¢é˜…åœ¨RabbitMQä¸­ç§°ä¹‹ä¸º<code>Fanoutæ¨¡å¼</code>ã€‚ä¹Ÿå°±æ˜¯è¯´è®¢é˜…è€…è®¢é˜…æŸä¸ªé¢‘é“ï¼Œç„¶åå‘å¸ƒè€…å‘è¿™ä¸ªé¢‘é“ä¸­å‘å¸ƒæ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…è€…å°±éƒ½èƒ½æ¥æ”¶åˆ°è¿™æ¡æ¶ˆæ¯ã€‚ä¸è¿‡å› ä¸ºå‘å¸ƒè€…éœ€è¦ä½¿ç”¨è®¢é˜…è€…åˆ›å»ºçš„éšæœºé˜Ÿåˆ—æ‰€ä»¥éœ€è¦å…ˆå¯åŠ¨è®¢é˜…è€…æ‰èƒ½å¯åŠ¨å‘å¸ƒè€…ã€‚</p><p>å‘å¸ƒè€…ä»£ç ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># @Time    : 2017/6/13 20:21</span></span><br><span class="line"><span class="comment"># @Author  : Shawn</span></span><br><span class="line"><span class="comment"># @Blog    : https://blog.just666.cn</span></span><br><span class="line"><span class="comment"># @Email   : shawnbluce@gmail.com</span></span><br><span class="line"><span class="comment"># @purpose : RabbitMQ_Publisher</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿æ¥å¯¹è±¡</span></span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(host=<span class="string">'115.xx.xx.xx'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºé¢‘é“å¯¹è±¡</span></span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰äº¤æ¢æœºï¼Œexchangeè¡¨ç¤ºäº¤æ¢æœºåç§°ï¼Œtypeè¡¨ç¤ºç±»å‹</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">'my_fanout'</span>,</span><br><span class="line">                         type=<span class="string">'fanout'</span>)</span><br><span class="line"></span><br><span class="line">message = <span class="string">'Hello Python'</span></span><br><span class="line"><span class="comment"># å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœº</span></span><br><span class="line">channel.basic_publish(exchange=<span class="string">'my_fanout'</span>,  <span class="comment"># æŒ‡å®šexchange</span></span><br><span class="line">                      routing_key=<span class="string">''</span>,  <span class="comment"># fanoutä¸‹ä¸éœ€è¦é…ç½®ï¼Œé…ç½®äº†ä¹Ÿä¸ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">                      body=message)</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure></p><p>è®¢é˜…è€…ä»£ç ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># @Time    : 2017/6/13 20:20</span></span><br><span class="line"><span class="comment"># @Author  : Shawn</span></span><br><span class="line"><span class="comment"># @Blog    : https://blog.just666.cn</span></span><br><span class="line"><span class="comment"># @Email   : shawnbluce@gmail.com</span></span><br><span class="line"><span class="comment"># @purpose : RabbitMQ_Subscriber</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">'guest'</span>, <span class="string">'guest'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥åˆ°RabbitMQ</span></span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">'115.xx.xx.xx'</span>, <span class="number">5672</span>, <span class="string">'/'</span>, credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰äº¤æ¢æœºï¼Œè¿›è¡Œexchangeå£°æ˜ï¼Œexchangeè¡¨ç¤ºäº¤æ¢æœºåç§°ï¼Œtypeè¡¨ç¤ºç±»å‹</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">'my_fanout'</span>,</span><br><span class="line">                         type=<span class="string">'fanout'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºåˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(exclusive=<span class="literal">True</span>)  <span class="comment"># exclusive=Trueè¡¨ç¤ºå»ºç«‹ä¸´æ—¶é˜Ÿåˆ—ï¼Œå½“consumerå…³é—­åï¼Œè¯¥é˜Ÿåˆ—å°±ä¼šè¢«åˆ é™¤</span></span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†é˜Ÿåˆ—ä¸exchangeè¿›è¡Œç»‘å®š</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">'my_fanout'</span>,</span><br><span class="line">                   queue=queue_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å›è°ƒæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback</span><span class="params">(ch, method, properties, body)</span>:</span></span><br><span class="line">    print(body.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»é˜Ÿåˆ—è·å–ä¿¡æ¯</span></span><br><span class="line">channel.basic_consume(callback,</span><br><span class="line">                      queue=queue_name,</span><br><span class="line">                      no_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Demo </tag>
            
            <tag> RabbieMQ </tag>
            
            <tag> Message Queue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Flaskè®¾è®¡å®ç°ä¸€å¥—APIã€æˆç»©ç®¡ç†ç³»ç»Ÿã€‘</title>
      <link href="/2017/06/03/flask-build-api/"/>
      <url>/2017/06/03/flask-build-api/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯RESTé£æ ¼çš„API"><a href="#0X00-ä»€ä¹ˆæ˜¯RESTé£æ ¼çš„API" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯RESTé£æ ¼çš„API"></a>0X00 ä»€ä¹ˆæ˜¯RESTé£æ ¼çš„API</h1><p>ä¼—æ‰€å‘¨çŸ¥httpåè®®æœ‰<code>GET/PUT/POST/PATCH/DELETE</code>ç­‰ä¼—å¤šæ–¹æ³•ï¼Œè¿˜èƒ½åœ¨æäº¤è¯·æ±‚å’Œå‘é€å“åº”çš„æ—¶å€™æºå¸¦æ•°æ®ã€‚RESTé£æ ¼çš„APIå°±æ˜¯ä½¿ç”¨äº†è¿™äº›HTTPç‰¹æ€§çš„APIã€‚é’ˆå¯¹ä¸€ä¸ªURLå¯ä»¥æœ‰å¤šç§åŠ¨è¯(æ–¹æ³•)æ¥è¡¨ç¤ºä¸åŒçš„æ“ä½œã€‚<br>æ›´å¤šè¯¦ç»†çš„å†…å®¹å¯ä»¥ç‚¹å‡»æŸ¥çœ‹é˜®ä¸€å³°çš„åšå®¢ï¼š<span class="exturl" data-url="aHR0cDovL3d3dy5ydWFueWlmZW5nLmNvbS9ibG9nLzIwMTEvMDkvcmVzdGZ1bC5odG1s" title="http://www.ruanyifeng.com/blog/2011/09/restful.html">ç†è§£RESTfulæ¶æ„<i class="fa fa-external-link"></i></span></p><a id="more"></a><h1 id="0X01-æ€ä¹ˆé€‰ç”¨HTTPåŠ¨è¯"><a href="#0X01-æ€ä¹ˆé€‰ç”¨HTTPåŠ¨è¯" class="headerlink" title="0X01 æ€ä¹ˆé€‰ç”¨HTTPåŠ¨è¯"></a>0X01 æ€ä¹ˆé€‰ç”¨HTTPåŠ¨è¯</h1><p>å¸¸è§çš„åŠ¨è¯æœ‰è¿™äº”ç§ï¼Œå¯ä»¥å¯¹åº”è‡ªå·±çš„éœ€æ±‚é€‰ç”¨</p><table><thead><tr><th>åŠ¨è¯</th><th>ç±»ä¼¼çš„SQLå…³é”®å­—</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>GET</td><td>SELECT</td><td>è·å–èµ„æº</td></tr><tr><td>POST</td><td>CREATE</td><td>åˆ›å»ºèµ„æº</td></tr><tr><td>PUT</td><td>UPDATE</td><td>æ›´æ–°èµ„æºï¼ˆéœ€è¦æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰</td></tr><tr><td>PATCH</td><td>UPDATE</td><td>æ›´æ–°èµ„æºï¼ˆéœ€è¦æä¾›æ”¹å˜çš„å±æ€§ï¼‰</td></tr><tr><td>DELETE</td><td>DELETE</td><td>åˆ é™¤èµ„æº</td></tr></tbody></table><h1 id="0X02-è®¾è®¡URL"><a href="#0X02-è®¾è®¡URL" class="headerlink" title="0X02 è®¾è®¡URL"></a>0X02 è®¾è®¡URL</h1><p>RESTé£æ ¼çš„APIå› ä¸ºå¯ä»¥ç”¨HTTPçš„åŠ¨è¯ï¼Œæ‰€ä»¥URLä¸­æ˜¯ä¸å¸¦æœ‰åŠ¨è¯çš„ï¼Œå¦‚æœæˆ‘è¦è·å–æŸä¸ªå­¦ç”Ÿçš„ä¿¡æ¯åº”è¯¥æ˜¯<code>[GET] http://api.example.com/student/id=12345678900</code>ã€‚HTTPåŠ¨è¯ç†è®ºä¸Šæ˜¯èƒ½æ»¡è¶³å„ç§æƒ…å†µä¸‹çš„éœ€æ±‚çš„ï¼Œæ‰€ä»¥URLä¸­åªåº”è¯¥å‡ºç°åè¯è€Œä¸åº”è¯¥å‡ºç°åŠ¨è¯ã€‚è¿™é‡Œç”¨é˜®ä¸€å³°ä¸¾çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹</p><table><thead><tr><th>åŠ¨è¯</th><th>è·¯å¾„</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>GET</td><td>/zoos</td><td>åˆ—å‡ºæ‰€æœ‰åŠ¨ç‰©å›­</td></tr><tr><td>POST</td><td>/zoos</td><td>æ–°å»ºä¸€ä¸ªåŠ¨ç‰©å›­</td></tr><tr><td>GET</td><td>/zoos/ID</td><td>è·å–æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„ä¿¡æ¯</td></tr><tr><td>PUT</td><td>/zoos/ID</td><td>æ›´æ–°æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„ä¿¡æ¯ï¼ˆæä¾›è¯¥åŠ¨ç‰©å›­çš„å…¨éƒ¨ä¿¡æ¯ï¼‰</td></tr><tr><td>PATCH</td><td>/zoos/ID</td><td>æ›´æ–°æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„ä¿¡æ¯ï¼ˆæä¾›è¯¥åŠ¨ç‰©å›­çš„éƒ¨åˆ†ä¿¡æ¯ï¼‰</td></tr><tr><td>DELETE</td><td>/zoos/ID</td><td>åˆ é™¤æŸä¸ªåŠ¨ç‰©å›­</td></tr><tr><td>GET</td><td>/zoos/ID/animals</td><td>åˆ—å‡ºæŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„æ‰€æœ‰åŠ¨ç‰©</td></tr><tr><td>DELETE</td><td>/zoos/ID/animals/ID</td><td>åˆ é™¤æŸä¸ªæŒ‡å®šåŠ¨ç‰©å›­çš„æŒ‡å®šåŠ¨ç‰©</td></tr></tbody></table><h1 id="0X03-çŠ¶æ€ç "><a href="#0X03-çŠ¶æ€ç " class="headerlink" title="0X03 çŠ¶æ€ç "></a>0X03 çŠ¶æ€ç </h1><p>çŠ¶æ€ç æ˜¯HTTPä¸­çš„ä¸€å¤§ä¼˜åŠ¿ï¼Œä¸€ä¸ªå“åº”å¯ä»¥åªé çŠ¶æ€ç æ¥åˆ¤è¯·æ±‚ç»“æœã€‚è¿™äº›æ˜¯å¸¸è§çš„çŠ¶æ€ç ï¼Œè‡ªå·±è®¾è®¡APIçš„æ—¶å€™è¦ä¸¥æ ¼æŒ‰ç…§è§„èŒƒæ¥è®¾è®¡çŠ¶æ€ç ï¼Œå¯ä»¥æé«˜ä»£ç å’ŒAPIçš„å¯è¯»æ€§å’Œå¯ç†è§£æ€§ã€‚</p><table><thead><tr><th>çŠ¶æ€ç </th><th>ä¿¡æ¯</th><th>è¯·æ±‚ç±»å‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>[GET]</td><td>æœåŠ¡å™¨æˆåŠŸè¿”å›ç”¨æˆ·è¯·æ±‚çš„æ•°æ®ï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰ã€‚</td></tr><tr><td>201</td><td>CREATED</td><td>[POST/PUT/PATCH]</td><td>ç”¨æˆ·æ–°å»ºæˆ–ä¿®æ”¹æ•°æ®æˆåŠŸã€‚</td></tr><tr><td>202</td><td>Accepted</td><td>[*]</td><td>è¡¨ç¤ºä¸€ä¸ªè¯·æ±‚å·²ç»è¿›å…¥åå°æ’é˜Ÿï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ã€‚</td></tr><tr><td>204</td><td>NO CONTENT</td><td>[DELETE]</td><td>ç”¨æˆ·åˆ é™¤æ•°æ®æˆåŠŸã€‚</td></tr><tr><td>400</td><td>INVALID REQUEST</td><td>[POST/PUT/PATCH]</td><td>ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td>401</td><td>Unauthorized</td><td>[*]</td><td>è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰ã€‚</td></tr><tr><td>403</td><td>Forbidden</td><td>[*]</td><td>è¡¨ç¤ºç”¨æˆ·å¾—åˆ°æˆæƒï¼ˆä¸401é”™è¯¯ç›¸å¯¹ï¼‰ï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚</td></tr><tr><td>404</td><td>NOT FOUND</td><td>[*]</td><td>ç”¨æˆ·å‘å‡ºçš„è¯·æ±‚é’ˆå¯¹çš„æ˜¯ä¸å­˜åœ¨çš„è®°å½•ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ã€‚</td></tr><tr><td>406</td><td>Not Acceptable</td><td>[GET]</td><td>ç”¨æˆ·è¯·æ±‚çš„æ ¼å¼ä¸å¯å¾—ï¼ˆæ¯”å¦‚ç”¨æˆ·è¯·æ±‚JSONæ ¼å¼ï¼Œä½†æ˜¯åªæœ‰XMLæ ¼å¼ï¼‰ã€‚</td></tr><tr><td>410</td><td>Gone</td><td>[GET]</td><td>ç”¨æˆ·è¯·æ±‚çš„èµ„æºè¢«æ°¸ä¹…åˆ é™¤ï¼Œä¸”ä¸ä¼šå†å¾—åˆ°çš„ã€‚</td></tr><tr><td>422</td><td>Unprocesable entity</td><td>[POST/PUT/PATCH]</td><td>å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚</td></tr><tr><td>500</td><td>INTERNAL SERVER ERROR</td><td>[*]</td><td>æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œç”¨æˆ·å°†æ— æ³•åˆ¤æ–­å‘å‡ºçš„è¯·æ±‚æ˜¯å¦æˆåŠŸã€‚</td></tr></tbody></table><h1 id="0X04-å¦‚ä½•ç”¨Pythonå®ç°"><a href="#0X04-å¦‚ä½•ç”¨Pythonå®ç°" class="headerlink" title="0X04 å¦‚ä½•ç”¨Pythonå®ç°"></a>0X04 å¦‚ä½•ç”¨Pythonå®ç°</h1><p>Pythonæœ‰å¤§é‡ç¬¬ä¸‰æ–¹åº“å¯ä»¥å®ç°RESTé£æ ¼çš„APIï¼Œæˆ‘è¿™é‡Œé€‰ç”¨çš„æ˜¯ç›¸å¯¹è½»é‡åŒ–çš„ä¸€ä¸ª <span class="exturl" data-url="aHR0cDovL2ZsYXNrLnBvY29vLm9yZy8=" title="http://flask.pocoo.org/">Flask<i class="fa fa-external-link"></i></span>ã€‚å®‰è£…è¿™ä¸ªåº“æœ€ç®€å•çš„æ–¹å¼è¿˜æ˜¯ç”¨pipï¼Œæ ¹æ®ç¯å¢ƒå˜é‡çš„ä¸åŒå¯èƒ½å…·ä½“å‘½ä»¤æœ‰æ‰€ä¸åŒï¼Œåœ¨æˆ‘çš„Linuxä¸Šæ˜¯ç”¨<code>pip3 install flask</code>å°±å¯ä»¥ç›´æ¥å®‰è£…å¥½çš„ã€‚<br>å®‰è£…å¥½åè¿›å…¥Pythonçš„äº¤äº’å¼ç•Œé¢è¾“å…¥<code>import flask</code>å¦‚æœæ²¡æœ‰å‡ºç°<code>Import Error</code>å°±æ˜¯å®‰è£…å¥½äº†ã€‚</p><h1 id="0X05åˆ›å»ºæ•°æ®åº“å’Œè¡¨"><a href="#0X05åˆ›å»ºæ•°æ®åº“å’Œè¡¨" class="headerlink" title="0X05åˆ›å»ºæ•°æ®åº“å’Œè¡¨"></a>0X05åˆ›å»ºæ•°æ®åº“å’Œè¡¨</h1><p>ç°åœ¨å¯ä»¥å¼€å§‹è®¾è®¡APIäº†ã€‚æ—¢ç„¶æ˜¯æˆç»©ç®¡ç†ç³»ç»Ÿï¼Œé‚£ä¹ˆé¦–å…ˆå°±è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæˆ‘è¿™é‡Œçš„æ•°æ®åº“æ˜¯ç”¨çš„MariaDBã€‚</p><table><thead><tr><th>åˆ—å</th><th>ç±»å‹</th><th>å«ä¹‰</th><th>é”®</th></tr></thead><tbody><tr><td>id</td><td>int</td><td>ç¼–å·</td><td>ä¸»é”®</td></tr><tr><td>name</td><td>varchar(10)</td><td>å­¦ç”Ÿå§“å</td><td></td></tr><tr><td>number</td><td>char(11)</td><td>å­¦å·</td><td></td></tr><tr><td>python</td><td>float</td><td>Pyæˆç»©</td><td></td></tr><tr><td>cpp</td><td>float</td><td>c++æˆç»©</td><td></td></tr><tr><td>os</td><td>float</td><td>æ“ä½œç³»ç»Ÿæˆç»©</td><td></td></tr><tr><td>network</td><td>float</td><td>è®¡ç®—æœºç½‘ç»œæˆç»©</td><td></td></tr><tr><td>total</td><td>float</td><td>æ€»åˆ†</td><td></td></tr><tr><td>ave</td><td>float</td><td>å¹³å‡åˆ†</td></tr></tbody></table><h1 id="0X06-åˆ›å»ºPyè„šæœ¬"><a href="#0X06-åˆ›å»ºPyè„šæœ¬" class="headerlink" title="0X06 åˆ›å»ºPyè„šæœ¬"></a>0X06 åˆ›å»ºPyè„šæœ¬</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»è¿™é‡ŒæŒ‡å®šè·¯å¾„ã€æ–¹æ³•ã€è¿”å›æ•°æ®</span></span><br><span class="line"><span class="meta">@app.route('/', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;hello,world&lt;/h1&gt;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> app.test_request_context():</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å†™å¥½ä¹‹åè¿è¡Œèµ·æ¥ä¼šåœ¨æœ¬åœ°ç›‘å¬5000ç«¯å£(é»˜è®¤çš„)ï¼Œç„¶åå½“ä½ ç”¨æµè§ˆå™¨è®¿é—®<code>http://localhost:5000/</code>çš„æ—¶å€™å°±åƒä½ è¿”å›<code>&lt;h1&gt;hello,world&lt;/h1&gt;</code>ï¼Œåœ¨æµè§ˆå™¨é¡µé¢ä¸‹çœ‹åˆ°çš„å°±æ˜¯ä¸€è¡Œå¤§å·çš„hello,worldã€‚å› ä¸ºåœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥URLæŒ‰å›è½¦ä¹‹åå°±æ˜¯å‘é‚£ä¸ªURLå‘é€äº†GETè¯·æ±‚ï¼Œä¹Ÿå°±æ­£å¥½è°ƒç”¨äº†<code>index()</code>æ–¹æ³•ã€‚</p><p>è¿™é‡Œå…ˆå°†ä¸APIæ— å…³çš„ä»£ç å¡«å¥½ï¼Œä¸‹é¢å¼€å§‹æ­£å¼å®Œæˆå„é¡¹åŠŸèƒ½ã€‚å…¶å®ä¹Ÿå°±æ˜¯è¿æ¥äº†æ•°æ®åº“è€Œå·²<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">database = pymysql.connect(<span class="string">"db_host"</span>, <span class="string">"db_username"</span>, <span class="string">"db_password"</span>, <span class="string">"db_name"</span>)</span><br><span class="line">cursor = database.cursor()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;hello,world&lt;/h1&gt;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> app.test_request_context():</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></p><h1 id="0X07-å®ç°ä¸€ä¸ªæ„é€ è¿”å›Jsonæ•°æ®çš„æ–¹æ³•"><a href="#0X07-å®ç°ä¸€ä¸ªæ„é€ è¿”å›Jsonæ•°æ®çš„æ–¹æ³•" class="headerlink" title="0X07 å®ç°ä¸€ä¸ªæ„é€ è¿”å›Jsonæ•°æ®çš„æ–¹æ³•"></a>0X07 å®ç°ä¸€ä¸ªæ„é€ è¿”å›Jsonæ•°æ®çš„æ–¹æ³•</h1><p>é¦–å…ˆæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨Jsonæ¥ä½œä¸ºæ•°æ®ä¼ è¾“æ ¼å¼ï¼Œå› ä¸ºJsonç›¸å¯¹XMLæ¥è¯´æ›´è½»é‡ä¸€ç‚¹ï¼Œç°åœ¨ä¹Ÿæ›´æµè¡Œã€‚è§„å®šå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚ä¼šåæœåŠ¡å™¨éƒ½ä¼šè¿”å›ä¸‹é¢è¿™æ ·ç±»å‹çš„Jsonæ•°æ®<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"time"</span>: <span class="string">"unix_time"</span>,</span><br><span class="line">    â€œe_msg": "error_message",</span><br><span class="line">    "search_list": &#123;</span><br><span class="line">    "item0": &#123;</span><br><span class="line">        "name": "name",</span><br><span class="line">            "number": "number",</span><br><span class="line">            "python": "marks",</span><br><span class="line">            "os": "marks",</span><br><span class="line">            "network": "marks",</span><br><span class="line">            "cpp": "marks",</span><br><span class="line">            "total": "marks",</span><br><span class="line">            "ave": "ave"</span><br><span class="line">        &#125;,"item1" : &#123;</span><br><span class="line">        "name": "name",</span><br><span class="line">            "number": "number",</span><br><span class="line">            "python": "marks",</span><br><span class="line">            "os": "marks",</span><br><span class="line">            "network": "marks",</span><br><span class="line">            "cpp": "marks",</span><br><span class="line">            "total": "marks",</span><br><span class="line">            "ave": "ave"</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>APIæä¾›å¢åˆ æŸ¥æ”¹åŠŸèƒ½ï¼Œå¢åˆ æ”¹åªé€šè¿‡çŠ¶æ€ç å°±å¯ä»¥åˆ¤æ–­æ‰§è¡Œç»“æœï¼Œåªæœ‰æŸ¥è¯¢çš„æ—¶å€™æ‰ä¼šéœ€è¦ä»å“åº”ä¸­è·å–æ•°æ®ã€‚</p><h1 id="0X08-å¢åŠ ä¸€æ¡æ–°çš„æ•°æ®"><a href="#0X08-å¢åŠ ä¸€æ¡æ–°çš„æ•°æ®" class="headerlink" title="0X08 å¢åŠ ä¸€æ¡æ–°çš„æ•°æ®"></a>0X08 å¢åŠ ä¸€æ¡æ–°çš„æ•°æ®</h1><p>æ·»åŠ ä¸€æ¡æ–°æ•°æ®æŒ‰ç…§æ ‡å‡†åº”è¯¥ä½¿ç”¨åŠ¨è¯<code>POST</code>ï¼Œæ ¹æ®URLä¸­åªæœ‰åè¯ä¸ç”¨åŠ¨è¯åªæœ‰åè¯çš„æ ‡å‡†ï¼Œéš§å°†URLè®¾è®¡æˆ<code>http://localhost/student</code>ï¼Œå†ä¾æ®æ ‡å‡†æ·»åŠ ç‰ˆæœ¬å·ä¸Šå»ï¼Œå˜æˆ<code>http://localhost/v1/student</code>ã€‚<br>å…·ä½“åŠŸèƒ½ä»£ç å®ç°å¦‚ä¸‹ï¼Œ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/v1/student', methods=['POST']) # è·¯å¾„ä¸º/v1/studentï¼Œæ–¹æ³•ä¸ºPOST</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_student</span><span class="params">()</span>:</span></span><br><span class="line">    data = request.get_data().decode(<span class="string">'utf-8'</span>)   <span class="comment"># å°†å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®è§£ç </span></span><br><span class="line">    json_data = json.loads(data)    <span class="comment"># å°†æ•°æ®è½¬ä¸ºJson</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Jsonä¸­è·å–æ•°æ®</span></span><br><span class="line">    name = json_data[<span class="string">'name'</span>]</span><br><span class="line">    number = str(json_data[<span class="string">'number'</span>])</span><br><span class="line">    python = json_data[<span class="string">'python'</span>]</span><br><span class="line">    cpp = json_data[<span class="string">'cpp'</span>]</span><br><span class="line">    os = json_data[<span class="string">'os'</span>]</span><br><span class="line">    network = json_data[<span class="string">'network'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ€»åˆ†å¹³å‡åˆ†</span></span><br><span class="line">    total = python + cpp + os + network</span><br><span class="line">    ave = total / <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¥å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">    sql = <span class="string">"SELECT COUNT(*) FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    count = cursor.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">if</span> count &gt;= <span class="number">1</span>:  <span class="comment"># è¯¥å­¦ç”Ÿä¿¡æ¯å·²ç»å­˜åœ¨ï¼Œè¿”å›400é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"student early exist"</span>), <span class="number">400</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line">    sql = <span class="string">"INSERT INTO student.marks (name, number, python, os, network, cpp, total, ave)"</span> \</span><br><span class="line">          <span class="string">"VALUES (\"%s\", \"%s\", %s, %s, %s, %s, %s, %s)"</span> % (name, number, python, os,</span><br><span class="line">                                                               network, cpp, total, ave)</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯·æ±‚æˆåŠŸï¼Œè¿”å›201çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">201</span></span><br></pre></td></tr></table></figure></p><h1 id="0X09-åˆ é™¤å·²ç»å­˜åœ¨çš„æ•°æ®"><a href="#0X09-åˆ é™¤å·²ç»å­˜åœ¨çš„æ•°æ®" class="headerlink" title="0X09 åˆ é™¤å·²ç»å­˜åœ¨çš„æ•°æ®"></a>0X09 åˆ é™¤å·²ç»å­˜åœ¨çš„æ•°æ®</h1><p>æ ¹æ®æ ‡å‡†ï¼Œå°†APIè®¾è®¡æˆ<code>DELETE</code>æ–¹æ³•ï¼ŒURLä¸º<code>http://localhost/v1/student/number=&lt;number&gt;</code><br>ç¬¬ä¸€è¡Œçš„<code>number=&lt;number&gt;</code>å¯ä»¥å°†urlä¸­ç¬¦åˆè¿™ç§è§„èŒƒçš„åŒ¹é…å‡ºæ¥ï¼Œé…åˆæ–¹æ³•å®šä¹‰æ—¶çš„å‚æ•°ï¼Œå¯ä»¥ç›´æ¥å°†urlå‚æ•°ä¼ å…¥åˆ°æ–¹æ³•ä½“ä¸­ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/v1/student/number=&lt;number&gt;', methods=['DELETE'])  # è·¯å¾„ä¸º/v1/student, æ–¹æ³•ä¸ºDELETE</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete_student</span><span class="params">(number)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> number.isdigit():    <span class="comment"># åˆ¤æ–­numberæ˜¯å¦åˆæ³•</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"number should be digit"</span>), <span class="number">403</span></span><br><span class="line">    sql = <span class="string">"DELETE FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">204</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0A-æŸ¥è¯¢å­¦ç”Ÿæˆç»©"><a href="#0X0A-æŸ¥è¯¢å­¦ç”Ÿæˆç»©" class="headerlink" title="0X0A æŸ¥è¯¢å­¦ç”Ÿæˆç»©"></a>0X0A æŸ¥è¯¢å­¦ç”Ÿæˆç»©</h1><p>æ ¹æ®æ ‡å‡†ï¼Œå°†APIè®¾è®¡æˆ<code>GET</code>æ–¹æ³•ï¼ŒURLä¸º<code>http://localhost/v1/student/sort_by=&lt;sort_by&gt;</code>ã€‚æä¾›äº†<code>python/cpp/network/os/total/ave</code>æ’åºæ–¹å¼ï¼Œï¼ˆå…¶å®æ˜¯æ•°æ®åº“å®ç°çš„ï¼‰ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/v1/student/sort_by=&lt;sort_by&gt;', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_student</span><span class="params">(sort_by)</span>:</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ’åºçš„keyæ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">if</span> sort_by <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">'python'</span>, <span class="string">'cpp'</span>, <span class="string">'os'</span>, <span class="string">'network'</span>, <span class="string">'total'</span>, <span class="string">'ave'</span>]:</span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"sort_by key not found"</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæŸ¥è¯¢SQL</span></span><br><span class="line">    sql = <span class="string">"SELECT name, number, python, cpp, os, network, total, ave FROM student.marks ORDER BY %s DESC"</span> % sort_by</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line">    res = cursor.fetchall() <span class="comment"># è·å–æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæŸ¥è¯¢ç»“æœJson</span></span><br><span class="line">    res_list = &#123;&#125;</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">        res_list[<span class="string">'item'</span> + str(count)] = &#123;</span><br><span class="line">            <span class="string">'name'</span>: i[<span class="number">0</span>],</span><br><span class="line">            <span class="string">'number'</span>: i[<span class="number">1</span>],</span><br><span class="line">            <span class="string">'python'</span>: i[<span class="number">2</span>],</span><br><span class="line">            <span class="string">'cpp'</span>: i[<span class="number">3</span>],</span><br><span class="line">            <span class="string">'os'</span>: i[<span class="number">4</span>],</span><br><span class="line">            <span class="string">'network'</span>: i[<span class="number">5</span>],</span><br><span class="line">            <span class="string">'total'</span>: i[<span class="number">6</span>],</span><br><span class="line">            <span class="string">'ave'</span>: [i[<span class="number">7</span>]]</span><br><span class="line">        &#125;</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> build_json(search_list=res_list), <span class="number">200</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0B-ä¿®æ”¹å­¦ç”Ÿæˆç»©"><a href="#0X0B-ä¿®æ”¹å­¦ç”Ÿæˆç»©" class="headerlink" title="0X0B ä¿®æ”¹å­¦ç”Ÿæˆç»©"></a>0X0B ä¿®æ”¹å­¦ç”Ÿæˆç»©</h1><p>ä¿®æ”¹å­¦ç”Ÿæˆç»©å’Œæ·»åŠ æˆç»©å‡ ä¹æ˜¯ä¸€æ ·çš„æ“ä½œï¼Œåªæœ‰è¿™ä¹ˆå‡ ç‚¹æ˜¯ä¸å¤ªä¸€æ ·çš„ã€‚æ·»åŠ ä¿¡æ¯æ—¶å¦‚æœå­¦å·å·²ç»å­˜åœ¨äº†é‚£å°±ä¸èƒ½å†æ·»åŠ äº†ï¼Œè€Œä¿®æ”¹çš„æ—¶å€™æ˜¯å¦‚æœå­¦å·ä¸å­˜åœ¨æ‰é”™è¯¯ï¼›æ·»åŠ å’Œä¿®æ”¹çš„SQLä¸åŒã€‚å°±æ²¡æœ‰åˆ«çš„åŒºåˆ«äº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/v1/student', methods=['PUT'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modify_student</span><span class="params">()</span>:</span></span><br><span class="line">    data = request.get_data().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    json_data = json.loads(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Jsonä¸­è·å–æ•°æ®</span></span><br><span class="line">    name = json_data[<span class="string">'name'</span>]</span><br><span class="line">    number = str(json_data[<span class="string">'number'</span>])</span><br><span class="line">    python = json_data[<span class="string">'python'</span>]</span><br><span class="line">    cpp = json_data[<span class="string">'cpp'</span>]</span><br><span class="line">    os = json_data[<span class="string">'os'</span>]</span><br><span class="line">    network = json_data[<span class="string">'network'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¥å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">    sql = <span class="string">"SELECT COUNT(*) FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    count = cursor.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">if</span> count &lt; <span class="number">1</span>:  <span class="comment"># è¯¥å­¦ç”Ÿä¿¡æ¯ä¸å­˜åœ¨ï¼Œè¿”å›404é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"student not found"</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ€»åˆ†å¹³å‡åˆ†</span></span><br><span class="line">    total = python + cpp + os + network</span><br><span class="line">    ave = total / <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line">    sql = <span class="string">"UPDATE student.marks SET name=\"%s\", python=%s, cpp=%s, os=%s, network=%s, total=%s, ave=%s WHERE number=\"%s\""</span> % (name, python, cpp, os, network, total, ave, number)</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯·æ±‚æˆåŠŸï¼Œè¿”å›201çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">201</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0C-æå®šæ‰€æœ‰API"><a href="#0X0C-æå®šæ‰€æœ‰API" class="headerlink" title="0X0C æå®šæ‰€æœ‰API"></a>0X0C æå®šæ‰€æœ‰API</h1><p>ç°åœ¨å°±æå®šäº†æ‰€æœ‰çš„APIç¼–å†™ã€‚ç°åœ¨æˆ‘æŠŠæ‰€æœ‰ä»£ç è´´ä¸Šæ¥ï¼Œæ³¨æ„è¿™æ®µä»£ç æ˜¯ç”¨äºPython3çš„ã€‚å¦‚æœéœ€è¦æµ‹è¯•çš„è¯å¯ä»¥ç”¨Pythonè‡ªå¸¦çš„<code>requests</code>æ¨¡å—æˆ–è€…<span class="exturl" data-url="aHR0cHM6Ly93d3cuZ2V0cG9zdG1hbi5jb20=" title="https://www.getpostman.com">Postmanè½¯ä»¶<i class="fa fa-external-link"></i></span>æ¥æµ‹è¯•è¯¥APIã€‚</p><ul><li>å£°æ˜ï¼šä»£ç æœ€åä¸€è¡Œçš„<code>app.run()</code>æ–¹æ³•ï¼Œç°åœ¨æ˜¯åªåœ¨æœ¬åœ°ç›‘å¬çš„ã€‚å¯ä»¥æ”¹æˆ<code>app.run(&#39;0.0.0.0&#39;)</code>å°±å¯¹å¤–éƒ¨ç›‘å¬äº†ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment"># @Time    : 2017/6/3 11:34</span></span><br><span class="line"><span class="comment"># @Author  : Shawn</span></span><br><span class="line"><span class="comment"># @Blog    : https://blog.just666.cn</span></span><br><span class="line"><span class="comment"># @Email   : shawnbluce@gmail.com</span></span><br><span class="line"><span class="comment"># @purpose : æ¼”ç¤ºPython_API</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">database = pymysql.connect(<span class="string">"115.29.52.14"</span>, <span class="string">"shawn"</span>, <span class="string">"zhangHAO8"</span>, <span class="string">"student"</span>)</span><br><span class="line">cursor = database.cursor()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_json</span><span class="params">(search_list=None, e_msg=None)</span> -&gt; str:</span></span><br><span class="line">    json_data = &#123;<span class="string">'time'</span>: time.time(), <span class="string">'search_list'</span>: search_list, <span class="string">'e_msg'</span>: e_msg&#125;</span><br><span class="line">    <span class="keyword">return</span> json.dumps(json_data)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;hello,world&lt;/h1&gt;'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/v1/student', methods=['POST']) # è·¯å¾„ä¸º/v1/studentï¼Œæ–¹æ³•ä¸ºPOST</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_student</span><span class="params">()</span>:</span></span><br><span class="line">    data = request.get_data().decode(<span class="string">'utf-8'</span>)   <span class="comment"># å°†å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®è§£ç </span></span><br><span class="line">    json_data = json.loads(data)    <span class="comment"># å°†æ•°æ®è½¬ä¸ºJson</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Jsonä¸­è·å–æ•°æ®</span></span><br><span class="line">    name = json_data[<span class="string">'name'</span>]</span><br><span class="line">    number = str(json_data[<span class="string">'number'</span>])</span><br><span class="line">    python = json_data[<span class="string">'python'</span>]</span><br><span class="line">    cpp = json_data[<span class="string">'cpp'</span>]</span><br><span class="line">    os = json_data[<span class="string">'os'</span>]</span><br><span class="line">    network = json_data[<span class="string">'network'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ€»åˆ†å¹³å‡åˆ†</span></span><br><span class="line">    total = python + cpp + os + network</span><br><span class="line">    ave = total / <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¥å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">    sql = <span class="string">"SELECT COUNT(*) FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    count = cursor.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">if</span> count &gt;= <span class="number">1</span>:  <span class="comment"># è¯¥å­¦ç”Ÿä¿¡æ¯å·²ç»å­˜åœ¨ï¼Œè¿”å›400é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"student early exist"</span>), <span class="number">400</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line">    sql = <span class="string">"INSERT INTO student.marks (name, number, python, os, network, cpp, total, ave)"</span> \</span><br><span class="line">          <span class="string">"VALUES (\"%s\", \"%s\", %s, %s, %s, %s, %s, %s)"</span> % (name, number, python, os,</span><br><span class="line">                                                               network, cpp, total, ave)</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯·æ±‚æˆåŠŸï¼Œè¿”å›201çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">201</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/v1/student/number=&lt;number&gt;', methods=['DELETE'])  # è·¯å¾„ä¸º/v1/student, æ–¹æ³•ä¸ºDELETE</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete_student</span><span class="params">(number)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> number.isdigit():    <span class="comment"># åˆ¤æ–­numberæ˜¯å¦åˆæ³•</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"number should be digit"</span>), <span class="number">403</span></span><br><span class="line">    sql = <span class="string">"DELETE FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">204</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/v1/student/sort_by=&lt;sort_by&gt;', methods=['GET'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_student</span><span class="params">(sort_by)</span>:</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ’åºçš„keyæ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    <span class="keyword">if</span> sort_by <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">'python'</span>, <span class="string">'cpp'</span>, <span class="string">'os'</span>, <span class="string">'network'</span>, <span class="string">'total'</span>, <span class="string">'ave'</span>]:</span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"sort_by key not found"</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæŸ¥è¯¢SQL</span></span><br><span class="line">    sql = <span class="string">"SELECT name, number, python, cpp, os, network, total, ave FROM student.marks ORDER BY %s DESC"</span> % sort_by</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line">    res = cursor.fetchall()  <span class="comment"># è·å–æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ„å»ºæŸ¥è¯¢ç»“æœJson</span></span><br><span class="line">    res_list = &#123;&#125;</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">        res_list[<span class="string">'item'</span> + str(count)] = &#123;</span><br><span class="line">            <span class="string">'name'</span>: i[<span class="number">0</span>],</span><br><span class="line">            <span class="string">'number'</span>: i[<span class="number">1</span>],</span><br><span class="line">            <span class="string">'python'</span>: i[<span class="number">2</span>],</span><br><span class="line">            <span class="string">'cpp'</span>: i[<span class="number">3</span>],</span><br><span class="line">            <span class="string">'os'</span>: i[<span class="number">4</span>],</span><br><span class="line">            <span class="string">'network'</span>: i[<span class="number">5</span>],</span><br><span class="line">            <span class="string">'total'</span>: i[<span class="number">6</span>],</span><br><span class="line">            <span class="string">'ave'</span>: [i[<span class="number">7</span>]]</span><br><span class="line">        &#125;</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> build_json(search_list=res_list), <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/v1/student', methods=['PUT'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">modify_student</span><span class="params">()</span>:</span></span><br><span class="line">    data = request.get_data().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    json_data = json.loads(data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»Jsonä¸­è·å–æ•°æ®</span></span><br><span class="line">    name = json_data[<span class="string">'name'</span>]</span><br><span class="line">    number = str(json_data[<span class="string">'number'</span>])</span><br><span class="line">    python = json_data[<span class="string">'python'</span>]</span><br><span class="line">    cpp = json_data[<span class="string">'cpp'</span>]</span><br><span class="line">    os = json_data[<span class="string">'os'</span>]</span><br><span class="line">    network = json_data[<span class="string">'network'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¥å­¦ç”Ÿçš„ä¿¡æ¯</span></span><br><span class="line">    sql = <span class="string">"SELECT COUNT(*) FROM student.marks WHERE number=\"%s\""</span> % number</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    count = cursor.fetchall()[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    database.commit()</span><br><span class="line">    <span class="keyword">if</span> count &lt; <span class="number">1</span>:  <span class="comment"># è¯¥å­¦ç”Ÿä¿¡æ¯ä¸å­˜åœ¨ï¼Œè¿”å›404é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span> build_json(e_msg=<span class="string">"student not found"</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æ€»åˆ†å¹³å‡åˆ†</span></span><br><span class="line">    total = python + cpp + os + network</span><br><span class="line">    ave = total / <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘æ•°æ®åº“ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line">    sql = <span class="string">"UPDATE student.marks SET name=\"%s\", python=%s, cpp=%s, os=%s, network=%s, total=%s, ave=%s WHERE number=\"%s\""</span> \</span><br><span class="line">          % (name, python, cpp, os, network, total, ave, number)</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    database.commit()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯·æ±‚æˆåŠŸï¼Œè¿”å›201çŠ¶æ€ç </span></span><br><span class="line">    <span class="keyword">return</span> build_json(), <span class="number">201</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> app.test_request_context():</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Flask </tag>
            
            <tag> API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­OSåº“çš„å¸¸ç”¨æ–¹æ³•</title>
      <link href="/2017/04/01/python-os-lib/"/>
      <url>/2017/04/01/python-os-lib/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å†™ä¸€äº›ç³»ç»Ÿè„šæœ¬æˆ–è€…è‡ªåŠ¨åŒ–è¿ç»´è„šæœ¬çš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ°osåº“ï¼Œè¿™é‡Œåšä¸ªæ•´ç†ï¼Œæ–¹ä¾¿æŸ¥æ‰¾</p><h3 id="os-sep"><a href="#os-sep" class="headerlink" title="os.sep"></a>os.sep</h3><p>è·å¾—å½“å‰æ“ä½œç³»ç»Ÿä½¿ç”¨çš„ç›®å½•åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚Windowså°±ä¼šå¾—åˆ°<code>\</code>è€ŒLinux/Unixå°±ä¼šå¾—åˆ°<code>/</code></p><h3 id="os-name"><a href="#os-name" class="headerlink" title="os.name"></a>os.name</h3><p>è·å¾—å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼ŒWindowsæ˜¯NTå†…æ ¸ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°<code>nt</code>ï¼Œè€ŒLinux/Unixç”¨æˆ·åˆ™ä¼šå¾—åˆ°<code>posix</code></p><h3 id="os-getcwd"><a href="#os-getcwd" class="headerlink" title="os.getcwd()"></a>os.getcwd()</h3><p>è·å¾—å½“å‰å·¥ä½œç›®å½•ï¼Œå³å½“å‰Pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„ã€‚</p><h3 id="os-getenv"><a href="#os-getenv" class="headerlink" title="os.getenv()"></a>os.getenv()</h3><p>ç”¨æ¥è·å¾—ç¯å¢ƒå˜é‡<br><code>os.getenv(&#39;PATH&#39;)</code></p><a id="more"></a><h3 id="os-environ"><a href="#os-environ" class="headerlink" title="os.environ"></a>os.environ</h3><p>å¯ä»¥è·å–å¹¶ä¿®æ”¹ç¯å¢ƒå˜é‡<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(os.environ[<span class="string">'PATH'</span>])</span><br><span class="line">os.environ += <span class="string">'D:/testdir/bin/'</span></span><br><span class="line">print(os.environ[<span class="string">"PATH"</span>])</span><br></pre></td></tr></table></figure></p><h3 id="os-listdir"><a href="#os-listdir" class="headerlink" title="os.listdir()"></a>os.listdir()</h3><p>åˆ—å‡ºæŸç›®å½•ä¸‹æ‰€æœ‰çš„ç›®å½•å’Œæ–‡ä»¶<br><code>print(os.listdir())</code></p><h3 id="os-remove"><a href="#os-remove" class="headerlink" title="os.remove()"></a>os.remove()</h3><p>åˆ é™¤æ–‡ä»¶<br><code>os.remove(&#39;D:/test.file&#39;)</code></p><h3 id="os-system"><a href="#os-system" class="headerlink" title="os.system()"></a>os.system()</h3><p>è¿è¡ŒShellæˆ–è€…CMDå‘½ä»¤<br><code>os.system(&#39;ifconfig&#39;)</code></p><h3 id="os-linesep"><a href="#os-linesep" class="headerlink" title="os.linesep"></a>os.linesep</h3><p>è·å–å½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦ã€‚ä¾‹å¦‚ï¼ŒWindowsä½¿ç”¨<code>\r\n</code>ï¼ŒLinuxä½¿ç”¨<code>\n</code>è€ŒMacä½¿ç”¨<code>\r</code>ã€‚</p><h3 id="os-path-split"><a href="#os-path-split" class="headerlink" title="os.path.split()"></a>os.path.split()</h3><p>è·å¾—ä¸€ä¸ªåˆ—è¡¨ï¼Œlist[0]æ˜¯è·¯å¾„çš„ï¼Œlist[1]æ˜¯æ–‡ä»¶å<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'D:/game/gtav/bin/gtav.exe'</span></span><br><span class="line">print(os.path.split(path)[<span class="number">0</span>])</span><br><span class="line">print(os.path.split(path)[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p><h3 id="os-path-isfile-å’Œos-path-isdir"><a href="#os-path-isfile-å’Œos-path-isdir" class="headerlink" title="os.path.isfile()å’Œos.path.isdir()"></a>os.path.isfile()å’Œos.path.isdir()</h3><p>åˆ¤æ–­è·¯å¾„æ˜¯ä¸æ˜¯æ–‡ä»¶/ç›®å½•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(os.path.isfile(<span class="string">'D:/game/gtav/bin/gtav.exe'</span>))</span><br><span class="line">print(os.path.isdir(<span class="string">'D:/game/gtav/bin'</span>))</span><br></pre></td></tr></table></figure></p><h3 id="os-path-existe"><a href="#os-path-existe" class="headerlink" title="os.path.existe()"></a>os.path.existe()</h3><p>å‡½æ•°ç”¨æ¥æ£€éªŒç»™å‡ºçš„è·¯å¾„æ˜¯å¦çœŸåœ°å­˜åœ¨<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'D:\\hadoop-2.6.5\\bin'</span></span><br><span class="line">print(os.path.exists(path))</span><br><span class="line">path = <span class="string">'D:\\hadoop-2.6.5\\bin\\hadoop'</span></span><br><span class="line">print(os.path.exists(path))</span><br></pre></td></tr></table></figure></p><h3 id="os-chdir-dirname"><a href="#os-chdir-dirname" class="headerlink" title="os.chdir(dirname)"></a>os.chdir(dirname)</h3><p>åˆ‡æ¢å·¥ä½œç›®å½•ï¼Œç›¸å½“äº<code>cd</code>çš„å‘½ä»¤<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">'D:/game/gtav/'</span>)</span><br><span class="line">print(os.getcwd())</span><br></pre></td></tr></table></figure></p><h3 id="os-path-getsize-name"><a href="#os-path-getsize-name" class="headerlink" title="os.path.getsize(name)"></a>os.path.getsize(name)</h3><p>è·å–æ–‡ä»¶å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">size = os.path.getsize(<span class="string">'D:/iso/debian-8.6.0-amd64-DVD-1.iso'</span>)</span><br><span class="line">print(size/<span class="number">1024</span>/<span class="number">1024</span>/<span class="number">1024</span>, <span class="string">'GB'</span>)</span><br></pre></td></tr></table></figure></p><h3 id="os-path-abspath-name"><a href="#os-path-abspath-name" class="headerlink" title="os.path.abspath(name)"></a>os.path.abspath(name)</h3><p>è·å–ç»å¯¹è·¯å¾„ï¼Œå¦‚æœåœ¨Pythonå·¥ä½œç›®å½•ä¸‹æœ‰ä¸€ä¸ªæ–‡ä»¶<code>file.txt</code>ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ç›´æ¥<code>open(&#39;file.txt&#39;)</code>ï¼Œä¹Ÿå¯ä»¥ç”¨è¯¥æ–¹æ³•è·å¾—å…¶ç»å¯¹è·¯å¾„<code>print(os.path.abspath(&#39;file.txt&#39;))</code>ã€‚ä¹Ÿå¯ä»¥ç”¨æ¥è§„èŒƒè·¯å¾„å­—ç¬¦ä¸²<code>print(os.path.abspath(&#39;D:/game\gtav\bin/gtav.exe&#39;))</code></p><h3 id="os-path-normpath-path"><a href="#os-path-normpath-path" class="headerlink" title="os.path.normpath(path)"></a>os.path.normpath(path)</h3><p>ä¸“é—¨ç”¨æ¥è§„èŒƒè·¯å¾„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'D:/test/sdf\zfb'</span></span><br><span class="line">print(os.path.normpath(path))</span><br></pre></td></tr></table></figure></p><h3 id="os-path-splitext"><a href="#os-path-splitext" class="headerlink" title="os.path.splitext()"></a>os.path.splitext()</h3><p>è·å–æ–‡ä»¶åå’Œæ‰©å±•å<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'/home/shawn/hello.py'</span></span><br><span class="line">print(os.path.splitext(path))</span><br></pre></td></tr></table></figure></p><h3 id="os-path-join-path-name"><a href="#os-path-join-path-name" class="headerlink" title="os.path.join(path,name)"></a>os.path.join(path,name)</h3><p>è¿æ¥ç›®å½•å’Œæ–‡ä»¶åï¼Œå¯ä»¥ä¸ç”¨è‡ªå·±æ·»åŠ åˆ†éš”ç¬¦ï¼Œèƒ½å‡å°‘bugç‡æå‡è·¨å¹³å°æ€§</p><h3 id="os-path-basename-path"><a href="#os-path-basename-path" class="headerlink" title="os.path.basename(path)"></a>os.path.basename(path)</h3><p>è·å–è·¯å¾„ä¸­çš„æ–‡ä»¶å</p><h3 id="os-path-dirname-path"><a href="#os-path-dirname-path" class="headerlink" title="os.path.dirname(path)"></a>os.path.dirname(path)</h3><p>è·å–è·¯å¾„ä¸­çš„ç›®å½•å</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…æHDFS</title>
      <link href="/2017/03/06/hdfs-simple/"/>
      <url>/2017/03/06/hdfs-simple/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-HDFSçš„è®¾è®¡"><a href="#0X00-HDFSçš„è®¾è®¡" class="headerlink" title="0X00 HDFSçš„è®¾è®¡"></a>0X00 HDFSçš„è®¾è®¡</h1><p>HDFSä½œä¸ºGFSçš„å¼€æºå®ç°ï¼Œå’ŒGFSæ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚åœ¨HDFSä¸­æœ‰ç€ä¸‹é¢çš„ä¼˜ç‚¹</p><ol><li>å¯¹è¶…å¤§æ–‡ä»¶æ”¯æŒè‰¯å¥½ï¼Œç”±äºå…¶åˆ†å¸ƒå¼å®ç°ï¼Œå¯ä»¥å­˜å‚¨è¶…å¤§æ–‡ä»¶ï¼Œç”šè‡³å•ä¸ªæ–‡ä»¶å¤§å°å¯ä»¥è¶…è¿‡é›†ç¾¤ä¸­ä»»æ„ä¸€å°æœºå™¨çš„ç£ç›˜å¤§å°</li><li>é‡‡ç”¨æµå¼æ•°æ®è®¿é—®ï¼Œä¸€æ¬¡å†™å…¥ã€å¤šæ¬¡è¯»å–æ˜¯æœ€é«˜æ•ˆçš„è®¿é—®æ¨¡å¼ã€‚å› ä¸ºHadoopä½œä¸ºä¸€ä¸ªå¤§æ•°æ®å¤„ç†å¹³å°ï¼Œå¹¶æ²¡æœ‰é¢‘ç¹çš„å†™å…¥æ“ä½œï¼Œåªæ˜¯åœ¨éœ€è¦çš„æ—¶å€™ä¸€æ¬¡å°†å¤§é‡çš„æ•°æ®å†™å…¥ç„¶ååœ¨å¯¹è¿™äº›æ•°æ®è¿›è¡Œè¯»æ“ä½œ</li><li>Hadoopå¹¶ä¸éœ€è¦è¿è¡Œåœ¨æ˜‚è´µä¸”é«˜å¯é çš„ç¡¬ä»¶ä¹‹ä¸Šï¼Œå•ä¸ªèŠ‚ç‚¹å¯èƒ½æ€§èƒ½å¯é æ€§éƒ½å‚å·®ä¸é½ï¼Œä½†æ˜¯ç”±äºå…¶é«˜å¯é æ€§çš„è®¾è®¡ï¼Œä½¿ä¹‹èƒ½åœ¨é‡åˆ°èŠ‚ç‚¹æ•…éšœæ—¶ç»§ç»­è¿è¡Œä¸”ä¸è®©ç”¨æˆ·å¯Ÿè§‰åˆ°æ˜æ˜¾çš„ç»ˆç«¯</li></ol><p>ä½†æ˜¯HDFSä¹Ÿä¸æ˜¯é€‚ç”¨äºå„ç§åœºæ™¯ï¼Œä¸€ä¸‹çš„å‡ ç§åœºæ™¯å°±ä¸é€‚</p><ol><li>ä½æ—¶é—´å»¶è¿Ÿçš„æ•°æ®è®¿é—®ï¼Œå› ä¸ºHDFSæ˜¯ä»¥æ—¶é—´å»¶è¿Ÿä¸ºä»£ä»·é’ˆå¯¹é«˜æ•°æ®ååé‡ä¼˜åŒ–çš„ï¼Œæ‰€ä»¥HDFSä¸é€‚ç”¨ä¸ä½å»¶è¿Ÿçš„æ•°æ®è®¿é—®</li><li>å¤§é‡çš„å°æ–‡ä»¶ï¼Œå› ä¸ºNamenodeçš„è®¾è®¡æ˜¯å°†æ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥ç†è®ºä¸ŠHDFSä¸­çš„æ–‡ä»¶æœ€å¤§æ•°é‡å—é™äºNamenodeçš„å†…å­˜å®¹é‡ï¼Œå› æ­¤å¤§é‡çš„å°æ–‡ä»¶ä¼šå ç”¨Namenodeå¤§é‡çš„å†…å­˜</li><li>HDFSç›®å‰ä¸æ”¯æŒæœ‰å¤šä¸ªå†™å…¥è€…çš„æ“ä½œï¼Œä¹Ÿä¸æ”¯æŒä¿®æ”¹æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶</li></ol><a id="more"></a><h1 id="0X01-æ•°æ®å—çš„è®¾è®¡"><a href="#0X01-æ•°æ®å—çš„è®¾è®¡" class="headerlink" title="0X01 æ•°æ®å—çš„è®¾è®¡"></a>0X01 æ•°æ®å—çš„è®¾è®¡</h1><p>æˆ‘ä»¬çŸ¥é“åœ¨ä¼ ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­å°±æ˜¯åˆ†å—çš„ï¼Œå¯»å€å¼€é”€ä¸åˆ†å—çš„å¤§å°æˆè´Ÿç›¸å…³ï¼Œç£ç›˜åˆ©ç”¨ç‡ä¸åˆ†å—å¤§å°æˆè´Ÿç›¸å…³ã€‚ä¸”HDFSçš„è®¾è®¡å°±æ˜¯ç”¨æ¥å¤„ç†å¤§æ–‡ä»¶çš„ï¼Œæ‰€ä»¥å°†å—è®¾è®¡çš„å¾ˆå¤§ï¼Œé»˜è®¤ä¸º64MBä¸”å¥½å¤šæ—¶å€™é‡‡ç”¨çš„æ˜¯128MBçš„è®¾ç½®ã€‚</p><p>åœ¨HDFSä¸­çš„å—è®¾è®¡å’Œä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿæœ‰äº›ä¸åŒï¼Œåœ¨ä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸­å‡è®¾ä¸€ä¸ªå—ä¸º4kbï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶åªæœ‰1kbåˆ™ä»ç„¶ä¼šå ç”¨4kbçš„ç©ºé—´ï¼Œä½†æ˜¯åœ¨HDFSä¸­ä¸€ä¸ªå°äºå—å¤§å°çš„æ–‡ä»¶å¹¶ä¸ä¼šå æ®æ•´ä¸ªå—çš„ç©ºé—´ã€‚</p><p><img src="https://blog.just666.cn/usr/uploads/hdfs_arch.png" alt="HDFSæ¶æ„"></p><h1 id="0X02-Namenodeå’ŒDatanode"><a href="#0X02-Namenodeå’ŒDatanode" class="headerlink" title="0X02 Namenodeå’ŒDatanode"></a>0X02 Namenodeå’ŒDatanode</h1><p>HDFSä¸­æœ‰ä¸¤ç§èŠ‚ç‚¹ï¼ŒNamenodeå’ŒDatanodeã€‚</p><p>å…¶ä¸­Namenodeç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„å‘½åç©ºé—´ï¼Œä»–ç»´æŠ¤ç€æ–‡ä»¶ç³»ç»Ÿæ ‘å’Œæ•´æ£µæ ‘å†…æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ã€‚</p><p>å…¶ä¸­çš„Datanodeè´Ÿè´£å­˜å‚¨å¹¶æ£€ç´¢æ•°æ®å—ï¼Œä¸”å®šæœŸå‘Namenodeå‘é€å­˜å‚¨çš„å—çš„åˆ—è¡¨ã€‚</p><h1 id="0X03-Namenodeå®¹é”™æœºåˆ¶"><a href="#0X03-Namenodeå®¹é”™æœºåˆ¶" class="headerlink" title="0X03 Namenodeå®¹é”™æœºåˆ¶"></a>0X03 Namenodeå®¹é”™æœºåˆ¶</h1><p>Namenodeæœ‰ä¸¤ç§å¸¸ç”¨çš„å®¹é”™æœºåˆ¶ï¼Œç¬¬ä¸€ç§æ˜¯å®æ—¶å°†è‡ªå·±çš„æ“ä½œå’Œæ–‡ä»¶åŒæ­¥åˆ°NFSä¸Šï¼Œä¸”æ˜¯åŸå­æ“ä½œæ‰€ä»¥NFSä¸Šä¼šæœ‰å’ŒNamenodeå®Œå…¨ç›¸åŒçš„æ–‡ä»¶ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯è¿è¡Œä¸€ä¸ªè¾…åŠ©çš„Namenodeï¼Œå®šæœŸé€šè¿‡ç¼–è¾‘æ—¥å¿—åˆå¹¶å‘½åç©ºé—´é•œåƒã€‚</p><h1 id="0X04-è”é‚¦HDFS"><a href="#0X04-è”é‚¦HDFS" class="headerlink" title="0X04 è”é‚¦HDFS"></a>0X04 è”é‚¦HDFS</h1><p>æ¯•ç«ŸHDFSæ˜¯ä¸ºå¤„ç†æµ·é‡æ•°æ®è¯ç”Ÿçš„ï¼Œæ‰€ä»¥é¿å…ä¸äº†æµ·é‡çš„é›†ç¾¤æ¥æ­å»ºHDFSï¼Œä½†æ˜¯å‰é¢ä¹Ÿè¯´è¿‡å› ä¸ºè®¾è®¡çš„é—®é¢˜å¯¼è‡´ä¸€ä¸ªæ‹¥æœ‰å¤§é‡æ–‡ä»¶çš„é›†ç¾¤ä¼šå¯¹Namenodeçš„å†…å­˜é€ æˆä¸¥å³»çš„è€ƒéªŒï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨è”é‚¦HDFSæ¥è§£å†³ã€‚åœ¨è”é‚¦ç¯å¢ƒä¸‹å¯ä»¥é…ç½®å¤šä¸ªNamenodeï¼Œæ¯ä¸ªNamenodeè´Ÿè´£ç»´æŠ¤ä¸€ä¸ªå‘½åç©ºé—´å·ã€‚ä¹Ÿå°±ç›¸å½“äºæ¯ä¸ªNamenodeè´Ÿè´£ä¸€ä¸ªç›®å½•æ ‘ä¸­çš„å­ç›®å½•ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯åœ¨HDFSä¸­æœ‰å¤§é‡æ–‡ä»¶çš„æ—¶å€™ä¹Ÿä¸ä¼šå¯¹Namenodeé€ æˆå¤ªå¤§çš„å¨èƒã€‚</p><h1 id="0X05-é«˜å¯ç”¨æ€§"><a href="#0X05-é«˜å¯ç”¨æ€§" class="headerlink" title="0X05 é«˜å¯ç”¨æ€§"></a>0X05 é«˜å¯ç”¨æ€§</h1><p>è™½ç„¶Namenodeæœ‰äº†å¤‡ä»½ä½†æ˜¯è¿˜æ˜¯å­˜åœ¨Namenodeçš„å•ç‚¹é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´å½“Namenodeå‡ºç°æ•…éšœä¹‹åä¾æ—§ä¼šå¯¹HDFSæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿé€ æˆå½±å“ï¼Œè™½ç„¶æœ‰å¤‡ä»½ä½†æ˜¯è¿˜æ˜¯è¦ç­‰åˆ°æœ‰ä¸‹ä¸€å°NamenodeèŠ‚ç‚¹ä¸Šçº¿ä¹‹åæ‰ä¼šè¿è¡Œï¼Œæ‰€ä»¥å½“æ—¶è¿è¡Œçš„MapReduceç­‰ç¨‹åºä¾ç„¶ä¼šç»ˆæ­¢ã€‚é’ˆå¯¹è¿™ç§é—®é¢˜Hadoopåœ¨2.xä¸­åšå‡ºäº†é€‚å½“çš„å¤„ç†ã€‚å¯ä»¥é…ç½®ä¸€å¯¹æ´»åŠ¨-å¤‡ç”¨çš„Namenodeç”¨äºåšçƒ­å¤‡ä»½ã€‚</p><ol><li>Namenodeä¹‹é—´å¯ä»¥å…±äº«ç¼–è¾‘æ—¥å¿—ï¼Œä¸”ä½¿ç”¨é«˜å¯ç”¨çš„æ–¹å¼å®ç°å…±äº«å­˜å‚¨</li><li>Datanodeéœ€è¦åŒæ—¶å‘ä¸¤ä¸ªNamenodeå‘é€æ•°æ®å—å¤„ç†æŠ¥å‘Šï¼Œå› ä¸ºè¦ä¿æŒä¸¤ä¸ªNamenodeå®Œå…¨ç›¸åŒ</li></ol><p>åœ¨è¿™æ ·çš„é…ç½®ä¹‹ä¸‹å½“æ´»åŠ¨çš„Namenodeæ•…éšœä»¥åå¤‡ç”¨çš„Namenodeå¯ä»¥åœ¨å‡ åç§’å†…å®ç°ä»»åŠ¡æ¥ç®¡ã€‚ä¸”åœ¨å¤‡ç”¨çš„Namenodeä¹Ÿå¤±æ•ˆçš„æƒ…å†µä¸‹è¿˜å¯ä»¥é€šè¿‡é…ç½®æ¥æŒ‡å®šå¦ä¸€å°å¤‡ç”¨Namenodeç”¨äºåšå†·å¯åŠ¨ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> File System </tag>
            
            <tag> HDFS </tag>
            
            <tag> Big Data </tag>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„å­—ç¬¦ä¸²</title>
      <link href="/2017/02/13/java-str/"/>
      <url>/2017/02/13/java-str/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Stringç±»ä¸­æ¯ä¸€ä¸ªçœ‹èµ·æ¥ä¼šä¿®æ”¹Stringå€¼å¾—æ–¹æ³•ï¼Œå®é™…ä¸Šéƒ½æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„Stringå¯¹è±¡ï¼Œä»¥åŒ…å«ä¿®æ”¹åçš„å­—ç¬¦ä¸²å†…å®¹ã€‚è€Œæœ€åˆçš„Stringå¯¹è±¡åˆ™ä¸æ¯«æœªåŠ¨ã€‚   â€”ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ç¬¬13ç« </p></blockquote><h1 id="0X00-Stringå¸¸é‡æ± "><a href="#0X00-Stringå¸¸é‡æ± " class="headerlink" title="0X00 Stringå¸¸é‡æ± "></a>0X00 Stringå¸¸é‡æ± </h1><p>å¦‚æœä½¿ç”¨å¸¸ç”¨çš„æ–¹å¼å®šä¹‰ä¸¤ä¸ªå†…å®¹å®Œå…¨ä¸€æ ·çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆJavaä½¿ç”¨å¸¸é‡çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å¹¶æ²¡æœ‰ç”Ÿæˆä¸€ä¸ªå¯¹è±¡è€Œæ˜¯å¼•ç”¨äº†ä¹‹å‰çš„å­—ç¬¦ä¸²ï¼Œå¯¼è‡´ä»–ä»¬çš„æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å½“ä½¿ç”¨<code>==</code>åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ˜¾ç¤ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ¯æ¬¡å£°æ˜ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ—¶å€™ä½¿ç”¨<code>new String()</code>çš„æ–¹å¼ï¼Œåˆ™ä¼šæ¯æ¬¡åˆ›å»ºä¸€ä¸ªStringå¯¹è±¡ï¼Œä¸¤è€…å°±ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line"><span class="comment">// ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²å¼•ç”¨è‡ªåŒä¸€å¤„</span></span><br><span class="line">        String str1 = <span class="string">"hello,world"</span>;</span><br><span class="line">        String str2 = <span class="string">"hello,world"</span>;</span><br><span class="line">        System.out.println(str1 == str2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å°±æ˜¯æ¯æ¬¡ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">        String str3 = <span class="keyword">new</span> String(<span class="string">"hello,world"</span>);</span><br><span class="line">        String str4 = <span class="keyword">new</span> String(<span class="string">"hello,world"</span>);</span><br><span class="line">        System.out.println(str3 == str4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="0X01-StringBuilder"><a href="#0X01-StringBuilder" class="headerlink" title="0X01 StringBuilder"></a>0X01 StringBuilder</h1><p>å­—ç¬¦ä¸²çš„æ‹¼æ¥åœ¨Javaä¸­éå¸¸æ–¹ä¾¿ï¼Œä½†å¸¸ç”¨çš„ä½¿ç”¨<code>+</code>æ¥æ‹¼æ¥å­—ç¬¦ä¸²æ•ˆç‡å¾ˆä½ï¼Œåœ¨éœ€è¦æ‹¼æ¥çš„æ¬¡æ•°ä¸æ˜¯å¾ˆå¤šçš„æ—¶å€™ä¸ä¼šå½±å“å¤šå°‘æ•ˆç‡ï¼Œä½†å½“éœ€è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²æ•°é‡å¾ˆå¤šçš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨<code>StringBuilder</code>æ¥æ‹¼æ¥ã€‚è¯¥ç±»ä¸­æœ‰ä¸€ä¸ª<code>append()</code>çš„æ–¹æ³•ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿æ¥åˆ°æœ¬å¯¹è±¡çš„å­—ç¬¦ä¸²åé¢ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ä¸ªæ‹¼æ¥æ–¹æ³•çš„é€Ÿåº¦å·®å¼‚ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String string = <span class="string">"hello,world"</span>;</span><br><span class="line">        <span class="keyword">long</span> start = <span class="keyword">new</span> Date().getTime();</span><br><span class="line"><span class="comment">// å¾ªç¯è¿æ¥1Wæ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;</span><br><span class="line">            string += <span class="string">"hello,world"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> middle = <span class="keyword">new</span> Date().getTime();</span><br><span class="line"></span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">"hello,world"</span>);</span><br><span class="line"><span class="comment">// å¾ªç¯è¿æ¥1000Wæ¬¡</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++)&#123;</span><br><span class="line">            stringBuilder.append(<span class="string">"hello,world"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = <span class="keyword">new</span> Date().getTime();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨+è¿æ¥è€—æ—¶: "</span> + (middle - start));</span><br><span class="line">        System.out.println(<span class="string">"ä½¿ç”¨StringBuilderè¿æ¥è€—æ—¶: "</span> + (end - middle));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œç»“æœå¦‚ä¸‹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨+è¿æ¥è€—æ—¶: 850</span><br><span class="line">ä½¿ç”¨StringBuilderè¿æ¥è€—æ—¶: 263</span><br></pre></td></tr></table></figure></p><p>é€Ÿåº¦å·®å¼‚å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨åŠ å·è¿æ¥åªè¿æ¥ä¸€ä¸‡æ¬¡å°±è€—æ—¶800å¤šæ¯«ç§’ï¼Œè€Œä½¿ç”¨StringBuilderå³ä½¿è¿æ¥ä¸€åƒä¸‡æ¬¡ä¹Ÿåªéœ€è¦200å¤šæ¯«ç§’ã€‚</p><p>è¯¥ç±»ä¸­è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•<code>insert()æŒ‡å®šä½ç½®æ’å…¥</code> / <code>replace()åˆ†ç‰‡èµ‹å€¼</code> / <code>substring()æå–å­å­—ç¬¦ä¸²</code> / <code>reverse()ç¿»è½¬å­—ç¬¦ä¸²</code> / <code>toString()è¿”å›å­—ç¬¦ä¸²</code><br>ä½¿ç”¨æ¼”ç¤º<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">"0123456789"</span>);</span><br><span class="line">        stringBuilder.insert(<span class="number">5</span>, <span class="string">"hello,world"</span>);<span class="comment">// æ’å…¥å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line"></span><br><span class="line">        stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">"0123456789"</span>);</span><br><span class="line">        stringBuilder.replace(<span class="number">3</span>, <span class="number">5</span>, <span class="string">"hello,world"</span>);<span class="comment">// åˆ†ç‰‡èµ‹å€¼</span></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line"></span><br><span class="line">        stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">"0123456789"</span>);</span><br><span class="line">        stringBuilder.substring(<span class="number">3</span>, <span class="number">5</span>);<span class="comment">// æå–å­å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line"></span><br><span class="line">        stringBuilder = <span class="keyword">new</span> StringBuilder(<span class="string">"0123456789"</span>);</span><br><span class="line">        stringBuilder.reverse();<span class="comment">// ç¿»è½¬å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(stringBuilder.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="0X02-Stringçš„å…¶ä»–æ–¹æ³•"><a href="#0X02-Stringçš„å…¶ä»–æ–¹æ³•" class="headerlink" title="0X02 Stringçš„å…¶ä»–æ–¹æ³•"></a>0X02 Stringçš„å…¶ä»–æ–¹æ³•</h1><p>Stringç±»ä¸­æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªå¸¸ç”¨çš„<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        String string;</span><br><span class="line">        <span class="keyword">boolean</span> bool;</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"hello,world"</span>;</span><br><span class="line">        bool = string.equals(<span class="string">"hello,world"</span>);    <span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">        System.out.println(bool);</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"hello,world"</span>;</span><br><span class="line">        bool = string.contains(<span class="string">"hello"</span>);    <span class="comment">// æ£€æŸ¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰å¦ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.println(bool);</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"hello,world"</span>;</span><br><span class="line">        bool = string.startsWith(<span class="string">"he"</span>); <span class="comment">// æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´</span></span><br><span class="line"><span class="comment">//        bool = string.endsWith("ld"); // ç»“å°¾</span></span><br><span class="line">        System.out.println(bool);</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"hello,world"</span>;</span><br><span class="line">        string = string.replace(<span class="string">"world"</span>, <span class="string">"java"</span>);   <span class="comment">// å­—ç¬¦ä¸²æœç´¢æ›¿æ¢</span></span><br><span class="line">        System.out.println(string);</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"hello,world"</span>;</span><br><span class="line">        string = string.toUpperCase();  <span class="comment">// å…¨è½¬æˆå¤§å†™</span></span><br><span class="line"><span class="comment">//        string = string.toLowerCase();    // å°å†™</span></span><br><span class="line">        System.out.println(string);</span><br><span class="line"></span><br><span class="line">        string = <span class="string">"  hello,world   "</span>;</span><br><span class="line">        string = string.trim(); <span class="comment">// å»æ‰å­—ç¬¦ä¸²ä¸¤å¤´çš„ç©ºç™½</span></span><br><span class="line">        System.out.println(string);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="0X03-Stringçš„æ­£åˆ™æ–¹æ³•"><a href="#0X03-Stringçš„æ­£åˆ™æ–¹æ³•" class="headerlink" title="0X03 Stringçš„æ­£åˆ™æ–¹æ³•"></a>0X03 Stringçš„æ­£åˆ™æ–¹æ³•</h1><p>ç®€å•çš„æ­£åˆ™åŒ¹é…å¯ä»¥ç›´æ¥ä½¿ç”¨Stringç±»ä¸­çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŸ¥çœ‹å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸæ­£åˆ™è¡¨è¾¾å¼çš„<code>matches()</code>å’Œåˆ‡å‰²å­—ç¬¦ä¸²çš„<code>split()</code>ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        String string = <span class="string">"java0python00cpp"</span>;</span><br><span class="line">        System.out.println(string.matches(<span class="string">"[\\w\\d]+"</span>));<span class="comment">// æ£€æµ‹æ˜¯å¦èƒ½åŒ¹é…</span></span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        String[] strings = string.split(<span class="string">"\\d+"</span>);<span class="comment">// æŒ‰æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++)&#123;</span><br><span class="line">            System.out.print(strings[i] + <span class="string">"  "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¥‡æŠ€æ·«å·§ (äº”) ç³»ç»Ÿè„šæœ¬</title>
      <link href="/2017/01/31/python-magic-5/"/>
      <url>/2017/01/31/python-magic-5/</url>
      
        <content type="html"><![CDATA[<blockquote><h5 id="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"><a href="#æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚" class="headerlink" title="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"></a>æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚</h5></blockquote><h1 id="0X00-é€€å‡ºç¨‹åºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯"><a href="#0X00-é€€å‡ºç¨‹åºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯" class="headerlink" title="0X00 é€€å‡ºç¨‹åºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯"></a>0X00 é€€å‡ºç¨‹åºï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</h1><p>å†™è„šæœ¬çš„æ—¶å€™ç»å¸¸ä¼šæœ‰æ‰§è¡Œå‡ºé”™ï¼Œå‡ºé”™çš„æ—¶å€™å¯ä»¥ç”¨ä¸€å¥è¯æŠŠç¨‹åºé€€å‡ºå¹¶ä¸”æ‰“å°é”™è¯¯ä¿¡æ¯<br><code>raise SystemExit(&#39;error message&#39;)</code></p><h1 id="0X01-è¾“å…¥å¯†ç "><a href="#0X01-è¾“å…¥å¯†ç " class="headerlink" title="0X01 è¾“å…¥å¯†ç "></a>0X01 è¾“å…¥å¯†ç </h1><p>æœ‰çš„æ—¶å€™éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä½¿ç”¨<code>input()</code>è¾“å…¥ç”¨æˆ·åè‡ªç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç”¨ç›¸åŒçš„æ–¹æ³•è¾“å…¥å¯†ç çš„æ—¶å€™æ—¶ä½¿ç”¨æ˜æ–‡çš„ã€‚é•¿æœŸç”¨Linuxçš„å¯èƒ½å¯¹Linuxä¸­å¯†ç çš„è¾“å…¥æ¯”è¾ƒæœ‰å°è±¡ï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™æ˜¯å¯†æ–‡ï¼Œä¸”æ²¡æœ‰ä»»ä½•æç¤ºï¼ŒåŒ…æ‹¬æ˜Ÿå·ï¼Œæ‰€ä»¥ç”¨è¿™ç§æ–¹æ³•è¾“å…¥å¯†ç æ˜¯éå¸¸å®‰å…¨çš„ã€‚ä½¿ç”¨<code>petpass</code>åº“å¯ä»¥ç®€å•çš„è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥ç”¨æˆ·åæœ€ç®€å•è¿˜æ˜¯<code>input()</code>ï¼Œå¦‚æœè¦è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·åå°±å¯ä»¥ä½¿ç”¨<code>getpass.getuser()</code>ï¼Œè¾“å…¥å¯†ç å°±å¯ä»¥ä½¿ç”¨<code>getpass.getpass()</code>æ¥å®ç°Linuxä¸­çš„é‚£ç§å¯†ç è¾“å…¥ã€‚ <strong>å¦‚æœæµ‹è¯•çš„æ—¶å€™æœ‰é—®é¢˜å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸‹æµ‹è¯•ï¼Œæ¯”å¦‚Windowsçš„CMDæˆ–è€…Linuxçš„ç»ˆç«¯</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    user = input(<span class="string">"Username:"</span>)</span><br><span class="line">    <span class="comment"># user = getpass.getuser()</span></span><br><span class="line"></span><br><span class="line">    passwd = getpass.getpass()</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X03-æ‰§è¡Œå‘½ä»¤"><a href="#0X03-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="0X03 æ‰§è¡Œå‘½ä»¤"></a>0X03 æ‰§è¡Œå‘½ä»¤</h1><p>åœ¨Linuxä¸­æƒ³è¦ç”¨Pythonä»£æ›¿Shellå¿…ç„¶ä¼šå‡ºç°åœ¨Pythonä¸­è°ƒç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤å¹¶è·å¾—è¾“å‡ºå†…å®¹ã€‚<code>subprocess.check_output([])</code>è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå°±åƒä¸‹é¢ä»‹ç»çš„é‚£æ ·æŠŠå‘½ä»¤é€šè¿‡ç©ºæ ¼æ‹†åˆ†å¼€ï¼Œæ”¾åˆ°è¿™ä¸ªåˆ—è¡¨ä¸­ã€‚<code>check_output</code>è¿”å›çš„æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ä¸²ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œç¼–ç è½¬å˜æˆäººç±»å¯è¯»çš„å­—ç¬¦ä¸²ã€‚ <strong>è¿™ç§æ–¹æ³•åªåœ¨Linuxé‡Œæµ‹è¯•è¿‡</strong> æ¯•ç«Ÿæ²¡å‡ ä¸ªäººä¼šåœ¨WIndowsä¸‹å†™è„šæœ¬æ˜¯å§ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    out_bype  = subprocess.check_output([<span class="string">'ls'</span>, <span class="string">'/dev'</span>])</span><br><span class="line">    out_text = out_bype.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    print(out_text)</span><br></pre></td></tr></table></figure></p><h1 id="0X04-å¤åˆ¶-ç§»åŠ¨-æ–‡ä»¶-ç›®å½•"><a href="#0X04-å¤åˆ¶-ç§»åŠ¨-æ–‡ä»¶-ç›®å½•" class="headerlink" title="0X04 å¤åˆ¶/ç§»åŠ¨ æ–‡ä»¶/ç›®å½•"></a>0X04 å¤åˆ¶/ç§»åŠ¨ æ–‡ä»¶/ç›®å½•</h1><p>åœ¨Pythonä¸­å¤åˆ¶ç§»åŠ¨æ–‡ä»¶å’Œç›®å½•éå¸¸ç®€å•ï¼Œå°¤å…¶æ˜¯åœ¨ä¸è€ƒè™‘é“¾æ¥çš„æƒ…å†µä¸‹ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    shutil.copy(<span class="string">'/etc/passwd'</span>, <span class="string">'passwd'</span>)<span class="comment"># å°†/etc/passwdå¤åˆ¶åˆ°å½“å‰ç›®å½•ï¼Œç­‰åŒäºLinuxä¸­çš„  cp /etc/passwd passwd</span></span><br><span class="line">    shutil.copytree(<span class="string">'/etc'</span>, <span class="string">'etc'</span>)<span class="comment"># å¤åˆ¶ç›®å½•</span></span><br><span class="line"></span><br><span class="line">    shutil.move(<span class="string">'passwd'</span>, <span class="string">'mima'</span>)<span class="comment"># ç§»åŠ¨æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é‡å‘½åï¼Œå’ŒLinuxä¸­çš„mvå‘½ä»¤ä¸€æ ·</span></span><br></pre></td></tr></table></figure></p><h1 id="0X05-è·å–ç»ˆç«¯å¤§å°"><a href="#0X05-è·å–ç»ˆç«¯å¤§å°" class="headerlink" title="0X05 è·å–ç»ˆç«¯å¤§å°"></a>0X05 è·å–ç»ˆç«¯å¤§å°</h1><p>åœ¨Linuxä¸­ä¸€èˆ¬æ˜¯åœ¨ç»ˆç«¯ä¸‹å·¥ä½œï¼Œé‚£ä¹ˆæœ‰çš„æ—¶å€™éœ€è¦çŸ¥é“å½“å‰ç»ˆç«¯å¤§å°æ¥æ§åˆ¶è¾“å‡ºçš„å­—ç¬¦ä¸²é•¿åº¦ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    sz = os.get_terminal_size()</span><br><span class="line">    columns = sz.columns</span><br><span class="line">    lines   = sz.lines</span><br><span class="line">    print(sz)</span><br><span class="line">    print(columns)</span><br><span class="line">    print(lines)</span><br></pre></td></tr></table></figure></p><h1 id="0X06-os-walk"><a href="#0X06-os-walk" class="headerlink" title="0X06 os.walk()"></a>0X06 os.walk()</h1><p>ç»å¸¸éœ€è¦éå†ä¸€ä¸ªç›®å½•ï¼Œæ¥è·å–ç›®å½•ä¸­çš„å†…å®¹ï¼Œå¦‚æœåªéœ€è¦æŸ¥çœ‹ä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆä½¿ç”¨<code>os.listdir()</code>å°±è¶³å¤Ÿäº†ï¼Œå¦‚æœåªåˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦ä¸ºç›®å½•ï¼Œåˆ™<code>os.path.isdir()</code>ä¹Ÿè¶³å¤Ÿäº†ã€‚ä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦é€å±‚éå†ç›®å½•ï¼Œä¸”åŒºåˆ«å¯¹å¾…ç›®å½•å’Œæ–‡ä»¶ï¼Œé‚£ä¹ˆé€šå¸¸ä¼šè‡ªå·±æ‰‹å†™ä¸€ä¸ªé€’å½’çš„æ–¹æ³•æ¥è§£å†³ã€‚è¿™æ ·è™½ç„¶èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æ¯•ç«Ÿå¤šå†™äº†ä»£ç ä¸”æ•ˆç‡è¿˜ä¸é«˜ï¼Œå…¶å®<code>os</code>åº“é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•å€¼å¾—æˆ‘ä»¬ä½¿ç”¨å°±æ˜¯<code>os.walk()</code>ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªç›®å½•ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ¯æ¬¡è¿­ä»£æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„æœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰è·¯å¾„ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯å½“å‰ç›®å½•ä¸‹çš„ç›®å½•åï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ æ˜¯å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚å…·ä½“çš„å¯ä»¥çœ‹ä»£ç æ³¨é‡Š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    files = os.walk(<span class="string">'D:/movie'</span>)<span class="comment"># è¿™é‡Œè°ƒç”¨äº†æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªè·¯å¾„ï¼Œè¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> files:<span class="comment"># å¼€å§‹è¿­ä»£</span></span><br><span class="line">        print(<span class="string">'path_name: '</span>, i[<span class="number">0</span>])<span class="comment"># è¾“å‡ºå½“å‰è·¯å¾„</span></span><br><span class="line">        print(<span class="string">'dir_name : '</span>, i[<span class="number">1</span>])<span class="comment"># å½“å‰ç›®å½•ä¸‹çš„ç›®å½•</span></span><br><span class="line">        print(<span class="string">'file_name: '</span>, i[<span class="number">2</span>])<span class="comment"># å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">        print(<span class="string">'-----------------'</span>)</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªè¾“å‡ºæ˜¯ä¸‹é¢è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">path_name:  D:/movie</span><br><span class="line">dir_name :  [<span class="string">'åŠ å‹’æ¯”æµ·ç›—'</span>, <span class="string">'æœºæ¢°å¸ˆ'</span>, <span class="string">'ç«å½±å¿è€…'</span>, <span class="string">'èœ˜è››ä¾ '</span>]</span><br><span class="line">file_name:  [<span class="string">'Vå­—ä»‡æ€é˜Ÿ.mkv'</span>, <span class="string">'wikileaks-720p.mkv'</span>, <span class="string">'æ¹„å…¬æ²³è¡ŒåŠ¨.mkv'</span>, <span class="string">'ç›—æ¢¦ç©ºé—´.mkv'</span>, <span class="string">'ç¥å¥‡åŠ¨ç‰©åœ¨å“ªé‡Œ.mp4'</span>, <span class="string">'ç»åœ°é€ƒäº¡.mkv'</span>]</span><br><span class="line">-----------------</span><br><span class="line">path_name:  D:/movie\åŠ å‹’æ¯”æµ·ç›—</span><br><span class="line">dir_name :  []</span><br><span class="line">file_name:  [<span class="string">'åŠ å‹’æ¯”æµ·ç›—1ï¼šé»‘çç å·çš„è¯…å’’.mkv'</span>, <span class="string">'åŠ å‹’æ¯”æµ·ç›—2ï¼šèšé­‚æ£º.avi'</span>, <span class="string">'åŠ å‹’æ¯”æµ·ç›—3ï¼šä¸–ç•Œå°½å¤´.avi'</span>, <span class="string">'åŠ å‹’æ¯”æµ·ç›—4ï¼šæƒŠæ¶›æ€ªæµª.mkv'</span>]</span><br><span class="line">-----------------</span><br><span class="line">path_name:  D:/movie\æœºæ¢°å¸ˆ</span><br><span class="line">dir_name :  []</span><br><span class="line">file_name:  [<span class="string">'æœºæ¢°å¸ˆ1.mkv'</span>, <span class="string">'æœºæ¢°å¸ˆ2ï¼šå¤æ´».mp4'</span>]</span><br><span class="line">-----------------</span><br><span class="line">path_name:  D:/movie\ç«å½±å¿è€…</span><br><span class="line">dir_name :  []</span><br><span class="line">file_name:  [<span class="string">'ç«å½±å¿è€…ï¼šåšäººä¼ .mp4'</span>, <span class="string">'ç«å½±å¿è€…ï¼šå¿è€…ä¹‹è·¯.mkv'</span>, <span class="string">'ç«å½±å¿è€…ï¼šç»ˆç« .mp4'</span>]</span><br><span class="line">-----------------</span><br><span class="line">path_name:  D:/movie\èœ˜è››ä¾ </span><br><span class="line">dir_name :  []</span><br><span class="line">file_name:  [<span class="string">'èœ˜è››ä¾ 1-2002.mkv'</span>, <span class="string">'èœ˜è››ä¾ 2-2004.mkv'</span>, <span class="string">'èœ˜è››ä¾ 3-2007.mkv'</span>, <span class="string">'è¶…å‡¡èœ˜è››ä¾ 1-2012.mkv'</span>, <span class="string">'è¶…å‡¡èœ˜è››ä¾ 2-2014.mp4'</span>]</span><br><span class="line">-----------------</span><br></pre></td></tr></table></figure></p><h1 id="0X07-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#0X07-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="0X07 ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>0X07 ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p>åœ¨Linuxä¸­æœ‰å¤§é‡çš„é…ç½®æ–‡ä»¶ï¼ŒWindowsä¸­ä¹Ÿæœ‰ä¸€äº›iniæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè¯­æ³•éƒ½ä¸€æ ·çš„ã€‚é‚£ä¹ˆç”¨è„šæœ¬æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶å½“ç„¶ä¸å¿…è¦å…¨éƒ¨è¯»å®Œæ•´ä¸ªæ–‡ä»¶åæ­£åˆ™åŒ¹é…ï¼Œæœ‰ä¸€ä¸ªéå¸¸ç®€å•ä¸”å¥½ç”¨çš„æ–¹æ³•ã€‚ä¸‹é¢æ˜¯æˆ‘ç”¨æ¥åšæµ‹è¯•çš„å®ä¾‹é…ç½®æ–‡ä»¶ï¼Œå‘½åä¸º<code>1.ini</code>æ”¾åœ¨<code>D:/</code>æ ¹ç›®å½•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[home]</span><br><span class="line">phone = On</span><br><span class="line">kindle = Off</span><br><span class="line">learn = False</span><br><span class="line"></span><br><span class="line">[school]</span><br><span class="line">phone = On</span><br><span class="line">kindle = On</span><br><span class="line">learn = True</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰‹æœºæ— è®ºåœ¨å“ªéƒ½å¼€æœºï¼ŒKindleåªæœ‰åœ¨å­¦æ ¡æ‰ç”¨ï¼Œå­¦ä¹ ä¹Ÿåªæœ‰åœ¨å­¦æ ¡æ‰å­¦ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥è¯»å–å’Œä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> configparser <span class="keyword">import</span> ConfigParser</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    cfg = ConfigParser()    <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    cfg.read(<span class="string">'D:/1.ini'</span>)    <span class="comment"># è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    tables = cfg.sections() <span class="comment"># è·å–æ ‡ç­¾</span></span><br><span class="line">    print(tables)</span><br><span class="line"></span><br><span class="line">    phone_value = cfg.get(<span class="string">'home'</span>, <span class="string">'Phone'</span>)  <span class="comment"># è·å–homeæ ‡ç­¾ä¸‹Phoneçš„å€¼</span></span><br><span class="line">    print(phone_value)</span><br><span class="line"></span><br><span class="line">    kindle_value = cfg.get(<span class="string">'school'</span>, <span class="string">'Kindle'</span>)  <span class="comment"># è·å–schoolä¸‹Kindleçš„å€¼</span></span><br><span class="line">    print(kindle_value)</span><br><span class="line"></span><br><span class="line">    learn_value = cfg.get(<span class="string">'school'</span>, <span class="string">'learn'</span>)    <span class="comment"># è·å–schoolä¸‹learnçš„å€¼</span></span><br><span class="line">    print(learn_value)</span><br><span class="line"></span><br><span class="line">    cfg.set(<span class="string">'home'</span>, <span class="string">'learn'</span>, <span class="string">'True'</span>)     <span class="comment"># ä¿®æ”¹homeä¸‹çš„learnä¸ºTrue</span></span><br><span class="line">    f = open(<span class="string">'D:/1.ini'</span>, <span class="string">'w'</span>)            <span class="comment"># ç”¨å¯å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">    cfg.write(f)        <span class="comment"># å°†æ•°æ®å†™å›</span></span><br><span class="line">    f.close()           <span class="comment"># å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></p><h1 id="0X08-æ‰“å¼€æµè§ˆå™¨"><a href="#0X08-æ‰“å¼€æµè§ˆå™¨" class="headerlink" title="0X08 æ‰“å¼€æµè§ˆå™¨"></a>0X08 æ‰“å¼€æµè§ˆå™¨</h1><p>ä¸ç®¡æ˜¯è¦ç»™ç”¨æˆ·å±•ç¤ºä¸€ä¸ªé¡µé¢è¿˜æ˜¯è¦å°†æ•°æ®ç”¨HTMLå½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œéƒ½éœ€è¦æ‰“å¼€æµè§ˆå™¨ï¼Œè¿™ä¸ªåœ¨Pythonä¸­å¯ä»¥ç”¨ä¸€è¡Œä»£ç æ¥æå®šã€‚<code>webbrowser.open_new(&#39;http://blog.just666.cn&#39;)</code>å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£ï¼Œå¹¶æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œ<code>webbrowser.open_new_table(&#39;http://blog.just666.cn&#39;)</code>å¯ä»¥åœ¨å½“å‰æµè§ˆå™¨çª—å£æ–°å¼€ä¸€ä¸ªæ ‡ç­¾ã€‚ï¼ˆéœ€è¦å…ˆå¯¼å…¥<code>webbrowser</code>è¿™ä¸ªåŒ…ï¼‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Script </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¥‡æŠ€æ·«å·§ (å››) æ–‡ä»¶&amp;I/O</title>
      <link href="/2017/01/24/python-magic-4/"/>
      <url>/2017/01/24/python-magic-4/</url>
      
        <content type="html"><![CDATA[<blockquote><h5 id="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"><a href="#æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚" class="headerlink" title="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"></a>æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚</h5></blockquote><h1 id="0X00-æŒ‡å®šç¼–ç "><a href="#0X00-æŒ‡å®šç¼–ç " class="headerlink" title="0X00 æŒ‡å®šç¼–ç "></a>0X00 æŒ‡å®šç¼–ç </h1><p>æ¯ä¸ªæ–‡æœ¬æ–‡ä»¶éƒ½æ˜¯ä»¥æŸä¸€ç¼–ç æ ¼å¼ä¿å­˜çš„ï¼Œå¦‚æœè§£ç æ ¼å¼å’Œæ–‡æœ¬æ ¼å¼ä¸åŒå°±ä¼šå‡ºç°ä¹±ç ï¼Œåœ¨Pythonä¸­å¯ä»¥ç®€å•çš„æ§åˆ¶ç”¨ä»€ä¹ˆç¼–ç æ¥æ‰“å¼€æ–‡ä»¶ä»¥è¯»å†™æ–‡ä»¶ã€‚ä½¿ç”¨<code>open</code>æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™æŒ‡å®šä¸€ä¸ª<code>encoding</code>å‚æ•°å°±å¯ä»¥ä½¿ç”¨å…¶ä»–è€Œéé»˜è®¤ç¼–ç æ‰“å¼€æ–‡ä»¶äº†ã€‚è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„æ–¹å¼æ˜¯<code>with open() as f:</code>è¿™æ ·ï¼Œè¿™æ ·åšçš„è¯åœ¨è¿™ä¸ªwithä¸‹é¢çš„ä»£ç å—ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨fè¿™ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œå¹¶ä¸”æ‰§è¡Œåˆ°withä»£ç å—ä¹‹å¤–çš„æ—¶å€™ä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶ï¼Œä¸éœ€è¦å†æ‰‹åŠ¨å…³é—­æ–‡ä»¶ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨utf-8ç¼–ç ï¼Œå†™æ¨¡å¼ï¼Œæ‰“å¼€æ–‡ä»¶D:/test.txt</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'D:/test.txt'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="string">'ä½ å¥½ï¼Œä¸–ç•Œ'</span>)    <span class="comment"># å†™ä¸€è¡Œæ±‰å­</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨utf-8ç¼–ç ï¼Œè¯»æ¨¡å¼ï¼Œæ‰“å¼€æ–‡ä»¶D:/test.txt</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'D:/test.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        print(f.read())       <span class="comment"># å› ä¸ºæ˜¯ç¼–ç ç›¸åŒæ‰€ä»¥å¯ä»¥æ­£å¸¸è¯»å‡ºæ–‡å­—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨latin-1ç¼–ç ï¼Œè¯»æ¨¡å¼ï¼Œæ‰“å¼€æ–‡ä»¶D:/test.txt</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'D:/test.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'latin-1'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        print(f.read())       <span class="comment"># å› ä¸ºä½¿ç”¨çš„ç¼–ç æ ¼å¼ä¸åŒï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¹±ç </span></span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X01-è¾“å‡ºé‡å®šå‘"><a href="#0X01-è¾“å‡ºé‡å®šå‘" class="headerlink" title="0X01 è¾“å‡ºé‡å®šå‘"></a>0X01 è¾“å‡ºé‡å®šå‘</h1><p>åœ¨Linuxä¸­å¯ä»¥å¯¹å‘½ä»¤çš„è¾“å‡ºè¿›è¡Œé‡å®šå‘ï¼Œå°†æœ¬åº”è¯¥è¾“å‡ºåˆ°å±å¹•çš„ä¸œè¥¿è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶é‡Œï¼Œåœ¨Pythonä¸­ä¹Ÿæ˜¯å¯ä»¥ç®€å•åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚å‡è®¾ä¸€ä¸ªå·²ç»ç”¨å†™å…¥æ¨¡å¼æ‰“å¼€çš„æ–‡ä»¶å¯¹è±¡fï¼Œåœ¨è¾“å‡ºæ–‡å­—çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è¿™æ ·è°ƒç”¨<code>print(&#39;hello,world&#39;, file=f)</code>å°±å¯ä»¥ç›´æ¥å°†è¾“å‡ºçš„å†…å®¹é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„å°±æ˜¯æ–‡ä»¶å¿…é¡»å·²ç»ç”¨å¯å†™æ¨¡å¼æ‰“å¼€ï¼Œä¸”æ˜¯æ–‡æœ¬æ¨¡å¼ã€‚</p><h1 id="0X02-æŒ‡å®šåˆ†éš”ç¬¦å’Œç»“å°¾"><a href="#0X02-æŒ‡å®šåˆ†éš”ç¬¦å’Œç»“å°¾" class="headerlink" title="0X02 æŒ‡å®šåˆ†éš”ç¬¦å’Œç»“å°¾"></a>0X02 æŒ‡å®šåˆ†éš”ç¬¦å’Œç»“å°¾</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™æ ·ä¸€æ¡è¯­å¥æ‰“å°å¤šä¸ªå­—ç¬¦ä¸²<code>print(&#39;hello&#39;, &#39;world&#39;, &#39;hello&#39;, &#39;python&#39;)</code>ï¼Œä¼šç›´æ¥å°†å­—ç¬¦ä¸²è¿æ¥åˆ°ä¸€èµ·ï¼Œé»˜è®¤æ²¡æœ‰åˆ†éš”ç¬¦ä¸”ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ä½œä¸ºç»“å°¾ç¬¦å·ã€‚å¯ä»¥ç»™<code>print()</code>æŒ‡å®šä¸¤ä¸ªå‚æ•°æ¥è®¾ç½®åˆ†éš”ç¬¦å’Œç»“å°¾ç¬¦ã€‚<code>print(&#39;hello,&#39;, world&#39;, &#39;hello&#39;, &#39;python&#39;, sep=&#39;,&#39;, end=&#39;\n&#39;)</code>è¿™é‡ŒæŒ‡å®šäº†ä½¿ç”¨é€—å·åˆ†éš”å¼€è¿™äº›å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä½¿ç”¨<code>\n</code>ä½œä¸ºç»“å°¾ç¬¦å·ã€‚å¦‚æœä½¿ç”¨ç©ºå­—ç¬¦ä¸²ä½œä¸ºç»“å°¾ç¬¦å·ï¼Œè¾“å‡ºçš„æ—¶å€™æœ€åå°±ä¸è‡ªåŠ¨æ¢è¡Œã€‚</p><h1 id="0X03-è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#0X03-è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="0X03 è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶"></a>0X03 è¯»å†™äºŒè¿›åˆ¶æ–‡ä»¶</h1><p>æœ‰ä¸€ä¸ªæœ€å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶è¯»å†™å®ä¾‹ï¼šä»ç½‘ä¸Šä¸‹è½½ä¸œè¥¿åˆ°æœ¬åœ°ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªurlæ˜¯<code>http://blog.just666.cn/usr/themes/Themia/img/sj/134.jpg</code>ï¼Œé‚£æ€ä¹ˆæŠŠè¿™ä¸ªå›¾ç‰‡ä¸‹è½½åˆ°æœ¬åœ°å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ®µä»£ç ã€‚å…ˆæ‰¾åˆ°urlï¼Œç„¶åä½¿ç”¨urlopenæ‰“å¼€è¿™ä¸ªç½‘ç»œæ–‡ä»¶å¹¶è·å–åˆ°æ–‡ä»¶å†…å®¹ï¼Œæœ€åç”¨äºŒè¿›åˆ¶æ¨¡å¼å†™å…¥åˆ°æ–°çš„æœ¬åœ°æ–‡ä»¶å°±å¯ä»¥äº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    web_img = urlopen(<span class="string">'http://blog.just666.cn/usr/themes/Themia/img/sj/134.jpg'</span>)<span class="comment"># ä½¿ç”¨urlopenæ‰“å¼€ä¸€ä¸ªurl</span></span><br><span class="line">    web_img = web_img.read()<span class="comment"># è·å¾—æ–‡ä»¶å†…å®¹ï¼Œå½“ç„¶è¿™é‡Œæ˜¯äºŒè¿›åˆ¶çš„æ‰€ä»¥æ²¡æœ‰å¯è¯»æ€§</span></span><br><span class="line"><span class="comment"># æ–°æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'D:/hey.jpg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:<span class="comment"># åœ¨wåé¢æŒ‡å®šä¸€ä¸ªbä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶å†™å…¥æ¨¡å¼</span></span><br><span class="line">        f.write(web_img)<span class="comment"># å°†æ–°æ–‡ä»¶å†™å…¥è¿›å»</span></span><br></pre></td></tr></table></figure></p><h1 id="0X04-è·¯å¾„å"><a href="#0X04-è·¯å¾„å" class="headerlink" title="0X04 è·¯å¾„å"></a>0X04 è·¯å¾„å</h1><p>åœ¨Pythonä¸­å¯ä»¥ä½¿ç”¨<code>os.path</code>å¤„ç†è·¯å¾„åçš„é—®é¢˜ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ä¸‰ä¸ªæ–¹æ³•<code>os.path.basename()</code>ã€<code>os.path.dirname()</code>ã€<code>os.path.join()</code>ï¼Œåˆ†åˆ«ç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªå®Œæ•´åœ°å€çš„æœ€åæ–‡ä»¶åã€æ˜¾ç¤ºæŸå®Œæ•´åœ°å€æ–‡ä»¶çš„ç›®å½•åœ°å€ã€å°†ç›®å½•å’Œæ–‡ä»¶æ‹¼æ¥èµ·æ¥ã€‚å› ä¸ºPythonæ¯”è¾ƒå¼ºå¤§ï¼Œæ‰€ä»¥å¯ä»¥åšåˆ°å®¹é”™æ•ˆæœï¼Œæ¯”å¦‚è¯´åœ¨Windowsä¸­åœ°å€æ˜¯è¿™æ ·çš„<code>D:\game\steam\steamapps\csgo</code>ï¼Œä½†æ˜¯å¦‚æœæˆ‘å†™æˆäº†Linuxä¸‹çš„æ ¼å¼<code>D:/game/steam/steamapps/csgo</code>ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œç…§æ ·å¯ä»¥ç”¨è¿™äº›æ–¹æ³•å¤„ç†ï¼Œæ²¡æœ‰å½±å“ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    path = <span class="string">'/var/www/html/index.html'</span><span class="comment"># è¿™é‡Œæ˜¯ä¸€ä¸ªå®Œæ•´åœ°å€çš„æ–‡ä»¶</span></span><br><span class="line">    print(os.path.basename(path))<span class="comment"># å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶å  index.html</span></span><br><span class="line">    print(os.path.dirname(path))<span class="comment"># å¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„åœ°å€ä½ç½® /var/www/html/</span></span><br><span class="line">    print(os.path.join(<span class="string">'D:/'</span>, <span class="string">'hehe.exe'</span>))<span class="comment"># å°†è¿æ¥æ‹¼èµ·æ¥ç¼–ç¨‹ D:/hehe.exe</span></span><br></pre></td></tr></table></figure></p><h1 id="0X05-å°æŠ€å·§"><a href="#0X05-å°æŠ€å·§" class="headerlink" title="0X05 å°æŠ€å·§"></a>0X05 å°æŠ€å·§</h1><p>æ£€éªŒæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š<code>os.path.exists(&#39;D:/test.txt&#39;)</code>å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™è¿”å›Trueå¦åˆ™å°±æ˜¯False<br>è·å–æ–‡ä»¶å…ƒæ•°æ®ï¼š<code>os.path.getatime(&#39;D:/test.txt&#39;)</code>æŸ¥çœ‹ä¿®æ”¹æ—¶é—´   <code>getsize</code>è·å–æ–‡ä»¶å¤§å°</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> I/O </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¥‡æŠ€æ·«å·§ (ä¸‰) å‡½æ•°</title>
      <link href="/2017/01/21/python-magic-3/"/>
      <url>/2017/01/21/python-magic-3/</url>
      
        <content type="html"><![CDATA[<blockquote><h5 id="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"><a href="#æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚" class="headerlink" title="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"></a>æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚</h5></blockquote><h1 id="0X00-ä»»æ„ä¸ªå‚æ•°"><a href="#0X00-ä»»æ„ä¸ªå‚æ•°" class="headerlink" title="0X00 ä»»æ„ä¸ªå‚æ•°"></a>0X00 ä»»æ„ä¸ªå‚æ•°</h1><p>Pythonä¸­ä¸€èˆ¬å®šä¹‰å‡½æ•°æ˜¯è¿™æ ·çš„<code>def add(a, b)</code>ï¼Œå‚æ•°çš„ä¸ªæ•°æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæ€ä¹ˆæ‰å¯ä»¥æ¥æ”¶ä»»æ„å¤šä¸ªå‚æ•°å°±åƒ<code>rm 1.txt 2.jpg 3.mp3 4.cpp</code>è¿™æ ·ï¼Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨<code>*</code>å’Œ<code>**</code>å°±å¯ä»¥ã€‚ä¸‹é¢ä»£ç é‡Œç¬¬ä¸€ä¸ªå‚æ•°aæ¥æ”¶åˆ°äº†<code>hello,world</code>è€Œ<code>*b</code>åˆ™æ¥æ”¶åˆ°äº†å…¶ä½™æ‰€æœ‰çš„å‚æ•°ï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªå…ƒç»„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, *b)</span>:</span></span><br><span class="line">    print(a)</span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    x = add(<span class="string">'hello,world'</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X01-æ·»åŠ æ³¨è§£"><a href="#0X01-æ·»åŠ æ³¨è§£" class="headerlink" title="0X01 æ·»åŠ æ³¨è§£"></a>0X01 æ·»åŠ æ³¨è§£</h1><p>åœ¨Pythonä¸­å®šä¹‰å‡½æ•°çš„åŒæ—¶å¯ä»¥ä¹Ÿç»™å‡½æ•°æ·»åŠ æ³¨è§£ï¼Œæ³¨è§£å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™èµ·åˆ°ä¸€ä¸ªæé†’çš„ä½œç”¨ã€‚è™½ç„¶å‡ åè¡Œçš„ä»£ç ä¸ä¼šé‡åˆ°çœ‹ä¸æ‡‚çš„æƒ…å†µï¼Œä½†æ˜¯åœ¨ä¿®æ”¹åˆ«äººä»£ç æˆ–è€…ç¼–å†™ä¸€ä¸ªå¤§é¡¹ç›®çš„æ—¶å€™å¿…ç„¶ä¼šæœ‰è¿™ç§é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­åŠ æ³¨é‡Šæ¥è§£é‡Šè¯´æ˜ï¼Œä½†æ˜¯ä½¿ç”¨æ³¨è§£è¿˜æ˜¯è¦æ¯”æ³¨é‡Šæ¥å¾—ç®€å•æ–¹ä¾¿ã€‚ä¸è¿‡é€šè¿‡æ³¨è§£æ³¨è§£æŒ‡å®šçš„ç±»å‹ä¸åƒæ˜¯Cè¯­è¨€é‚£æ ·æœ‰å®é™…æ„ä¹‰ï¼Œå°±ç®—æ˜¯ä½ ä¼ å…¥çš„å‚æ•°å’Œè¿”å›çš„å€¼ä¸æ˜¯æŒ‰ç…§æ³¨è§£æ¥çš„ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a: int, b: int)</span> -&gt; int:</span><span class="comment"># è¿™é‡Œå£°æ˜äº†aå’Œbéƒ½æ˜¯intå‹ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯intå‹</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(add(<span class="number">3</span>, <span class="number">5</span>))</span><br></pre></td></tr></table></figure></p><h1 id="0X02-é»˜è®¤å‚æ•°"><a href="#0X02-é»˜è®¤å‚æ•°" class="headerlink" title="0X02 é»˜è®¤å‚æ•°"></a>0X02 é»˜è®¤å‚æ•°</h1><p>æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›å†…ç½®å‡½æ•°æ˜¯æœ‰å¥½å¤šä¸ªå¯é€‰å‚æ•°çš„ï¼Œä¸è¿‡æˆ‘ä»¬ä¸éœ€è¦æ¯ä¸ªå‚æ•°éƒ½è¦ä¼ å…¥ï¼Œå› ä¸ºPythonå¯ä»¥ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥é‚£ä¸ªå‚æ•°å°±ä¼šé€‰æ‹©ä½¿ç”¨é»˜è®¤å€¼ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª<code>add</code>å‡½æ•°ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a = <span class="number">3</span>, b = <span class="number">5</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(add())<span class="comment"># æ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨ï¼“å’Œï¼•ï¼Œæœ€åç»“æœåˆ™ä¸º8</span></span><br><span class="line">    print(add(<span class="number">1</span>))<span class="comment"># ä¼ å…¥äº†å‚æ•°aä¸º1ï¼Œæœ€åç»“æœåˆ™ä¸º6</span></span><br><span class="line">    print(add(<span class="number">4</span>, <span class="number">6</span>))<span class="comment"># ä¼ å…¥äº†å‚æ•°aå’Œbåˆ†åˆ«ä¸º4å’Œ6ï¼Œæœ€åç»“æœä¸º10</span></span><br><span class="line">print(add(b = <span class="number">3</span>))<span class="comment"># å€¼ä¼ å…¥äº†bå‚æ•°ä¸º3ï¼Œæ‰€ä»¥æœ€åç»“æœä¸º6</span></span><br><span class="line">print(add(b = <span class="number">3</span>, a = <span class="number">10</span>))<span class="comment"># æŒ‡å®šå‚æ•°çš„è¯ä¹Ÿå¯ä»¥ä¸æŒ‰é¡ºåº</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-å‡½æ•°mini-åŒ¿åå‡½æ•°"><a href="#0X03-å‡½æ•°mini-åŒ¿åå‡½æ•°" class="headerlink" title="0X03 å‡½æ•°mini åŒ¿åå‡½æ•°"></a>0X03 å‡½æ•°mini åŒ¿åå‡½æ•°</h1><p>è¿™é‡Œç§°ä¹‹ä¸ºåŒ¿åå‡½æ•°æ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹åˆ«æ‰­ï¼Œå› ä¸ºè¿™å„¿å®šä¹‰çš„å‡½æ•°å¹¶ä¸æ˜¯çœŸçš„åŒ¿åï¼Œä¹Ÿæ˜¯æœ‰åå­—çš„ï¼Œå› ä¸ºå‡½æ•°è‡ªèº«éå¸¸çŸ­å°å€’ä¸å¦‚ç§°ä¹‹ä¸ºå‡½æ•°miniã€‚åœ¨Pythonä¸­æœ‰ä¸€ä¸ªå…³é”®å­—<code>lambda</code>ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä½¿ç”¨è¿™ä¸ªå…³é”®å­—å®šä¹‰å‡½æ•°çš„æ—¶å€™å‡½æ•°å£°æ˜ã€è¿”å›å€¼ã€å‡½æ•°ä½“åªèƒ½å†™æˆä¸€è¡Œã€‚è¿™æ ·çš„å‡½æ•°åŠŸèƒ½è‚¯å®šä¸èƒ½å¾ˆå¼ºå¤§ï¼Œä¸è¿‡ç¡®å®èƒ½å‡å°‘ä»£ç é‡ï¼Œå°‘å†™å¥½å¤šé‡å¤çš„ä»£ç ã€‚æ­£å¼ä»£ç çš„ç¬¬ä¸€è¡Œå°±å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œåä¸ºaddï¼Œå‚æ•°æ˜¯xå’Œyï¼Œè¿”å›å€¼æ˜¯x+yã€‚æ‰€ä»¥è¯´æ ‡å‡†æ˜¯è¿™æ ·çš„<code>å‡½æ•°å = lambda å‚æ•° ï¼š è¿”å›å€¼</code>ã€‚è¿™é‡Œè¿˜æœ‰ä¸ªä¾‹å­ï¼š<code>my_sqrt = lambda x : math.sqrt(x)</code>ã€‚æ³¨æ„ï¼Œåœ¨åŒ¿åå‡½æ•°é‡Œä»€ä¹ˆ<code>if-else</code>ã€<code>while</code>ã€<code>try-except</code>éƒ½æ˜¯ä¸èƒ½ç”¨çš„ï¼Œæ€»ä¹‹ä½ çš„å‡½æ•°å°±åªèƒ½å†™ä¸€è¡Œã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    add = <span class="keyword">lambda</span> x, y : x + y</span><br><span class="line">    print(add(<span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">    print(add(<span class="number">2</span>, <span class="number">7</span>))</span><br><span class="line">    print(add(<span class="number">1</span>, <span class="number">9</span>))</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Function </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¥‡æŠ€æ·«å·§ (äºŒ) å­—ç¬¦ä¸²ã€æ–‡æœ¬</title>
      <link href="/2017/01/19/python-magic-2/"/>
      <url>/2017/01/19/python-magic-2/</url>
      
        <content type="html"><![CDATA[<blockquote><h5 id="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"><a href="#æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚" class="headerlink" title="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"></a>æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚</h5></blockquote><h1 id="0X00-splitå‡çº§"><a href="#0X00-splitå‡çº§" class="headerlink" title="0X00 splitå‡çº§"></a>0X00 splitå‡çº§</h1><p>å­—ç¬¦ä¸²æœ‰ä¸€ä¸ª<code>split</code>æ–¹æ³•ï¼Œå¯ä»¥ç”¨æŸä¸ªå­—ç¬¦æˆ–å­—ç¬¦ä¸²æŠŠæºå­—ç¬¦ä¸²åˆ‡å¼€ã€‚ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªå¼Šç«¯ï¼Œåˆ‡å‰²ä½ç½®æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½çµæ´»åˆ‡å‰²ã€‚æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²<code>hello 1 wrld 2 python 3 linux</code>åˆ‡å‰²å¼€ï¼Œä»¥æ¯ä¸ªæ•°å­—ä¸ºåˆ†éš”ç¬¦ã€‚è¿™æ ·æ ‡å‡†çš„<code>str.split</code>å°±ä¸èƒ½å®Œæˆä»»åŠ¡äº†ã€‚ä½†æ˜¯åœ¨<code>re</code>æ¨¡å—ä¸­æœ‰ä¸€ä¸ª<code>re.split</code>å¯ä»¥å®Œæˆè¿™ä»»åŠ¡ã€‚è¿™ä¸ªæ–¹æ³•çš„åˆ†éš”ç¬¦ä¸æ˜¯ä½¿ç”¨å‡†ç¡®ä¸å˜çš„å­—ç¬¦/ä¸²è€Œæ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_str = <span class="string">'hello 1 wrld 2 python 3 linux'</span></span><br><span class="line">    res = re.split(<span class="string">'[0-9]'</span>, my_str)</span><br><span class="line">    print(res)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²å½¢å¼ï¼Œè€Œä¸éœ€è¦<code>re.compile</code>è¿›è¡Œç¼–è¯‘ã€‚æœ‰äº†è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥æ›´åŠ çµæ´»åœ°åˆ‡å‰²å­—ç¬¦ä¸²äº†ã€‚</p><a id="more"></a><h1 id="0X01-å­—ç¬¦ä¸²å¼€å¤´ç»“å°¾çš„åŒ¹é…"><a href="#0X01-å­—ç¬¦ä¸²å¼€å¤´ç»“å°¾çš„åŒ¹é…" class="headerlink" title="0X01 å­—ç¬¦ä¸²å¼€å¤´ç»“å°¾çš„åŒ¹é…"></a>0X01 å­—ç¬¦ä¸²å¼€å¤´ç»“å°¾çš„åŒ¹é…</h1><p>å½“æˆ‘ä»¬æœ‰ä¸€å †çš„urlï¼Œæƒ³åœ¨urlä¸­æ‰¾åˆ°httpå¼€å¤´ä¸”.jpgç»“å°¾çš„å›¾ç‰‡æ–‡ä»¶ï¼Œä»¥å‰æˆ‘æ€»æ˜¯ç›´æ¥<code>str.strip(&#39;http://&#39;) == str</code>æ¥åˆ¤æ–­å¼€å¤´æ˜¯ä¸æ˜¯â€™http://â€˜ä½†æ˜¯è¿™æ ·å¤ªè ¢äº†ï¼Œè€Œä¸”ä¹Ÿä¸æ˜¯å¾ˆé è°±ã€å› ä¸ºä¸‡ä¸€å¼€å¤´ä¸æ˜¯è€Œç»“å°¾æ˜¯çš„è¯å°±ä¼šè¯¯åˆ¤ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥éå¸¸ç®€å•åœ°åšå‡ºè¿™ç§åˆ¤æ–­ï¼š<code>str.startswith()</code>å’Œ<code>str.endswitch()</code>ä¸¤ä¸ªã€‚ä¸€ä¸ªæ˜¯ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥xxxå¼€å¤´ã€å¦ä¸€ä¸ªæ˜¯ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥xxxç»“å°¾ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'http://blog.just666.cn/img/01.jpg'</span></span><br><span class="line">    print(url.startswith(<span class="string">'http://'</span>))</span><br><span class="line">    print(url.endswith(<span class="string">'.jpg'</span>))</span><br></pre></td></tr></table></figure></p><p>è¿™ç§æ–¹å¼å¯ä»¥æœ‰ä¸€ä¸ªç®€å•çš„æ”¹å˜ï¼Œä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼æ¥æ‰¹é‡åˆ¤æ–­ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    url_list = [<span class="string">'http://hey.sdf.we/sdfw.jpg'</span>,</span><br><span class="line">                <span class="string">'http://asdf.ser.x/zxvw.jpg'</span>,</span><br><span class="line">                <span class="string">'http://sdf.re.xcv/ind.html'</span>,</span><br><span class="line">                <span class="string">'http://zx.er.cxv/held.html'</span>,</span><br><span class="line">                <span class="string">'http://zx.sdf.vs/hell.jpg'</span>]</span><br><span class="line"><span class="comment"># è¿™é‡Œæ˜¯åˆ—è¡¨æ¨å¯¼å¼</span></span><br><span class="line">    jpg_list = [jpg <span class="keyword">for</span> jpg <span class="keyword">in</span> url_list <span class="keyword">if</span> jpg.endswith(<span class="string">'.jpg'</span>)]</span><br><span class="line">    print(jpg_list)</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥å°†åä¸¤è¡Œæ¢æˆ<code>print(all(jpg.startswith(&#39;.jpg&#39;) for jpg in url_list))</code>å°±ä¼šè¾“å‡º<code>False</code>å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰éƒ½ä»¥â€™.jpgâ€™ç»“å°¾ã€‚<br>è¿˜å¯ä»¥ä½¿ç”¨åŒ¹é…çš„æ–¹å¼ï¼Œæ¯”å¦‚ä½ éœ€è¦åœ¨Nå¤šurlä¸­æ‰¾åˆ°â€™http/ftpâ€™è¿™ä¸¤ä¸ªåè®®çš„urlï¼Œå¯ä»¥è¿™ä¹ˆå†™<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    choices = [<span class="string">'http://'</span>, <span class="string">'ftp://'</span>]</span><br><span class="line">    choices = tuple(choices)<span class="comment"># è¿™é‡Œå¿…é¡»è¦ä½¿ç”¨å…ƒç»„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    url = <span class="string">'http://www.baidu.com'</span></span><br><span class="line">    print(url.startswith(choices))</span><br><span class="line"></span><br><span class="line">    url = <span class="string">'ftp://192.168.1.2'</span></span><br><span class="line">    print(url.startswith(choices))</span><br><span class="line"></span><br><span class="line">    url = <span class="string">'https://www.taoba.com'</span></span><br><span class="line">    print(url.startswith(choices))</span><br></pre></td></tr></table></figure></p><p><code>startswith</code>å’Œ<code>endswitch</code>ä¸¤ä¸ªå‡½æ•°å®Œå…¨å¯ä»¥è¢«æ­£åˆ™è¡¨è¾¾å¼æ›¿ä»£ï¼Œä½†æ˜¯å¯¹äºç®€å•åŒ¹é…æ¥è¯´æ²¡å¿…è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°æ¯”æ­£åˆ™è¦å¿«ä¸”å¯è¯»æ€§æä¹¦å†™å¿«ã€‚</p><h1 id="0X02-Shellé€šé…ç¬¦"><a href="#0X02-Shellé€šé…ç¬¦" class="headerlink" title="0X02 Shellé€šé…ç¬¦"></a>0X02 Shellé€šé…ç¬¦</h1><p>åœ¨åŒ¹é…å­—ç¬¦ä¸²çš„æ—¶å€™ä¸ä»…å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜å¯ä»¥ç”¨æ¯”è¾ƒç®€å•çš„é€šé…ç¬¦ã€‚ä½¿ç”¨é€šé…ç¬¦éœ€è¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¤§å°å†™ã€‚åœ¨Linux/Unix/Macä¸Šè¦åŒºåˆ†å¤§å°å†™ï¼Œåœ¨Windowsä¸Šä¸åŒºåˆ†å¤§å°å†™ã€‚<code>fnmatch</code>ä¸‹æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œ<code>fnmatch</code>æŒ‰æ“ä½œç³»ç»Ÿæ¥åˆ¤æ–­åˆ°åº•åŒºä¸åŒºåˆ†å¤§å°å†™ï¼Œè€Œ<code>fnmatchcase</code>åˆ™å¼ºåˆ¶åŒºåˆ†å¤§å°å†™ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fnmatch <span class="keyword">import</span> fnmatch, fnmatchcase</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>filename = <span class="string">'hello.c'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fnmatch(filename, <span class="string">'*.c'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fnmatch(filename, <span class="string">'hell?.c'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fnmatch(filename, <span class="string">'hellO.c'</span>)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>fnmatch(filename, <span class="string">'hello.c'</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-æŸ¥æ‰¾æ›¿æ¢"><a href="#0X03-æŸ¥æ‰¾æ›¿æ¢" class="headerlink" title="0X03 æŸ¥æ‰¾æ›¿æ¢"></a>0X03 æŸ¥æ‰¾æ›¿æ¢</h1><p>å°†å­—ç¬¦ä¸²Aä¸­æ‰€æœ‰çš„æŸä¸ªå­å­—ç¬¦ä¸²Bæ›¿æ¢ä¸ºå¦å¤–çš„å­—ç¬¦ä¸²Cï¼Œå¯ä»¥ç®€å•çš„ä½¿ç”¨å­—ç¬¦ä¸²çš„<code>replace</code>å‡½æ•°<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">'hello world hello python'</span></span><br><span class="line">    print(text.replace(<span class="string">'hello'</span>, <span class="string">'hey'</span>))</span><br></pre></td></tr></table></figure></p><p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨<code>re</code>æ¨¡å—çš„æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ¹é…æ¥æŸ¥æ‰¾å¹¶æ›¿æ¢ã€‚<code>re.sub()</code>æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™é‡Œsubçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼ˆå…¶ä¸­\1 \2 \3è¡¨ç¤ºåŒ¹é…çš„ç¼–å·ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯å¾…åŒ¹é…æ›¿æ¢çš„å­—ç¬¦ä¸²äº†ã€‚è¿™ä¸ªä¾‹å­å°†<code>1/19/2017</code>è½¬å˜ä¸º<code>2017/1/19</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">'hello world 1/19/2017'</span></span><br><span class="line">    print(re.sub(<span class="string">r'(\d+)/(\d+)/(\d+)'</span>, <span class="string">r'\3-\1-\2'</span>, text))</span><br></pre></td></tr></table></figure></p><h1 id="0X04-Unicodeå¤§æ³•å¥½"><a href="#0X04-Unicodeå¤§æ³•å¥½" class="headerlink" title="0X04 Unicodeå¤§æ³•å¥½"></a>0X04 Unicodeå¤§æ³•å¥½</h1><p>æˆ‘ä»¬æœ‰çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›å¥‡æ€ªçš„å­—ç¬¦ä¸²é—®é¢˜ï¼Œæ¯”å¦‚çœ‹èµ·æ¥æ˜æ˜å®Œå…¨ä¸€æ ·çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åœ¨å¯¹æ¯”çš„æ—¶å€™å±…ç„¶ä¸ç›¸ç­‰ã€‚å¾—ç›ŠäºPython3ä½¿ç”¨çš„Unicodeæˆ‘ä»¬å¯ä»¥ç®€å•çš„å¯¹å­—ç¬¦ä¸²ç»Ÿä¸€è§„èŒƒã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> unicodedata</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    s1 = <span class="string">'char: \u00f1'</span></span><br><span class="line">    s2 = <span class="string">'char: n\u0303'</span></span><br><span class="line">    print(s1)</span><br><span class="line">    print(s2)</span><br><span class="line">    print(s1 == s2, <span class="string">'   '</span>, len(s1), <span class="string">'   '</span>, len(s2))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ”¹ä¸€ä¸‹ç¼–ç </span></span><br><span class="line">    s1 = unicodedata.normalize(<span class="string">'NFC'</span>, s1)</span><br><span class="line">    s2 = unicodedata.normalize(<span class="string">'NFC'</span>, s2)</span><br><span class="line">    print(s1)</span><br><span class="line">    print(s2)</span><br><span class="line">    print(s1 == s2, <span class="string">'   '</span>, len(s1), <span class="string">'   '</span>, len(s2))</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œé¢ç”¨åˆ°çš„é‚£ä¸ªå¥‡æ€ªçš„å­—ç¬¦æˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œæ˜¯åœ¨ã€ŠPython Cookbokã€‹è¿™æœ¬ä¹¦ä¸Šæ‰¾çš„ä¾‹å­ã€‚å°±æ˜¯è¯´çœ‹èµ·æ¥<code>\u00f1</code>è¿™ä¸ªå­—ç¬¦å’Œ<code>n\u0303</code>æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾å‰è€…æ˜¯ä¸€ä¸ªå­—ç¬¦è€Œåè€…æ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯¹æ¯”çš„æ—¶å€™æ‰ä¼šå‡ºç°å­—ç¬¦ä¸²ä¸ç›¸åŒç”šè‡³é•¿åº¦ä¸åŒçš„é—®é¢˜ã€‚ç„¶åå¼•å…¥äº†<code>unicodedata</code>æ¨¡å—ä¹‹åç”¨é‡Œé¢çš„<code>normalize</code>æ–¹æ³•å¯ä»¥å°†å­—ç¬¦ä¸²è§„èŒƒåŒ–ï¼Œ<code>s1 = unicodedata.normalize(&#39;NFC&#39;, s1)</code>å°±æ˜¯å°†s1é‡‡ç”¨NFCæ–¹å¼è§„èŒƒã€‚æ‰€è°“NFCæ–¹å¼å°±æ˜¯ <strong>å…¨ç»„æˆ</strong> ä¹Ÿå°±æ˜¯è¯´â€œå¦‚æœå¯èƒ½çš„è¯å°±æ˜¯ç”¨å•ä¸ªä»£ç ç‚¹ï¼Œä¹Ÿå°±æ˜¯s1é‚£ç§æ–¹å¼â€ï¼ˆè¿™é‡Œå’Œè¿‘åœºé€šè®¯çš„NFCå¾ˆæ˜æ˜¾æ²¡åŠç‚¹å…³ç³»ï¼‰ã€‚å¯é€‰çš„é™¤äº†NFCè¿˜æœ‰NFDï¼ˆå°½é‡ä½¿ç”¨ç»„åˆå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯s2é‚£ç§æ–¹å¼ï¼‰ï¼Œè¿˜æ”¯æŒNFKCå’ŒNFKDè¿™é‡Œå°±è‡ªè¡ŒGoogleä¸€ä¸‹å§ã€‚</p><h1 id="0X05-å­—ç¬¦ä¸²å¯¹é½"><a href="#0X05-å­—ç¬¦ä¸²å¯¹é½" class="headerlink" title="0X05 å­—ç¬¦ä¸²å¯¹é½"></a>0X05 å­—ç¬¦ä¸²å¯¹é½</h1><p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œå¯¹é½æ“ä½œï¼Œæ¯”å¦‚åœ¨ç»ˆç«¯ä¸­æ¨¡æ‹Ÿç•Œé¢ä¹‹ç±»çš„ã€‚å¯ä»¥ä½¿ç”¨Cè¯­è¨€é£æ ¼çš„%10Sè¿™ç§å»æ›¿ä»£ï¼Œä½†æ˜¯æœ‰æ›´å¥½ç”¨ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å†…ç½®çš„<code>ljust/rjust/center</code>æ–¹æ³•ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">'Main Menu'</span></span><br><span class="line">    print(<span class="string">'å·¦å¯¹é½ï¼š'</span>, text.ljust(<span class="number">30</span>))</span><br><span class="line">    print(<span class="string">'å³å¯¹é½ï¼š'</span>, text.rjust(<span class="number">30</span>))</span><br><span class="line">    print(<span class="string">'ä¸­å¯¹é½ï¼š'</span>, text.center(<span class="number">30</span>))</span><br><span class="line"></span><br><span class="line">    print(<span class="string">'å·¦å¯¹é½å¡«å……ï¼š'</span>, text.ljust(<span class="number">30</span>, <span class="string">'+'</span>))</span><br><span class="line">    print(<span class="string">'å³å¯¹é½å¡«å……ï¼š'</span>, text.rjust(<span class="number">30</span>, <span class="string">'='</span>))</span><br><span class="line">    print(<span class="string">'ä¸­å¯¹é½å¡«å……ï¼š'</span>, text.center(<span class="number">30</span>, <span class="string">'*'</span>))</span><br></pre></td></tr></table></figure></p><p>è¿˜æœ‰ä¸€ä¸ªç‚«é…·çš„èåˆå‡½æ•°å«<code>format</code>ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¾…å¤„ç†å­—ç¬¦ä¸²ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é€‰é¡¹ã€‚å…·ä½“é€‰é¡¹å¦‚ä¸‹ï¼šå…¶ä¸­â€™^â€™æ˜¯å±…ä¸­ï¼Œâ€™&gt;â€™æ˜¯å³å¯¹é½ï¼Œâ€™&lt;â€™æ˜¯å·¦å¯¹é½ï¼Œåé¢è·Ÿç€çš„æ•°å­—æ˜¯å®½åº¦ï¼Œå¯¹é½å­—ç¬¦å‰é¢æ˜¯å¡«å……å­—ç¬¦ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">'Main Menu'</span></span><br><span class="line">    print(format(text, <span class="string">'&gt;20'</span>))</span><br><span class="line">    print(format(text, <span class="string">'&lt;20'</span>))</span><br><span class="line">    print(format(text, <span class="string">'^20'</span>))</span><br><span class="line"></span><br><span class="line">    print(format(text, <span class="string">'-&gt;20'</span>))</span><br><span class="line">    print(format(text, <span class="string">'=&lt;20'</span>))</span><br><span class="line">    print(format(text, <span class="string">'*^20'</span>))</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¥‡æŠ€æ·«å·§ (ä¸€) åˆ—è¡¨ã€é›†åˆã€å­—å…¸</title>
      <link href="/2017/01/15/python-magic-1/"/>
      <url>/2017/01/15/python-magic-1/</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"><a href="#æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚" class="headerlink" title="æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚"></a>æ–‡ç« ä¸­çš„ä»£ç ä»…åœ¨Python3ä¸­æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰åœ¨Python2ä¸­æµ‹è¯•ã€‚</h3></blockquote><h1 id="0X00-è¡¨è¾¾å¼"><a href="#0X00-è¡¨è¾¾å¼" class="headerlink" title="0X00 *è¡¨è¾¾å¼"></a>0X00 *è¡¨è¾¾å¼</h1><p>ä»æŸä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­åˆ†è§£å‡ºNä¸ªå…ƒç´ ï¼Œä½†æ˜¯è¿™ä¸ªå¯è¿­ä»£çš„å¯¹è±¡å¯èƒ½ä¼šè¶…è¿‡Nï¼Œä¼šå‡ºç°too many values to unpackå¼‚å¸¸ã€‚</p><p>æ¯”å¦‚æˆ‘è¿™å„¿æœ‰Nä¸ªç»Ÿè®¡ä¿¡æ¯ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡çš„ä¿¡æ¯ä¸å‡†ç¡®éœ€è¦åˆ é™¤æ‰ï¼Œè€Œå°†ä¸­é—´çš„ä¿¡æ¯ä¿ç•™ä¸‹æ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿™ä¹ˆå¼„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    grade = [<span class="number">23</span>, <span class="number">45</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">78</span>, <span class="number">98</span>, <span class="number">89</span>, <span class="number">97</span>, <span class="number">69</span>, <span class="number">77</span>, <span class="number">88</span>, <span class="number">50</span>, <span class="number">65</span>, <span class="number">99</span>, <span class="number">98</span>]</span><br><span class="line">    first, *new_grade, last = grade</span><br><span class="line">    print(new_grade)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„èµ‹å€¼å°±æ˜¯å°†ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªèµ‹ç»™äº†firstå’Œlastï¼Œè€Œä¸­é—´çš„ç»™äº†new_grade</p><a id="more"></a><h1 id="0X01-å®šé•¿é˜Ÿåˆ—"><a href="#0X01-å®šé•¿é˜Ÿåˆ—" class="headerlink" title="0X01 å®šé•¿é˜Ÿåˆ—"></a>0X01 å®šé•¿é˜Ÿåˆ—</h1><p>æœ‰ä¸€ç§æƒ…å†µï¼šç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ä¼šè®°å½•æ—¥å¿—ï¼Œæ¯”å¦‚è¯´webç¨‹åºçš„è®¿é—®å†å²ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åªä¿ç•™æœ€åçš„1Wæ¡æ•°æ®ï¼Œé‚£ä¹ˆå¾ˆå¿«èƒ½æƒ³åˆ°ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™åˆ¤æ–­é•¿åº¦ï¼Œç„¶åå¯¹åº”çš„appendå’Œdelã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªæ›´ç®€å•ä¸”æ›´å¿«é€Ÿçš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨<code>collections.deque()</code>ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ª1024é•¿çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬åˆ—è¡¨é‡Œåªå­˜æœ€æ–°çš„7æ¡ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥ä¸€ä¸ªåŒ…</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"><span class="comment"># å½“åšä¸€ç§æ•°æ®è§£é›‡æ¥ç”¨å°±å¯ä»¥</span></span><br><span class="line">    auto_queue = collections.deque(maxlen=<span class="number">7</span>)</span><br><span class="line">    my_list = range(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> my_list:</span><br><span class="line">        auto_queue.append(i)</span><br><span class="line">    print(auto_queue)</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œåˆ—è¡¨é‡Œåªä¿å­˜äº†æœ€åæ’å…¥çš„ä¸ƒæ¡æ•°æ®ã€‚</p><h1 id="0X02-æœ€å¤§æœ€å°çš„å‡ ä¸ªå…ƒç´ "><a href="#0X02-æœ€å¤§æœ€å°çš„å‡ ä¸ªå…ƒç´ " class="headerlink" title="0X02 æœ€å¤§æœ€å°çš„å‡ ä¸ªå…ƒç´ "></a>0X02 æœ€å¤§æœ€å°çš„å‡ ä¸ªå…ƒç´ </h1><p>å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œéœ€è¦æ‰¾åˆ°åˆ—è¡¨é‡Œæœ€å¤§çš„Nä¸ªå…ƒç´ æ—¶ï¼Œä¸€èˆ¬ä¼šæƒ³åˆ°å…ˆæ’åºç„¶ååˆ†ç‰‡ï¼Œè¿™æƒ³æ³•å½“ç„¶ä¸å¤šï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´å¥½ç”¨çš„æ–¹æ³•ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_list = [<span class="number">34</span>, <span class="number">234</span>, <span class="number">56</span>, <span class="number">56</span>, <span class="number">345</span>, <span class="number">456</span>, <span class="number">23</span>, <span class="number">213</span>, <span class="number">456</span>, <span class="number">8</span>, <span class="number">98</span>, <span class="number">43</span>, <span class="number">2</span>, <span class="number">67</span>]</span><br><span class="line">    print(<span class="string">'max: '</span>, heapq.nlargest(<span class="number">3</span>,  my_list))<span class="comment"># æ‰¾åˆ°æœ€å¤§çš„ä¸‰ä¸ª</span></span><br><span class="line">    print(<span class="string">'min: '</span>, heapq.nsmallest(<span class="number">2</span>, my_list)) <span class="comment"># æ‰¾åˆ°æœ€å°çš„ä¸¤ä¸ª</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘è¿™é‡Œç”¨åˆ—è¡¨æ¥æ¼”ç¤ºï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ”¯æŒæ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨é‡ŒåŒ…å«å¾ˆå¤šä¸ªå­—å…¸ï¼Œå­—å…¸é‡Œæ˜¯å­¦ç”Ÿè€ƒè¯•ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ç”¨è€ƒè¯•åˆ†æ•°æ¥æ‰¾åˆ°å‰ä¸‰åï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_list = [&#123;<span class="string">'name'</span>: <span class="string">'å°æ˜'</span>, <span class="string">'grade'</span>: <span class="number">56</span>&#125;, &#123;<span class="string">'name'</span>: <span class="string">'å°çº¢'</span>, <span class="string">'grade'</span>: <span class="number">87</span>&#125;, &#123;<span class="string">'name'</span>: <span class="string">'å°åˆš'</span>, <span class="string">'grade'</span>: <span class="number">67</span>&#125;,</span><br><span class="line">               &#123;<span class="string">'name'</span>: <span class="string">'å°å¿—'</span>, <span class="string">'grade'</span>: <span class="number">46</span>&#125;, &#123;<span class="string">'name'</span>: <span class="string">'å°é€—é€¼'</span>, <span class="string">'grade'</span>: <span class="number">99</span>&#125;, &#123;<span class="string">'name'</span>: <span class="string">'å°å'</span>, <span class="string">'grade'</span>: <span class="number">85</span>&#125;,]</span><br><span class="line">    print(<span class="string">'max: '</span>, heapq.nlargest(<span class="number">3</span>,  my_list, key=<span class="keyword">lambda</span> s: s[<span class="string">'grade'</span>]))</span><br><span class="line">    print(<span class="string">'min: '</span>, heapq.nsmallest(<span class="number">3</span>, my_list, key=<span class="keyword">lambda</span> s: s[<span class="string">'grade'</span>]))</span><br></pre></td></tr></table></figure></p><p>key åé¢çš„ <code>lambda s: s[&#39;grade&#39;]</code>æ˜¯ç”¨äº†ä¸€ä¸ª <strong>åŒ¿åå‡½æ•°</strong> ã€‚åˆ—è¡¨é‡Œå”¯ä¸€çš„å€¼å°±æ˜¯æ’åºçš„å…³é”®å­—ã€‚æ›´å¤šå…³äº<span class="exturl" data-url="aHR0cDovL3d3dy5saWFveHVlZmVuZy5jb20vd2lraS8wMDE0MzE2MDg5NTU3MjY0YTZiMzQ4OTU4ZjQ0OTk0OWRmNDJhNmQzYTJlNTQyYzAwMC8wMDE0MzE4NDM0NTY0MDg2NTIyMzNiODhiNDI0NjEzYWE4ZWMyZmUwMzJmZDg1YTAwMA==" title="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431843456408652233b88b424613aa8ec2fe032fd85a000">æ›´å¤šå…³äºåŒ¿åå‡½æ•°<i class="fa fa-external-link"></i></span></p><p>å¦‚æœNç›¸å¯¹æ€»æ•°æ®é‡æ¥è¯´å¾ˆå°ï¼Œå¯ä»¥ç”¨<code>heapq.heapify()</code>è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚è¿™ä¸ªå‡½æ•°ä¼šå°†åŸæ¥çš„é›†åˆè½¬å˜æˆåˆ—è¡¨å¹¶ä»¥ <strong>å †</strong> çš„å½¢å¼æ’åºã€‚è€Œå †æœ€é‡è¦çš„ä¸€ä¸ªç‰¹æ€§å°±æ˜¯æœ€å°çš„é‚£ä¸ªå…ƒç´ ä¸€å®šåœ¨ç¬¬ä¸€ä½ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨æ¥è·å–æœ€å°çš„å‰Nä¸ªã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_list = [<span class="number">234</span>, <span class="number">324</span>, <span class="number">456</span>, <span class="number">567</span>, <span class="number">345</span>, <span class="number">23</span>, <span class="number">546</span>, <span class="number">567</span>, <span class="number">98</span>, <span class="number">45</span>, <span class="number">2</span>, <span class="number">576</span>]</span><br><span class="line">    heapq.heapify(my_list)</span><br><span class="line">    print(my_list)<span class="comment"># æŸ¥çœ‹æ’åºç»“æœ</span></span><br><span class="line">    print(heapq.heappop(my_list))<span class="comment"># å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶é‡æ‹</span></span><br><span class="line">    print(heapq.heappop(my_list))</span><br><span class="line">    print(heapq.heappop(my_list))</span><br></pre></td></tr></table></figure></p><h1 id="0X03-ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#0X03-ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="0X03 ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>0X03 ä¼˜å…ˆçº§é˜Ÿåˆ—</h1><p>æ™®é€šé˜Ÿåˆ—éƒ½æ˜¯æŒ‰ç…§FIFO(first in first out)æ¥å¢åˆ æ•°æ®ï¼Œæœ‰äº›ç‰¹æ®Šæƒ…å†µéœ€è¦ç»™æ¯ä¸ªå…ƒç´ è®¾å®šä¼˜å…ˆçº§ï¼Œpushå…ƒç´ çš„æ—¶å€™è®¾å®šä¼˜å…ˆçº§ï¼Œpopçš„æ—¶å€™æ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„ã€‚æ¯”å¦‚è¯´æ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å°±æ˜¯è¿™æ ·çš„ï¼Œä¼šç»™æ¯ä¸ªè¿›ç¨‹è®¾ç½®ä¼˜å…ˆçº§ã€‚ä¸è¿‡å½“ç„¶ï¼Œä¸ä¼šä½¿ç”¨Pythonå®ç°çš„äº†ã€‚è¿™é‡Œçš„å†…éƒ¨ä¹Ÿæ˜¯ç”¨å †æ¥å®ç°çš„ï¼Œæ‰€ä»¥åœ¨15è¡Œçš„ä½ç½®ç”¨äº†<code>-priority</code>æ¥è®©å †åå‘æ’ã€<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªç±»å°±æ˜¯é˜Ÿåˆ—ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PriorityQueue</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._queue = []    <span class="comment"># é˜Ÿåˆ—å…ƒç´ </span></span><br><span class="line">        self._index = <span class="number">0</span>     <span class="comment"># ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, item, priority)</span>:</span></span><br><span class="line">        heapq.heappush(self._queue, (-priority, self._index, item))</span><br><span class="line">        self._index += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> heapq.heappop(self._queue)[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜Ÿåˆ—ä¸­çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name    <span class="comment"># åªæœ‰ä¸€ä¸ªå±æ€§ã€name</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Item(&#123;!r&#125;)'</span>.format(self.name)   <span class="comment"># å°†æ ¼å¼åŒ–å¥½çš„å­—ç¬¦ä¸²è¿”å›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_queue = PriorityQueue()  <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—</span></span><br><span class="line">    my_queue.push(Item(<span class="string">'å†…æ ¸'</span>), <span class="number">99</span>)   <span class="comment"># å†…æ ¸çš„ä¼˜å…ˆçº§æœ€é«˜äº†</span></span><br><span class="line">    my_queue.push(Item(<span class="string">'æ–‡ä»¶å¤åˆ¶'</span>), <span class="number">40</span>)</span><br><span class="line">    my_queue.push(Item(<span class="string">'CS:GO'</span>), <span class="number">75</span>)</span><br><span class="line">    print(my_queue.pop())   <span class="comment"># æ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„</span></span><br></pre></td></tr></table></figure></p><h1 id="0X04-ä¸€é”®å¤šå€¼"><a href="#0X04-ä¸€é”®å¤šå€¼" class="headerlink" title="0X04 ä¸€é”®å¤šå€¼"></a>0X04 ä¸€é”®å¤šå€¼</h1><p>æˆ‘ä»¬å¯ä»¥è½»æ¾çš„å†™å‡ºç”¨ä¸€ä¸ªé”®å¯¹åº”å¤šä¸ªå€¼çš„å­—å…¸ï¼Œåªéœ€è¦è®©é”®å¯¹åº”åˆ°åˆ—è¡¨æˆ–è€…é›†åˆå°±å¥½äº†ï¼Œä½†æ˜¯è¦å•°é‡Œå•°å—¦å†™ä¸€å¤§å †ä¸œè¥¿ã€‚å…¶å®å¯ä»¥ç”¨ä¸€ä¸ªå†…å»ºçš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥å¿«é€Ÿåˆ›å»ºè¿™ç§å­—å…¸ï¼Œä¹Ÿå¯ä»¥åƒæ“ä½œæ™®é€šåˆ—è¡¨ä¸€æ ·æ“ä½œé‡Œé¢çš„æ•°æ®ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_dic = defaultdict(list)</span><br><span class="line">    my_dic[<span class="string">'name'</span>].append(<span class="string">'æå'</span>)</span><br><span class="line">    my_dic[<span class="string">'qq'</span>].append(<span class="string">'66666'</span>)</span><br><span class="line">    my_dic[<span class="string">'qq'</span>].append(<span class="string">'23333'</span>)</span><br><span class="line">    my_dic[<span class="string">'qq'</span>].append(<span class="string">'88888'</span>)</span><br><span class="line">    print(my_dic)</span><br></pre></td></tr></table></figure></p><h1 id="0X05-åˆ†ç‰‡å‘½å"><a href="#0X05-åˆ†ç‰‡å‘½å" class="headerlink" title="0X05 åˆ†ç‰‡å‘½å"></a>0X05 åˆ†ç‰‡å‘½å</h1><p>Pythonä¸­åˆ†ç‰‡éå¸¸å¥½ç”¨ï¼Œæœ‰çš„æ—¶å€™ä¼šåœ¨ç¨‹åºä¸­å‡ºç°å¾ˆå¤šåˆ†ç‰‡ï¼Œç®¡ç†èµ·æ¥ç‰¹åˆ«éº»çƒ¦ã€‚å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ç»™åˆ†ç‰‡å‘½åï¼Œä¸‹æ¬¡å†æ¬¡è°ƒç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ†ç‰‡çš„åå­—ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = <span class="string">'shawn 17 M'</span></span><br><span class="line">    name = slice(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">    age  = slice(<span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line">    sex  = slice(<span class="number">9</span>, <span class="number">10</span>)</span><br><span class="line">    print(data[name])</span><br><span class="line">    print(data[age])</span><br><span class="line">    print(data[sex])</span><br></pre></td></tr></table></figure></p><h1 id="0X06-è¯é¢‘ç»Ÿè®¡"><a href="#0X06-è¯é¢‘ç»Ÿè®¡" class="headerlink" title="0X06 è¯é¢‘ç»Ÿè®¡"></a>0X06 è¯é¢‘ç»Ÿè®¡</h1><p>ä»ä¸€ä¸ªåºåˆ—ä¸­æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ ã€‚<code>Counter</code>å¯¹è±¡è¿˜å¯ä»¥è¿›è¡Œç®€å•çš„åŠ å‡ï¼Œæ¯”å¦‚aåºåˆ—é‡Œå‡ºç°äº†10æ¬¡â€™helloâ€™è€Œbåºåˆ—é‡Œå‡ºç°äº†3æ¬¡â€™helloâ€™ï¼Œé‚£ä¹ˆa+bçš„è¯â€™helloâ€™çš„å€¼å°±ä¼šå˜æˆ13ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    data = [<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'hey'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'jack'</span>, <span class="string">'hey'</span>, <span class="string">'york'</span>, <span class="string">'hey'</span>, <span class="string">'hello'</span>, <span class="string">'hello'</span>]</span><br><span class="line">    word_count = Counter(data)</span><br><span class="line">    print(word_count.most_common(<span class="number">1</span>))<span class="comment"># è¿™ä¸ªå‚æ•°1å¯ä»¥æ›´æ”¹ï¼Œè¡¨ç¤ºçš„æ˜¯å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‡ ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure></p><h1 id="0X07-å¯¹å­—å…¸åˆ—è¡¨æ’åº"><a href="#0X07-å¯¹å­—å…¸åˆ—è¡¨æ’åº" class="headerlink" title="0X07 å¯¹å­—å…¸åˆ—è¡¨æ’åº"></a>0X07 å¯¹å­—å…¸åˆ—è¡¨æ’åº</h1><p>æ¯”å¦‚æˆ‘ä»¬ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°äº†éƒ¨åˆ†å­¦ç”Ÿçš„æˆç»©ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯å­˜æˆä¸€ä¸ªå­—å…¸ï¼Œå¤šä¸ªå­—å…¸ç»„æˆä¸€ä¸ªåˆ—è¡¨ã€‚ç„¶åéœ€è¦è®©åˆ—è¡¨æŒ‰å­¦ç”Ÿæˆç»©æ’åºã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    student = [</span><br><span class="line">        &#123;<span class="string">'name'</span>: <span class="string">'å°æ˜'</span>, <span class="string">'mark'</span>: <span class="number">98</span>&#125;,</span><br><span class="line">        &#123;<span class="string">'name'</span>: <span class="string">'å°çº¢'</span>, <span class="string">'mark'</span>: <span class="number">87</span>&#125;,</span><br><span class="line">        &#123;<span class="string">'name'</span>: <span class="string">'å°åˆš'</span>, <span class="string">'mark'</span>: <span class="number">58</span>&#125;,</span><br><span class="line">        &#123;<span class="string">'name'</span>: <span class="string">'æå'</span>, <span class="string">'mark'</span>: <span class="number">100</span>&#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    student = sorted(student, key=itemgetter(<span class="string">'name'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> student:</span><br><span class="line">        print(i)</span><br></pre></td></tr></table></figure></p><h1 id="0X08-ç­›é€‰åºåˆ—"><a href="#0X08-ç­›é€‰åºåˆ—" class="headerlink" title="0X08 ç­›é€‰åºåˆ—"></a>0X08 ç­›é€‰åºåˆ—</h1><p>æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢å…¨æ˜¯æŸæ¬¡è€ƒè¯•çš„æˆç»©ï¼Œéœ€è¦æˆç»©åˆ—è¡¨ä¸­æ‰¾åˆ°æ‰€æœ‰çš„ä¸åŠæ ¼æˆç»©ã€‚å¯ä»¥è½»æ¾å†™å‡ºï¼šå®šä¹‰ç©ºåˆ—è¡¨ï¼Œforéå†æˆç»©å•ï¼Œåˆ¤æ–­&lt;60çš„å°±appendã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªæ›´æ–¹ä¾¿çš„æ–¹æ¡ˆï¼Œå°±æ˜¯ä½¿ç”¨ <strong>åˆ—è¡¨æ¨å¯¼å¼</strong> æ¥å®Œæˆã€‚<span class="exturl" data-url="aHR0cHM6Ly9lYXN0bGFrZXNpZGUuZ2l0Ym9va3MuaW8vaW50ZXJweS16aC9jb250ZW50L0NvbXByZWhlbnNpb25zL2xpc3QtY29tcHJlaGVuc2lvbnMuaHRtbA==" title="https://eastlakeside.gitbooks.io/interpy-zh/content/Comprehensions/list-comprehensions.html">æ›´å¤šå…³äºåˆ—è¡¨æ¨å¯¼å¼<i class="fa fa-external-link"></i></span><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_list = [<span class="number">34</span>, <span class="number">56</span>, <span class="number">67</span>, <span class="number">78</span>, <span class="number">95</span>, <span class="number">23</span>, <span class="number">96</span>, <span class="number">23</span>, <span class="number">86</span>, <span class="number">78</span>, <span class="number">89</span>, <span class="number">45</span>]</span><br><span class="line">    print([n <span class="keyword">for</span> n <span class="keyword">in</span> my_list <span class="keyword">if</span> n &lt;= <span class="number">60</span>])</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼æ¥ä»å­—å…¸ä¸­ç­›é€‰å­å­—å…¸ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    mark_list = &#123;</span><br><span class="line">        <span class="string">'å°æ˜'</span>: <span class="number">58</span>,</span><br><span class="line">        <span class="string">'å°çº¢'</span>: <span class="number">94</span>,</span><br><span class="line">        <span class="string">'å°åˆš'</span>: <span class="number">67</span>,</span><br><span class="line">        <span class="string">'å°æ™º'</span>: <span class="number">76</span>,</span><br><span class="line">        <span class="string">'å°äº®'</span>: <span class="number">45</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    unpass = &#123;key:value <span class="keyword">for</span> key, value <span class="keyword">in</span> mark_list.items() <span class="keyword">if</span> value &lt; <span class="number">60</span>&#125;</span><br><span class="line">    print(unpass)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Data Structure </tag>
            
            <tag> Dictionary </tag>
            
            <tag> List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonçš„å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ã€ç±»æ–¹æ³•</title>
      <link href="/2017/01/01/python-function/"/>
      <url>/2017/01/01/python-function/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å®ä¾‹æ–¹æ³•"><a href="#0X00-å®ä¾‹æ–¹æ³•" class="headerlink" title="0X00 å®ä¾‹æ–¹æ³•"></a>0X00 å®ä¾‹æ–¹æ³•</h1><p>Pythonä¸­çš„å®ä¾‹æ–¹æ³•æ˜¯åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ç”¨åˆ°çš„æœ€å¤šçš„æ–¹æ³•ç±»å‹äº†ã€‚ <strong>å®ä¾‹æ–¹æ³•</strong> ä»å­—é¢ç†è§£å°±å¯ä»¥ï¼Œå°±æ˜¯è¯´è¿™ä¸ªæ–¹æ³•æ˜¯å±äºå®ä¾‹çš„ã€‚æ¯æ¬¡å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡å‡ºæ¥ï¼Œè¿™ä¸ªå¯¹è±¡éƒ½ä¼šæ‹¥æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ä»ä¸‹é¢ä»£ç ä¸­å°±å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œè¿™é‡Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªå®ä¾‹æ–¹æ³•â€™get_name()â€™ï¼Œå®šä¹‰å®ä¾‹æ–¹æ³•ä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„ä¿®é¥°ç¬¦ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸€ä¸ªå®ä¾‹æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a = Student()</span><br><span class="line">    a.name = <span class="string">'å°æ˜'</span></span><br><span class="line">    <span class="keyword">print</span> a.get_name()</span><br><span class="line">    b = Student()</span><br><span class="line">    b.name = <span class="string">'å°çº¢'</span></span><br><span class="line">    <span class="keyword">print</span> b.get_name()</span><br></pre></td></tr></table></figure></p><p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå®ä¾‹ï¼Œè°ƒç”¨å®ä¾‹æ–¹æ³•çš„è¾“å‡ºæ˜¯ä¸åŒçš„ï¼Œä¹Ÿå°±å¯ä»¥è¯æ˜è¿™ä¸ªæ–¹æ³•æ˜¯å±äºæŸä¸ªå®ä¾‹çš„ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°æ˜</span><br><span class="line">å°çº¢</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X01-é™æ€æ–¹æ³•"><a href="#0X01-é™æ€æ–¹æ³•" class="headerlink" title="0X01 é™æ€æ–¹æ³•"></a>0X01 é™æ€æ–¹æ³•</h1><p>é™æ€æ–¹æ³•ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚æˆ‘ä»¬å†™æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ°è¡¨è¾¾å¼çš„ç¼–è¯‘ï¼Œä¸€èˆ¬éƒ½æ˜¯è¿™ä¹ˆå†™çš„â€™re.compile()â€™è¿™é‡Œå°±æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨è°ƒç”¨ç¼–è¯‘æ–¹æ³•çš„æ—¶å€™æ˜¯å¹¶æ²¡æœ‰å®ä¾‹åŒ–ä¸€ä¸ªreå¯¹è±¡çš„ã€‚æ‰€ä»¥å¯ä»¥çŸ¥é“ <strong>é™æ€æ–¹æ³•</strong> å°±æ˜¯ä¸éœ€è¦å®ä¾‹åŒ–å¯¹è±¡å³å¯è°ƒç”¨çš„æ–¹æ³•ã€‚ä¸‹é¢æœ‰ä¸€ä¸ªä¾‹å­ï¼Œä¾‹å­ä¸­è¿˜æ˜¯ä¸Šé¢çš„Studentç±»ï¼Œä½†æ˜¯å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•â€™say_hello()â€™ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥ä¸éœ€è¦å®ä¾‹åŒ–å¯¹è±¡å³å¯è°ƒç”¨ã€‚æ­£å› ä¸ºè¿™äº›ç‰¹ç‚¹ï¼Œåœ¨å®šä¹‰é™æ€æ–¹æ³•çš„æ—¶å€™æ²¡æœ‰ä¸€ä¸ªé»˜è®¤çš„å‚æ•°selfã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨è£…é¥°å™¨å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello,world'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    Student.say_hello()</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç»“æœå¦‚ä¸‹ã€‚æˆ‘ä¸ªäººè§‰å¾—é™æ€æ–¹æ³•çš„æœ€å¤§ä½œç”¨å°±æ˜¯å®ç°ä¸€äº›å·¥å…·ç±»ï¼Œæ¯”å¦‚æŸäº›å›ºå®šçš„é‡å¤çš„æ“ä½œä¹‹ç±»çš„ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello,world</span><br></pre></td></tr></table></figure></p><h1 id="0X02-ç±»æ–¹æ³•"><a href="#0X02-ç±»æ–¹æ³•" class="headerlink" title="0X02 ç±»æ–¹æ³•"></a>0X02 ç±»æ–¹æ³•</h1><p>ä½¿ç”¨ç±»æ–¹æ³•éœ€è¦å¼„æ¸…æ¥šç±»ä¸­å±æ€§çš„ç§ç±»ã€‚ç±»é‡Œæœ‰ä¸¤ç§å±æ€§ï¼Œä¸€ç§æ˜¯ <strong>ç±»å±æ€§</strong> ä¸€ç§æ˜¯ <strong>å®ä¾‹å±æ€§</strong> ã€‚é¡¾åæ€ä¹‰ï¼Œç±»å±æ€§å°±æ˜¯è¯´è¿™ä¸ªå±æ€§æ˜¯å±äºç±»çš„ï¼Œè¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ç€ä¸€ä¸ªå±æ€§ã€‚å®ä¾‹å±æ€§å°±æ˜¯å±äºå®ä¾‹çš„å±æ€§ï¼Œæ¯ä¸ªå®ä¾‹çš„å®ä¾‹å±æ€§é—´ä¸å…±äº«ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œå¯ä»¥çœ‹åˆ°ï¼Œç±»å±æ€§å’Œå®ä¾‹å±æ€§æ˜¯å¯ä»¥é‡åçš„ï¼Œä½†æ˜¯è°ƒç”¨çš„æ—¶å€™è¦ç”¨â€™clsâ€™æˆ–è€…â€™selfâ€™æ¥åˆ¶å®šåˆ°åº•è°ƒç”¨çš„æ˜¯å“ªä¸ªå±æ€§ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªç±»å±æ€§â€™nameâ€™å’Œä¸€ä¸ªå®ä¾‹å±æ€§â€™nameâ€™ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="comment"># å£°æ˜å¹¶èµ‹å€¼äº†ä¸€ä¸ªç±»å±æ€§</span></span><br><span class="line">    name = <span class="string">'é»˜è®¤çš„ç±»å±æ€§'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'é»˜è®¤çš„å¯¹è±¡å±æ€§'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_class_name</span><span class="params">(cls)</span>:</span></span><br><span class="line">        cls.name = <span class="string">'ä¿®æ”¹çš„å¯¹è±¡å±æ€§'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_object_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'ä¿®æ”¹çš„å¯¹è±¡å±æ€§'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_class_name</span><span class="params">(cls)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> cls.name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_object_name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a = Student()</span><br><span class="line">    <span class="keyword">print</span> a.get_class_name()</span><br><span class="line">    <span class="keyword">print</span> a.get_object_name()</span><br><span class="line">    a.set_class_name()</span><br><span class="line">    a.set_object_name()</span><br><span class="line">    <span class="keyword">print</span> a.get_class_name()</span><br><span class="line">    <span class="keyword">print</span> a.get_object_name()</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡è¿è¡Œç»“æœå¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºç±»å±æ€§çš„ä½¿ç”¨æ–¹å¼ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ã€‚é¦–å…ˆå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œè·å–äº†açš„å®ä¾‹å±æ€§å’ŒStudentçš„ç±»å±æ€§ï¼Œç„¶åè°ƒç”¨äº†å®ä¾‹æ–¹æ³•å’Œç±»æ–¹æ³•å¯¹ä¸¤ä¸ªå±æ€§é‡æ–°èµ‹å€¼ï¼Œæœ€åå†è¾“å‡ºä¸€æ¬¡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é»˜è®¤çš„ç±»å±æ€§</span><br><span class="line">é»˜è®¤çš„å¯¹è±¡å±æ€§</span><br><span class="line">ä¿®æ”¹çš„å¯¹è±¡å±æ€§</span><br><span class="line">ä¿®æ”¹çš„å¯¹è±¡å±æ€§</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> OOP </tag>
            
            <tag> Instance Method </tag>
            
            <tag> Static Method </tag>
            
            <tag> Class Method </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³Linuxä¸‹MySQL/MariaDBä¸­æ–‡å˜é—®å·ï¼Ÿé—®é¢˜</title>
      <link href="/2016/12/15/linux-mysql-chinese/"/>
      <url>/2016/12/15/linux-mysql-chinese/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#0X00-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="0X00 ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>0X00 ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p>MySQL/MariaDBé»˜è®¤å¹¶æ²¡æœ‰é‡‡ç”¨utf-8ç¼–ç ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä»¥è®©å…¶ä½¿ç”¨utf-8ã€‚<br><code>/etc/my.cnf</code>å°±æ˜¯é…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€ä¹‹ååœ¨<code>[mysqld]</code>ä¸‹é¢åŠ å…¥ä¸¤è¡Œï¼Œä½¿å…¶å˜æˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br><span class="line">init_connect=&apos;SET NAMES utf8&apos;</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶ä¹‹åé‡å¯æœåŠ¡</p><a id="more"></a><h1 id="0X01-ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†"><a href="#0X01-ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†" class="headerlink" title="0X01 ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†"></a>0X01 ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†</h1><p>åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹åæ–°å»ºçš„æ•°æ®åº“é»˜è®¤å°±æ˜¯ä½¿ç”¨utf-8äº†ï¼Œä½†æ˜¯ä¹‹å‰çš„è¿˜ä¸æ˜¯æ‰€ä»¥è¦ä¿®æ”¹ä¸€ä¸‹ã€‚ç™»å½•åˆ°æ•°æ®åº“ï¼Œåœ¨å‘½ä»¤è¡Œç•Œé¢ä¿®æ”¹æ•°æ®åº“çš„å­—ç¬¦é›†ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">DATABASE</span> <span class="string">`databases_name`</span> <span class="keyword">COLLATE</span> <span class="string">'utf8_bin'</span>;</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡é‡å¯æ•°æ®åº“æœåŠ¡ã€‚è¿™æ ·å†è¿æ¥åˆ°æ•°æ®åº“å°±è§£å†³æ‰æ±‰å­—å˜é—®å·çš„é—®é¢˜äº†</p><h1 id="0X02-æ¨èä¸¤æ¬¾è½¯ä»¶"><a href="#0X02-æ¨èä¸¤æ¬¾è½¯ä»¶" class="headerlink" title="0X02 æ¨èä¸¤æ¬¾è½¯ä»¶"></a>0X02 æ¨èä¸¤æ¬¾è½¯ä»¶</h1><p>å¤§å®¶å¥½å¤šäººéƒ½åœ¨ç”¨Navicatï¼Œä½†ç»å¤§å¤šæ•°äººç”¨çš„éƒ½æ˜¯ç›—ç‰ˆè½¯ä»¶ï¼Œè¿™é‡Œæ¨èå¤§å®¶ç”¨ä¸€äº›å¥½ç”¨çš„å¼€æºè½¯ä»¶æ¥æ›¿ä»£ã€‚</p><h3 id="1-HeidiSQL"><a href="#1-HeidiSQL" class="headerlink" title="1 HeidiSQL"></a>1 HeidiSQL</h3><ol><li>ä¸€æ¬¾å¼€æºè½¯ä»¶</li><li>å¯ä»¥è¿æ¥MySQL/MariaDB/SQL Server</li><li>å®˜æ–¹ä¸­æ–‡æ”¯æŒ</li></ol><p><span class="exturl" data-url="aHR0cDovL3d3dy5oZWlkaXNxbC5jb20v" title="http://www.heidisql.com/">ä¸‹è½½åœ°å€ï¼šHeidiSQL<i class="fa fa-external-link"></i></span></p><h3 id="2-MySQL-Workbench"><a href="#2-MySQL-Workbench" class="headerlink" title="2 MySQL Workbench"></a>2 MySQL Workbench</h3><ol><li>ä¸€æ¬¾å¼€æºè½¯ä»¶</li><li>MySQLå®˜æ–¹å¼€å‘</li><li>å¯¼å‡ºè¡¨å…³ç³»å›¾éå¸¸å¼ºå¤§</li></ol><p><span class="exturl" data-url="aHR0cDovL3d3dy5teXNxbC5jb20vcHJvZHVjdHMvd29ya2JlbmNoLw==" title="http://www.mysql.com/products/workbench/">ä¸‹è½½åœ°å€ï¼šMySQL Workbench<i class="fa fa-external-link"></i></span></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Database </tag>
            
            <tag> MySQL </tag>
            
            <tag> MariaDB </tag>
            
            <tag> Encodeing </tag>
            
            <tag> Chinese </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€è¿°å‡ ç§ç®€å•çš„é¡µé¢ç½®æ¢ç®—æ³•</title>
      <link href="/2016/12/15/page-swap/"/>
      <url>/2016/12/15/page-swap/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æœ€ä¼˜ç®—æ³•â€”ä¸å¯èƒ½å®ç°ç®—æ³•"><a href="#0X00-æœ€ä¼˜ç®—æ³•â€”ä¸å¯èƒ½å®ç°ç®—æ³•" class="headerlink" title="0X00 æœ€ä¼˜ç®—æ³•â€”ä¸å¯èƒ½å®ç°ç®—æ³•"></a>0X00 æœ€ä¼˜ç®—æ³•â€”ä¸å¯èƒ½å®ç°ç®—æ³•</h1><p>æœ€ä¼˜ç®—æ³•å¬èµ·æ¥å¾ˆæ£’ï¼Œä½†æ˜¯ <strong>å®ç°èµ·æ¥æ˜¯ä¸å¯èƒ½çš„</strong> ã€‚æœ€ä¼˜ç®—æ³•æ˜¯ï¼šå½“å‘ç”Ÿç¼ºé¡µä¸­æ–­æ—¶ï¼Œå°†æœ€æ™šä¼šç”¨åˆ°çš„é¡µæ¢å‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰ä¸‰ä¸ªé¡µï¼Œç°åœ¨å‘ç”Ÿäº†ç¼ºé¡µä¸­æ–­ï¼Œç¬¬ä¸€ä¸ªé¡µåœ¨ç¬¬201æ¡æŒ‡ä»¤çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œç¬¬äºŒä¸ªé¡µåœ¨ç¬¬5001æ¡æŒ‡ä»¤çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œç¬¬ä¸‰ä¸ªé¡µåœ¨ç¬¬20000æ¡æŒ‡ä»¤çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œé‚£ä¹ˆç¬¬ä¸‰ä¸ªé¡µé¢å°±æ˜¯æœ€æ™šä¼šè¢«ç”¨åˆ°çš„ï¼Œå°±å°†å…¶æ¢å‡ºã€‚è¿™æ ·ç¡®å®æ˜¯æœ€å¥½çš„æ•ˆç‡ï¼Œä½†æ˜¯çœŸæ­£å®ç°ä¸äº†çš„åŸå› æ˜¯ï¼šç¨‹åºä¸å¯èƒ½çŸ¥é“è‡ªå·±åœ¨ä»€ä¹ˆæ—¶å€™éœ€è¦å“ªäº›å†…å­˜ï¼Œæ‰€ä»¥å°±ä¸èƒ½æ‰¾åˆ°æœ€æ™šä¼šè¢«ç”¨åˆ°çš„é¡µã€‚å› ä¸ºè¦ç”¨æœªæ¥çš„äº‹æƒ…æ¥åˆ¤æ–­æ‰€ä»¥æˆ‘ä¸€èˆ¬ç§°ä¹‹ä¸ºæœªæ¥ç®—æ³•ã€‚è™½è¯´å®ç°ä¸äº†ï¼Œä¹Ÿä¸æ˜¯è¯´è¿™ä¸ªç®—æ³•å°±æ²¡æ„ä¹‰äº†ã€‚è¿™ä¸ªç®—æ³•æœ€å¤§çš„æ„ä¹‰å°±åœ¨äºå¯ä»¥æ¯”è¾ƒæ•ˆç‡ã€‚æ•ˆç‡è¶Šæ˜¯æ¥è¿‘æœ€ä¼˜ç®—æ³•çš„å°±è¶Šå¥½ï¼Œå½“ä¸€ä¸ªç®—æ³•å·²ç»èƒ½è¾¾åˆ°æœ€ä¼˜ç®—æ³•æ•ˆç‡çš„101%æ—¶ï¼Œå°±æ²¡å¿…è¦ç´¯æ­»ç´¯æ´»çš„å»ä¼˜åŒ–æ•ˆç‡äº†ï¼Œå¯ä»¥å»æ‰¾ä¸€äº›åˆ«çš„ç“¶é¢ˆäº†ã€‚</p><h1 id="0X01-æœ€è¿‘æœªä½¿ç”¨â€”NRU"><a href="#0X01-æœ€è¿‘æœªä½¿ç”¨â€”NRU" class="headerlink" title="0X01 æœ€è¿‘æœªä½¿ç”¨â€”NRU"></a>0X01 æœ€è¿‘æœªä½¿ç”¨â€”NRU</h1><p>å¦‚æœè¯´æœ€ä¼˜ç®—æ³•å«æœªæ¥ç®—æ³•çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæœ€è¿‘æœªä½¿ç”¨å°±å¯ä»¥å«åšå†å²ç®—æ³•ï¼Œè¿™æ ·å°±å¥½ç†è§£äº†ã€‚å½“ç³»ç»Ÿå‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™ï¼Œåœ¨å†…å­˜ä¸­æ‰¾åˆ°æœ€ä¹…æ²¡è¢«ç”¨è¿‡çš„é¡µï¼Œå°†å…¶æ¢å‡ºã€‚æœ‰ä¸€ç§å®ç°æ–¹æ³•ï¼šç»™æ¯ä¸€ä¸ªé¡µè®¾ç½®ä¸€ä¸ª <strong>R(read)ä½å’ŒM(modify)ä½</strong> ã€‚å½“ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨çš„æ—¶å€™å°†è¿™ä¸ªè¿›ç¨‹çš„æ‰€æœ‰é¡µçš„RMä½éƒ½è®¾ç½®ä¸º0ã€‚ç„¶åæ¯è®¿é—®ä¸€ä¸ªé¡µå°±å°†Rä½ç½®ä¸º1ï¼Œæ¯ä¿®æ”¹ä¸€ä¸ªé¡µå°±å°†Mç½®ä¸º1ã€‚ç³»ç»Ÿæ¯éš”ä¸€æ®µæ—¶é—´å°±å°†æ‰€æœ‰é¡µçš„Rç½®ä¸º0ã€‚é‚£ä¹ˆè¿™é‡Œå°±ä¼šå‡ºç°å››ç§é¡µï¼Œå…¶å®è¿™é‡Œåªæ˜¯ä¸€ä¸ªè¡¨ç¤ºï¼Œæ¯”å¦‚ç¬¬1ç±»ã€‚ä¸å¯èƒ½å‡ºç°ä¸€ä¸ªæ²¡è¢«è®¿é—®å°±ä¿®æ”¹çš„é¡µï¼Œä½†æ˜¯ç¬¬3ç±»é¡µç»è¿‡ä¸€æ®µæ—¶é—´ä¹‹åå°†Rç½®ä¸º0çš„è¯å°±æ˜¯ç¬¬1ç±»äº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç±»åˆ«   |    è®¿é—®   |   ä¿®æ”¹    | R | M</span><br><span class="line">--------------------------------------</span><br><span class="line">ç¬¬0ç±»ï¼š| æ²¡æœ‰è¢«è®¿é—® | æ²¡æœ‰è¢«ä¿®æ”¹ | 0 | 0</span><br><span class="line">ç¬¬1ç±»ï¼š| æ²¡æœ‰è¢«è®¿é—® | å·²ç»è¢«ä¿®æ”¹ | 0 | 1</span><br><span class="line">ç¬¬2ç±»ï¼š| å·²ç»è¢«è®¿é—® | æ²¡æœ‰è¢«ä¿®æ”¹ | 1 | 0</span><br><span class="line">ç¬¬3ç±»ï¼š| å·²ç»è¢«è®¿é—® | å·²ç»è¢«ä¿®æ”¹ | 1 | 1</span><br><span class="line">--------------------------------------</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å†…å­˜ä¸­çš„æ¯ä¸ªé¡µéƒ½æ˜¯è¿™0åˆ°4çš„å…¶ä¸­ä¸€ç§ã€‚é‚£ä¹ˆå½“å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™ï¼ŒNRUç®—æ³•å°±ä¼šä»ç±»åˆ«ç¼–å·æœ€å°çš„ä¸€å †é¡µä¸­ <strong>éšæœº</strong> æ¢å‡ºã€‚</p><a id="more"></a><h1 id="0X02-å…ˆè¿›å…ˆå‡ºâ€”é˜Ÿåˆ—ç½®æ¢ç®—æ³•-FIFO"><a href="#0X02-å…ˆè¿›å…ˆå‡ºâ€”é˜Ÿåˆ—ç½®æ¢ç®—æ³•-FIFO" class="headerlink" title="0X02 å…ˆè¿›å…ˆå‡ºâ€”é˜Ÿåˆ—ç½®æ¢ç®—æ³• FIFO"></a>0X02 å…ˆè¿›å…ˆå‡ºâ€”é˜Ÿåˆ—ç½®æ¢ç®—æ³• FIFO</h1><p>è¿™ç§ç®—æ³•ç›¸å¯¹å®¹æ˜“å®ç°ï¼Œå°±åƒæ˜¯æ•°æ®ç»“æ„ä¸­çš„ <strong>é˜Ÿåˆ—</strong> ä¸€æ ·ã€‚æ¯æ¬¡çš„æ–°é¡µæ”¾åœ¨é˜Ÿåˆ—å°¾éƒ¨ï¼Œå½“å‘ç”Ÿç¼ºé¡µä¸­æ–­æ—¶å°†é˜Ÿåˆ—å¤´éƒ¨çš„é¡µè¸¢æ‰ï¼Œå°†æ–°é¡µæ”¾åˆ°é˜Ÿåˆ—å°¾éƒ¨ã€‚è¿™ç§ç®—æ³•æœ‰ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜å°±æ˜¯ä¼šè¸¢æ‰ä¸€äº›å¿…è¦çš„é¡µï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½ã€‚æƒ³æƒ³ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆåŠ å…¥äº†10000ä¸ªé¡µä»¥ç”¨æ¥è¿è¡Œæ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™å°±ä¼šå°†æ ¸å¿ƒé¡µæ¢å‡ºå»ï¼Œç„¶åå› ä¸ºæ ¸å¿ƒé¡µè¢«æ¢å‡ºå»äº†å°±éœ€è¦å†æ¢è¿›æ¥ï¼Œæœ‰å¯èƒ½å°±é€ æˆäº†è¿ç»­10000ä¸ªé¡µä»é˜Ÿé¦–æ¢åˆ°äº†é˜Ÿå°¾ï¼Œäº§ç”Ÿäº†20000ä¸ªæ“ä½œã€‚</p><h1 id="0X03-ç¬¬äºŒæ¬¡æœºä¼šâ€”FIFOæ”¹è¿›"><a href="#0X03-ç¬¬äºŒæ¬¡æœºä¼šâ€”FIFOæ”¹è¿›" class="headerlink" title="0X03 ç¬¬äºŒæ¬¡æœºä¼šâ€”FIFOæ”¹è¿›"></a>0X03 ç¬¬äºŒæ¬¡æœºä¼šâ€”FIFOæ”¹è¿›</h1><p>å› ä¸ºFIFOä¼šå°†æ‰€æœ‰é˜Ÿå°¾ç›´æ¥è¸¢å‡ºå»ï¼Œç¬¬äºŒæ¬¡æœºä¼šå°±æ˜¯ç»™äº†æ¯ä¸ªé¡µé¢å†ä¸€æ¬¡æœºä¼šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ¯ä¸ªé¡µé¢è¿˜æ˜¯æœ‰ä¸€ä¸ªRä½ï¼Œç„¶åæœ‰ä¸€ä¸ªæ—¶é—´ä½ç”¨æ¥è®°å½•è£…å…¥æ—¶é—´ã€‚æ¯å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™æŸ¥çœ‹é˜Ÿé¦–é¡µçš„Rå€¼ï¼Œå¦‚æœRå€¼ä¸º0é‚£ä¹ˆå°±å°†å…¶æ¢å‡ºï¼Œå¦åˆ™å°±å°†å…¶Rå€¼è®¾ç½®ä¸º0ï¼Œå¹¶è®¾ç½®â€˜è£…å…¥æ—¶é—´â€™ï¼ˆåœ¨å“ªä¸ªæ—¶é’Ÿçš„æ—¶å€™è£…å…¥çš„ï¼‰ï¼Œç„¶åå†ä»é˜Ÿé¦–çš„ä¸‹ä¸€ä¸ªé¡µå¼€å§‹åˆ¤æ–­ã€‚</p><h1 id="0X04-æ—¶é’Ÿç®—æ³•â€”CLOCK"><a href="#0X04-æ—¶é’Ÿç®—æ³•â€”CLOCK" class="headerlink" title="0X04 æ—¶é’Ÿç®—æ³•â€”CLOCK"></a>0X04 æ—¶é’Ÿç®—æ³•â€”CLOCK</h1><p>å› ä¸ºäºŒæ¬¡æœºä¼šç®—æ³•è¿˜æ˜¯åŸºäºå•å‘é“¾è¡¨çš„ï¼Œæ‰€ä»¥ä¼šç»å¸¸éœ€è¦åœ¨é“¾è¡¨ä¸­ç§»åŠ¨é¡µé¢ï¼Œè™½ç„¶æ˜¯åœ¨å†…å­˜ä¸­æ“ä½œä½†è¿˜æ˜¯ä¼šæµªè´¹èµ„æºã€‚è¿™é‡Œå°±æŠŠå•å‘é“¾è¡¨æ”¹æˆäº† <strong>ç¯å½¢é“¾è¡¨</strong> ã€‚å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™ï¼Œæ£€æŸ¥æŒ‡é’ˆæŒ‡å‘çš„é¡µé¢ï¼Œå¦‚æœé¡µçš„Rä½æ˜¯0åˆ™æå‡ºè¿™ä¸ªé¡µé¢å°†æ–°çš„é¡µåŠ åˆ°è¿™ä¸ªä½ç½®ï¼Œå¹¶è®¾ç½®Rä½ä¸º1ï¼›å¦åˆ™å°±å°†å½“å‰çš„Rä½è®¾ç½®ä¸º0å¹¶å°†æŒ‡é’ˆä¸‹ç§»ã€‚æ‰€ä»¥æ—¶é’Ÿç®—æ³•ä¹Ÿå¯ä»¥ç†è§£æˆæ˜¯ç¬¬äºŒæ¬¡æœºä¼šç®—æ³•çš„æ”¹è¿›ç‰ˆæœ¬ã€‚</p><p><img src="http://qiniu.just666.cn//article/image/clock.png" alt="æ—¶é’Ÿç®—æ³•"></p><blockquote><p>å›¾ç‰‡æ¥æºï¼šã€Šç°ä»£æ“ä½œç³»ç»Ÿã€‹ Andrew S. Tanenbaum</p></blockquote><h1 id="0X05-æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•â€”LRU"><a href="#0X05-æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•â€”LRU" class="headerlink" title="0X05 æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•â€”LRU"></a>0X05 æœ€è¿‘æœ€å°‘ä½¿ç”¨ç½®æ¢ç®—æ³•â€”LRU</h1><p>æœ‰è¿™æ ·ä¸€ç§æƒ…å†µï¼šâ€œåœ¨å‰é¢å‡ æ¡æŒ‡ä»¤ä¸­é¢‘ç¹ä½¿ç”¨çš„é¡µå¾ˆå¯èƒ½åœ¨åé¢çš„åŠæ¡æŒ‡ä»¤ä¸­è¢«ä½¿ç”¨â€ï¼Œæ‰€ä»¥è¯´å·²ç»å¾ˆä¹…æ²¡æœ‰ç”¨è¿‡çš„é¡µå¾ˆå¯èƒ½åœ¨æœªæ¥çš„ä¸€æ®µæ—¶é—´å†…ä¹Ÿä¸ä¼šè¢«ç”¨åˆ°ã€‚æ‰€ä»¥å¯ä»¥åœ¨å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™å°†æœ€ä¹…æœªä½¿ç”¨çš„é¡µæ›¿æ¢å‡ºå»ã€‚ä¸ºäº†å®ç°LRUç®—æ³•éœ€è¦å°†æ‰€æœ‰é¡µä¸²æˆä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨çš„ä¸€ç«¯æ˜¯æœ€å¸¸ä½¿ç”¨çš„é¡µï¼Œå¦ä¸€ç«¯åˆ™æ˜¯æœ€ä¸å¸¸ç”¨çš„é¡µï¼Œæ¯æ¬¡è°ƒç”¨ä¸€ä¸ªé¡µçš„æ—¶å€™éƒ½è¦å°†æ•´ä¸ªé“¾è¡¨æ›´æ–°ï¼Œä½†ç§»åŠ¨æ•´ä¸ªé“¾è¡¨æ˜¯å¾ˆæ…¢çš„ã€‚</p><p>å¯ä»¥é€šè¿‡ç‰¹æ®Šç¡¬ä»¶æ¥å®ç°LRUã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šè¿™é‡Œéœ€è¦ä¸€ä¸ª64ä½çš„è®¡æ•°å™¨ï¼Œè®¡æ•°å™¨åœ¨æ¯æ¡æŒ‡ä»¤æ‰§è¡Œå®Œæˆä¹‹åè‡ªåŠ¨åŠ ä¸€ï¼Œä¸”æ¯ä¸ªé¡µè¡¨é¡¹ä¸­éœ€è¦éœ€è¦è¶³å¤Ÿå®¹çº³è¿™ä¸ªè®¡æ•°å™¨ã€‚åœ¨æ¯æ¬¡è®¿é—®å†…å­˜çš„æ—¶å€™å°†å½“å‰è®¡æ•°å™¨çš„å€¼èµ‹å€¼ç»™è¯¥é¡µè¡¨é¡¹çš„å¯¹åº”åŒºåŸŸã€‚å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™æ‰¾åˆ°æ¯ä¸ªé¡µè¡¨é¡¹ä¸­è¯¥å€¼æœ€å°çš„ï¼Œè¿™ä¸ªé¡µè¡¨é¡¹å°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼š <strong>è¿™ä¸ªè®¡æ•°å™¨åªæœ‰ä¸€ä¸ª</strong> è€Œä¸æ˜¯æ¯ä¸ªé¡µè¡¨é¡¹ä¸€ä¸ªï¼›æ¯ä¸ªé¡µè¡¨é¡¹é‡Œåªæ˜¯æœ‰ä¸€ä¸ªå¯ä»¥å®¹çº³è¿™ä¸ªè®¡æ•°å™¨çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´è¦æœ‰ä¸€ä¸ª64ä½çš„ç©ºé—´æ¥ä¿å­˜æ•°å­—ã€‚è¿™é‡Œä¿å­˜çš„æ•°å­—ä¸ä¼šéšç€æŒ‡ä»¤çš„æ‰§è¡Œè€Œè‡ªå¢ï¼Œéšç€æŒ‡ä»¤æ‰§è¡Œè‡ªå¢çš„å°±åªæœ‰é‚£ä¸ªå”¯ä¸€çš„è®¡æ•°å™¨ã€‚</p><p>ç¬¬äºŒç§æ–¹æ¡ˆï¼šå‡è®¾æŸæœºå™¨æœ‰nä¸ªé¡µæ¡†ï¼Œé‚£ä¹ˆLRUç¡¬ä»¶å°±æ˜¯ä¸€ä¸ªn * nçš„çŸ©é˜µï¼Œåˆå§‹åŒ–ä¸ºé›¶çŸ©é˜µã€‚å½“è®¿é—®é¡µæ¡†kæ—¶ <strong>å…ˆ</strong> å°†kè¡Œå…¨éƒ¨ç½®1ï¼Œ <strong>å†</strong> å°†kåˆ—å…¨éƒ¨ç½®0ã€‚åœ¨ä»»æ„æ—¶é—´äºŒè¿›åˆ¶æ•°å€¼æœ€å°çš„è¡Œå°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼Œç¬¬äºŒå°çš„å°±æ˜¯ä¸‹ä¸€ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ã€‚</p><h1 id="0X06-æœ€ä¸å¸¸ç”¨ç½®æ¢ç®—æ³•â€”NFU"><a href="#0X06-æœ€ä¸å¸¸ç”¨ç½®æ¢ç®—æ³•â€”NFU" class="headerlink" title="0X06 æœ€ä¸å¸¸ç”¨ç½®æ¢ç®—æ³•â€”NFU"></a>0X06 æœ€ä¸å¸¸ç”¨ç½®æ¢ç®—æ³•â€”NFU</h1><p>å› ä¸ºLRUç®—æ³•éœ€è¦ç‹¬ç«‹çš„ç¡¬ä»¶è®¾å¤‡ï¼Œç„¶è€Œå¤§å¤šæ•°è®¡ç®—æœºå¹¶æ²¡æœ‰è¿™ç§ç¡¬ä»¶ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªèƒ½ç”¨è½¯ä»¶å®ç°çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç§æˆä¸ºNFUçš„æœ€ä¸å¸¸ç”¨ç½®æ¢ç®—æ³•å°±æ˜¯ä¸€ç§ä½¿ç”¨è½¯ä»¶æ¨¡æ‹ŸLRUçš„å®ç°ã€‚åœ¨NFUä¸­é’ˆå¯¹æ¯ä¸€ä¸ªé¡µè®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­æ—¶åˆ·æ–°æ‰€æœ‰çš„é¡µå¯¹åº”çš„è®¡æ•°å™¨ï¼Œå…ˆå°†æ¯ä¸€ä¸ªé¡µçš„Rå€¼ï¼ˆRå€¼ç”¨æ¥æ ‡è¯†è¯¥é¡µæ˜¯å¦ç”¨è¿‡ï¼Œä¸º0æˆ–1ï¼‰åŠ åˆ°è®¡æ•°å™¨ä¸Šï¼Œå†å°†Rç½®0ã€‚è¿™ä¸ªè®¡æ•°å™¨åŸºæœ¬å¯ä»¥åæ˜ æŸä¸ªé¡µçš„ä½¿ç”¨é¢‘ç‡ã€‚å½“å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™å°±å¯ä»¥è¸¢å‡ºè®¡æ•°å™¨æœ€å°çš„é¡µã€‚</p><p>è¿™ä¸ªç®—æ³•çš„ä¸€å¤§é—®é¢˜å°±æ˜¯ï¼šè®°å¿†åŠ›å¤ªå¼ºã€‚æ¯”å¦‚è¯´æˆ‘å¼€æœºçš„æ—¶å€™å¼€æœºç›¸å…³çš„é¡µå¯èƒ½è°ƒç”¨äº†10ä¸‡æ¬¡ï¼Œå¼€æœºä¹‹åå…¶ä»–çš„ä¸œè¥¿å¹¶æ²¡æœ‰è¿™ä¹ˆé«˜çš„ä½¿ç”¨ç‡ï¼Œä½†æ˜¯å› ä¸ºè¿™äº›é¡µçš„è®¡æ•°å™¨å¤ªå¤§äº†ï¼Œæ‰€ä»¥ä¸ä¼šè¢«è½»æ˜“è¸¢å‡ºå»ï¼Œå°±ä¼šå¯¼è‡´æœ‰ä¸€æ‰¹â€˜å…ƒè€é¡µâ€™æ»ç•™åœ¨å†…å­˜ä¸­æµªè´¹ç©ºé—´ã€‚</p><p>å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„å°ä¿®æ”¹è§£å†³è¿™ä¸ªé—®é¢˜ï¼šé¦–å…ˆåœ¨Rå€¼åŠ åˆ°è®¡æ•°å™¨ä¹‹å‰å…ˆå°†è®¡æ•°å™¨å³ç§»ä¸€ä½ï¼ˆäºŒè¿›åˆ¶ç§»ä½ï¼Œæœ€åä¸€ä½æŠ›æ‰ï¼‰ï¼Œå…¶æ¬¡å°†Rä½åŠ å…¥åˆ°è®¡æ•°å™¨çš„æœ€å·¦ç«¯ï¼Œè€Œä¸æ˜¯æœ€å³ç«¯ï¼ˆç®€å•çš„NFUæ˜¯åŠ å…¥åˆ°æœ€å³ç«¯çš„ï¼‰ã€‚ç»è¿‡è¿™ç§ä¿®æ”¹çš„ç®—æ³•ç§°ä¹‹ä¸º <strong>è€åŒ–ç®—æ³•</strong> ã€‚å› ä¸ºè¿™ç§ç®—æ³•ä¸­æ–°çš„æ“ä½œä¼šå¯¹è®¡æ•°å™¨äº§ç”Ÿè¾ƒå¤§çš„å½±å“ï¼Œå¯ä»¥è®©ä»¥å‰çš„è®¡æ•°å™¨è¿…é€Ÿå˜è€ï¼Œæ‰€ä»¥ç§°ä¸ºè€åŒ–ç®—æ³•ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Operation System </tag>
            
            <tag> Virtual Memerry </tag>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä½¿ç”¨threadingå®ç°å¤šçº¿ç¨‹</title>
      <link href="/2016/12/12/python-threading/"/>
      <url>/2016/12/12/python-threading/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å¤šçº¿ç¨‹"><a href="#0X00-å¤šçº¿ç¨‹" class="headerlink" title="0X00 å¤šçº¿ç¨‹"></a>0X00 å¤šçº¿ç¨‹</h1><p>å¤šçº¿ç¨‹æ˜¯ä¸ªæé«˜ç¨‹åºè¿è¡Œæ•ˆç‡çš„å¥½åŠæ³•ï¼Œæœ¬æ¥è¦é¡ºåºæ‰§è¡Œçš„ç¨‹åºç°åœ¨å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œå¯æƒ³è€ŒçŸ¥æ•ˆç‡è¦æé«˜å¾ˆå¤šã€‚ä½†æ˜¯å¤šçº¿ç¨‹ä¹Ÿä¸æ˜¯èƒ½æé«˜æ‰€æœ‰ç¨‹åºçš„æ•ˆç‡ã€‚ç¨‹åºçš„ä¸¤ä¸ªæç«¯æ˜¯â€˜CPUå¯†é›†å‹â€™å’Œâ€˜I/Oå¯†é›†å‹â€™ä¸¤ç§ï¼Œå¤šçº¿ç¨‹æŠ€æœ¯æ¯”è¾ƒé€‚ç”¨äºåè€…ï¼Œå› ä¸ºåœ¨ä¸²è¡Œç»“æ„ä¸­å½“ä½ å»è¯»å†™ç£ç›˜æˆ–è€…ç½‘ç»œé€šä¿¡çš„æ—¶å€™CPUæ˜¯é—²ç€çš„ï¼Œæ¯•ç«Ÿç½‘ç»œæ¯”ç£ç›˜è¦æ…¢å‡ ä¸ªæ•°é‡çº§ï¼Œç£ç›˜æ¯”å†…å­˜æ…¢å‡ ä¸ªæ•°é‡çº§ï¼Œå†…å­˜åˆæ¯”CPUæ…¢å‡ ä¸ªæ•°é‡çº§ã€‚å¤šçº¿ç¨‹æŠ€æœ¯å°±å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œæ¯”å¦‚ä½ çš„ç¨‹åºéœ€è¦å‘é€Nä¸ªhttpæ•°æ®åŒ…ï¼ˆ10ç§’ï¼‰ï¼Œè¿˜éœ€è¦å°†æ–‡ä»¶ä»ä¸€ä¸ªä½ç½®å¤åˆ¶åˆ°å¦ä¸€ä¸ªä½ç½®ï¼ˆ20ç§’ï¼‰ï¼Œç„¶åè¿˜éœ€è¦ç»Ÿè®¡å¦ä¸€ä¸ªæ–‡ä»¶ä¸­â€™hello,worldâ€™å­—ç¬¦ä¸²çš„å‡ºç°æ¬¡æ•°ï¼ˆ4ç§’ï¼‰ï¼Œç°åœ¨ä¸€å…±æ˜¯è¦ç”¨34ç§’ã€‚ä½†æ˜¯å› ä¸ºè¿™äº›æ“ä½œä¹‹é—´æ²¡æœ‰å…³è”ï¼Œæ‰€ä»¥å¯ä»¥å†™æˆå¤šçº¿ç¨‹ç¨‹åºï¼Œå‡ ä¹åªéœ€è¦20ç§’å°±å®Œæˆäº†ã€‚è¿™æ˜¯é’ˆå¯¹I/Oå¯†é›†å‹çš„ï¼Œå¦‚æœæ˜¯CPUå¯†é›†å‹çš„å°±ä¸è¡Œäº†ã€‚æ¯”å¦‚æˆ‘çš„ç¨‹åºè¦è®¡ç®—1000çš„é˜¶ä¹˜ï¼ˆ10ç§’ï¼‰ï¼Œè¿˜è¦è®¡ç®—100000çš„ç´¯åŠ ï¼ˆ5ç§’ï¼‰ï¼Œé‚£ä¹ˆå³ä½¿ç¨‹åºæ˜¯å¹¶è¡Œçš„ï¼Œè¿˜æ˜¯ä¼šè¦ç”¨15ç§’ï¼Œç”šè‡³æ›´å¤šã€‚å› ä¸ºå½“ç¨‹åºä½¿ç”¨CPUçš„æ—¶å€™CPUæ˜¯é€šè¿‡è½®è½¬æ¥æ‰§è¡Œçš„ï¼ŒIOå¯†é›†å‹çš„ç¨‹åºå¯ä»¥åœ¨IOçš„åŒæ—¶ç”¨CPUè®¡ç®—ï¼Œä½†æ˜¯è¿™é‡Œçš„CPUå¯†é›†å‹å°±åªèƒ½å…ˆæ‰§è¡Œä¸€ä¼šå„¿çº¿ç¨‹1å†æ‰§è¡Œä¸€ä¼šå„¿çº¿ç¨‹2ã€‚æ‰€ä»¥å°±éœ€è¦15ç§’ï¼Œç”šè‡³ä¼šæ›´å¤šï¼Œå› ä¸ºCPUåœ¨åˆ‡æ¢çš„æ—¶å€™éœ€è¦è€—æ—¶ã€‚è§£å†³CPUå¯†é›†å‹ç¨‹åºçš„å¤šçº¿ç¨‹é—®é¢˜å°±æ˜¯CPUçš„äº‹æƒ…äº†ï¼Œæ¯”å¦‚Intelçš„è¶…çº¿ç¨‹æŠ€æœ¯ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªæ ¸å¿ƒä¸ŠçœŸæ­£çš„å¹¶è¡Œä¸¤ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºâ€˜åŒæ ¸å››çº¿ç¨‹â€™æˆ–è€…â€˜å››æ ¸å…«çº¿ç¨‹â€™ï¼Œæˆ‘ä»¬è¿™é‡Œå…·ä½“çš„å…ˆä¸è°ˆï¼Œè°ˆæˆ‘ä¹Ÿä¸çŸ¥é“ã€‚</p><a id="more"></a><h1 id="0X01-Pythonéª—äºº"><a href="#0X01-Pythonéª—äºº" class="headerlink" title="0X01 Pythonéª—äºº"></a>0X01 Pythonéª—äºº</h1><p>è¯´äº†è¿™ä¹ˆå¤šå¤šçº¿ç¨‹çš„å¥½å¤„ï¼Œä½†æ˜¯å…¶å®Pythonä¸æ”¯æŒçœŸæ­£æ„ä¹‰ä¸Šçš„å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚åœ¨Pythonä¸­æœ‰ä¸€ä¸ªå«åšGILçš„ä¸œè¥¿ï¼Œä¸­æ–‡æ˜¯ <em>å…¨å±€è§£é‡Šå™¨é”</em> ï¼Œè¿™ä¸œè¥¿æ§åˆ¶äº†Pythonï¼Œè®©Pythonåªèƒ½åŒæ—¶è¿è¡Œä¸€ä¸ªçº¿ç¨‹ã€‚ç›¸å½“äºè¯´çœŸæ­£æ„ä¹‰ä¸Šçš„å¤šçº¿ç¨‹æ˜¯ç”±CPUæ¥æ§åˆ¶çš„ï¼ŒPythonä¸­çš„å¤šçº¿ç¨‹ç”±GILæ§åˆ¶ã€‚å¦‚æœæœ‰ä¸€ä¸ªCPUå¯†é›†å‹ç¨‹åºï¼Œç”¨Cè¯­è¨€å†™çš„ï¼Œè¿è¡Œåœ¨ä¸€ä¸ªå››æ ¸å¤„ç†å™¨ä¸Šï¼Œé‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯çš„è¯æœ€å¤šå¯ä»¥è·å¾—4å€çš„æ•ˆç‡æå‡ï¼Œä½†æ˜¯å¦‚æœç”¨Pythonå†™çš„è¯å¹¶ä¸ä¼šæœ‰æé«˜ï¼Œç”šè‡³ä¼šå˜æ…¢ï¼Œå› ä¸ºçº¿ç¨‹åˆ‡æ¢çš„é—®é¢˜ã€‚æ‰€ä»¥Pythonå¤šçº¿ç¨‹ç›¸å¯¹æ›´åŠ é€‚åˆå†™I/Oå¯†é›†å‹ç¨‹åºï¼Œå†è¯´äº†çœŸæ­£çš„å¯¹æ•ˆç‡è¦æ±‚å¾ˆé«˜çš„CPUå¯†é›†å‹ç¨‹åºéƒ½ç”¨C/C++å»äº†ã€‚</p><h1 id="0X02-ç¬¬ä¸€ä¸ªå¤šçº¿ç¨‹"><a href="#0X02-ç¬¬ä¸€ä¸ªå¤šçº¿ç¨‹" class="headerlink" title="0X02 ç¬¬ä¸€ä¸ªå¤šçº¿ç¨‹"></a>0X02 ç¬¬ä¸€ä¸ªå¤šçº¿ç¨‹</h1><p>Pythonä¸­å¤šçº¿ç¨‹çš„åº“ä¸€èˆ¬ç”¨<code>thread</code>å’Œ<code>threading</code>è¿™ä¸¤ä¸ªï¼Œ<code>thread</code>ä¸æ¨èæ–°æ‰‹å’Œä¸€èˆ¬äººä½¿ç”¨ï¼Œ<code>threading</code>æ¨¡å—å°±ç›¸å½“å¤Ÿç”¨äº†ã€‚<br>æœ‰ä¸€ä¸ªç¨‹åºï¼Œå¦‚ä¸‹ã€‚ä¸¤ä¸ªå¾ªç¯ï¼Œåˆ†åˆ«ä¼‘çœ 3ç§’å’Œ5ç§’ï¼Œä¸²è¡Œæ‰§è¡Œçš„è¯éœ€è¦8ç§’ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sleep_3</span><span class="params">()</span>:</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sleep_5</span><span class="params">()</span>:</span></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    start_time = time.time()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'start sleep 3'</span></span><br><span class="line">    sleep_3()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'start sleep 5'</span></span><br><span class="line">    sleep_5()</span><br><span class="line">    end_time = time.time()</span><br><span class="line">    <span class="keyword">print</span> str(end_time - start_time) + <span class="string">' s'</span></span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start sleep 3</span><br><span class="line">start sleep 5</span><br><span class="line">8.00100016594 s</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬å¯¹å®ƒè¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶å˜æˆå¤šçº¿ç¨‹ç¨‹åºï¼Œè™½ç„¶æ”¹åŠ¨æ²¡æœ‰å‡ è¡Œã€‚é¦–å…ˆå¼•å…¥äº†threadingçš„åº“ï¼Œç„¶åå®ä¾‹åŒ–ä¸€ä¸ªthreading.Threadå¯¹è±¡ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä¼ è¿›æ„é€ æ–¹æ³•å°±è¡Œäº†ã€‚ç„¶åè°ƒç”¨Threadçš„startæ–¹æ³•å¼€å§‹ä¸€ä¸ªçº¿ç¨‹ã€‚join()æ–¹æ³•å¯ä»¥ç­‰å¾…è¯¥çº¿ç¨‹ç»“æŸï¼Œå°±åƒæˆ‘ä¸‹é¢ç”¨çš„ï¼Œå¦‚æœæˆ‘ä¸åŠ é‚£ä¸¤ä¸ªç­‰å¾…çº¿ç¨‹ç»“æŸçš„ä»£ç ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥æ‰§è¡Œè¾“å‡ºæ—¶é—´çš„è¯­å¥ï¼Œè¿™æ ·ä¸€æ¥ç»Ÿè®¡çš„æ—¶é—´å°±ä¸å¯¹äº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading    <span class="comment"># å¼•å…¥threading</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sleep_3</span><span class="params">()</span>:</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sleep_5</span><span class="params">()</span>:</span></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    start_time = time.time()</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'start sleep 3'</span></span><br><span class="line">    thread_1 = threading.Thread(target=sleep_3)     <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä½¿çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span><br><span class="line">    thread_1.start()        <span class="comment"># å¯åŠ¨è¿™ä¸ªçº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'start sleep 5'</span></span><br><span class="line">    thread_2 = threading.Thread(target=sleep_5)     <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œä½¿çº¿ç¨‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°</span></span><br><span class="line">    thread_2.start()        <span class="comment"># å¯åŠ¨è¿™ä¸ªçº¿ç¨‹</span></span><br><span class="line">    thread_1.join()     <span class="comment"># ç­‰å¾…thread_1ç»“æŸ</span></span><br><span class="line">    thread_2.join()     <span class="comment"># ç­‰å¾…thread_2ç»“æŸ</span></span><br><span class="line">    end_time = time.time()</span><br><span class="line">    <span class="keyword">print</span> str(end_time - start_time) + <span class="string">' s'</span></span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œç»“æœæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start sleep 3</span><br><span class="line">start sleep 5</span><br><span class="line">5.00099992752 s</span><br></pre></td></tr></table></figure></p><h1 id="0X03-daemon-å®ˆæŠ¤çº¿ç¨‹"><a href="#0X03-daemon-å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="0X03 daemon å®ˆæŠ¤çº¿ç¨‹"></a>0X03 daemon å®ˆæŠ¤çº¿ç¨‹</h1><p>åœ¨æˆ‘ä»¬ç†è§£ä¸­å®ˆæŠ¤çº¿ç¨‹åº”è¯¥æ˜¯å¾ˆé‡è¦çš„ï¼Œç±»æ¯”äºLinuxä¸­çš„å®ˆæŠ¤è¿›ç¨‹ã€‚ä½†æ˜¯åœ¨<code>threading.Thread</code>ä¸­ååä¸æ˜¯ã€‚</p><blockquote><p>å¦‚æœæŠŠä¸€ä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹æ˜¯ä¸é‡è¦çš„ï¼Œè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ä¸éœ€è¦ç­‰å¾…è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆã€‚ â€”â€”â€”ã€ŠPythonæ ¸å¿ƒç¼–ç¨‹ ç¬¬ä¸‰ç‰ˆã€‹</p></blockquote><p>åœ¨Threadå¯¹è±¡ä¸­é»˜è®¤æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯éå®ˆæŠ¤çº¿ç¨‹ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªä¾‹å­è¯´æ˜åŒºåˆ«ã€‚è¿™æ®µä»£ç æ‰§è¡Œçš„æ—¶å€™å°±æ²¡æŒ‡å®š<code>my_thread</code>çš„<code>daemon</code>å±æ€§ï¼Œæ‰€ä»¥é»˜è®¤ä¸ºéå®ˆæŠ¤ï¼Œæ‰€ä»¥è¿›ç¨‹ç­‰å¾…ä»–ç»“æŸã€‚æœ€åå°±å¯ä»¥çœ‹åˆ°100ä¸ªhello,world<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello,world'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_thread = threading.Thread(target=hello_world)</span><br><span class="line">    my_thread.start()</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œè®¾ç½®äº†<code>my_thread</code>ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥è¿›ç¨‹ç›´æ¥å°±é€€å‡ºäº†ï¼Œå¹¶æ²¡æœ‰ç­‰å¾…ä»–çš„ç»“æŸï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ä¸åˆ°100ä¸ªhello,worldåªæœ‰å‡ ä¸ªè€Œå·²ã€‚ç”šè‡³è¿˜ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å‘Šè¯‰æˆ‘ä»¬æœ‰çº¿ç¨‹æ²¡ç»“æŸã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello,world'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_thread = threading.Thread(target=hello_world)</span><br><span class="line">    my_thread.daemon = <span class="literal">True</span>   <span class="comment"># è®¾ç½®äº†æ ‡å¿—ä½True</span></span><br><span class="line">    my_thread.start()</span><br></pre></td></tr></table></figure></p><h1 id="0X04-ä¼ ä¸ªå‚æ•°"><a href="#0X04-ä¼ ä¸ªå‚æ•°" class="headerlink" title="0X04 ä¼ ä¸ªå‚æ•°"></a>0X04 ä¼ ä¸ªå‚æ•°</h1><p>ä¹‹å‰çš„ä»£ç éƒ½æ˜¯ç›´æ¥æ‰§è¡Œä¸€æ®µä»£ç ï¼Œæ²¡æœ‰è¿‡å‚æ•°çš„ä¼ é€’ï¼Œé‚£ä¹ˆæ€ä¹ˆä¼ é€’å‚æ•°å‘¢ï¼Ÿå…¶å®è¿˜æ˜¯å¾ˆç®€å•çš„ã€‚<code>threading.Thread(target=hello_world, args=(&#39;hello,&#39;, &#39;world&#39;))</code>å°±å¯ä»¥äº†ã€‚argsåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°å¯ä»¥ä¸å†™ï¼Œå¦‚æœæœ‰å‚æ•°å°±ç›´æ¥åœ¨å…ƒç»„é‡ŒæŒ‰é¡ºåºæ·»åŠ å°±è¡Œäº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">(str_1, str_2)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">print</span> str_1 + str_2</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    my_thread = threading.Thread(target=hello_world, args=(<span class="string">'hello,'</span>, <span class="string">'world'</span>))    <span class="comment"># è¿™é‡Œä¼ é€’å‚æ•°</span></span><br><span class="line">    my_thread.start()</span><br></pre></td></tr></table></figure></p><h1 id="0X05-å†æ¥ä¸ªå¤šçº¿ç¨‹"><a href="#0X05-å†æ¥ä¸ªå¤šçº¿ç¨‹" class="headerlink" title="0X05 å†æ¥ä¸ªå¤šçº¿ç¨‹"></a>0X05 å†æ¥ä¸ªå¤šçº¿ç¨‹</h1><p>threadingæœ‰ä¸‰ç§åˆ›å»ºThreadå¯¹è±¡çš„æ–¹å¼ï¼Œä½†æ˜¯ä¸€èˆ¬åªä¼šç”¨åˆ°ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸Šé¢<code>0X02</code>è¯´çš„ä¼ ä¸ªå‡½æ•°è¿›å»ï¼Œå¦ä¸€ç§å°±æ˜¯è¿™é‡Œè¯´çš„ç»§æ‰¿<code>threading.Thread</code>ã€‚åœ¨è¿™å„¿æˆ‘ä»¬è‡ªå·±å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œç±»é‡Œé‡å†™äº†run()æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨start()ä¹‹åæ‰§è¡Œçš„ä»£ç ï¼Œå¼€å¯çº¿ç¨‹å°±å’Œä¹‹å‰å¼€å¯æ˜¯ä¸€æ ·çš„ã€‚ä¹‹å‰çš„æ–¹å¼æ›´é¢å‘è¿‡ç¨‹ï¼Œè¿™ä¸ªæ›´é¢å‘å¯¹è±¡ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThreadHello</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'hello'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThreadWorld</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'world'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    thread_hello = MyThreadHello()</span><br><span class="line">    thread_world = MyThreadWorld()</span><br><span class="line">    thread_hello.start()</span><br><span class="line">    thread_world.start()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹MariaDB/MySqlçš„å®‰è£…é…ç½®ã€ç”¨æˆ·ç®¡ç†å’Œå¤‡ä»½</title>
      <link href="/2016/11/20/linux-mysql-dump/"/>
      <url>/2016/11/20/linux-mysql-dump/</url>
      
        <content type="html"><![CDATA[<h1 id="0x00-MariaDBçš„èº«ä¸–"><a href="#0x00-MariaDBçš„èº«ä¸–" class="headerlink" title="0x00  MariaDBçš„èº«ä¸–"></a>0x00  MariaDBçš„èº«ä¸–</h1><p>è‡ªä»MySQLè¢«Oracleæ”¶è´­ä¹‹åï¼Œç¤¾åŒºå°±ä¸€ç›´æ‹…å¿ƒMySQLå¯èƒ½ä¼šè¢«é—­æºæˆ–è€…ä¸€äº›å…¶ä»–çš„åŸå› å¯¼è‡´MySQLçš„æ”¯æŒå‡ºç°é—®é¢˜ã€‚æ‰€ä»¥ç°åœ¨å¥½å¤šå‘è¡Œç‰ˆæœ¬é»˜è®¤çš„æ•°æ®åº“éƒ½ä»MySQLè½¬ç§»åˆ°äº†Mariadbã€‚è€Œä¸”ç¤¾åŒºä¹Ÿå¼€å§‹å¤§åŠ›æ”¯æŒMariadbï¼Œå†åŠ ä¸ŠMariadbçš„ä½¿ç”¨å’ŒAPIå’ŒMySQLå®Œå…¨ä¸€æ ·ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©ä½¿ç”¨Mariadbè€Œä¸æ˜¯MySQLã€‚</p><blockquote><p>MariaDBæ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ˜¯MySQLçš„ä¸€ä¸ªåˆ†æ”¯ï¼Œä¸»è¦ç”±å¼€æºç¤¾åŒºåœ¨ç»´æŠ¤ï¼Œé‡‡ç”¨GPLæˆæƒè®¸å¯ã€‚å¼€å‘è¿™ä¸ªåˆ†æ”¯çš„åŸå› ä¹‹ä¸€æ˜¯ï¼šç”²éª¨æ–‡å…¬å¸æ”¶è´­äº†MySQLåï¼Œæœ‰å°†MySQLé—­æºçš„æ½œåœ¨é£é™©ï¼Œå› æ­¤ç¤¾åŒºé‡‡ç”¨åˆ†æ”¯çš„æ–¹å¼æ¥é¿å¼€è¿™ä¸ªé£é™©ã€‚<br>MariaDBçš„ç›®çš„æ˜¯å®Œå…¨å…¼å®¹MySQLï¼ŒåŒ…æ‹¬APIå’Œå‘½ä»¤è¡Œï¼Œä½¿ä¹‹èƒ½è½»æ¾æˆä¸ºMySQLçš„ä»£æ›¿å“ã€‚åœ¨å­˜å‚¨å¼•æ“æ–¹é¢ï¼Œ10.0.9ç‰ˆèµ·ä½¿ç”¨XtraDBï¼ˆåç§°ä»£å·ä¸ºAriaï¼‰æ¥ä»£æ›¿MySQLçš„InnoDBã€‚<br>MariaDBç”±MySQLçš„åˆ›å§‹äººéº¦å…‹å°”Â·ç»´å¾·çº½æ–¯ä¸»å¯¼å¼€å‘ï¼Œä»–æ—©å‰æ›¾ä»¥10äº¿ç¾å…ƒçš„ä»·æ ¼ï¼Œå°†è‡ªå·±åˆ›å»ºçš„å…¬å¸MySQL ABå–ç»™äº†SUNï¼Œæ­¤åï¼Œéšç€SUNè¢«ç”²éª¨æ–‡æ”¶è´­ï¼ŒMySQLçš„æ‰€æœ‰æƒä¹Ÿè½å…¥Oracleçš„æ‰‹ä¸­ã€‚MariaDBåç§°æ¥è‡ªéº¦å…‹å°”Â·ç»´å¾·çº½æ–¯çš„å¥³å„¿ç›ä¸½äºšï¼ˆè‹±è¯­ï¼šMariaï¼‰çš„åå­—ã€‚â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç»´åŸºç™¾ç§‘</p></blockquote><a id="more"></a><h1 id="0X01-å®‰è£…Mariadb"><a href="#0X01-å®‰è£…Mariadb" class="headerlink" title="0X01 å®‰è£…Mariadb"></a>0X01 å®‰è£…Mariadb</h1><p>MariaDBæ˜¯ä¸€ç»„è½¯ä»¶ï¼Œå¦‚æœåªå®‰è£…ä¸€éƒ¨åˆ†çš„è¯åæœŸæ‰©å±•å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡å®‰è£…æ•´ä¸ªè½¯ä»¶ç»„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># yum groupinstall mariadb mariadb-client -y</span></span><br></pre></td></tr></table></figure></p><p>å®‰è£…éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œæˆ‘ä»¬åªéœ€è¦ç­‰å¾…å®‰è£…ç»“æŸã€‚</p><h1 id="0X02-æ‰“å¼€MariadbæœåŠ¡å¹¶é…ç½®é˜²ç«å¢™"><a href="#0X02-æ‰“å¼€MariadbæœåŠ¡å¹¶é…ç½®é˜²ç«å¢™" class="headerlink" title="0X02 æ‰“å¼€MariadbæœåŠ¡å¹¶é…ç½®é˜²ç«å¢™"></a>0X02 æ‰“å¼€MariadbæœåŠ¡å¹¶é…ç½®é˜²ç«å¢™</h1><p>å¯åŠ¨MariadbæœåŠ¡ã€‚åœ¨CentOS7.xä¸­æ¨èä½¿ç”¨systemctlæ¥é…ç½®æœåŠ¡çš„å¯åŠ¨æ–¹å¼<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mariadb.service</span><br></pre></td></tr></table></figure></p><p>é…ç½®é˜²ç«å¢™ï¼Œå…è®¸ä»MariaDBä½¿ç”¨çš„3306ç«¯å£ç›‘å¬ï¼Œç”±äºå†å²é—ç•™é—®é¢˜ï¼Œè¿™é‡Œè¿˜æ˜¯ç§°ä¹‹ä¸ºMySqlã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># firewall-cmd --add-service=mysql</span></span><br><span class="line">success</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># firewall-cmd --list-services</span></span><br><span class="line">dhcpv6-client mysql ssh</span><br></pre></td></tr></table></figure></p><h1 id="0X03-é…ç½®MariaDBçš„å®‰å…¨æ€§"><a href="#0X03-é…ç½®MariaDBçš„å®‰å…¨æ€§" class="headerlink" title="0X03 é…ç½®MariaDBçš„å®‰å…¨æ€§"></a>0X03 é…ç½®MariaDBçš„å®‰å…¨æ€§</h1><p>MariaDBæä¾›äº†ä¸€ä¸ªè„šæœ¬æ¥ä¸ºæ–°å®‰è£…çš„MariaDBæå‡å®‰å…¨æ€§ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨è¿™ä¸ªè„šæœ¬ä¹‹å‰å¿…é¡»è¦å…ˆæ‰“å¼€MariaDBæœåŠ¡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># systemctl start mariadb</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># systemctl enable mariadb</span></span><br><span class="line">ln -s <span class="string">'/usr/lib/systemd/system/mariadb.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/mariadb.service'</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬ä¼šæœ‰å‡ æ¬¡æç¤ºï¼š</p><ol><li>è¯¢é—®å½“å‰å¯†ç ï¼Œå¦‚æœæ²¡è®¾ç½®å¯†ç å°±ç›´æ¥å›è½¦</li><li>è®¾ç½®rootç”¨æˆ·çš„å¯†ç </li><li>åˆ é™¤åŒ¿åç”¨æˆ·(anonymous-user)</li><li>åˆ é™¤å¯ä»¥ä»å¤–éƒ¨ç™»é™†çš„rootç”¨æˆ·</li><li>åˆ é™¤testæµ‹è¯•æ•°æ®åº“</li><li>é‡è½½æ•°æ®åº“</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line">/usr/bin/mysql_secure_installation: line 379: find_mysql_client: <span class="built_in">command</span> not found</span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MariaDB to secure it, we<span class="string">'ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you'</span>ve just installed MariaDB, and</span><br><span class="line">you haven<span class="string">'t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Enter current password for root (enter for none):</span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MariaDB</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Set root password? [Y/n] y</span></span><br><span class="line"><span class="string">New password:</span></span><br><span class="line"><span class="string">Re-enter new password:</span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MariaDB installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MariaDB without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from '</span>localhost<span class="string">'.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MariaDB comes with a database named '</span><span class="built_in">test</span><span class="string">' that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n] y</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br></pre></td></tr></table></figure><h1 id="0X04-ç™»é™†åˆ°MariaDB"><a href="#0X04-ç™»é™†åˆ°MariaDB" class="headerlink" title="0X04 ç™»é™†åˆ°MariaDB"></a>0X04 ç™»é™†åˆ°MariaDB</h1><p>é…ç½®å¥½å¯†ç å’Œæ¥å…¥ç‚¹ä¹‹åå°±å¯ä»¥ç™»å½•åˆ°MariaDBäº†ã€‚ä½¿ç”¨mysqlå‘½ä»¤æ¥ç™»é™†MariaDBã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># mysql -h localhost -u root -p</span></span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 12</span><br><span class="line">Server version: 5.5.50-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br></pre></td></tr></table></figure></p><p>å‚æ•°ï¼š-h æŒ‡å®šä¸»æœºï¼Œ -u æŒ‡å®šç”¨æˆ·ï¼Œã€€-p æŒ‡å®šå¯†ç <br>è¿™ä¸‰ä¸ªå‚æ•°éƒ½å¯ä»¥çœç•¥ï¼Œå½“æˆ‘ä»¬çœç•¥ä¸»æœºåçš„æ—¶å€™å°±é»˜è®¤ç™»å½•åˆ°æœ¬åœ°ï¼Œå½“çœç•¥ç”¨æˆ·åçš„æ—¶å€™é»˜è®¤ä½¿ç”¨rootï¼Œå½“çœç•¥å¯†ç çš„æ—¶å€™é»˜è®¤æ²¡æœ‰å¯†ç ç™»é™†</p><h1 id="0X05-ç”¨æˆ·ç®¡ç†"><a href="#0X05-ç”¨æˆ·ç®¡ç†" class="headerlink" title="0X05 ç”¨æˆ·ç®¡ç†"></a>0X05 ç”¨æˆ·ç®¡ç†</h1><p>åœ¨MariaDBä¸­æœ‰ç”¨æˆ·çš„æ¦‚å¿µå’Œæƒé™çš„æ¦‚å¿µã€‚ç”¨æˆ·å+å¯†ç +ç™»é™†åœ°ç‚¹ï¼Œä¸‰ä¸ªé€‰é¡¹å”¯ä¸€ç¡®å®šä¸€ä¸ªç”¨æˆ·ï¼Œå°±æ¯”å¦‚åŒä¸€ä¸ªç”¨æˆ·å<code>shawn</code>åœ¨10.13.1.2å’Œåœ¨10.13.1.3çš„ç™»é™†å¯†ç å¯ä»¥æ˜¯ä¸åŒçš„ï¼Œè¿™åœ¨MariaDBé‡Œä¼šåˆ†æˆä¸¤æ¡æ¥å­˜å‚¨ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºä¸€ä¸ªåä¸ºshawnçš„ï¼Œä»localhostç™»é™†çš„ï¼Œå¯†ç ä¸ºtestçš„ç”¨æˆ·</span><br><span class="line">MariaDB [(none)]&gt; CREATE USER 'shawn'@'localhost' IDENTIFIED BY 'test';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">åˆ›å»ºä¸€ä¸ªåä¸ºshawn_testçš„ï¼Œä»»æ„åœ°ç‚¹ï¼Œå¯†ç ä¸º6666çš„ç”¨æˆ·</span><br><span class="line">MariaDB [(none)]&gt; CREATE USER 'shawn_test'@'%' IDENTIFIED BY '6666';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>è€Œä¸”åœ¨MariaDBä¸­ç”¨æˆ·å’Œæƒé™æ˜¯åˆ†å¼€çš„ï¼Œå¦‚æœåªæ·»åŠ ä¸€ä¸ªç”¨æˆ·çš„è¯ï¼Œè¿™ä¸ªç”¨æˆ·æ˜¯æ²¡æœ‰ä»»ä½•æƒé™çš„ã€‚</p><p>åˆ é™¤ç”¨æˆ·çš„è¯æ˜¯ä½¿ç”¨<code>DROP</code>å‘½ä»¤<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; DROP USER heiheihei@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></p><h1 id="0X06-æƒé™ç®¡ç†"><a href="#0X06-æƒé™ç®¡ç†" class="headerlink" title="0X06 æƒé™ç®¡ç†"></a>0X06 æƒé™ç®¡ç†</h1><p>ç™»å½•åˆ°MariaDBä¹‹åå¯ä»¥ç»™ç”¨æˆ·æ·»åŠ å…·ä½“çš„æƒé™ï¼Œä½¿ç”¨<code>GRANT</code>å‘½ä»¤ã€‚<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">å…è®¸ä»localhostç™»é™†çš„shawnå¯¹mysqlæ•°æ®åº“çš„userè¡¨æ‰§è¡ŒæŸ¥è¯¢</span><br><span class="line">MariaDB [(none)]&gt; GRANT SELECT ON mysql.user to shawn@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">å…è®¸ä»localhostç™»é™†çš„shawnå¯¹mysqlæ•°æ®åº“çš„userè¡¨æ‰§è¡ŒæŸ¥è¯¢å’Œæ’å…¥</span><br><span class="line">MariaDB [(none)]&gt; GRANT SELECT, INSERT ON mysql.user to shawn@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">å…è®¸ä»localhostç™»é™†çš„shawnå¯¹mysqlæ•°æ®åº“çš„userè¡¨æ‰§è¡Œå¢åˆ æŸ¥æ”¹å››ç§æ“ä½œ</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON mysql.user to shawn@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">å…è®¸ä»localhostç™»é™†çš„shawnå¯¹mysqlæ•°æ®åº“çš„æ‰€æœ‰è¡¨æ‰§è¡Œå¢åˆ æŸ¥æ”¹å››ç§æ“ä½œ</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON mysql.* to shawn@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">å…è®¸ä»localhostç™»é™†çš„shawnå¯¹æ‰€æœ‰åº“çš„æ‰€æœ‰è¡¨æ‰§è¡Œå¢åˆ æŸ¥æ”¹å››ç§æ“ä½œ</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON *.* to shawn@'localhost';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">å…è®¸ä»ä»»æ„åœ°ç‚¹ç™»é™†çš„shawnå¯¹æ‰€æœ‰åº“çš„æ‰€æœ‰è¡¨æ‰§è¡Œå¢åˆ æŸ¥æ”¹å››ç§æ“ä½œ</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON *.* to shawn@'%';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<code>REVOKE</code>å¯ä»¥åˆ é™¤ç»™å®šçš„æƒé™ï¼Œä½¿ç”¨æ–¹æ³•å’Œ<code>GRANT</code>æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å¼€å¤´ä¸åŒè€Œå·²<br>ä½¿ç”¨<code>FLUSH PRIVILEGES;</code>å¯ä»¥åˆ·æ–°æƒé™ä¿¡æ¯<br>ä½¿ç”¨<code>SHOW GRANT FOR root@localhost</code>å¯ä»¥æŸ¥çœ‹æŸç”¨æˆ·çš„æƒé™ä¿¡æ¯</p><h1 id="0X07-æ•°æ®åº“å¤‡ä»½"><a href="#0X07-æ•°æ®åº“å¤‡ä»½" class="headerlink" title="0X07 æ•°æ®åº“å¤‡ä»½"></a>0X07 æ•°æ®åº“å¤‡ä»½</h1><p>MariaDBæœ‰é€»è¾‘å¤‡ä»½å’Œç‰©ç†å¤‡ä»½ä¸¤ç§å¤‡ä»½æ–¹æ¡ˆï¼Œé€»è¾‘å¤‡ä»½å°±æ˜¯å¯ä»¥æŠŠè¡¨ç»“æ„æ•°æ®ç­‰å¯¼å‡ºæˆsqlæ–‡ä»¶ï¼Œè€Œç‰©ç†å¤‡ä»½å°±æ˜¯ç›´æ¥å¤‡ä»½æ–‡ä»¶ã€‚<br>é€»è¾‘å¤‡ä»½æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºè¦å°†å¤‡ä»½çš„æ•°æ®å…¨éƒ¨éƒ½æŸ¥è¯¢ä¸€éï¼Œä½†æ˜¯å¯ä»¥ä¸ä¸‹çº¿å¤‡ä»½ï¼›ç‰©ç†å¤‡ä»½æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯éœ€è¦ä¸‹çº¿å¤‡ä»½ã€‚è¿™é‡Œè¯´çš„æ˜¯é€»è¾‘å¤‡ä»½.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># mysqldump -u root -h localhost -p --all-databases &gt; backup.sql</span></span><br><span class="line">Enter password:</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ª<code>--all-databases</code>çš„å‚æ•°ï¼Œæ˜¯å¤‡ä»½æ‰€æœ‰æ•°æ®åº“ï¼Œå¯é€‰çš„å‚æ•°æœ‰ä¸‹é¢è¿™å‡ ä¸ª</p><ol><li><code>--all-databases</code>å¤‡ä»½æ‰€æœ‰æ•°æ®åº“</li><li><code>--add-drop-tables</code>ç”Ÿæˆçš„sqlä¸­åŒ…å«drop tablesè¯­å¥ï¼Œåˆ é™¤ä»¥å‰çš„table</li><li><code>--no-data</code>åªç”Ÿæˆåº“å’Œè¡¨ç»“æ„ï¼Œæ²¡æœ‰æ•°æ®</li><li><code>--lock-all-tables</code>åœ¨å¤‡ä»½ç»“æŸä¹‹å‰ï¼Œé”å®šæ‰€æœ‰è¡¨ï¼Œä¿è¯æ•°æ®å®Œæ•´æ€§</li><li><code>--add-drop-databases</code>ç”Ÿæˆçš„sqlä¸­åŒ…å«drop databaseè¯­å¥ï¼Œåˆ é™¤ä»¥å‰çš„database</li></ol><h1 id="0X08-æ•°æ®åº“è¿˜åŸ"><a href="#0X08-æ•°æ®åº“è¿˜åŸ" class="headerlink" title="0X08 æ•°æ®åº“è¿˜åŸ"></a>0X08 æ•°æ®åº“è¿˜åŸ</h1><p>å½“æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¤‡ä»½å‡ºæ¥çš„sqlæ–‡ä»¶ä¹‹åï¼Œå¯ä»¥å°†è¿™ä¸ªsqlç›´æ¥å¯¼å…¥åˆ°æ•°æ®åº“ã€‚è¿™äº†çš„ç”¨æ³•å’Œä¹‹å‰ç™»å½•åˆ°MariaDBçš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å°†sqlæ–‡ä»¶é‡å®šå‘è¿‡å»å°±å¯ä»¥äº†<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># mysql -u root -h localhost -p &lt; backup.sql</span></span><br><span class="line">Enter password:</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Database </tag>
            
            <tag> MySQL </tag>
            
            <tag> Service Configure </tag>
            
            <tag> MariaDB </tag>
            
            <tag> User Configure </tag>
            
            <tag> Data Dump </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7ä¸­ä½¿ç”¨firewall-Cmdæ§åˆ¶ç«¯å£å’Œç«¯å£è½¬å‘</title>
      <link href="/2016/11/17/firewall-cmd/"/>
      <url>/2016/11/17/firewall-cmd/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-firewalld-å®ˆæŠ¤è¿›ç¨‹"><a href="#0X00-firewalld-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="0X00 firewalld å®ˆæŠ¤è¿›ç¨‹"></a>0X00 firewalld å®ˆæŠ¤è¿›ç¨‹</h1><p><code>firewall-cmd</code>å‘½ä»¤éœ€è¦<code>firewalld</code>è¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>systemctl status/start/stop/restart firewalld</code>æ¥æ§åˆ¶è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹ã€‚<code>firewalld</code>è¿›ç¨‹ä¸ºé˜²ç«å¢™æä¾›æœåŠ¡ã€‚</p><p>å½“æˆ‘ä»¬ä¿®æ”¹äº†æŸäº›é…ç½®ä¹‹åï¼ˆå°¤å…¶æ˜¯é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ï¼‰ï¼Œfirewallå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆã€‚å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æ¿€æ´»æœ€æ–°é…ç½®<code>systemctl restart firewalld</code>å’Œ<code>firewall-cmd --reload</code>ä¸¤ç§æ–¹å¼ï¼Œå‰ä¸€ç§æ˜¯é‡å¯firewalldæœåŠ¡ï¼Œå»ºè®®ä½¿ç”¨åä¸€ç§â€œé‡è½½é…ç½®æ–‡ä»¶â€ã€‚é‡è½½é…ç½®æ–‡ä»¶ä¹‹åä¸ä¼šæ–­æ‰æ­£åœ¨è¿æ¥çš„tcpä¼šè¯ï¼Œè€Œé‡å¯æœåŠ¡åˆ™ä¼šæ–­å¼€tcpä¼šè¯ã€‚</p><a id="more"></a><h1 id="0X01-æ§åˆ¶ç«¯å£-æœåŠ¡"><a href="#0X01-æ§åˆ¶ç«¯å£-æœåŠ¡" class="headerlink" title="0X01 æ§åˆ¶ç«¯å£/æœåŠ¡"></a>0X01 æ§åˆ¶ç«¯å£/æœåŠ¡</h1><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ§åˆ¶ç«¯å£çš„å¼€æ”¾ï¼Œä¸€ç§æ˜¯æŒ‡å®šç«¯å£å·å¦ä¸€ç§æ˜¯æŒ‡å®šæœåŠ¡åã€‚è™½ç„¶å¼€æ”¾httpæœåŠ¡å°±æ˜¯å¼€æ”¾äº†80ç«¯å£ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½é€šè¿‡ç«¯å£å·æ¥å…³é—­ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡æŒ‡å®šæœåŠ¡åå¼€æ”¾çš„å°±è¦é€šè¿‡æŒ‡å®šæœåŠ¡åå…³é—­ï¼›é€šè¿‡æŒ‡å®šç«¯å£å·å¼€æ”¾çš„å°±è¦é€šè¿‡æŒ‡å®šç«¯å£å·å…³é—­ã€‚è¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„å°±æ˜¯æŒ‡å®šç«¯å£çš„æ—¶å€™ä¸€å®šè¦æŒ‡å®šæ˜¯ä»€ä¹ˆåè®®ï¼Œtcpè¿˜æ˜¯udpã€‚çŸ¥é“è¿™ä¸ªä¹‹åä»¥åå°±ä¸ç”¨æ¯æ¬¡å…ˆå…³é˜²ç«å¢™äº†ï¼Œå¯ä»¥è®©é˜²ç«å¢™çœŸæ­£çš„ç”Ÿæ•ˆã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-service=mysql<span class="comment"># å¼€æ”¾mysqlç«¯å£</span></span><br><span class="line">firewall-cmd --remove-service=http<span class="comment"># é˜»æ­¢httpç«¯å£</span></span><br><span class="line">firewall-cmd --list-services<span class="comment"># æŸ¥çœ‹å¼€æ”¾çš„æœåŠ¡</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --add-port=3306/tcp<span class="comment"># å¼€æ”¾é€šè¿‡tcpè®¿é—®3306</span></span><br><span class="line">firewall-cmd --remove-port=80tcp<span class="comment"># é˜»æ­¢é€šè¿‡tcpè®¿é—®3306</span></span><br><span class="line">firewall-cmd --add-port=233/udp<span class="comment"># å¼€æ”¾é€šè¿‡udpè®¿é—®233</span></span><br><span class="line">firewall-cmd --list-ports<span class="comment"># æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£</span></span><br></pre></td></tr></table></figure></p><h1 id="0X02-ä¼ªè£…IP"><a href="#0X02-ä¼ªè£…IP" class="headerlink" title="0X02 ä¼ªè£…IP"></a>0X02 ä¼ªè£…IP</h1><p>é˜²ç«å¢™å¯ä»¥å®ç°ä¼ªè£…IPçš„åŠŸèƒ½ï¼Œä¸‹é¢çš„ç«¯å£è½¬å‘å°±ä¼šç”¨åˆ°è¿™ä¸ªåŠŸèƒ½ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --query-masquerade <span class="comment"># æ£€æŸ¥æ˜¯å¦å…è®¸ä¼ªè£…IP</span></span><br><span class="line">firewall-cmd --add-masquerade   <span class="comment"># å…è®¸é˜²ç«å¢™ä¼ªè£…IP</span></span><br><span class="line">firewall-cmd --remove-masquerade<span class="comment"># ç¦æ­¢é˜²ç«å¢™ä¼ªè£…IP</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-ç«¯å£è½¬å‘"><a href="#0X03-ç«¯å£è½¬å‘" class="headerlink" title="0X03 ç«¯å£è½¬å‘"></a>0X03 ç«¯å£è½¬å‘</h1><p>ç«¯å£è½¬å‘å¯ä»¥å°†æŒ‡å®šåœ°å€è®¿é—®æŒ‡å®šçš„ç«¯å£æ—¶ï¼Œå°†æµé‡è½¬å‘è‡³æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£ã€‚è½¬å‘çš„ç›®çš„å¦‚æœä¸æŒ‡å®šipçš„è¯å°±é»˜è®¤ä¸ºæœ¬æœºï¼Œå¦‚æœæŒ‡å®šäº†ipå´æ²¡æŒ‡å®šç«¯å£ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ¥æºç«¯å£ã€‚<br>å¦‚æœé…ç½®å¥½ç«¯å£è½¬å‘ä¹‹åä¸èƒ½ç”¨ï¼Œå¯ä»¥æ£€æŸ¥ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>æ¯”å¦‚æˆ‘å°†80ç«¯å£è½¬å‘è‡³8080ç«¯å£ï¼Œé¦–å…ˆæ£€æŸ¥æœ¬åœ°çš„80ç«¯å£å’Œç›®æ ‡çš„8080ç«¯å£æ˜¯å¦å¼€æ”¾ç›‘å¬äº†</li><li>å…¶æ¬¡æ£€æŸ¥æ˜¯å¦å…è®¸ä¼ªè£…IPï¼Œæ²¡å…è®¸çš„è¯è¦å¼€å¯ä¼ªè£…IP</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†80ç«¯å£çš„æµé‡è½¬å‘è‡³8080</span></span><br><span class="line">firewall-cmd --add-forward-port=port=80:proto=tcp:toport=8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†80ç«¯å£çš„æµé‡è½¬å‘è‡³</span></span><br><span class="line">firewall-cmd --add-forward-port=port=80:proto=tcp:toaddr=192.168.1.0.1192.168.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†80ç«¯å£çš„æµé‡è½¬å‘è‡³192.168.0.1çš„8080ç«¯å£</span></span><br><span class="line">firewall-cmd --add-forward-port=port=80:proto=tcp:toaddr=192.168.0.1:toport=8080</span><br></pre></td></tr></table></figure><ol><li>å½“æˆ‘ä»¬æƒ³æŠŠæŸä¸ªç«¯å£éšè—èµ·æ¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥åœ¨é˜²ç«å¢™ä¸Šé˜»æ­¢é‚£ä¸ªç«¯å£è®¿é—®ï¼Œç„¶åå†å¼€ä¸€ä¸ªä¸è§„åˆ™çš„ç«¯å£ï¼Œä¹‹åé…ç½®é˜²ç«å¢™çš„ç«¯å£è½¬å‘ï¼Œå°†æµé‡è½¬å‘è¿‡å»ã€‚</li><li>ç«¯å£è½¬å‘è¿˜å¯ä»¥åšæµé‡åˆ†å‘ï¼Œä¸€ä¸ªé˜²ç«å¢™æ‹–ç€å¥½å¤šå°è¿è¡Œç€ä¸åŒæœåŠ¡çš„æœºå™¨ï¼Œç„¶åç”¨é˜²ç«å¢™å°†ä¸åŒç«¯å£çš„æµé‡è½¬å‘è‡³ä¸åŒæœºå™¨ã€‚</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Firewall </tag>
            
            <tag> firewall-cmd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ç³»ç»Ÿç®€è¿°</title>
      <link href="/2016/11/16/filesystem/"/>
      <url>/2016/11/16/filesystem/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æ–‡ä»¶"><a href="#0X00-æ–‡ä»¶" class="headerlink" title="0X00 æ–‡ä»¶"></a>0X00 æ–‡ä»¶</h1><p><strong> â€˜æ–‡ä»¶â€™æ˜¯è¿›ç¨‹åˆ›å»ºçš„é€»è¾‘å•å…ƒã€‚ </strong> â€”ã€Šç°ä»£æ“ä½œç³»ç»Ÿï¼ˆåŸä¹¦ç¬¬ä¸‰ç‰ˆï¼‰ã€‹<br>æ–‡ä»¶æˆ‘ä»¬å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œç”µè„‘ç£ç›˜ä¸Šå­˜çš„éƒ½æ˜¯æ–‡ä»¶ã€‚åœ¨Windowsé‡Œå’ŒUnixç³»åˆ—ç³»ç»Ÿé‡Œï¼Œè¡¨é¢çœ‹ä¸Šå»æ–‡ä»¶ä¹‹é—´è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹å°çš„åŒºåˆ«ã€‚æ¯”å¦‚ï¼Œåœ¨Windowsé‡Œä¸»è¦è¿˜æ˜¯ä»¥æ–‡ä»¶çš„åç¼€åæ¥æ ‡è¯†æ–‡ä»¶å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œå›¾ç‰‡è¿˜æ˜¯è§†é¢‘ï¼›åœ¨Unixç³»åˆ—é‡Œæ–‡ä»¶çš„åç¼€åå°±æ²¡é‚£ä¹ˆé‡è¦ï¼Œä¸»è¦åç¼€åæ˜¯ç”¨æ¥å¸®åŠ©äººä»¬è¯†åˆ«æ–‡ä»¶ç±»å‹çš„ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸å¾ˆå…³å¿ƒã€‚<br><strong> çœŸæ­£çš„æ–‡ä»¶ç±»å‹ </strong> æ˜¯æ–‡ä»¶çš„æœ¬è´¨ç±»å‹ï¼Œä¸æ˜¯æˆ‘ä»¬å¸¸è¯´çš„exeç±»å‹ã€docç±»å‹ã€æ›´ä¸æ˜¯ä»€ä¹ˆå›¾ç‰‡ç±»å‹å’Œè§†é¢‘ç±»å‹ã€‚åœ¨Windowsä¸‹æœ‰å¸¸è§çš„æ™®é€šæ–‡ä»¶å’Œç›®å½•ã€‚<em>æ²¡é”™ï¼Œç›®å½•å…¶å®æ˜¯æ–‡ä»¶çš„</em>ã€‚åœ¨Unixé‡Œï¼Œè¿˜æœ‰ä¸€äº›å«å­—ç¬¦ç‰¹æ®Šæ–‡ä»¶å’Œå—ç‰¹æ®Šæ–‡ä»¶çš„ã€‚<br><a id="more"></a></p><h1 id="0X01-æ–‡ä»¶çš„å…ƒæ•°æ®"><a href="#0X01-æ–‡ä»¶çš„å…ƒæ•°æ®" class="headerlink" title="0X01 æ–‡ä»¶çš„å…ƒæ•°æ®"></a>0X01 æ–‡ä»¶çš„å…ƒæ•°æ®</h1><p>æ–‡ä»¶é‡Œæœ€é‡è¦çš„ä¸œè¥¿è‚¯å®šæ˜¯æ–‡ä»¶å†…å®¹äº†ï¼Œä½†æ˜¯æ–‡ä»¶å­˜åœ¨ç£ç›˜é‡Œæ˜¯è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç›¸å…³æ•°æ®ä¹Ÿè¢«å­˜è¿›å»äº†çš„ï¼Œé‚£äº›æ•°æ®è¢«ç§°ä¹‹ä¸º<strong>å…ƒæ•°æ®</strong>ã€‚æƒ³ä¸€ä¸‹æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œåœ¨Windowsé‡Œå³é”®ä¸€ä¸ªæ–‡ä»¶é€‰æ‹©å±æ€§æˆ–è€…åœ¨Linuxé‡Œä½¿ç”¨<code>ls -l</code>çœ‹åˆ°çš„æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿™äº›å‡ ä¹å…¨éƒ¨éƒ½æ˜¯æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œéƒ½å­˜åˆ°äº†ç£ç›˜ä¸­ã€‚å¸¸è§çš„å…ƒæ•°æ®æœ‰ä¸‹é¢è¿™äº›:åˆ›å»ºè€…ã€æ‹¥æœ‰è€…ã€æƒé™æ ‡å¿—ã€æ–‡ä»¶å¤§å°ã€é”ç­‰ç­‰ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬åœ¨Linuxä¸‹è¾“å…¥<code>ls -l</code>èƒ½çœ‹åˆ°æ–‡ä»¶çš„å¤§å°ã€æƒé™ã€æ‰€å±è€…ï¼Œè¿™äº›éƒ½æ˜¯æ–‡ä»¶çš„å…ƒæ•°æ®ã€‚</p><h1 id="0X02-MBR-ä¸»å¼•å¯¼è®°å½•"><a href="#0X02-MBR-ä¸»å¼•å¯¼è®°å½•" class="headerlink" title="0X02 MBR-ä¸»å¼•å¯¼è®°å½•"></a>0X02 MBR-ä¸»å¼•å¯¼è®°å½•</h1><p>ç»å¸¸è£…ç³»ç»Ÿçš„è¯åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰è¿™ä¸ªè¯â€˜ä¸»å¼•å¯¼è®°å½•â€™ï¼Œåœ¨ä»¥å‰çš„ç£ç›˜ä¸Šå¸¸ç”¨çš„å°±æ˜¯è¿™ç§ç§°ä¸ºMBRçš„ç£ç›˜åˆ†åŒºæ–¹å¼ï¼Œå…¶å®ç°åœ¨è¿˜æœ‰å¥½å¤šåœ¨ç”¨MBRçš„ï¼Œä¸è¿‡ç”±äºMBRçš„åŸç†å¯¼è‡´ä¸æ”¯æŒ2TBä»¥ä¸Šçš„ç£ç›˜ä¸”ä¸æ”¯æŒ4ä¸ªä»¥ä¸Šçš„ä¸»åˆ†åŒºï¼Œæ‰€ä»¥ç”¨çš„è¶Šæ¥è¶Šå°‘äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯GPTã€‚ä¸è¿‡ç”±äºMBRæ¯”è¾ƒç®€å•ï¼Œå°±å…ˆä»‹ç»ä¸€ä¸‹MBRã€‚<br>è®¡ç®—æœºåœ¨å¯åŠ¨çš„æ—¶å€™ï¼ŒBIOSä¼šè¯»å–MBRçš„åˆ†åŒºè¡¨æ¥æ‰¾åˆ°å¼•å¯¼åˆ†åŒºå¹¶å¼•å¯¼æ“ä½œç³»ç»Ÿã€‚å¯ä»¥å¯åŠ¨çš„åˆ†åŒºç§°ä¸ºæ´»åŠ¨åˆ†åŒºï¼Œå¿…é¡»è¦æ˜¯æ´»åŠ¨çš„åˆ†åŒºæ‰å¯ä»¥å¼•å¯¼ç³»ç»Ÿå¯åŠ¨ï¼›MBRçš„åˆ†åŒºè¡¨åªèƒ½å®¹çº³å››ä¸ªåˆ†åŒºï¼Œå¦‚æœéœ€è¦æ›´å¤šçš„åˆ†åŒºå°±éœ€è¦åˆ›å»ºæ‰©å±•åˆ†åŒºã€‚å¯ä»¥åœ¨ä¸€ä¸ªMBRçš„åˆ†åŒºè¡¨ä¸­åˆ›å»ºä¸‰ä¸ªä¸»åˆ†åŒºï¼Œåœ¨æœ€åä¸€ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªæ‰©å±•åˆ†åŒºã€‚å®é™…ä¸Šæœ€åä¸€ä¸ªæ‰©å±•åˆ†åŒºæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼Œç›¸å½“äºæ‰©å±•åˆ†åŒºåœ¨ç£ç›˜ä¸ŠèŠ±äº†ä¸€å—å½“å¦ä¸€ä¸ªç£ç›˜ç”¨ã€åœ¨æ‰©å±•åˆ†åŒºå¤´éƒ¨è¿˜æœ‰ä¸€ä¸ªæ‰©å±•åˆ†åŒºçš„åˆ†åŒºè¡¨ï¼Œé‡Œé¢ä¿å­˜ç€é€»è¾‘åˆ†åŒºçš„åˆ†åŒºä¿¡æ¯ï¼Œä¸”è¿™ä¸ªåˆ†åŒºè¡¨çš„ç©ºé—´æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥é€»è¾‘åˆ†åŒºå¯ä»¥åˆ›å»ºå¥½å¤šä¸ªã€‚</p><h1 id="0X03-æ–‡ä»¶å­˜å‚¨"><a href="#0X03-æ–‡ä»¶å­˜å‚¨" class="headerlink" title="0X03 æ–‡ä»¶å­˜å‚¨"></a>0X03 æ–‡ä»¶å­˜å‚¨</h1><p>æ–‡ä»¶å­˜å‚¨åœ¨ç£ç›˜ä¸­æœ‰å¥½å¤šç§åˆ†é…æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆå„æœ‰åˆ©å¼Šã€‚éšç€å­˜å‚¨ä»‹è´¨ã€CPUç­‰è®¾å¤‡çš„å‘å±•å’Œäººä»¬éœ€æ±‚çš„å˜åŒ–ï¼Œå‡ºç°äº†ä¸‹é¢è¿™äº›æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆã€‚</p><h2 id="è¿ç»­åˆ†é…"><a href="#è¿ç»­åˆ†é…" class="headerlink" title="è¿ç»­åˆ†é…"></a>è¿ç»­åˆ†é…</h2><p>é¦–å…ˆæˆ‘ä»¬æŠŠç£ç›˜æƒ³è±¡æˆä¸€ä¸ªè¶…é•¿çš„æ¡å½¢å­˜å‚¨è®¾å¤‡ï¼Œè¿™æ ·å°±æ¯”è¾ƒå¥½ç†è§£ï¼ˆç„¶è€Œå®é™…ä¸Šç°åœ¨å¸¸è§çš„ç£ç›˜æ˜¯åŒºåˆ†ç›˜é¢ã€ç£é“ã€æŸ±é¢ã€æ‰‡åŒºçš„ï¼‰ã€‚<br>æ—©æœŸçš„ç£ç›˜å’Œç°ä»£çš„CD-ROMæ˜¯ä½¿ç”¨è¿™ç§è¿ç»­åˆ†é…æ–¹å¼å­˜å‚¨æ•°æ®çš„ã€‚è¿ç»­åˆ†é…ï¼Œç”±å­—é¢å¯çŸ¥æ˜¯æŠŠæ–‡ä»¶è¿ç»­çš„ä»å¤´åˆ°å°¾å¾—å­˜åˆ°ç£ç›˜é‡Œï¼Œè¿™ç§æ–¹å¼è¯»å†™éƒ½éå¸¸å¿«ï¼Œä½†æ˜¯å´éå¸¸ä¸é€‚åˆæ—¥å¸¸ä½¿ç”¨ã€‚è€ƒè™‘ä¸‹é¢è¿™ç§æƒ…å†µï¼Œæˆ‘æœ‰ä¸‹é¢è¿™äº›æ–‡ä»¶<br><code>[  A  ][  B  ][  C  ][  D  ][  E  ][  F  ]</code>æ•´ä¸ªç£ç›˜å¤§å°ä¸º6GBï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰1GBï¼Œåˆšåˆšå¥½ç”¨å®Œæ•´ä¸ªç£ç›˜ã€‚ä½†æ˜¯å½“æˆ‘åˆ é™¤äº†Bå’ŒEä¸¤ä¸ªæ–‡ä»¶çš„æ—¶å€™å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼Œç©ºä½™ä¸¤ä¸ª1GBçš„ä½ç½®å‡ºæ¥ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç©ºé—´ä¸è¿ç»­<br><code>[  A  ][     ][  C  ][  D  ][     ][  F  ]</code>ç°åœ¨æˆ‘æœ‰2GBçš„ç©ºé—´ã€‚ç³»ç»Ÿéœ€è¦ç»´æŠ¤ä¸€ä¸ªç©ºé—²ç©ºé—´åˆ—è¡¨æ¥è®©åæ¥çš„æ–‡ä»¶æ”¾åœ¨è¿™äº›ç©ºé—²çš„åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœä¸ç»´æŠ¤è¿™å¼ è¡¨çš„è¯ï¼Œå½“ç£ç›˜å†™æ»¡è¿‡ä¸€æ¬¡å°±å†ä¹Ÿä¸èƒ½å†™å…¥æ–°çš„æ•°æ®äº†ã€‚è™½ç„¶æˆ‘ä»¬ç»´æŠ¤äº†ä¸€å¼ è¿™æ ·çš„è¡¨ä¹Ÿå¹¶ä¸èƒ½å¾ˆè®©äººæ»¡æ„ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ª1.5GBçš„æ–‡ä»¶æƒ³å­˜åˆ°ç£ç›˜é‡Œï¼Œç³»ç»Ÿå°±ä¼šæŸ¥æ‰¾è¿ç»­çš„ç©ºä½™ç©ºé—´ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸€ä¸ªè¿ç»­çš„é«˜è¾¾1.5GBçš„ç©ºé—´ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½æŠŠæ–‡ä»¶å­˜è¿›å»ï¼Œæ˜¾ç„¶è¿™å¹¶ä¸èƒ½è®©äººæ»¡æ„ã€‚è€Œä¸”ï¼Œè¿™äº›è¿˜éƒ½æ˜¯å»ºç«‹åœ¨ä¸€ä¸ªå‰æä¹‹ä¸‹çš„ï¼Œå°±æ˜¯è¯´â€œå­˜å‚¨æ–‡ä»¶ä¹‹å‰å¿…é¡»çŸ¥é“æ–‡ä»¶çš„å¤§å°â€ï¼Œç„¶è€Œäº‹å®ä¸Šå¾ˆå¤šæ—¶å€™æ˜¯ä¸çŸ¥é“çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æ‰“å¼€äº†AEï¼ˆä¸€æ¬¾æ¸²æŸ“è§†é¢‘çš„è½¯ä»¶ï¼‰æ¥åˆ¶ä½œä¸€æ®µè§†é¢‘ç‰¹æ•ˆï¼Œç„¶è€Œåœ¨ç”Ÿæˆè§†é¢‘çš„æ—¶å€™æ²¡æœ‰äººçŸ¥é“è¿™ä¸ªæ–‡ä»¶æœ€åæ˜¯å¤šå¤§çš„ï¼Œæ‰€ä»¥å°±å¹¶ä¸é€‚ç”¨äºè¿™ç§æƒ…å†µã€‚ä½†æ˜¯è¿™ç§åˆ†é…æ–¹æ¡ˆå°±æ²¡æœ‰ä¼˜ç‚¹äº†å—ï¼Ÿä¹Ÿä¸æ˜¯çš„ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦å°†æ•°æ®åˆ»å½•åˆ°CD-ROMä¸Šï¼Œå› ä¸ºCD-ROMæ˜¯åªè¯»è®¾å¤‡ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡åˆ»å½•ä¹‹åå°±æ²¡æœ‰ä¿®æ”¹çš„å¯èƒ½äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹æ¡ˆç›´æ¥å°†å·²æœ‰çš„æ•°æ®é¡ºåºåˆ»å½•åˆ°å…‰ç›˜é‡Œï¼Œè¿™æ ·ä»¥åçš„è¯»å–å°±ä¼šå˜å¾—å¾ˆå¿«äº†ã€‚ç„¶åé’ˆå¯¹ç£ç›˜æœ‰äº†ä¸‹é¢çš„â€˜é“¾è¡¨åˆ†é…æ–¹æ¡ˆâ€™</p><h2 id="é“¾è¡¨åˆ†é…"><a href="#é“¾è¡¨åˆ†é…" class="headerlink" title="é“¾è¡¨åˆ†é…"></a>é“¾è¡¨åˆ†é…</h2><p>ä½¿ç”¨é“¾è¡¨åˆ†é…æ–¹æ¡ˆæ—¶ï¼Œç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½åªä¿ç•™æ–‡ä»¶çš„å¤´æŒ‡é’ˆï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é¡ºç€æŒ‡é’ˆçš„æŒ‡å‘æŠŠæ•´ä¸ªæ–‡ä»¶ä»æ–‡ä»¶ç³»ç»Ÿä¸­éå†å‡ºæ¥ã€‚è™½ç„¶é“¾è¡¨åˆ†é…æ–¹æ¡ˆæˆåŠŸçš„åˆ©ç”¨èµ·æ¥äº†ç©ºé—²ç©ºé—´ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸‹é¢ä¸¤ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼š</p><ol><li>æ¯æ¬¡æƒ³è¦è®¿é—®æ–‡ä»¶çš„ç¬¬nä¸ªèŠ‚ç‚¹æ—¶å€™ï¼Œéƒ½è¦ä»æ–‡ä»¶å¤´å¼€å§‹è®¿é—®ï¼Œæœ‰n-1æ¬¡ç£ç›˜çš„è®¿é—®æ˜¯æ— æ•ˆçš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ¡ˆå¯¹éšæœºè¯»å–éå¸¸æ…¢ï¼›</li><li>å› ä¸ºæ¯ä¸ªç£ç›˜å—çš„å¤§å°éƒ½æ˜¯2çš„næ¬¡å¹‚ï¼Œä¿å­˜çš„å¤§å°ä¹Ÿå°±æ˜¯2çš„næ¬¡å¹‚ï¼Œä½†æ˜¯å› ä¸ºæ–‡ä»¶å¤´è¢«æŒ‡é’ˆå å»äº†ä¸€å®šçš„å­—èŠ‚ï¼Œå°±å¯¼è‡´å®é™…å­˜å‚¨çš„æ–‡ä»¶å¹¶ä¸æ˜¯2çš„næ¬¡å¹‚ã€‚è™½ç„¶è¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯è‡´å‘½çš„ï¼Œä½†æ˜¯ç¡®å®ä¼šè®©ç³»ç»Ÿå˜æ…¢ï¼Œä¹Ÿä¼šè®©é¢å‘ç³»ç»Ÿçš„ç¼–ç¨‹å˜å¾—å›°éš¾å¾ˆå¤šã€‚</li></ol><p>å†…å­˜é“¾è¡¨è§£å†³äº†é“¾è¡¨åˆ†é…çš„ä¸€äº›é—®é¢˜ã€‚</p><h2 id="å†…å­˜é“¾è¡¨åˆ†é…"><a href="#å†…å­˜é“¾è¡¨åˆ†é…" class="headerlink" title="å†…å­˜é“¾è¡¨åˆ†é…"></a>å†…å­˜é“¾è¡¨åˆ†é…</h2><p>å†…å­˜é“¾è¡¨åˆ†é…æ˜¯å°†ç£ç›˜é‡Œæ‰€æœ‰æ–‡ä»¶çš„æ‰€æœ‰å—éƒ½åšæˆé“¾è¡¨ï¼Œä¾æ—§æ˜¯æ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªé“¾è¡¨ã€‚ä½†æ˜¯è¿™æ¬¡å°†é“¾è¡¨æ•´ä¸ªå­˜æ”¾åˆ°å†…å­˜ä¸­ï¼Œè¿™æ ·åœ¨éšæœºè®¿é—®çš„æ—¶å€™å› ä¸ºé“¾è¡¨å…¨éƒ½åœ¨å†…å­˜ä¸­å°±ä¼šéå¸¸å¿«ã€‚ä½†æ˜¯ç”±äºè¦å¯¹æ¯ä¸€ä¸ªæ–‡ä»¶å»ºç«‹å­˜å‚¨ï¼Œä¸”å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¿™ç§æ–‡ä»¶ç³»ç»Ÿå¹¶ä¸é€‚åˆç”¨äºå°æ–‡ä»¶å¤§ç£ç›˜ã€‚å¯¹äºä¸€ä¸ª200GBçš„ç£ç›˜ï¼Œé‡Œé¢å……æ»¡äº†1KBçš„å—ï¼Œé‚£ä¹ˆæ ¹æ®ç³»ç»Ÿä¼˜åŒ–ä¹‹åè¿™å¼ è¡¨éœ€è¦600~800MBçš„å†…å­˜ï¼Œç„¶è€Œç°åœ¨åŠ¨è¾„TBçº§çš„ç£ç›˜ï¼Œåˆ™éå¸¸ä¸é€‚ç”¨ã€‚è¿™ç§å†…å­˜é“¾è¡¨åˆ†é…æ–¹æ¡ˆä¸­ç»´æŠ¤çš„è¡¨ç§°ä¹‹ä¸ºâ€˜æ–‡ä»¶åˆ†é…è¡¨â€™è‹±æ–‡ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„â€˜File Allocation Table-----FATâ€™<br>ä¸ºäº†å…‹æœå†…å­˜é“¾è¡¨åˆ†é…çš„å†…å­˜å ç”¨å¤§çš„é—®é¢˜ï¼Œæœ‰äº†i-Nodeæ–¹æ¡ˆã€‚</p><h2 id="i-Node"><a href="#i-Node" class="headerlink" title="i-Node"></a>i-Node</h2><p>i-Nodeæ–¹æ¡ˆåœ¨ç£ç›˜å¤´éƒ¨é¢„ç•™ä¸€æ®µç©ºé—´ç”¨æ¥å­˜æ”¾i-Nodeï¼Œè¿™é‡Œçš„i-Nodeæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œé‡Œé¢åŒ…å«äº†æ–‡ä»¶çš„ä¸€äº›å…ƒæ•°æ®å’Œæ–‡ä»¶æ‰€æœ‰å—çš„ç›¸å…³ä¿¡æ¯ï¼Œæ‰€ä»¥æ ¹æ®ä¸€ä¸ªi-Nodeå°±å¯ä»¥æ‰¾åˆ°ç€æ•´ä¸ªæ–‡ä»¶ã€‚å› ä¸ºæ¯ä¸ªi-Nodeçš„é¢„ç•™ç©ºé—´éƒ½æ˜¯å›ºå®šçš„ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§å¤ªåˆ†æ•£å°±ä¼šå¯¼è‡´ä¸€ä¸ªi-Nodeå¹¶ä¸èƒ½å­˜å‚¨å®Œæ‰€æœ‰ä¿¡æ¯ï¼Œé‚£ä¹ˆi-Nodeä¸­æœ€åä¸€æ®µå°±ä¿å­˜äº†å¦ä¸€ä¸ªi-Nodeçš„åœ°å€ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªi-Nodeä¸­ç»§ç»­ä¿å­˜ä¿¡æ¯ã€‚å› ä¸ºi-Nodeæ˜¯ä¿å­˜åœ¨ç£ç›˜é‡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“åˆ°å†…å­˜ï¼Œåªæœ‰å½“æ–‡ä»¶çœŸæ­£æ‰“å¼€çš„æ—¶å€™æ‰ä¼šå°†æ•°æ®åŠ è½½åˆ°å†…å­˜ã€‚æ‰€ä»¥å†…å­˜å ç”¨æ˜¯æ ¸åŒæ—¶æ‰“å¼€çš„æ–‡ä»¶æ•°é‡ç›¸å…³çš„ã€‚åœ¨Linuxä¸­æˆ‘ä»¬ä½¿ç”¨<code>ls -l -i</code>å°±å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ–‡ä»¶çš„i-Nodeç¼–å·ã€‚ç°åœ¨çš„å¤§å¤šæ•°æ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨è¿™ç§æ–¹æ¡ˆäº†ï¼Œæ¯”å¦‚EXTã€NTFSã€XFSç­‰ã€‚</p><h1 id="0X04-æ–‡ä»¶å…±äº«"><a href="#0X04-æ–‡ä»¶å…±äº«" class="headerlink" title="0X04 æ–‡ä»¶å…±äº«"></a>0X04 æ–‡ä»¶å…±äº«</h1><p>é¦–å…ˆæ˜ç¡®ä¸¤ç‚¹ï¼š1. è¿™é‡Œè¯´çš„æ–‡ä»¶å…±äº«å¹¶ä¸æ˜¯è¯´å°†ä¸€ä¸ªæ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ è¾“ç»™ä»–äººçš„é‚£ç§æ–‡ä»¶å…±äº«ï¼› 2. ç³»ç»Ÿä¸­çš„æ–‡ä»¶ç»“æ„ä¸æ˜¯æ ‘çŠ¶ï¼Œè€Œæ˜¯å›¾ã€‚ï¼ˆå½“Windowsä¸­æˆ‘ä»¬ç»™ä¸€ä¸ªæ–‡ä»¶å»ºç«‹äº†ä¸€ä¸ªå¿«æ·æ–¹å¼å¹¶æ”¾åœ¨äº†å¦ä¸€ä¸ªç›®å½•é‡Œçš„æ—¶å€™ï¼Œå°±å½¢æˆäº†å›¾è§£æ„ï¼‰<br>è¿™é‡Œçš„æ–‡ä»¶å…±äº«ä¸»è¦å°±æ˜¯é“¾æ¥çš„é—®é¢˜ï¼Œå…³äºé“¾æ¥çš„å†…å®¹å¯ä»¥åœ¨æˆ‘åšå®¢é‡Œæ‰¾åˆ°ã€‚<span class="exturl" data-url="aHR0cDovL2Jsb2cuanVzdDY2Ni5jbi9pbmRleC5waHAvYXJjaGl2ZXMvMTAv" title="http://blog.just666.cn/index.php/archives/10/">Linuxè½¯è¿æ¥/ç¡¬é“¾æ¥ ç†è§£Linuxé“¾æ¥<i class="fa fa-external-link"></i></span><br>æ¯ä¸ªæ–‡ä»¶ä¼šä¿å­˜æŒ‡å‘è‡ªå·±çš„é“¾æ¥æ•°ï¼Œå½“åªæƒ³è‡ªå·±çš„é“¾æ¥æ•°ä¸º0çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™å—æ•°æ®å°±æŠ›å¼ƒæ‰äº†ã€‚</p><h1 id="0X05-æ–‡ä»¶ç³»ç»Ÿ"><a href="#0X05-æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="0X05 æ–‡ä»¶ç³»ç»Ÿ"></a>0X05 æ–‡ä»¶ç³»ç»Ÿ</h1><h2 id="æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ"></a>æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ</h2><p>å› ä¸ºç°åœ¨çš„CPUè¿ç®—èƒ½åŠ›å’Œç£ç›˜å®¹é‡ã€å†…å­˜å®¹é‡ç­‰éƒ½æœ‰äº†éå¸¸å¤§çš„è¿›æ­¥ï¼Œæ‰€ä»¥åœ¨ä¸å®é™…è®¿é—®ç£ç›˜åªåœ¨é«˜é€Ÿç¼“å­˜ä¸Šå°±èƒ½è®¿é—®åˆ°å¾ˆå¤šéœ€è¦çš„æ•°æ®ï¼Œæ‰€ä»¥æ ¹æ®è¿™ç§æƒ…å†µï¼Œå°±å‡ºç°äº†æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿ(Log-structred File System)ã€‚è¿™ç§æ–‡ä»¶ç³»ç»Ÿå°†æ–‡ä»¶æ“ä½œç»“æ„åŒ–æˆæ—¥å¿—ã€‚åœ¨è¿™ç§æ–‡ä»¶ç³»ç»Ÿä¸­æ¯æ¬¡å°†æ•°æ®è¯»å†™ç¼“å­˜åˆ°å†…å­˜ï¼Œç„¶åå®šæ—¶å®šé‡åœ°å°†æ•°æ®ä»å†…å­˜å†™å…¥ç£ç›˜ã€‚</p><h2 id="æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ"></a>æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿ</h2><p>æ—¥å¿—æ–‡ä»¶ç³»ç»Ÿæ¯”æ—¥å¿—ç»“æ„æ–‡ä»¶ç³»ç»Ÿæœ‰æ›´å¼ºçš„é²æ£’æ€§ï¼ˆRoubst ä¹Ÿå°±æ˜¯å¥å£®æ€§ï¼‰ã€‚åœ¨è¿™ç§æ–‡ä»¶ç³»ç»Ÿä¸­è¿›è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œå…ˆè®°å½•ä¸‹è¦å¹²ä»€ä¹ˆï¼Œç„¶åå†å¼€å§‹æ“ä½œã€‚è¿™æ ·ä¸ç®¡ä»€ä¹ˆæ—¶å€™å‡ºäº†é”™è¯¯ï¼Œéƒ½å¯ä»¥æ ¹æ®æ—¥å¿—æ¥æ¢å¤æ“ä½œã€‚æ¯”å¦‚åœ¨Unixä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶åˆ†æˆä¸‰ä¸ªæ­¥éª¤ï¼š1.åœ¨ç›®å½•ä¸­åˆ é™¤æ–‡ä»¶ 2.é‡Šæ”¾i-Nodeåˆ°ç©ºé—´i-NodeèŠ‚ç‚¹æ±  3.å¼ºç£ç›˜å—å½’è¿˜åˆ°æ“ä½œç³»ç»Ÿã€‚ å¦‚æœå®Œæˆäº†ç¬¬ä¸€æ­¥ï¼Œå°±æ­»æœºäº†ï¼Œé‚£ä¹ˆç”±äºæ—¥å¿—çš„å­˜åœ¨å°±å¯ä»¥åœ¨çŸ¥é“è¿™ä¸ªæ“ä½œç©¶ç«Ÿè¦å¹²ä»€ä¹ˆï¼Œåœ¨æ¢å¤å¼€æœºçš„æ—¶å€™å°±å¯ä»¥ç»§ç»­å®Œæˆè¿™æ¬¡æ“ä½œã€‚å½“æ‰€æœ‰çš„ä»»åŠ¡é¡¹éƒ½å®Œæˆäº†çš„æ—¶å€™å°±åˆ é™¤è¿™ä¸ªæ—¥å¿—ã€‚</p><h2 id="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"><a href="#è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ"></a>è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ</h2><p>åœ¨Windowsé‡Œç”¨çš„æ˜¯å¤šæ ¹ç›®å½•çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šä¸ªæ ¹ç›®å½•ï¼Œæ¯”å¦‚Cç›˜Dç›˜Eç›˜ç­‰ï¼Œä½†æ˜¯åœ¨Linuxä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å•æ ¹ç›®å½•å½¢å¼ï¼Œå¦‚æœè¦åŒæ—¶ä½¿ç”¨å‡ ç§æ–‡ä»¶ç³»ç»Ÿæ¯”å¦‚ï¼šæ ¹ç›®å½•ä½¿ç”¨XFSã€/homeä½¿ç”¨ext4ã€/usrç›®å½•ä½¿ç”¨ext3ã€é‚£ä¹ˆä¹…éœ€è¦ä½¿ç”¨ä¸€ç§å«åšè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„æŠ€æœ¯ã€‚ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹é—´éœ€è¦è¿æ¥çš„è¯éœ€è¦ä½¿ç”¨VFSï¼ˆè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰æ¥å£æ¥å°†ä¸¤ä¸ªæ–‡ä»¶ç³»ç»Ÿè¿èµ·æ¥ã€‚ä½¿ç”¨è¿™ç§è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿçš„æŠ€æœ¯å°±å¯ä»¥è®©åŒä¸€ä¸ªæ ¹ç›®å½•ä¸‹é¢æŒ‚è½½æœ‰ä¸åŒæ–‡ä»¶ç³»ç»Ÿçš„è®¾å¤‡ã€‚</p><h1 id="0X06-ç£ç›˜åˆ†å—"><a href="#0X06-ç£ç›˜åˆ†å—" class="headerlink" title="0X06 ç£ç›˜åˆ†å—"></a>0X06 ç£ç›˜åˆ†å—</h1><p>å·²çŸ¥æ–‡ä»¶åœ¨ç£ç›˜é‡Œæ˜¯æŒ‰ç…§å—å­˜å‚¨çš„ï¼Œé‚£ä¹ˆæ¯ä¸ªå—åˆ†é…å¤šå¤§å°±æˆä¸ºäº†ä¸€ä¸ªé—®é¢˜ã€‚å› ä¸ºåœ¨ç£ç›˜åº•å±‚ï¼Œæ¯ä¸ªæ–‡ä»¶å ç”¨çš„å—éƒ½æ˜¯æ•´æ•°ï¼Œæ¯”å¦‚æˆ‘ä¸€ä¸ªå—æ˜¯1kbï¼Œé‚£ä¹ˆæˆ‘æœ‰ä¸€ä¸ª2.5kbçš„æ–‡ä»¶ä¹Ÿè¦å ç”¨3ä¸ªå—ï¼Œç”šè‡³æ˜¯1å­—èŠ‚çš„æ–‡ä»¶ä¹Ÿè¦å ç”¨1kbï¼Œæ¯ä¸ªå—ä¸­å‰©ä½™çš„éƒ¨åˆ†æ˜¯ä¸èƒ½å­˜å‚¨å…¶ä»–æ–‡ä»¶çš„ã€‚ä»è¿™æ–¹é¢çœ‹æ¥åˆ†å—è¶Šå¤§å°±è¶Šæµªè´¹ç©ºé—´ï¼Œå—è¶Šå°ç£ç›˜ç©ºé—´åˆ©ç”¨ç‡è¶Šé«˜ã€‚é‚£ä¹ˆæˆ‘ä»¬æŠŠå—éƒ½åˆ†æˆæœ€å°ï¼Œè¿™æ ·å°±è¡Œäº†å—ï¼Ÿæ˜¾ç„¶æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å› ä¸ºç£ç›˜åœ¨è¯»å†™æ•°æ®çš„æ—¶å€™æ˜¯æŒ‰ç…§å—æ¥çš„ï¼Œæ‰€ä»¥åˆ†çš„å—è¶Šå¤§è¯»å†™çš„é€Ÿåº¦è¶Šå¿«ï¼Œå› ä¸ºç£ç›˜é‡Œçš„æ€»å—æ•°å°‘ï¼Œå—è¶Šå°è¶Šæ…¢ã€‚æ€»ç»“ä¸‹æ¥æ˜¯è¿™æ ·ï¼šéšç€å—å¤§å°çš„æå‡ï¼Œç£ç›˜è¯»å†™æ•ˆç‡ä¼šæé«˜ï¼Œä½†æ˜¯ç©ºé—´åˆ©ç”¨ç‡ä¼šé™ä½ã€‚ç»Ÿè®¡æ‰€å¾—ï¼Œåˆ†å—å¤§å°ä¸º4kbæœ€å®¹æ˜“è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p><h1 id="0X07-ç¼“å†²åŒº"><a href="#0X07-ç¼“å†²åŒº" class="headerlink" title="0X07 ç¼“å†²åŒº"></a>0X07 ç¼“å†²åŒº</h1><p>ç°åœ¨çš„æ–‡ä»¶ç³»ç»Ÿéƒ½æ”¯æŒç¼“å†²åŒºå†™å…¥ã€‚ç¼“å†²åŒºå†™å…¥å¯¹åº”çš„å¦ä¸€ç§æ˜¯â€˜åŒæ­¥å†™å…¥â€™ã€‚ç¼“å†²åŒºå†™å…¥ï¼šç¨‹åºç”Ÿæˆçš„æˆ–è€…ç”¨æˆ·çš„æ•°æ®é¦–å…ˆå†™å…¥åˆ°å†…å­˜ä¸­ï¼Œå½“è¾¾åˆ°ä¸€å®šæ—¶é—´æˆ–è€…ä¸€å®šé‡çš„æ—¶å€™ä¸€æ¬¡æ€§å†™å…¥ç£ç›˜ï¼›åŒæ­¥å†™å…¥ï¼šå°†ç¨‹åºå’Œç”¨æˆ·äº§ç”Ÿçš„æ•°æ®å®æ—¶å†™å…¥ç£ç›˜é‡Œã€‚ä¸‹é¢å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ç§çš„ä¼˜ç¼ºç‚¹</p><p><strong>åŒæ­¥å†™å…¥ä¼˜ç‚¹</strong>ï¼šæ•°æ®å®æ—¶åŒæ­¥ï¼Œå‡ºç°æ•°æ®ä¸¢å¤±çš„å¯èƒ½æ€§å¾ˆå°<br><strong>åŒæ­¥å†™å…¥ç¼ºç‚¹</strong>ï¼šç”±äºæ•°æ®äº§ç”Ÿå¾ˆæ…¢ï¼Œæ‰€ä»¥ç£ç›˜åˆ©ç”¨ç‡ä¸é«˜ï¼Œä¸”é•¿æœŸå æ®ç£ç›˜<br><strong>ç¼“å†²å†™å…¥ä¼˜ç‚¹</strong>ï¼šæ•°æ®é¦–å…ˆå†™å…¥æ¯”ç£ç›˜å¿«å¾—å¤šçš„å†…å­˜ä¸­ï¼Œå†ç»Ÿä¸€å†™å…¥ç£ç›˜åªä¼šçŸ­æ—¶é—´å ç”¨ç£ç›˜ï¼Œä¸”å ç”¨ç£ç›˜æ—¶åˆ©ç”¨ç‡é«˜<br><strong>ç¼“å†²å†™å…¥ç¼ºç‚¹</strong>ï¼šå½“æ•°æ®åœ¨ç¼“å†²åŒºæ²¡æœ‰å†™å…¥ç£ç›˜æ—¶ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸æˆ–è€…å´©æºƒï¼Œæ•°æ®éå¸¸å®¹æ˜“ä¸¢å¤±</p><p>è¿™é‡Œæœ‰ä¸¤æ®µPythonçš„ä»£ç ï¼Œå±•ç¤ºäº†ç¼“å†²åŒºå†™å…¥å’ŒåŒæ­¥å†™å…¥çš„é€Ÿåº¦å·®å¼‚ï¼Œé¦–å…ˆæ˜¯ä½¿ç”¨åŒæ­¥å†™å…¥æ–¹å¼å†™å…¥<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> ctime</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'D:/list.txt'</span>, <span class="string">'r+'</span>, <span class="number">0</span>)    <span class="comment">#ä¸ä½¿ç”¨ç¼“å†²</span></span><br><span class="line">start_time = ctime()    <span class="comment">#å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3000000</span>):</span><br><span class="line">    f.write(<span class="string">'hello,world\n'</span>)</span><br><span class="line">f.close()</span><br><span class="line">end_time = ctime()  <span class="comment">#ç»“æŸæ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> start_time</span><br><span class="line"><span class="keyword">print</span> end_time</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç»“æœæ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬çœ‹åˆ°å†™å…¥300Wè¡Œâ€™hello,worldâ€™ç”¨äº†8ç§’ï¼Œæœ€åç”Ÿæˆçš„æ•°æ®é‡æ˜¯37.1MB<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thu Nov 17 11:12:21 2016</span><br><span class="line">Thu Nov 17 11:12:29 2016</span><br></pre></td></tr></table></figure></p><p>ç„¶åä½¿ç”¨Pythoné»˜è®¤å¤§å°çš„ç¼“å†²åŒºè¯•è¯•ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> ctime</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'D:/list.txt'</span>, <span class="string">'r+'</span>, <span class="number">-1</span>)    <span class="comment">#ä½¿ç”¨é»˜è®¤ç¼“å†²åŒºå¤§å°</span></span><br><span class="line">start_time = ctime()    <span class="comment">#å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3000000</span>):</span><br><span class="line">    f.write(<span class="string">'hello,world\n'</span>)</span><br><span class="line">f.close()</span><br><span class="line">end_time = ctime()  <span class="comment">#ç»“æŸæ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> start_time</span><br><span class="line"><span class="keyword">print</span> end_time</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç»“æœæ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™æ¬¡å†™å…¥ç›¸åŒçš„æ•°æ®åªç”¨äº†1ç§’<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thu Nov 17 11:18:04 2016</span><br><span class="line">Thu Nov 17 11:18:05 2016</span><br></pre></td></tr></table></figure></p><h1 id="0X08-åå—å±è”½"><a href="#0X08-åå—å±è”½" class="headerlink" title="0X08 åå—å±è”½"></a>0X08 åå—å±è”½</h1><p>åœ¨ç£ç›˜è¿™ç§ç‰©ç†ç»“æ„é‡Œå‡ºç°é”™è¯¯æ˜¯æ¯”è¾ƒæ­£å¸¸çš„ï¼Œå°¤å…¶æ˜¯æœºæ¢°ç£ç›˜ç£è‡‚åœ¨æ—‹è½¬çš„æ—¶å€™ä¸ç£é“çš„æ‘©æ“¦ä¼šäº§ç”Ÿéƒ¨åˆ†åå—ã€‚è¿™äº›åå—ä¸Šçš„æ•°æ®ä¼šå‘ç”Ÿä¸¢å¤±æˆ–è€…é”™è¯¯ï¼Œé‚£ä¹ˆæ€ä¹ˆå±è”½è¿™äº›åå—å‘¢ï¼Ÿä¹‹å‰åœ¨é‚£äº›åˆ†åŒºè½¯ä»¶é‡Œçœ‹åˆ°è¿‡åå—å±è”½ï¼Œæ„Ÿè§‰éå¸¸é«˜ç«¯ï¼Œå…¶å®åŸç†æ˜¯å¾ˆç®€å•çš„ã€‚æ¯”å¦‚ç£ç›˜é‡Œæœ‰23å—åå—ï¼Œé‚£ä¹ˆä¿®å¤ç¨‹åºå°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼ŒæŒ‡å®šè¿™ä¸ªæ–‡ä»¶å°±å­˜å‚¨åœ¨è¿™23ä¸ªåå—ä¸Šï¼Œä¸”å¯¹æ“ä½œç³»ç»Ÿä¸å¯è§ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿè™½ç„¶çŸ¥é“è¿™é‡Œæœ‰æ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¼šå»ç®¡ä»–ï¼Œè¿™æ ·å°±ç›¸å½“äºå±è”½äº†ç£ç›˜é‡Œçš„åå—ã€‚</p><h1 id="0X09-æå‡æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½-é«˜é€Ÿç¼“å­˜"><a href="#0X09-æå‡æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½-é«˜é€Ÿç¼“å­˜" class="headerlink" title="0X09 æå‡æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ é«˜é€Ÿç¼“å­˜"></a>0X09 æå‡æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ é«˜é€Ÿç¼“å­˜</h1><p>é«˜é€Ÿç¼“å­˜å°±æ˜¯å°†å³å°†éœ€è¦çš„æ–‡ä»¶å’Œç»å¸¸ä½¿ç”¨çš„æ–‡ä»¶æ”¾åœ¨ç£ç›˜çš„é«˜é€Ÿç¼“å­˜é‡Œï¼Œå› ä¸ºé«˜é€Ÿç¼“å­˜çš„é€Ÿåº¦æ¯”ç£ç›˜è¦å¿«å¾—å¤šï¼Œæ‰€ä»¥å°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æé«˜I/Oæ•ˆç‡ã€‚<br>åœ¨Unixé‡Œæœ‰ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨syncï¼Œåœ¨Windowsé‡Œæœ‰ä¸€ä¸ªFlushFileBuffersï¼Œæ˜¯ç”¨æ¥å°†é«˜é€Ÿç¼“å­˜é‡Œçš„æ•°æ®åŒæ­¥å†™å…¥åˆ°ç£ç›˜é‡Œçš„ã€‚åœ¨Unixç³»åˆ—ç³»ç»Ÿä¸­æ¯éš”30ç§’å°±æ‰§è¡Œä¸€æ¬¡syncå°†æ•°æ®å†™å…¥ï¼Œåœ¨Windowsä¸­åˆ™æ˜¯å®æ—¶çš„ã€‚è¿™ä¸¤ç§æ–¹æ¡ˆå¹¶æ²¡æœ‰è°å¥½è°åä¹‹åˆ†ï¼Œå„æœ‰ä¼˜åŠ£ã€‚</p><h1 id="0X0A-ç£ç›˜ç¢ç‰‡æ•´ç†"><a href="#0X0A-ç£ç›˜ç¢ç‰‡æ•´ç†" class="headerlink" title="0X0A ç£ç›˜ç¢ç‰‡æ•´ç†"></a>0X0A ç£ç›˜ç¢ç‰‡æ•´ç†</h1><p>å› ä¸ºç»å¤§å¤šæ•°çš„ç°ä»£æ–‡ä»¶ç³»ç»Ÿéƒ½é‡‡ç”¨äº†é“¾è¡¨å­˜å‚¨çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ç£ç›˜ä¸€æ®µæ—¶é—´ä¹‹åæ–‡ä»¶éƒ½æ˜¯åˆ†æ•£çš„æ”¾åœ¨ç£ç›˜çš„å„ä¸ªè§’è½çš„ï¼Œè¿™æ ·çš„è¯è¯»å†™æ–‡ä»¶å°±ä¼šå˜å¾—æ¯”è¾ƒæ…¢ï¼Œæ–‡ä»¶è¶Šé›¶æ•£è¯»å†™å°±è¶Šæ…¢ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†ç£ç›˜è¿›è¡Œæ•´ç†ï¼Œå°†åˆ†æ•£çš„æ–‡ä»¶æ•°æ®èšåˆåˆ°ä¸€èµ·ï¼Œå½“ç„¶ä¹Ÿåªèƒ½æ˜¯å°½é‡ï¼Œå› ä¸ºæŸäº›æ•°æ®æ˜¯ä¸èƒ½è¢«ç§»åŠ¨çš„ï¼Œæ¯”å¦‚é¡µæ–‡ä»¶ã€ä¼‘çœ æ–‡ä»¶ã€æ—¥å¿—ã€‚å½“é›¶æ•£çš„æ–‡ä»¶å˜æˆè¿ç»­çš„æ–‡ä»¶çš„æ—¶å€™è¯»å†™çš„æ•ˆç‡å°±ä¼šæœ‰å¤§å¹…åº¦æå‡ã€‚ä½†æ˜¯ç”±äºå„ä¸ªæ“ä½œç³»ç»Ÿé‡‡ç”¨çš„æ–‡ä»¶ç³»ç»Ÿçš„å†…éƒ¨å®ç°ä¸åŒï¼Œå¯¼è‡´å‡ ä¹åªæœ‰Windowséœ€è¦å¯¹ç£ç›˜è¿›è¡Œæ‰‹åŠ¨æ•´ç†ã€‚å½“ç„¶æ‰€è°“çš„æ‰‹åŠ¨æ•´ç†ä¹Ÿæ˜¯æœ‰è½¯ä»¶æ”¯æŒçš„ï¼Œä¸éœ€è¦ç”¨æˆ·è‡ªå·±å»æ“ä½œç£ç›˜ã€‚ä½†æ˜¯å› ä¸ºWindowsçš„å‘å±•ï¼Œä¹Ÿå‡ ä¹ä¸å†éœ€è¦æ‰‹åŠ¨è¿›è¡Œæ•´ç†äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> File System </tag>
            
            <tag> Operation System </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux ä¸­è®¡åˆ’ä»»åŠ¡å’Œå‘¨æœŸä»»åŠ¡</title>
      <link href="/2016/11/02/linux-crontab/"/>
      <url>/2016/11/02/linux-crontab/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Linuxä¸­çš„è®¡åˆ’ä»»åŠ¡"><a href="#0X00-Linuxä¸­çš„è®¡åˆ’ä»»åŠ¡" class="headerlink" title="0X00 Linuxä¸­çš„è®¡åˆ’ä»»åŠ¡"></a>0X00 Linuxä¸­çš„è®¡åˆ’ä»»åŠ¡</h1><p>æˆ‘ä»¬ä½¿ç”¨Linuxæ›´å¤šçš„æ—¶å€™æ˜¯åœ¨æœåŠ¡å™¨ä¸Šï¼Œç„¶è€Œæˆ‘ä»¬æœ‰çš„æ—¶å€™å°±éœ€è¦è®©è®¡ç®—æœºåœ¨å›ºå®šçš„æŸä¸ªæ—¶é—´åšä¸€äº›äº‹æƒ…ã€‚æ¯”å¦‚æˆ‘ä»¬å°±å¯èƒ½æœ‰æœ‰å¦‚ä¸‹éœ€æ±‚ï¼š</p><ol><li>ä¸´æ—¶æœ‰äº‹éœ€è¦ç¦»å¼€ç”µè„‘ï¼Œä½†æ˜¯ä¸€ä¸ªå°æ—¶åéœ€è¦å¤‡ä»½æŸä¸ªç›®å½•é‡Œçš„æ–‡ä»¶</li><li>å†™äº†ä¸ªçˆ¬è™«å»æŠ“å–æŸç½‘ç«™çš„æ–°é—»ï¼Œæ¯éš”ååˆ†é’Ÿå°±å»çˆ¬å–ä¸€æ¬¡</li><li>å‘¨æœŸæ€§çš„æ‰§è¡ŒæŸè„šæœ¬ï¼Œä½†æ”¾åœ¨åå°çš„è¯é€€å‡ºsshå°±ä¼šè¢«è‡ªåŠ¨å…³æ‰</li><li>å…¶å®è¿˜æœ‰å¥½å¤šè¿™ç§å¯èƒ½â€¦â€¦â€¦â€¦</li></ol><p>åœ¨Linuxä¸­æœ‰ä¸¤ç§å¸¸è§çš„ä»»åŠ¡ç®¡ç†ï¼Œä¸€ä¸ªæ˜¯<code>at</code>ä¹Ÿå°±æ˜¯åœ¨æŸæ—¶åšæŸäº‹ï¼Œå¦ä¸€ä¸ªæ˜¯<code>crontab</code>ä¹Ÿå°±æ˜¯å‘¨æœŸæ€§ä»»åŠ¡è¡¨ã€‚ä½¿ç”¨atå¯ä»¥æ–¹ä¾¿åœ°ç»™Linuxè®¾ç½®ä¸€ä¸ªåœ¨ä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆäº‹çš„è®¡åˆ’ï¼Œç”¨crontabå¯ä»¥æ–¹ä¾¿åœ°ç»™Linuxè®¾ç½®æˆ‘è¦åšæŸäº‹ï¼Œå¤šä¹…åšä¸€æ¬¡ã€‚</p><a id="more"></a><h1 id="0X01-ä½¿ç”¨atå‘½ä»¤"><a href="#0X01-ä½¿ç”¨atå‘½ä»¤" class="headerlink" title="0X01 ä½¿ç”¨atå‘½ä»¤"></a>0X01 ä½¿ç”¨atå‘½ä»¤</h1><h2 id="æ£€æŸ¥atdæœåŠ¡æ˜¯å¦å¼€å¯"><a href="#æ£€æŸ¥atdæœåŠ¡æ˜¯å¦å¼€å¯" class="headerlink" title="æ£€æŸ¥atdæœåŠ¡æ˜¯å¦å¼€å¯"></a>æ£€æŸ¥atdæœåŠ¡æ˜¯å¦å¼€å¯</h2><p><code>atd</code>å°±æ˜¯atå‘½ä»¤çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯æ‰“å¼€ç€çš„ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½è¢«å…³æ‰ï¼Œåœ¨RHELç³»ä¸­å¯ä»¥ä½¿ç”¨<code>systemctl status atd</code>æ¥æŸ¥çœ‹æœåŠ¡æ˜¯å¦å·²ç»å¼€å¯ï¼Œæ²¡æœ‰å¼€å¯çš„è¯å¯ä»¥ç”¨<code>systemctl restart atd</code>æ¥æ‰“å¼€æœåŠ¡</p><h2 id="åˆ›å»ºä¸€ä¸ªè®¡åˆ’ä»»åŠ¡"><a href="#åˆ›å»ºä¸€ä¸ªè®¡åˆ’ä»»åŠ¡" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè®¡åˆ’ä»»åŠ¡"></a>åˆ›å»ºä¸€ä¸ªè®¡åˆ’ä»»åŠ¡</h2><p>å…ˆåˆ›å»ºä¸€ä¸ªåœ¨ä»Šå¤©çš„<code>21:09</code>çš„ä»»åŠ¡ï¼Œä»»åŠ¡å†…å®¹æ˜¯è¾“å‡ºhello,worldé‡å®šå‘åˆ°/helloæ–‡ä»¶ã€‚ç„¶ååˆ°æ—¶é—´ä¹‹åå†æ£€æŸ¥è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å‡ºç°äº†ã€‚å½“æˆ‘ä»¬åªæŒ‡å®šæ—¶åˆ†çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯å½“å¤©ï¼Œå¦‚æœå·²ç»è¿‡äº†çš„æ—¶é—´çš„è¯ï¼Œä¼šé»˜è®¤ä¸ºæ¬¡æ—¥ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªå³æ—¥çš„è®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># date</span></span><br><span class="line">Wed Nov  2 21:07:07 CST 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at 21:09</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">"hello,world"</span> &gt; /hello</span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 5 at Wed Nov  2 21:09:00 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># date</span></span><br><span class="line">Wed Nov  2 21:09:10 CST 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># cat /hello</span></span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure></p><p>å½“æˆ‘ä»¬è¾“å…¥<code>at 21:09</code>ä¹‹åï¼Œå°±è¿›å…¥äº†atæ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè¾“å…¥çš„å‘½ä»¤å°±æ˜¯ä¹‹åå°†è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚å½“è¾“å…¥å®Œå‘½ä»¤ä¹‹åæŒ‰<code>Ctrl + D</code>å°±å¯ä»¥é€€å‡ºatæ¨¡å¼ï¼Œæ­¤æ—¶è®¡åˆ’ä»»åŠ¡åˆ›å»ºå®Œæ¯•ï¼Œç³»ç»Ÿä¼šæç¤ºä½ è®¡åˆ’ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>ä¸‹é¢è¿˜æœ‰å‡ ä¸ªä¾‹å­<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€ä¸ªå‡†ç¡®å®šæ—¶çš„è®¡åˆ’ä»»åŠ¡</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at 00:00 2016-11-11# åœ¨2016å…‰æ£èŠ‚é›¶ç‚¹è¾“å‡ºä¸€ä¸ª'hey å•èº«ç‹—'</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">"hey single dog"</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 7 at Fri Nov 11 00:00:00 2016</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ååˆ†é’Ÿåæ‰§è¡Œ</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at now+10min</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">'hello single dog'</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 9 at Wed Nov  2 21:26:00 2016</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä¸€å°æ—¶åæ‰§è¡Œ</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at now+1hour</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">'hey single dog'</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 10 at Wed Nov  2 22:16:00 2016</span><br></pre></td></tr></table></figure></p><h2 id="æŸ¥çœ‹å·²æœ‰çš„at"><a href="#æŸ¥çœ‹å·²æœ‰çš„at" class="headerlink" title="æŸ¥çœ‹å·²æœ‰çš„at"></a>æŸ¥çœ‹å·²æœ‰çš„at</h2><p>å¯ä»¥ä½¿ç”¨<code>atq</code>å‘½ä»¤æ¥æŸ¥çœ‹å­˜åœ¨çš„atè®¡åˆ’ä»»åŠ¡ï¼Œæ³¨æ„è¿™é‡Œå¹¶ä¸ä¸€å®šå…¨éƒ½æ˜¯ç”¨æˆ·è‡ªå·±åˆ›å»ºçš„ï¼Œä¹Ÿæœ‰çš„æ˜¯ç³»ç»Ÿåˆ›å»ºçš„ã€‚é€šè¿‡atqæŸ¥çœ‹åˆ°ä¹‹åå¯ä»¥ä½¿ç”¨<code>at -c</code>æ¥æŸ¥çœ‹æŸä¸ªè®¡åˆ’ä»»åŠ¡çš„å…·ä½“ä¿¡æ¯ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at now+1hour</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">"hello"</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 11 at Wed Nov  2 22:23:00 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atq</span></span><br><span class="line"><span class="comment"># è¿™é‡Œè¾“å‡ºçš„ç¬¬ä¸€åˆ—å°±æ˜¯atçš„ç¼–å·ï¼Œä¸‹é¢æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å°±æ˜¯æ ¹æ®ç¼–å·æŸ¥çœ‹çš„</span></span><br><span class="line">7Fri Nov 11 00:00:00 2016 a root</span><br><span class="line">6Thu Nov  3 03:00:00 2016 a root</span><br><span class="line">10Wed Nov  2 22:16:00 2016 a root</span><br><span class="line">9Wed Nov  2 21:26:00 2016 a root</span><br><span class="line">11Wed Nov  2 22:23:00 2016 a root</span><br><span class="line">1Wed Nov  2 21:52:00 2016 a root</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at -c 11</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment"># atrun uid=0 gid=0</span></span><br><span class="line"><span class="comment"># mail root 0</span></span><br><span class="line"><span class="built_in">umask</span> 22</span><br><span class="line">XDG_SESSION_ID=669; <span class="built_in">export</span> XDG_SESSION_ID</span><br><span class="line">............................... <span class="comment"># è¿™é‡Œçœç•¥äº†å¥½å¤šç¯å¢ƒå˜é‡ï¼Œé‡ç‚¹åœ¨ä¸‹é¢</span></span><br><span class="line">XDG_RUNTIME_DIR=/run/user/0; <span class="built_in">export</span> XDG_RUNTIME_DIR</span><br><span class="line"><span class="built_in">cd</span> /root || &#123;</span><br><span class="line"> <span class="built_in">echo</span> <span class="string">'Execution directory inaccessible'</span> &gt;&amp;2</span><br><span class="line"> <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$&#123;SHELL:-/bin/sh&#125;</span> &lt;&lt; <span class="string">'marcinDELIMITER0e9efce8'</span><span class="comment"># è¿™é‡Œæ˜¯æ‰§è¡Œçš„å‘½ä»¤</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line">marcinDELIMITER0e9efce8</span><br></pre></td></tr></table></figure></p><h2 id="åˆ é™¤ä¸€ä¸ªat"><a href="#åˆ é™¤ä¸€ä¸ªat" class="headerlink" title="åˆ é™¤ä¸€ä¸ªat"></a>åˆ é™¤ä¸€ä¸ªat</h2><p>ä½¿ç”¨ä¸€ä¸ª<code>atrm</code>å‘½ä»¤å¯ä»¥æŒ‡å®šatå·åˆ é™¤ç‰¹å®šçš„atè®¡åˆ’ä»»åŠ¡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at now+1hour</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">'hello'</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 12 at Wed Nov  2 22:27:00 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atq</span></span><br><span class="line">7Fri Nov 11 00:00:00 2016 a root</span><br><span class="line">6Thu Nov  3 03:00:00 2016 a root</span><br><span class="line">10Wed Nov  2 22:16:00 2016 a root</span><br><span class="line">11Wed Nov  2 22:23:00 2016 a root</span><br><span class="line">12Wed Nov  2 22:27:00 2016 a root</span><br><span class="line">1Wed Nov  2 21:52:00 2016 a root</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atm 12</span></span><br><span class="line">-bash: atm: <span class="built_in">command</span> not found</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atrm 12</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atq</span></span><br><span class="line">7Fri Nov 11 00:00:00 2016 a root</span><br><span class="line">6Thu Nov  3 03:00:00 2016 a root</span><br><span class="line">10Wed Nov  2 22:16:00 2016 a root</span><br><span class="line">11Wed Nov  2 22:23:00 2016 a root</span><br><span class="line">1Wed Nov  2 21:52:00 2016 a root</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># at now+1hour</span></span><br><span class="line">at&gt; <span class="built_in">echo</span> <span class="string">'hello'</span></span><br><span class="line">at&gt; &lt;EOT&gt;</span><br><span class="line">job 12 at Wed Nov  2 22:27:00 2016</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atq</span></span><br><span class="line">7Fri Nov 11 00:00:00 2016 a root</span><br><span class="line">6Thu Nov  3 03:00:00 2016 a root</span><br><span class="line">10Wed Nov  2 22:16:00 2016 a root</span><br><span class="line">11Wed Nov  2 22:23:00 2016 a root</span><br><span class="line">12Wed Nov  2 22:27:00 2016 a root</span><br><span class="line">1Wed Nov  2 21:52:00 2016 a root</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atrm 12</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># atq</span></span><br><span class="line">7Fri Nov 11 00:00:00 2016 a root</span><br><span class="line">6Thu Nov  3 03:00:00 2016 a root</span><br><span class="line">10Wed Nov  2 22:16:00 2016 a root</span><br><span class="line">11Wed Nov  2 22:23:00 2016 a root</span><br><span class="line">1Wed Nov  2 21:52:00 2016 a root</span><br></pre></td></tr></table></figure></p><h1 id="0X02-ä½¿ç”¨crontabå‘½ä»¤"><a href="#0X02-ä½¿ç”¨crontabå‘½ä»¤" class="headerlink" title="0X02 ä½¿ç”¨crontabå‘½ä»¤"></a>0X02 ä½¿ç”¨crontabå‘½ä»¤</h1><ul><li>è¿™é‡Œçš„é…ç½®åˆ†æˆå…­æ®µ</li></ul><p>åˆ†â€”æ—¶â€”æ—¥â€”æœˆâ€”å‘¨â€”å‘½ä»¤</p><h2 id="åˆ›å»ºå‘¨æœŸä»»åŠ¡"><a href="#åˆ›å»ºå‘¨æœŸä»»åŠ¡" class="headerlink" title="åˆ›å»ºå‘¨æœŸä»»åŠ¡"></a>åˆ›å»ºå‘¨æœŸä»»åŠ¡</h2><p>ä½¿ç”¨ä»»ä½•ä¸€ä¸ªç”¨æˆ·ç™»é™†åˆ°ç³»ç»Ÿä¹‹åï¼Œå°±å¯ä»¥æ‰§è¡Œ<code>crontab -e</code>å°±è¿›å…¥äº†viçš„ç¼–è¾‘å™¨æ¨¡å¼ï¼Œç„¶åæˆ‘ä»¬æ¥ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥åˆ›å»º/ä¿®æ”¹å‘¨æœŸä»»åŠ¡äº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">15  10 1 10 * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello<span class="comment"># åœ¨æ¯ä¸ª10æœˆ1å·10ç‚¹15åˆ†æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">15  10 1 *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello<span class="comment"># åœ¨æ¯ä¸ª1å·10ç‚¹15åˆ†æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">15  10 * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello<span class="comment"># åœ¨æ¯ä¸ª10ç‚¹15åˆ†æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">15  *  * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello<span class="comment"># åœ¨æ¯ä¸ª15åˆ†æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">*/3 *  * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello<span class="comment"># æ¯3åˆ†é’Ÿæ‰§è¡Œå‘½ä»¤</span></span><br></pre></td></tr></table></figure></p><p>é€€å‡ºä¿å­˜ä¹‹åå°±å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ—¶é—´æ¥æ‰§è¡Œå‘½ä»¤äº†ã€‚</p><h2 id="æŸ¥çœ‹å‘¨æœŸä»»åŠ¡"><a href="#æŸ¥çœ‹å‘¨æœŸä»»åŠ¡" class="headerlink" title="æŸ¥çœ‹å‘¨æœŸä»»åŠ¡"></a>æŸ¥çœ‹å‘¨æœŸä»»åŠ¡</h2><p>ä½¿ç”¨<code>crontab -l</code>æŸ¥çœ‹è¯¥ç”¨æˆ·çš„å‘¨æœŸä»»åŠ¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># crontab -l</span></span><br><span class="line">15  10 1 10 * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello</span><br><span class="line">15  10 1 *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello</span><br><span class="line">15  10 * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello</span><br><span class="line">15  *  * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello</span><br><span class="line">*/3 *  * *  * <span class="built_in">echo</span> <span class="string">'hello'</span> &gt; /tmp/hello</span><br></pre></td></tr></table></figure></p><h2 id="åˆ é™¤å‘¨æœŸä»»åŠ¡"><a href="#åˆ é™¤å‘¨æœŸä»»åŠ¡" class="headerlink" title="åˆ é™¤å‘¨æœŸä»»åŠ¡"></a>åˆ é™¤å‘¨æœŸä»»åŠ¡</h2><p>å¯ä»¥ä½¿ç”¨<code>crontab -r</code>åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„å‘¨æœŸä»»åŠ¡ã€‚</p><h2 id="ç®¡ç†å‘¨æœŸä»»åŠ¡"><a href="#ç®¡ç†å‘¨æœŸä»»åŠ¡" class="headerlink" title="ç®¡ç†å‘¨æœŸä»»åŠ¡"></a>ç®¡ç†å‘¨æœŸä»»åŠ¡</h2><p>æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨<code>crontab -e</code>æ¥ç®¡ç†è‡ªå·±çš„å‘¨æœŸä»»åŠ¡ï¼Œç„¶è€Œrootç”¨æˆ·å¯ä»¥ä½¿ç”¨<code>crontab -u</code>æ¥ç®¡ç†å…¶ä»–ç”¨æˆ·çš„å‘¨æœŸä»»åŠ¡ã€‚åªè¦åŠ ä¸€ä¸ª-ué€‰é¡¹å³å¯ï¼Œå‚æ•°åé¢æ¥ä¸Šè¦ç®¡ç†çš„ç”¨æˆ·å°±å¯ä»¥äº†ã€‚ç„¶åè¿˜æ˜¯å’Œä¸Šé¢çš„æ“ä½œä¸€æ ·ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªè¿™ä¸ªå‚æ•°è€Œå·²ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Crontab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxæƒé™æ§åˆ¶åˆ—è¡¨ ACLä¿®æ”¹</title>
      <link href="/2016/11/02/linux-acl/"/>
      <url>/2016/11/02/linux-acl/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ACLæ˜¯ä»€ä¹ˆ"><a href="#0X00-ACLæ˜¯ä»€ä¹ˆ" class="headerlink" title="0X00 ACLæ˜¯ä»€ä¹ˆ"></a>0X00 ACLæ˜¯ä»€ä¹ˆ</h1><p>ACLçš„å…¨ç§°æ˜¯<code>Access Control List</code>è®¿é—®æ§åˆ¶åˆ—è¡¨ã€‚åœ¨Linuxä¸­å¯ä»¥ç»™æ–‡ä»¶è®¾ç½®æƒé™ï¼Œ<code>-rwx-rw-rw</code>è¿™æ ·ï¼Œä½†æ˜¯è¿™é‡Œå¹¶ä¸èƒ½ç»†åˆ†ï¼Œåªèƒ½åˆ†åˆ°ç”¨æˆ·ã€ç»„ã€å…¶ä»–ç”¨æˆ·ã€‚å¦‚æœæˆ‘æƒ³ç»™æŸä¸ªå•ç‹¬çš„ç”¨æˆ·è®¾ç½®æƒé™çš„è¯æ˜¯åšä¸åˆ°çš„ã€‚æ‰€ä»¥æœ‰äº†ACLçš„å‡ºç°ã€‚é€šè¿‡ACLå¯ä»¥ç»™Linuxä¸‹çš„æ–‡ä»¶æä¾›è¯¦ç»†çš„è®¿é—®æ§åˆ¶ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è®¾ç½®äº†åŸºæœ¬çš„<code>rwx</code>æƒé™ä¹‹åï¼Œå¯ä»¥é€šè¿‡ACLåœ¨ç»†åˆ†ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™ã€‚</p><a id="more"></a><h1 id="0X01-æŸ¥çœ‹æ–‡ä»¶çš„ACL"><a href="#0X01-æŸ¥çœ‹æ–‡ä»¶çš„ACL" class="headerlink" title="0X01 æŸ¥çœ‹æ–‡ä»¶çš„ACL"></a>0X01 æŸ¥çœ‹æ–‡ä»¶çš„ACL</h1><p>ä½¿ç”¨<code>getfacl</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„ACLå’Œè¯¦ç»†çš„æƒé™è®¾ç½®ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4</span><br><span class="line">-rwxr-xr-x 1 root root 1714 Oct 28 22:24 hello.py</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># getfacl hello.py</span></span><br><span class="line"><span class="comment"># file: hello.py</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œæ˜¾ç¤ºäº†æ–‡ä»¶åã€æ‰€å±ç”¨æˆ·ã€æ‰€å±ç»„ã€è¿˜æœ‰ç›¸å¯¹åº”çš„æƒé™ã€‚</p><h1 id="0X02-åˆ›å»ºæµ‹è¯•ç”¨æˆ·-ç»„-æ–‡ä»¶"><a href="#0X02-åˆ›å»ºæµ‹è¯•ç”¨æˆ·-ç»„-æ–‡ä»¶" class="headerlink" title="0X02 åˆ›å»ºæµ‹è¯•ç”¨æˆ·/ç»„/æ–‡ä»¶"></a>0X02 åˆ›å»ºæµ‹è¯•ç”¨æˆ·/ç»„/æ–‡ä»¶</h1><p>å…ˆåˆ›å»ºæµ‹è¯•ç”¨æˆ·ã€æµ‹è¯•ç»„ã€æµ‹è¯•æ–‡ä»¶ã€‚åˆ›å»ºäº†<code>xiaoming</code>å’Œ<code>xiaohong</code>ä¸¤ä¸ªç”¨æˆ·ï¼Œåœ¨<code>china</code>ç»„ï¼Œåˆ›å»ºäº†ä¸€ä¸ª<code>jack</code>ç”¨æˆ·åœ¨<code>usa</code>ç»„ã€‚ç„¶åç”¨rootç”¨æˆ·åœ¨<code>/tmp/</code>ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªacltestç›®å½•ï¼Œç”¨æ¥åšæµ‹è¯•ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•æ˜¯ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®çš„ï¼Œä½†æ˜¯ç”±äºæ˜¯rootç”¨æˆ·åˆ›å»ºçš„å­ç›®å½•ï¼Œæ‰€ä»¥è¦ç»™è¿™ä¸ªç›®å½•<code>777</code>çš„æƒé™ï¼Œè®©å…¶ä»–ç”¨æˆ·å¯ä»¥åœ¨é‡Œé¢æµ‹è¯•ã€‚ç°åœ¨é‡Œé¢åˆåˆ›å»ºäº†ä¸€äº›ç›®å½•å’Œæ–‡ä»¶ï¼Œä½†æ˜¯å…¨éƒ¨éƒ½æ˜¯rootç”¨æˆ·çš„ï¼Œæ–‡ä»¶æƒé™æ˜¯<code>644</code>ï¼Œç›®å½•æƒé™æ˜¯<code>755</code>ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># groupadd china</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># useradd xiaoming -g china</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># useradd xiaohong -g china</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># groupadd usa</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># useradd jack -g usa</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># cd /tmp</span></span><br><span class="line">[root@iZ28jaak5nnZ tmp]<span class="comment"># mkdir acltest</span></span><br><span class="line">[root@iZ28jaak5nnZ tmp]<span class="comment"># chmod 777 acltest</span></span><br><span class="line">[root@iZ28jaak5nnZ tmp]<span class="comment"># cd acltest/</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># touch file_&#123;1,3&#125;</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># mkdir dir_&#123;1,3&#125;</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-è®¾ç½®æ–‡ä»¶çš„ACL"><a href="#0X03-è®¾ç½®æ–‡ä»¶çš„ACL" class="headerlink" title="0X03 è®¾ç½®æ–‡ä»¶çš„ACL"></a>0X03 è®¾ç½®æ–‡ä»¶çš„ACL</h1><p>ä½¿ç”¨<code>setfacl</code>å‘½ä»¤å¯ä»¥è®¾ç½®æ–‡ä»¶ACLã€‚è¿™ä¸ªå‘½ä»¤æœ‰ä¸‹é¢è¿™å‡ ä¸ªå¸¸ç”¨å‚æ•°</p><h2 id="setfacl-å„ä¸ªå‚æ•°"><a href="#setfacl-å„ä¸ªå‚æ•°" class="headerlink" title="setfacl å„ä¸ªå‚æ•°"></a>setfacl å„ä¸ªå‚æ•°</h2><ul><li>æ‰€è°“çš„åç»­ACLå°±æ˜¯åœ¨é»˜è®¤ACLçš„åŸºç¡€ä¸Šæ·»åŠ çš„æ–°çš„è§„åˆ™ã€‚</li></ul><h3 id="m-è®¾ç½®åç»­ACL"><a href="#m-è®¾ç½®åç»­ACL" class="headerlink" title="-m è®¾ç½®åç»­ACL"></a>-m è®¾ç½®åç»­ACL</h3><p>å¯¹æŸä¸€ä¸ªæ–‡ä»¶/ç›®å½•è®¾ç½®æŸä¸€ä¸ªç”¨æˆ·çš„è®¿é—®æƒé™ï¼Œ uè¡¨ç¤ºç”¨æˆ· å†’å·åé¢æ˜¯ç”¨æˆ·å å†ä¸€ä¸ªå†’å·åé¢æ˜¯æƒé™ æœ€åæ¥æ–‡ä»¶/ç›®å½•<br><code>[root@iZ28jaak5nnZ acltest]# setfacl -m u:user_1:rwx file_1</code></p><p>å¯¹æŸä¸€ä¸ªæ–‡ä»¶/ç›®å½•è®¾ç½®æŸä¸€ä¸ªç”¨æˆ·ç»„çš„è®¿é—®æƒé™ï¼Œuè¡¨ç¤ºç»„ å†’å·åé¢æ˜¯ç»„å å†ä¸€ä¸ªå†’å·åé¢æ˜¯æƒé™ æœ€åæ¥æ–‡ä»¶/ç›®å½•<br><code>[root@iZ28jaak5nnZ acltest]# setfacl -m g:group_1:rwx file_1</code></p><h3 id="x-åˆ é™¤åç»­ACL"><a href="#x-åˆ é™¤åç»­ACL" class="headerlink" title="-x åˆ é™¤åç»­ACL"></a>-x åˆ é™¤åç»­ACL</h3><p>åˆ é™¤ä¹‹å‰æ·»åŠ çš„ACLé¡¹ï¼ŒæŒ‡å®šç”¨æˆ·æˆ–è€…æŒ‡å®šç»„éƒ½æ˜¯å¯ä»¥çš„ï¼Œè¯­æ³•å’Œä¸Šé¢å·®ä¸å¤šã€‚è¿™é‡Œåˆ é™¤çš„æ˜¯ä¸€æ¡ACLæ•°æ®ï¼Œä¸‹é¢è¯´çš„-bå‚æ•°æ˜¯åˆ é™¤æ‰€æœ‰çš„ACLæ•°æ®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -x u:xiaoming file_1</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl file_1</span></span><br><span class="line"><span class="comment"># file: file_1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure></p><h3 id="b-åˆ é™¤æ‰€æœ‰åç»­ACL"><a href="#b-åˆ é™¤æ‰€æœ‰åç»­ACL" class="headerlink" title="-b åˆ é™¤æ‰€æœ‰åç»­ACL"></a>-b åˆ é™¤æ‰€æœ‰åç»­ACL</h3><p>è¿™é‡Œæ˜¯åˆ é™¤ä¹‹å‰åˆ›å»ºçš„æ‰€æœ‰ACLï¼ŒåŒ…æ‹¬ä¸‹é¢ä¼šè¯´çš„é»˜è®¤ACL<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl file_1</span></span><br><span class="line"><span class="comment"># file: file_1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:xiaoming:rwx</span><br><span class="line">user:xiaohong:rw-</span><br><span class="line">group::r--</span><br><span class="line">mask::rwx</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -b file_1</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl file_1</span></span><br><span class="line"><span class="comment"># file: file_1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure></p><h3 id="d-è®¾ç½®é»˜è®¤ACL"><a href="#d-è®¾ç½®é»˜è®¤ACL" class="headerlink" title="-d è®¾ç½®é»˜è®¤ACL"></a>-d è®¾ç½®é»˜è®¤ACL</h3><p>è®¾ç½®é»˜è®¤ACLåªèƒ½ä¸ºç›®å½•è®¾ç½®ï¼Œä¸ºç›®å½•è®¾ç½®äº†ACLä¹‹åé‡Œé¢æ–°å»ºçš„ç›®å½•å’Œæ–‡ä»¶éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªé»˜è®¤çš„ACL<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir_1</span></span><br><span class="line"><span class="comment"># file: dir_1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -m d:u:jack:rwx dir_1# è®¾ç½®ç›®å½•çš„é»˜è®¤ACL</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir_1# æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç°åœ¨å‡ºç°äº†ä¸€æ®µé»˜è®¤ACL</span></span><br><span class="line"><span class="comment"># file: dir_1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx</span><br><span class="line">default:user:jack:rwx</span><br><span class="line">default:group::r-x</span><br><span class="line">default:mask::rwx</span><br><span class="line">default:other::r-x</span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># cd dir_1</span></span><br><span class="line">[root@iZ28jaak5nnZ dir_1]<span class="comment"># touch hello</span></span><br><span class="line">[root@iZ28jaak5nnZ dir_1]<span class="comment"># getfacl hello# æ–°å»ºçš„æ–‡ä»¶ä¹Ÿä½¿ç”¨è¿™äº›é»˜è®¤è®¾ç½®</span></span><br><span class="line"><span class="comment"># file: hello</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:jack:rwx<span class="comment">#effective:rw-</span></span><br><span class="line">group::r-x<span class="comment">#effective:r--</span></span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -m u::rwx -d dir_3# è®¾ç½®ä¸ºæ¯ä¸ªç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºç”¨æˆ·ç»„</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir_3</span></span><br><span class="line"><span class="comment"># file: dir_3</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx</span><br><span class="line">default:group::r-x</span><br><span class="line">default:other::r-x</span><br></pre></td></tr></table></figure></p><h3 id="k-åˆ é™¤é»˜è®¤ACL"><a href="#k-åˆ é™¤é»˜è®¤ACL" class="headerlink" title="-k åˆ é™¤é»˜è®¤ACL"></a>-k åˆ é™¤é»˜è®¤ACL</h3><p>è¿™é‡Œå¯ä»¥åˆ é™¤ä¹‹å‰è®¾ç½®çš„é»˜è®¤ACLï¼Œåªé™é»˜è®¤ACL<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir_3 # æŸ¥çœ‹ACLï¼Œè¿™é‡Œæ˜¾ç¤ºæœ‰é»˜è®¤çš„ACL</span></span><br><span class="line"><span class="comment"># file: dir_3</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br><span class="line">default:user::rwx</span><br><span class="line">default:group::r-x</span><br><span class="line">default:other::r-x</span><br><span class="line"></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -k dir_3# åˆ é™¤dir_3çš„é»˜è®¤ACL</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir_3</span></span><br><span class="line"><span class="comment"># file: dir_3</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">group::r-x</span><br><span class="line">other::r-x</span><br></pre></td></tr></table></figure></p><h3 id="R-é€’å½’è®¾ç½®ACL"><a href="#R-é€’å½’è®¾ç½®ACL" class="headerlink" title="-R é€’å½’è®¾ç½®ACL"></a>-R é€’å½’è®¾ç½®ACL</h3><p>ç»™æŸä¸€ä¸ªç›®å½•è®¾ç½®é€’å½’çš„ACLä¹‹åè¿™ä¸ªç›®å½•å’Œè¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶å’Œå­ç›®å½•å…¨éƒ¨éƒ½ä¼šåº”ç”¨è¿™ä¸ªACLï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ç›¸å½“äºåº”ç”¨åˆ°äº†è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆåˆ›å»ºä¸€ä¸‹æµ‹è¯•ç”¨çš„ç›®å½•ç»“æ„</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># mkdir -p dir1/dir2/dir3</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># touch dir1/hello.c</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># touch dir1/dir2/hey.c</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># setfacl -m u:jack:r -R dir1é€’å½’è®¾ç½®ACL</span></span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir1</span></span><br><span class="line"><span class="comment"># file: dir1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rwx</span><br><span class="line">user:jack:r--</span><br><span class="line">group::r-x</span><br><span class="line">mask::r-x</span><br><span class="line">other::r-x</span><br><span class="line">[root@iZ28jaak5nnZ acltest]<span class="comment"># getfacl dir1/hello.c</span></span><br><span class="line"><span class="comment"># file: dir1/hello.c</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:jack:r--</span><br><span class="line">group::r--</span><br><span class="line">mask::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Permission </tag>
            
            <tag> ACL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨nmcliå’Œipå‘½ä»¤é…ç½®CentOS/RHELçš„ç½‘ç»œ</title>
      <link href="/2016/10/28/linux-nmcli-ip/"/>
      <url>/2016/10/28/linux-nmcli-ip/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-æŸ¥çœ‹ç½‘ç»œé…ç½®æ–‡ä»¶"><a href="#0X00-æŸ¥çœ‹ç½‘ç»œé…ç½®æ–‡ä»¶" class="headerlink" title="0X00 æŸ¥çœ‹ç½‘ç»œé…ç½®æ–‡ä»¶"></a>0X00 æŸ¥çœ‹ç½‘ç»œé…ç½®æ–‡ä»¶</h1><p>åœ¨CentOSä¸­ç½‘ç»œæ˜¯ä»¥é…ç½®æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ç³»ç»Ÿé‡Œçš„ï¼Œåœ¨<code>/etc/sysconfig/network-scripts/</code>ç›®å½•ä¸‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç½‘å¡çš„é…ç½®æ–‡ä»¶éƒ½åœ¨è¿™é‡Œäº†ï¼Œä»¥<code>ifcfg-</code>å°±æ˜¯é…ç½®æ–‡ä»¶äº†ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶çœ‹ä¸€ä¸‹ã€‚ä¸‹é¢æ³¨é‡Šä¸€ä¸‹å…³é”®çš„é…ç½®é¡¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet# ç½‘ç»œç±»å‹</span><br><span class="line">BOOTPROTO=static# åè®®å–å€¼ï¼Œå¸¸è§çš„æ˜¯staticå’Œdhcp</span><br><span class="line">IPADDR=10.13.7.33# ç»™ç½‘å¡ipèµ‹å€¼</span><br><span class="line">NETMASK=255.255.255.0# ç»™ç½‘å¡å­ç½‘æ©ç èµ‹å€¼</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">PEERDNS=yes</span><br><span class="line">PEERROUTES=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_PEERDNS=yes</span><br><span class="line">IPV6_PEERROUTES=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">NAME=enp0s8</span><br><span class="line">USERCTL=no# æ˜¯å¦å…è®¸érootç”¨æˆ·æ§åˆ¶</span><br><span class="line">UUID=4c967913-c4c9-4961-ae03-de7865f144d0# ç½‘å¡çš„å”¯ä¸€æ ‡è¯†ç </span><br><span class="line">DEVICE=enp0s8# è®¾å¤‡å</span><br><span class="line">ONBOOT=no# æ˜¯å¦åœ¨å¼€æœºæ—¶æ¿€æ´»</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®ç›´æ¥ä½¿ç”¨ç¼–è¾‘å™¨ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œå› ä¸ºè¿™æ ·å®¹æ˜“å‡ºç°ä¸€äº›è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨å‘½ä»¤è¡Œæ¥ç®¡ç†é…ç½®ç½‘ç»œï¼Œè™½ç„¶æœ¬è´¨ä¸Šéƒ½æ˜¯å»ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå»ç®¡ç†ç½‘ç»œï¼Œå‘½ä»¤éƒ½æ˜¯ç¡®ä¿é…ç½®æ²¡æœ‰é—®é¢˜æ‰ä¼šå†™å…¥åˆ°æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šæ›´åŠ å®‰å…¨ã€‚åŒ…æ‹¬ä¸‹é¢ä»‹ç»çš„<code>ip</code>å’Œ<code>nmcli</code>å‘½ä»¤ï¼Œéƒ½æ˜¯é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥å®ŒæˆåŠŸèƒ½çš„ã€‚</p><a id="more"></a><h1 id="0X01-ifconfig-å‘½ä»¤"><a href="#0X01-ifconfig-å‘½ä»¤" class="headerlink" title="0X01 ifconfig å‘½ä»¤"></a>0X01 ifconfig å‘½ä»¤</h1><p>è¿™ä¸ªå‘½ä»¤åœ¨CentOS7ä¸­å·²ç»ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œä¸è¿‡ç”±äºä¹‹å‰çš„ç‰ˆæœ¬éƒ½æ˜¯åœ¨ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œè¿˜æ˜¯è¯´ä¸€ä¸‹ã€‚<code>ifconfig</code>æ˜¯<code>interface configuration</code>çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ¥å£é…ç½®ã€‚</p><h2 id="æŸ¥çœ‹ç½‘ç»œ"><a href="#æŸ¥çœ‹ç½‘ç»œ" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œ"></a>æŸ¥çœ‹ç½‘ç»œ</h2><p>ç›´æ¥è¾“å…¥è¿™ä¸ªå‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ç°åœ¨å¯åŠ¨ç€çš„æ‰€æœ‰ç½‘ç»œã€‚ä¹Ÿå¯ä»¥æ¥ä¸ŠæŸä¸ªç‰¹å®šçš„ç½‘å¡æ¥æŸ¥çœ‹å•ç‹¬çš„ä¿¡æ¯<code>ifconfig enp0s3</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ifconfig</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæƒ³æŸ¥çœ‹åŒ…æ‹¬å·²ç»å…³é—­äº†çš„ç½‘ç»œæ—¶ï¼Œä½¿ç”¨<code>ifconfig -a</code>å°±å¯ä»¥äº†</p><blockquote><p>æœ€åçš„é‚£ä¸ªloæ˜¯å›ç¯ç½‘ç»œï¼Œæš‚æ—¶ä¸ç”¨ç®¡</p></blockquote><h2 id="å¼€å…³ç½‘ç»œ"><a href="#å¼€å…³ç½‘ç»œ" class="headerlink" title="å¼€å…³ç½‘ç»œ"></a>å¼€å…³ç½‘ç»œ</h2><p><code>ifconfig</code>è¿˜å¯ä»¥å¼€å…³ç½‘ç»œï¼Œå‘½ä»¤åé¢æ¥<code>interface name</code>ä¹Ÿå°±æ˜¯ç½‘å¡åï¼Œç„¶åæ¥ä¸Š<code>up/down</code>å°±å¯ä»¥å¼€å…³ç½‘ç»œäº†<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8 down# å…³é—­ç½‘ç»œ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig</span></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8 up# æ‰“å¼€ç½‘ç»œ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 123.123.123.2  netmask 255.255.255.128  broadcast 123.123.123.1</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 0  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure></p><h2 id="é…ç½®ç½‘ç»œ"><a href="#é…ç½®ç½‘ç»œ" class="headerlink" title="é…ç½®ç½‘ç»œ"></a>é…ç½®ç½‘ç»œ</h2><p><code>ifconfig</code>å‘½ä»¤å¯ä»¥åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹å¼€å…³ç½‘ç»œæ¥å£ï¼Œä¿®æ”¹IPã€æ©ç ã€ç½‘å…³ç­‰ä¿¡æ¯ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8# æŸ¥çœ‹ep0s8çš„ç½‘å¡ä¿¡æ¯</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8 123.233.233.123# ä¿®æ”¹ipä¸º123.233.233.123</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 123.233.233.123  netmask 255.0.0.0  broadcast 123.255.255.255</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8 netmask 255.255.255.0# ä¿®æ”¹å­ç½‘æ©ç ä¸º255.255.255.0</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 123.233.233.123  netmask 255.255.255.0  broadcast 123.233.233.255</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8 123.123.123.2 netmask 255.255.255.128# å½“ç„¶ä¹Ÿå¯ä»¥æŠŠè¿™äº›å†™æˆä¸€è¡Œ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ifconfig enp0s8</span></span><br><span class="line">enp0s8: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 123.123.123.2  netmask 255.255.255.128  broadcast 123.123.123.</span><br><span class="line">        ether 08:00:27:79:c4:b1  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure></p><h1 id="0X02-nmtui-ç®€å•çš„ç±»å›¾å½¢ç®¡ç†å·¥å…·"><a href="#0X02-nmtui-ç®€å•çš„ç±»å›¾å½¢ç®¡ç†å·¥å…·" class="headerlink" title="0X02 nmtui ç®€å•çš„ç±»å›¾å½¢ç®¡ç†å·¥å…·"></a>0X02 nmtui ç®€å•çš„ç±»å›¾å½¢ç®¡ç†å·¥å…·</h1><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥<code>nmtui</code>å°±å¯ä»¥æ‰“å¼€ä¸€ä¸ªç±»å›¾å½¢çš„ç•Œé¢ï¼Œç”¨è¿™ä¸ªç•Œé¢å¯ä»¥æ›´ç®€å•å¾—ç®¡ç†é…ç½®ç½‘ç»œï¼Œä½†æ˜¯ä¸èƒ½åšæ¯”è¾ƒç»†è‡´çš„é…ç½®ï¼Œè€Œä¸”ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å¤šåšä»‹ç»äº†ï¼Œå¯ä»¥è‡ªå·±åœ¨ç»ˆç«¯ä¸Šæ‰“å¼€çœ‹çœ‹ã€‚è¿™ä¸ªå‘½ä»¤çš„ä¸€å¤§ä¼˜ç‚¹æ˜¯å¯ä»¥åœ¨sshè¿œç¨‹è¿æ¥çš„æ—¶å€™ä½¿ç”¨ï¼Œåœ¨Windowsä¸‹çš„XShellç­‰è½¯ä»¶ä¸­éƒ½å¯ä»¥ç›´æ¥è°ƒå‡ºã€‚</p><h1 id="0X03-ip-å‘½ä»¤"><a href="#0X03-ip-å‘½ä»¤" class="headerlink" title="0X03 ip å‘½ä»¤"></a>0X03 ip å‘½ä»¤</h1><p>ipæ˜¯ç°åœ¨æ¨èä½¿ç”¨çš„å‘½ä»¤ï¼ŒåŠŸèƒ½æ¯”è¾ƒå¼ºå¤§ã€‚</p><h2 id="ipå‘½ä»¤ç®¡ç†è®¾å¤‡å¼€å…³"><a href="#ipå‘½ä»¤ç®¡ç†è®¾å¤‡å¼€å…³" class="headerlink" title="ipå‘½ä»¤ç®¡ç†è®¾å¤‡å¼€å…³"></a>ipå‘½ä»¤ç®¡ç†è®¾å¤‡å¼€å…³</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ip link show enp0s8# è¿™ä¸ªå‘½ä»¤å¤§è‡´ç›¸å½“äº ifconfig enp0s8 æŸ¥çœ‹è¿™ä¸ªç½‘å¡çš„ä¿¡æ¯</span></span><br><span class="line">3: enp0s8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 08:00:27:79:c4:b1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">[root@localhost ~]<span class="comment"># ip link set dev enp0s8 up# è®¾ç½®ä¸€ä¸ªdeviceï¼Œenp0s8ï¼Œæ‰“å¼€</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ip link show enp0s8</span></span><br><span class="line">3: enp0s8: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 08:00:27:79:c4:b1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">[root@localhost ~]<span class="comment"># ip link set dev enp0s8 down# è®¾ç½® è®¾å¤‡ ç½‘å¡å æ‰“å¼€/å…³é—­</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ip link show enp0s8</span></span><br><span class="line">3: enp0s8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 08:00:27:79:c4:b1 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure><h2 id="ipå‘½ä»¤ä¿®æ”¹ç½‘å¡MACåœ°å€"><a href="#ipå‘½ä»¤ä¿®æ”¹ç½‘å¡MACåœ°å€" class="headerlink" title="ipå‘½ä»¤ä¿®æ”¹ç½‘å¡MACåœ°å€"></a>ipå‘½ä»¤ä¿®æ”¹ç½‘å¡MACåœ°å€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ip link set dev enp0s8 address 00:00:ff:bb:aa:22# ä¿®æ”¹ç½‘å¡çš„ç‰©ç†åœ°å€ï¼Œä¹Ÿå°±æ˜¯MACåœ°å€</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ip link show enp0s8</span></span><br><span class="line">3: enp0s8: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT qlen 1000</span><br><span class="line">    link/ether 00:00:ff:bb:aa:22 brd ff:ff:ff:ff:ff:ff</span><br></pre></td></tr></table></figure><h1 id="0X04-nmcli-ç®¡ç†ç½‘ç»œ"><a href="#0X04-nmcli-ç®¡ç†ç½‘ç»œ" class="headerlink" title="0X04 nmcli ç®¡ç†ç½‘ç»œ"></a>0X04 nmcli ç®¡ç†ç½‘ç»œ</h1><p><code>nmcli</code>æ˜¯<code>network manager command line interface</code>çš„ç®€å†™ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥ç”¨æ¥ç®¡ç†é…ç½®ç½‘ç»œã€‚</p><h2 id="æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€"><a href="#æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€"></a>æŸ¥çœ‹ç½‘ç»œæ¥å£çŠ¶æ€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli -p g</span></span><br><span class="line">=============================================================</span><br><span class="line">                    NetworkManager status</span><br><span class="line">=============================================================</span><br><span class="line">STATE      CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN    </span><br><span class="line">-------------------------------------------------------------</span><br><span class="line">connected  full          enabled  enabled  enabled  enabled</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ä¿®æ”¹ä¸»æœºå"><a href="#æŸ¥çœ‹ä¿®æ”¹ä¸»æœºå" class="headerlink" title="æŸ¥çœ‹ä¿®æ”¹ä¸»æœºå"></a>æŸ¥çœ‹ä¿®æ”¹ä¸»æœºå</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli general hostname</span></span><br><span class="line">localhost.localdomain</span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli general hostname test</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli general hostname</span></span><br><span class="line"><span class="built_in">test</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç½‘ç»œè®¾å¤‡"><a href="#æŸ¥çœ‹ç½‘ç»œè®¾å¤‡" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œè®¾å¤‡"></a>æŸ¥çœ‹ç½‘ç»œè®¾å¤‡</h2><p>ä»¥å‰å¯ä»¥ç”¨ifconfigæ¥æŸ¥çœ‹ç½‘ç»œè®¾å¤‡ï¼Œipå‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹ã€‚å¯ä»¥ç›´æ¥æŸ¥çœ‹æ‰€æœ‰çš„ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæŸä¸€ä¸ªè®¾å¤‡æŸ¥çœ‹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli device show# èçœ‹æ‰€æœ‰è®¾å¤‡</span></span><br><span class="line">GENERAL.DEVICE:                         enp0s3</span><br><span class="line">GENERAL.TYPE:                           ethernet</span><br><span class="line">GENERAL.HWADDR:                         08:00:27:35:C7:CE</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">.......................<span class="comment"># è¾“å‡ºå¤ªå¤šï¼Œå°±ä¸å…¨æ”¾åœ¨è¿™é‡Œäº†</span></span><br><span class="line">IP6.ADDRESS[1]:                         ::1/128</span><br><span class="line">IP6.GATEWAY:                 </span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli device show enp0s8# æŸ¥çœ‹æŒ‡å®šè®¾å¤‡</span></span><br><span class="line">GENERAL.DEVICE:                         enp0s8</span><br><span class="line">GENERAL.TYPE:                           ethernet</span><br><span class="line">GENERAL.HWADDR:                         08:00:27:79:C4:B1</span><br><span class="line">GENERAL.MTU:                            1500</span><br><span class="line">GENERAL.STATE:                          100 (connected)</span><br><span class="line">GENERAL.CONNECTION:                     enp0s8</span><br><span class="line">GENERAL.CON-PATH:                       /org/freedesktop/NetworkManager/ActiveConnection/7</span><br><span class="line">WIRED-PROPERTIES.CARRIER:               off</span><br><span class="line">IP4.ADDRESS[1]:                         123.123.123.2/25</span><br><span class="line">IP4.GATEWAY:                            </span><br><span class="line">IP6.GATEWAY:</span><br></pre></td></tr></table></figure></p><h2 id="ä¿®æ”¹ç½‘å¡é…ç½®"><a href="#ä¿®æ”¹ç½‘å¡é…ç½®" class="headerlink" title="ä¿®æ”¹ç½‘å¡é…ç½®"></a>ä¿®æ”¹ç½‘å¡é…ç½®</h2><p>ä¸€ä¸ªè®¾å¤‡å¯ä»¥æœ‰å¤šä¸ªè¿æ¥ï¼Œåœ¨CentOS7ä¸­ç½‘ç»œæ˜¯ä»¥è¿æ¥ç®¡ç†çš„ã€‚è™½ç„¶æ¯ä¸ªè®¾å¤‡å¯ä»¥æœ‰å¤šä¸ªè¿æ¥ï¼Œä½†æ˜¯åŒæ—¶ç”Ÿæ•ˆçš„åªèƒ½æœ‰ä¸€ä¸ªã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>nmcli connection</code>æŸ¥çœ‹è¿æ¥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli connection show</span></span><br><span class="line">NAME    UUID                                  TYPE            DEVICE</span><br><span class="line">enp0s8  ae99f48d-5f20-4a9c-a487-c4ebafa3f92e  802-3-ethernet  enp0s8</span><br><span class="line">enp0s3  2edc4731-888c-4102-8ff5-236ea47eeedb  802-3-ethernet  enp0s3</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ“ä½œ<code>nmcli connection add/delete/edit</code>ä¹Ÿå°±æ˜¯å¢åˆ æ”¹ä¸‰ä¸ªæ“ä½œã€‚<br>æ¯ä¸€ä¸ªè¿æ¥éƒ½æœ‰ä¸€ä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®åå­—ç´¢å¼•æ¥æ“ä½œå¯¹åº”åˆ°çš„è¿æ¥ã€‚æˆ‘ä»¬å…ˆæ¥åˆ é™¤æ‰ä¹‹å‰é…ç½®çš„ç½‘ç»œã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli connection delete enp0s8 # è¿™æ ·å¯ä»¥åˆ æ‰ä¹‹å‰çš„è¿æ¥</span></span><br><span class="line">Connection <span class="string">'enp0s8'</span> (ae99f48d-5f20-4a9c-a487-c4ebafa3f92e) successfully deleted.</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ·»åŠ ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œåå­—å«â€™test_connâ€™ï¼Œæ¥å£æ˜¯â€™enp0s8â€™ï¼Œç±»å‹æ˜¯â€™ethernetâ€™ä¹Ÿå°±æ˜¯ä»¥å¤ªç½‘ï¼Œipä½¿ç”¨v4ç‰ˆæœ¬123.123.123.123ï¼Œå­ç½‘æ©ç æ˜¯24ä½ï¼Œipv4çš„ç½‘å…³æ˜¯123.123.123.1<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli connection add con-name 'test_conn' ifname enp0s8 type ethernet ip4 123.123.123.123/24 gw4 123.123.123.1</span></span><br><span class="line">Connection <span class="string">'test_conn'</span> (05c7cd70-a48e-4a12-a0de-9d57724cf0d0) successfully added.</span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli connection show test_conn</span></span><br><span class="line"><span class="comment"># è¿™è¡Œå‘½ä»¤çš„è¾“å‡ºå¤ªå¤šäº†å°±ä¸å±•ç¤ºäº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™è¡Œå‘½ä»¤çœ‹åˆ°è‡ªå·±åˆ›å»ºçš„è¿æ¥ï¼Œä¿¡æ¯å’Œè‡ªå·±å¡«å†™çš„å‘½ä»¤ç›¸å¯¹åº”ã€‚</span></span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ä¸€ä¸ªè¿æ¥å¯ä»¥ä½¿ç”¨<code>nmcli connection modify</code>ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¿®æ”¹ä¸€ä¸ªè¿æ¥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nmcli connection show test_conn | grep ipv4.dns# ä½¿ç”¨grepæœç´¢æŸ¥çœ‹dnsè®¾ç½®</span></span><br><span class="line">ipv4.dns:                               </span><br><span class="line">ipv4.dns-search:                        </span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli connection modify test_conn ipv4.dns 8.8.8.8# ä¿®æ”¹ipv4çš„dnsåœ°å€</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nmcli connection show test_conn | grep ipv4.dns</span></span><br><span class="line">ipv4.dns:                               8.8.8.8</span><br><span class="line">ipv4.dns-search:</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> nmcli </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python å¼‚å¸¸å¤„ç† æ•è·å¼‚å¸¸</title>
      <link href="/2016/10/27/python-execption/"/>
      <url>/2016/10/27/python-execption/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯å¼‚å¸¸"><a href="#0X00-ä»€ä¹ˆæ˜¯å¼‚å¸¸" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯å¼‚å¸¸"></a>0X00 ä»€ä¹ˆæ˜¯å¼‚å¸¸</h1><p>ç¨‹åºåœ¨è¿è¡Œå‡ºé”™çš„æ—¶å€™å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¼‚å¸¸æ—¶åœ¨æ­£ç¡®çš„ä»£ç é‡Œå‘ç”Ÿçš„ï¼Œä¸æ˜¯ä»£ç å‡ºç°äº†é”™è¯¯ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¼‚å¸¸<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line">num_1 = <span class="number">10</span></span><br><span class="line">num_2 = <span class="number">0</span></span><br><span class="line"><span class="comment"># å¾ˆæ˜æ˜¾è¿™é‡Œæ˜¯ç”¨ä¸€ä¸ªæ•°å­—å»é™¤ä»¥0</span></span><br><span class="line"><span class="comment"># å°å­¦è€å¸ˆå°±è¯´è¿‡0ä¸èƒ½ä½œä¸ºè¢«é™¤æ•°</span></span><br><span class="line"><span class="comment"># é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹Pythonæ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜çš„</span></span><br><span class="line">num_3 = num_1 / num_2</span><br><span class="line"><span class="keyword">print</span> num_3</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œè¿™ä¸ªç¨‹åºå°±ä¼šæŠ¥å‡ºä¸‹é¢çš„é”™è¯¯ï¼Œé”™è¯¯æç¤ºè¯´åœ¨<code>hello.py</code>è¿™ä¸ªæ–‡ä»¶çš„ç¬¬6è¡Œï¼Œå‡ºç°äº†ä¸€ä¸ªé”™è¯¯<code>integer division or modulo by zero</code>ä¹Ÿå°±æ˜¯è¯´Pythonè§£é‡Šå™¨å‘ç°ä½ è¯•å›¾é™¤ä»¥0æˆ–è€…è¯•å›¾ç”¨0å–æ¨¡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./hello.py"</span>, line 6, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    num_3 = num_1 / num_2</span><br><span class="line">ZeroDivisionError: <span class="built_in">integer</span> division or modulo by zero</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œæç¤ºçš„<code>ZeroDivisionError</code>å°±æ˜¯ä¸€ä¸ªå¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åé¢æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œç„¶åè¿›è¡Œä¸€äº›å¤„ç†ã€‚å¦‚æœä¸æ•è·è¿™ä¸ªå¼‚å¸¸çš„è¯ï¼Œç¨‹åºè¿è¡Œåˆ°è¿™é‡Œï¼Œå¼‚å¸¸å°±ä¼šç›´æ¥æŠ›å‡ºåˆ°ç”¨æˆ·ç•Œé¢ï¼Œä¸­æ–­ç¨‹åºçš„è¿è¡Œã€‚</p><a id="more"></a><h1 id="0X01-è‡ªå·±æ”¾å‡ºä¸€ä¸ªå¼‚å¸¸"><a href="#0X01-è‡ªå·±æ”¾å‡ºä¸€ä¸ªå¼‚å¸¸" class="headerlink" title="0X01 è‡ªå·±æ”¾å‡ºä¸€ä¸ªå¼‚å¸¸"></a>0X01 è‡ªå·±æ”¾å‡ºä¸€ä¸ªå¼‚å¸¸</h1><p>æˆ‘ä»¬å¯ä»¥ç”¨<code>raise</code>æŠ›å‡ºä¸€ä¸ªè‡ªå·±çš„å¼‚å¸¸ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨è°ƒè¯•ç¨‹åºçš„æ—¶å€™åˆ¤æ–­åˆ°åº•å‡ºäº†ä»€ä¹ˆé”™è¯¯ï¼Œé€šè¿‡æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯å°±å¯ä»¥åˆ¤æ–­ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line">name = raw_input(<span class="string">'name: '</span>)</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">''</span>:  <span class="comment"># å§“åä¸å…è®¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'name is null'</span>) <span class="comment"># æŠ›å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„Exceptionå†…å®¹æ˜¯name is null</span></span><br><span class="line"></span><br><span class="line">age  = input(<span class="string">'age : '</span>)</span><br><span class="line"><span class="keyword">if</span> age &lt;= <span class="number">0</span>:    <span class="comment"># ä¸å…è®¸å¹´é¾„å°äºç­‰äº0</span></span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'age too little'</span>) <span class="comment"># çˆ†å‡ºä¸€ä¸ªè‡ªé¡¶ä¸€ä¸ªExcepå†…å®¹æ˜¯age too little</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'name is '</span> + name</span><br><span class="line"><span class="keyword">print</span> <span class="string">'age is '</span> + str(age)</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢è¿™æ®µä»£ç åªæ˜¯ç®€å•åœ°è¾“å…¥nameå’Œageä¸¤ä¸ªå˜é‡ï¼Œåˆæ³•çš„è¯å°±è¾“å‡ºå‡ºæ¥ã€‚æˆ‘ä»¬è¿™é‡Œè¿è¡Œä¸€ä¸‹è¯•è¯•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ./hello.py</span></span><br><span class="line">name: shawn     <span class="comment">#åˆæ³•è¾“å…¥çš„è¯ï¼Œå°±å¯ä»¥é¡ºåˆ©è¾“å‡º</span></span><br><span class="line">age : 20</span><br><span class="line">name is shawn</span><br><span class="line">age is 20</span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ./hello.py</span></span><br><span class="line">name:   <span class="comment"># è¿™é‡Œå˜é‡å†…å®¹ä¸ºç©º</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./hello.py"</span>, line 6, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    raise Exception(<span class="string">'name is null'</span>)     <span class="comment"># å°±æ˜¯åœ¨æˆ‘è®¾ç½®çš„åœ°æ–¹æŠ›å‡ºäº†å¼‚å¸¸</span></span><br><span class="line">Exception: name is null <span class="comment"># å¼‚å¸¸å†…å®¹å’Œç±»å‹éƒ½æ˜¯æˆ‘æ‰€è§„å®šçš„</span></span><br><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ./hello.py</span></span><br><span class="line">name: shawn</span><br><span class="line">age : -1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./hello.py"</span>, line 10, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    raise Exception(<span class="string">'age too little'</span>)</span><br><span class="line">Exception: age too little</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™ç§æ–¹å¼åœ¨è‡ªå·±çš„ä»£ç ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œç”¨æ¥åšä¸­é—´å€¼æ£€æµ‹ï¼Œé˜²æ­¢ä¸­é—´çš„æ•°æ®å‡ºç°æ„å¤–å¯¼è‡´ä¸€äº›ä¸å¯æ€è®®çš„åæœã€‚</p><h1 id="0X02-æ•è·å¼‚å¸¸"><a href="#0X02-æ•è·å¼‚å¸¸" class="headerlink" title="0X02 æ•è·å¼‚å¸¸"></a>0X02 æ•è·å¼‚å¸¸</h1><p> æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¸ç®¡æ˜¯è§£é‡Šå™¨è‡ªå·±æŠ›å‡ºçš„å¼‚å¸¸è¿˜æ˜¯ä½ æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸ï¼Œéƒ½å¯ä»¥æ‰‹åŠ¨çš„æ•è·åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶åšå‡ºç›¸åº”çš„å¤„ç†ã€‚è¿™æ ·å°±å¯ä»¥æé«˜ä»£ç çš„å¥å£®æ€§ã€‚åœ¨Pythonä½¿ç”¨<code>try...except...else</code>æ¥æ•è·å¤„ç†å¼‚å¸¸ã€‚<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ‰§è¡Œä¸€äº›å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span></span><br><span class="line"><span class="keyword">except</span> (ExceptionA, ExceptionB, ExceptionC):   <span class="comment"># ä¸€ä¸ªexceptå¯ä»¥æ•è·å¥½å¤šä¸ªå¼‚å¸¸</span></span><br><span class="line">    <span class="comment"># å½“æŠ›å‡ºABCä¸‰ç§å¼‚å¸¸çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç ï¼Œæ‰§è¡Œå®Œä¹‹åè·³å‡ºtry...exceptå¹¶ç»§ç»­æ‰§è¡Œä»£ç </span></span><br><span class="line"><span class="keyword">except</span> ExceptD:</span><br><span class="line">    <span class="comment"># å½“æŠ›å‡ºDå¼‚å¸¸çš„æ—¶å€™å°±ä¼šæ‰§è¡Œè¿™é‡Œçš„ä»£ç ï¼Œæ‰§è¡Œå®Œåä¹Ÿè·³å‡º</span></span><br><span class="line"><span class="keyword">except</span> ExceptE, e:</span><br><span class="line">    <span class="comment"># å½“æŠ›å‡ºEå¼‚å¸¸çš„æ—¶å€™åœ¨è¿™é‡Œå¤„ç†ï¼Œeå°±æ˜¯è¿™ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹eä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">print</span> e <span class="comment"># è¾“å‡ºe</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># å½“æŠ›å‡ºäº†ä¸€ä¸ªä¸Šé¢ä¸¤ä¸ªexceptæ•è·ä¸åˆ°çš„å¼‚å¸¸çš„æ—¶å€™ï¼Œæ‰§è¡Œè¿™é‡Œçš„æ“ä½œ</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># å½“æ²¡æœ‰å¼‚å¸¸æŠ›å‡ºçš„æ—¶å€™æ‰§è¡Œè¿™é‡Œçš„ä»£ç </span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># ä¸ç®¡ä»£ç æœ‰æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span></span><br></pre></td></tr></table></figure></p><p> ä¸‹é¢æœ‰ä¸€ä¸ªæ ·ä¾‹ï¼Œè¿˜æ˜¯é™¤0å¼‚å¸¸çš„æ ·ä¾‹ï¼Œå½“é™¤æ•°æ˜¯0çš„æ—¶å€™å°±æŠ›å‡ºå¼‚å¸¸å¹¶æ•è·ï¼Œç„¶åå¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼ˆæç¤ºå¹¶é‡æ–°è¾“å…¥ï¼‰ï¼Œç›´åˆ°æ²¡æœ‰é™¤0å¼‚å¸¸æ‰è®¡ç®—æˆåŠŸå¹¶é€€å‡ºç¨‹åº<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">num_1 = input(<span class="string">'num1: '</span>)</span><br><span class="line">num_2 = input(<span class="string">'num2: '</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">num_3 = num_1 / num_2</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line"><span class="keyword">print</span> <span class="string">'num_1 is 0 !!!'</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">print</span> num_3</span><br><span class="line">exit()</span><br></pre></td></tr></table></figure></p><p> ä¸‹é¢æœ‰ä¸€ä¸ªè¿è¡Œæ ·ä¾‹<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ./hello.py</span></span><br><span class="line">num1: 9</span><br><span class="line">num2: 0</span><br><span class="line">num_1 is 0 !!!</span><br><span class="line">num1: 2</span><br><span class="line">num2: 0</span><br><span class="line">num_1 is 0 !!!</span><br><span class="line">num1: 0</span><br><span class="line">num2: 0</span><br><span class="line">num_1 is 0 !!!</span><br><span class="line">num1: 4</span><br><span class="line">num2: 2</span><br><span class="line">2</span><br></pre></td></tr></table></figure></p><p> å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å¼‚å¸¸å¤„ç†å®Œäº†ä¹‹åç»§ç»­æŠ›å‡ºï¼Œåªè¦ä½ éœ€è¦ã€‚ä¸‹é¢çš„ä»£ç å’Œä¸Šé¢çš„æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œå°±åªæœ‰12è¡Œçš„åœ°æ–¹ä»continueæ¢æˆäº†raiseï¼Œæ„æ€å°±æ˜¯æŠ›å‡ºå¼‚å¸¸<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">num_1 = input(<span class="string">'num1: '</span>)</span><br><span class="line">num_2 = input(<span class="string">'num2: '</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">num_3 = num_1 / num_2</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line"><span class="keyword">print</span> <span class="string">'num_1 is 0 !!!'</span></span><br><span class="line"><span class="keyword">raise</span>    <span class="comment"># åªæœ‰è¿™é‡Œæ˜¯ä¸åŒçš„ï¼Œä»continueæ¢æˆäº†æ²¡æœ‰å‚æ•°çš„raiseï¼Œå°±æ˜¯æŠŠå¼‚å¸¸ç»§ç»­æŠ›å‡º</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">print</span> num_3</span><br><span class="line">exit()</span><br></pre></td></tr></table></figure></p><p> è¿è¡Œçš„æ ·ä¾‹å°±æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼Œæ‰§è¡Œä¸‹å»ä¹‹åä¼šæ‰§è¡Œexceptä¸­çš„å¤„ç†ä»£ç ï¼Œä½†æ˜¯ç”±äºraiseçš„å­˜åœ¨è¿˜æ˜¯ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ ~]<span class="comment"># ./hello.py</span></span><br><span class="line">num1: 123</span><br><span class="line">num2: 0</span><br><span class="line">num_1 is 0 !!!     <span class="comment"># è¿™é‡Œå°±æ˜¯exceptå¤„çš„å¤„ç†ä»£ç </span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./hello.py"</span>, line 9, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    num_3 = num_1 / num_2</span><br><span class="line">ZeroDivisionError: <span class="built_in">integer</span> division or modulo by zero</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Exception </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenSSH é…ç½® å…å¯†ç ç™»é™† å…¬é’¥å’Œç§é’¥ ç§é’¥ç­¾å</title>
      <link href="/2016/10/17/openssh-pub-pri/"/>
      <url>/2016/10/17/openssh-pub-pri/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å®‰è£…OpenSSH"><a href="#0X00-å®‰è£…OpenSSH" class="headerlink" title="0X00 å®‰è£…OpenSSH"></a>0X00 å®‰è£…OpenSSH</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„ç³»ç»Ÿä¸­éƒ½æ˜¯è‡ªå¸¦SSHæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ï¼Œä¸‡ä¸€æ²¡æœ‰çš„è¯å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…è¿™ä¸ªæœåŠ¡ã€‚</p><p><code>yum install -y openssh</code></p><p>ç„¶åé‡å¯OpenSSHæœåŠ¡</p><p><code>systemctl restart sshd</code></p><h1 id="0X01-ä¸¤è¡Œç®€å•çš„é…ç½®"><a href="#0X01-ä¸¤è¡Œç®€å•çš„é…ç½®" class="headerlink" title="0X01 ä¸¤è¡Œç®€å•çš„é…ç½®"></a>0X01 ä¸¤è¡Œç®€å•çš„é…ç½®</h1><p>OpenSSHçš„é…ç½®æ–‡ä»¶åœ¨<code>/etc/ssh/</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹æœåŠ¡ç«¯çš„ä¸€ä¸ªæ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹é’ˆå¯¹æœåŠ¡ç«¯çš„<code>sshd_config</code>å³å¯ã€‚</p><p>é…ç½®æ–‡ä»¶é‡Œæ¯”è¾ƒé‡è¦çš„ä¸¤è¡Œæ˜¯<code>PermitRootLogin</code>å’Œ<code>PasswordAuthentication</code>ã€‚</p><ul><li><code>PermitRootLogin</code> å½“è¿™ä¸ªå€¼ä¸ºyesæ—¶ï¼Œæ‰å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»é™†</li><li><code>PasswordAuthentication</code> å½“è¿™ä¸ªå€¼ä¸ºyesæ—¶ï¼Œå…è®¸ä½¿ç”¨å¯†ç ç™»é™†ï¼Œåä¹‹åˆ™æ‹’ç»å¯†ç ç™»é™†(åªèƒ½ä½¿ç”¨å¯†é’¥)ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin yes</span><br><span class="line">PasswordAuthentication yes</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„é…ç½®å°±å…è®¸ä½¿ç”¨rootç”¨æˆ·ç™»é™†ï¼Œä¹Ÿå…è®¸è¾“å…¥å¯†ç ç™»é™†</p></blockquote><a id="more"></a><h1 id="0X02-ç§é’¥å’Œå…¬é’¥â€”â€”â€”â€”éå¯¹ç§°åŠ å¯†"><a href="#0X02-ç§é’¥å’Œå…¬é’¥â€”â€”â€”â€”éå¯¹ç§°åŠ å¯†" class="headerlink" title="0X02 ç§é’¥å’Œå…¬é’¥â€”â€”â€”â€”éå¯¹ç§°åŠ å¯†"></a>0X02 ç§é’¥å’Œå…¬é’¥â€”â€”â€”â€”éå¯¹ç§°åŠ å¯†</h1><p>åœ¨sshä¸­å¯ä»¥ä½¿ç”¨ç”¨æˆ·åå¯†ç çš„å½¢å¼ç™»é™†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯†é’¥çš„å½¢å¼ç™»é™†ã€‚</p><p><strong>éå¯¹ç§°åŠ å¯†</strong> å°±æ˜¯è¯´åŠ å¯†å’Œè§£å¯†ç”¨çš„å¯†ç ä¸åŒã€‚éå¯¹ç§°åŠ å¯†é‡Œæœ‰<strong>å…¬é’¥</strong>å’Œ<strong>ç§é’¥</strong>ï¼Œä½¿ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®åªæœ‰ä½¿ç”¨ç§é’¥æ‰èƒ½è§£å¼€ï¼Œè™½ç„¶æ˜¯ä½¿ç”¨å…¬é’¥åŠ å¯†çš„ï¼Œä½†æ˜¯å¹¶ä¸èƒ½é€šè¿‡å…¬é’¥åå‘è§£å¯†ã€‚è¿™ç‚¹å’Œä¼ ç»Ÿçš„å¯¹ç§°åŠ å¯†åŒºåˆ«æ¯”è¾ƒå¤§ã€‚</p><p>ä¸‹é¢å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼šæœ‰ä¸€å°æœåŠ¡å™¨Så’Œä¸‰ä¸ªç®¡ç†å‘˜A1ã€A2ã€A3ã€‚  Sç”Ÿæˆäº†è‡ªå·±çš„ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå°†å…¬é’¥å…¬å¼€å‡ºå»ï¼Œè¿™æ—¶å€™A1å°±èƒ½èƒ½çœ‹åˆ°è¿™ä¸ªå…¬é’¥ï¼Œæ‰€ä»¥éƒ½å¯ä»¥ç”¨è¿™ä¸ªå…¬é’¥å°†å‘ç»™Sçš„æ•°æ®åŠ å¯†ã€‚è™½ç„¶A2å’ŒA3ä¹Ÿçœ‹åˆ°äº†è¿™ä¸ªå…¬é’¥ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡è¿™ä¸ªå…¬é’¥å°†è¿™ä¸ªåŠ å¯†çš„æ•°æ®è§£å¼€ã€‚æ•°æ®åªæœ‰åœ¨Sä¸Šé€šè¿‡å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¼€ã€‚</p><ul><li>å…¬é’¥ï¼šä¸€èˆ¬æ˜¯å…¬å¼€å‡ºå»ï¼Œå¹¶ç”¨äºåŠ å¯†</li><li>ç§é’¥ï¼šä¿å­˜åœ¨è‡ªå·±è¿™é‡Œï¼Œç”¨äºè§£å¯†<blockquote><p>å…¬é’¥å’Œç§é’¥æ˜¯ä¸€å¯¹çš„ï¼Œä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ä¸¤ä¸¤å¯¹åº”</p></blockquote></li></ul><h1 id="0X03-åœ¨SSHç”Ÿæˆå…¬é’¥å’Œç§é’¥"><a href="#0X03-åœ¨SSHç”Ÿæˆå…¬é’¥å’Œç§é’¥" class="headerlink" title="0X03 åœ¨SSHç”Ÿæˆå…¬é’¥å’Œç§é’¥"></a>0X03 åœ¨SSHç”Ÿæˆå…¬é’¥å’Œç§é’¥</h1><p>åœ¨Linuxé‡ŒSSHå¯ä»¥ä½¿ç”¨å…¬é’¥å’Œç§é’¥æ¥ç™»é™†ç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯å‰é¢æˆ‘ä»¬è¯´çš„é‚£ä¸ª<code>PasswordAuthentication</code>é€‰é¡¹ï¼Œå¦‚æœç¦æ­¢å¯†ç ç™»é™†çš„è¯å°±åªèƒ½ä½¿ç”¨å…¬é’¥å’Œç§é’¥ç™»é™†äº†ã€‚</p><p><code>ssh-keygen</code>å¯ä»¥ç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ã€‚æˆ‘ä»¬ä¸€èˆ¬åœ¨è‡ªå·±ç”¨æˆ·çš„ä¸»ç›®å½•é‡Œçš„<code>.ssh</code>ç›®å½•é‡Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€æ‰§è¡Œå®Œäº†ä¹‹åä¼šæç¤ºè¾“å…¥åŠ å¯†ï¼Œè¿™é‡Œæ˜¯ç»™å…¬é’¥ç§é’¥åŠ å¯†ï¼Œå¯ä»¥æš‚æ—¶ä¸ç”¨ç®¡ï¼Œä¸€è·¯å›è½¦å°±è¡Œäº†ï¼Œç›´åˆ°çœ‹åˆ°ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„å›¾åƒï¼Œç±»ä¼¼äºè¿™æ ·å°±ç®—å¥½äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa):</span><br><span class="line">Enter passphrase (empty for no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">09:7c:28:a5:75:sr:ab:5c:82:43:17:81:f8:78:zs:1e root@buyongkan.zhelishi.gaiguode</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line">+--[ RSA 2048]----+</span><br><span class="line">|   . .+o.        |</span><br><span class="line">|  . .=8o.        |</span><br><span class="line">|   oo+-+.        |</span><br><span class="line">|  . =.oo..       |</span><br><span class="line">|   X +  SB.      |</span><br><span class="line">|    o . o        |</span><br><span class="line">|     o +         |</span><br><span class="line">|      )          |</span><br><span class="line">|                 |</span><br><span class="line">+-----------------+</span><br></pre></td></tr></table></figure></p><p><code>.ssh</code>ç›®å½•å¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œæ‰§è¡Œä¸€ä¸‹<code>ssh localhost</code>ç„¶åè¾“å…¥å¯†ç ç™»é™†ä»¥ä¸‹æœ¬åœ°ï¼Œå°±ä¼šæœ‰äº†ã€‚ç”Ÿæˆå®Œä¹‹åç›®å½•é‡Œä¼šå¤šå‡ºä¸¤ä¸ªæ–‡ä»¶ï¼Œ<code>id_rsa</code> å’Œ <code>id_rsa.pub</code> åé¢pubç»“å°¾çš„æ˜¯publicä¹Ÿå°±æ˜¯å…¬é’¥ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€çœ‹çœ‹æ˜¯ä¸€å †çœ‹ä¼¼ä¹±ç çš„ä¸œè¥¿ã€‚</p><h1 id="0X04-ä½¿ç”¨å…¬é’¥å’Œç§é’¥å…å¯†ç ç™»é™†"><a href="#0X04-ä½¿ç”¨å…¬é’¥å’Œç§é’¥å…å¯†ç ç™»é™†" class="headerlink" title="0X04 ä½¿ç”¨å…¬é’¥å’Œç§é’¥å…å¯†ç ç™»é™†"></a>0X04 ä½¿ç”¨å…¬é’¥å’Œç§é’¥å…å¯†ç ç™»é™†</h1><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸¤å°æœºå™¨ï¼Œä¸€ä¸ªå«Serverä¸€ä¸ªå«Desktopï¼Œæˆ‘æƒ³è®©Desktopå¯ä»¥å…å¯†ç ç™»é™†åˆ°Serverä¸Šï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åŸç†å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼šåœ¨Desktopä¸Šç”Ÿæˆä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œç„¶åå°†Desktopä¸Šçš„å…¬é’¥è¿½åŠ åˆ°Serverçš„<code>.ssh</code>ç›®å½•ä¸‹çš„<code>authorize_keys</code>é‡Œï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç”¨æ¥ä¿å­˜å¯ä»¥å…å¯†ç ç™»å½•åˆ°è‡ªå·±æœºå™¨ä¸Šçš„é‚£äº›ç”¨æˆ·çš„å…¬é’¥çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ28jaak5nnZ .ssh]<span class="comment"># ssh-keygen  #ç”Ÿæˆä¸€å¯¹å…¬é’¥ç§é’¥</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">30:05:7d:63:sf:10:aa:cb:e1:b7:84:48:54:5f:42:4d root@iZ28jaak5nnZ</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+--[ RSA 2048]----+</span></span><br><span class="line"><span class="string">|..o o EO+o...    |</span></span><br><span class="line"><span class="string">| o = * n. +.     |</span></span><br><span class="line"><span class="string">|  + * N  o .     |</span></span><br><span class="line"><span class="string">|   S + a         |</span></span><br><span class="line"><span class="string">|    . . S        |</span></span><br><span class="line"><span class="string">|m            s   |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|    x            |</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">+-----------------+</span></span><br><span class="line"><span class="string">[root@iZ28jaak5nnZ .ssh]# ssh-copy-id -i id_rsa.pub root@182.234.214.243 #ä½¿ç”¨ssh-copy-idæ¥å°†è‡ªå·±çš„å…¬é’¥å‘é€åˆ°Serverä¸Šå»ï¼Œä¼šè‡ªåŠ¨æ‰¾åˆ°é‚£ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span></span><br><span class="line"><span class="string">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span></span><br><span class="line"><span class="string">root@182.254.214.250'</span>s password:   <span class="comment"># è¿˜æ²¡é…ç½®å¥½æ‰€ä»¥è¦è¾“å¯†ç </span></span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   <span class="string">"ssh 'root@182.254.214.250'"</span></span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br><span class="line">[root@iZ28jaak5nnZ .ssh]<span class="comment"># ssh root@182.254.214.250  # ç™»é™†</span></span><br><span class="line">Last login: Mon Oct 17 13:47:23 2016 from 43.13.56.7</span><br><span class="line">â˜  ~  hostname  <span class="comment"># æˆåŠŸç™»é™†</span></span><br><span class="line">blog.just666.cn</span><br><span class="line">â˜  ~</span><br></pre></td></tr></table></figure><h1 id="0X05-ä½¿ç”¨ç§é’¥ç­¾å"><a href="#0X05-ä½¿ç”¨ç§é’¥ç­¾å" class="headerlink" title="0X05 ä½¿ç”¨ç§é’¥ç­¾å"></a>0X05 ä½¿ç”¨ç§é’¥ç­¾å</h1><p>å…¬é’¥ç§é’¥å¯¹å¯ä»¥å¯¹æ•°æ®åŠ å¯†ï¼Œæ˜¯ç”¨å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¬é’¥ç§é’¥å¯¹è¿›è¡Œæ•°å­—ç­¾åã€‚</p><p>å½“Serverå…¬å¼€è‡ªå·±çš„å…¬é’¥ä¹‹åï¼Œå¤§å®¶éƒ½å¯ä»¥ç”¨è¿™ä¸ªå…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œç„¶åä¼ ç»™Serverï¼ŒServerç”¨ç§é’¥è§£å¯†å°±èƒ½çœ‹åˆ°å†…å®¹ã€‚</p><p>Serverå¦‚æœæƒ³åŠ å¯†ä¸€æ®µæ•°æ®ç»™å…¶ä»–äººçš„è¯ï¼Œå¯ä»¥ç”¨è‡ªå·±çš„ç§é’¥åŠ å¯†ï¼Œå°†å¯†æ–‡å‘é€ç»™å…¶ä»–äººï¼Œå…¶ä»–äººå°±èƒ½ç”¨Serverçš„<strong>å…¬é’¥å»è§£å¯†</strong>ã€‚å› ä¸ºé™¤äº†Serveræ„å¤–ï¼Œä»»ä½•äººéƒ½ä¸çŸ¥é“Serverçš„ç§é’¥ï¼Œæ‰€ä»¥å…¶ä»–äººå¯ä»¥ç¡®ä¿¡è¿™æ¡æ¶ˆæ¯æ˜¯Serverå‘å‡ºæ¥çš„ã€‚è¿™ç§è¡Œä¸ºç§°ä¹‹ä¸º<strong>ç­¾å</strong>ã€‚</p><p>æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼š<strong>å…¬é’¥åŠ å¯†çš„æ•°æ®å¯ä»¥ç”¨ç§é’¥è§£å¼€</strong>ä¸”<strong>ç§é’¥åŠ å¯†çš„æ•°æ®ä¹Ÿå¯ä»¥ç”¨å…¬é’¥è§£å¼€</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Encryption </tag>
            
            <tag> OpenSSH </tag>
            
            <tag> Public Key </tag>
            
            <tag> Private Key </tag>
            
            <tag> Signature </tag>
            
            <tag> Asymmetric Encryption </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shellç¼–ç¨‹å…¥é—¨ç¬”è®°  æ–°æ‰‹æ•™ç¨‹</title>
      <link href="/2016/10/02/shell-programming/"/>
      <url>/2016/10/02/shell-programming/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-hello-world"><a href="#0X00-hello-world" class="headerlink" title="0X00 hello,world"></a>0X00 hello,world</h1><p>ä»ä¸€æœ¬<em>The C Programming Language</em>å¼€å§‹ï¼Œæˆ‘ä»¬å°±å¼€å§‹äº†å‡ åå¹´çš„â€™hello,worldâ€™ä¹‹è·¯ã€‚ä»é‚£ä»¥åï¼Œæœºä¼šæ‰€æœ‰çš„æ•™ç¨‹éƒ½ä»è¾“å‡ºä¸€å¥â€™hello,worldâ€™å¼€å§‹ï¼Œè¿™æ¬¡ä¹Ÿä¸ä¾‹å¤–ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„ç¬¬ä¸€è¡Œæ˜¯æ³¨é‡Šï¼Œè¿™ä¸ªæ³¨é‡Šæ˜¯å¾ˆç‰¹æ®Šçš„ï¼Œä»–ä¼šå‘Šè¯‰ç³»ç»Ÿæˆ‘ä»¬ä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨æ¥è¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯<code>/bin/bash</code>ï¼Œå½“ç„¶Pythonçš„ä»£ç å°±è¦åŠ ä¸Š<code>#!/usr/bin/python</code>ã€‚<br>ç¬¬äºŒè¡Œå°±æ˜¯è¾“å‡ºä¸€å¥â€™hello,worldâ€™ã€‚<code>echo</code>å°±æ˜¯è¾“å‡ºè¯­å¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mail shell]# chmod +x test.sh</span><br><span class="line">[root@mail shell]# ./test.sh</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure></p><a id="more"></a><h2 id="è¿è¡Œè„šæœ¬"><a href="#è¿è¡Œè„šæœ¬" class="headerlink" title="è¿è¡Œè„šæœ¬"></a>è¿è¡Œè„šæœ¬</h2><p>æ‰§è¡Œä¹‹å‰è¦ç»™è„šæœ¬ä¸€ä¸ªxæƒé™ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œæƒé™ã€‚ç„¶åç›´æ¥è¿è¡Œå°±è¡Œäº†ã€‚è¿˜æœ‰ä¸€ç§è¿è¡Œæ–¹å¼æ˜¯<code>/bin/bash test.sh</code> è¿™æ ·å°±æ˜¯æ‰§è¡Œbashè¿™ä¸ªå‘½ä»¤ï¼Œå°†test.shä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œè¿™æ ·å°±å¯ä»¥ä¸å¿…å†™ç¬¬ä¸€è¡Œçš„è§£é‡Šå™¨å£°æ˜ã€‚ä½†æ˜¯å»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼æ‰§è¡Œè„šæœ¬ã€‚</p><h1 id="0X01-ä½¿ç”¨å˜é‡"><a href="#0X01-ä½¿ç”¨å˜é‡" class="headerlink" title="0X01 ä½¿ç”¨å˜é‡"></a>0X01 ä½¿ç”¨å˜é‡</h1><p>æ—¢ç„¶æ˜¯ç¼–ç¨‹ï¼Œé‚£ä¸€å®šä¼šæœ‰å˜é‡ã€‚Shellç¼–ç¨‹é‡Œçš„å˜é‡å’ŒCã€Javaä¸åŒï¼Œæˆ‘ä»¬ä¸éœ€è¦å£°æ˜ä¸€ä¸ªå˜é‡å°±èƒ½ç›´æ¥èµ‹å€¼ï¼Œæƒ³ä¸‹é¢è¿™æ ·ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span></span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨å†™ä¸€äº›ä»£ç çš„æ—¶å€™ï¼Œå¯èƒ½ä¹ æƒ¯äº†åƒè¿™æ ·ä½¿ç”¨æ“ä½œç¬¦<code>str = &quot;hello,world&quot;</code>,ä¹Ÿå°±æ˜¯åœ¨æ“ä½œç¬¦ä¸¤ç«¯åŠ ä¸Šç©ºæ ¼ã€‚ä½†æ˜¯åœ¨Shellç¼–ç¨‹é‡Œè¿™æ ·åšæ˜¯è¢«ç¦æ­¢çš„ï¼ŒåŠ äº†ç©ºæ ¼å°±ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ã€‚æ‰€ä»¥Shellç¼–ç¨‹é‡Œçš„ç©ºæ ¼é™åˆ¶æ˜¯å¾ˆä¸¥æ ¼çš„ã€‚</p></blockquote><p>ç»™ä¸€ä¸ªæ–°çš„å˜é‡èµ‹å€¼çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å˜é‡åï¼Œä½†æ˜¯æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå˜é‡çš„æ—¶å€™è¦ç»™å˜é‡åå‰é¢åŠ ä¸Šä¸€ä¸ª<code>$</code>ç¬¦å·ï¼Œå°±åƒä¸Šé¢æˆ‘å†™çš„é‚£æ ·ã€‚å½“ç„¶æœ€å¥½å†™æˆä¸‹é¢è¿™ç§å½¢å¼<code>${str}</code>å› ä¸ºè¿™æ ·ä¼šæ›´åŠ æ¸…æ™°çš„æ˜¾ç¤ºå‡ºå˜é‡åã€‚</p><h2 id="åªè¯»å˜é‡"><a href="#åªè¯»å˜é‡" class="headerlink" title="åªè¯»å˜é‡"></a>åªè¯»å˜é‡</h2><p>åœ¨Shellä¸­æœ‰ä¸€ç§å˜é‡å«â€˜åªè¯»å˜é‡â€™ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ç§å˜é‡çš„å€¼ä¸ä¼šè¢«æ”¹å˜ï¼Œæ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬è¿™æ ·æ¥å£°æ˜ä¸€ä¸ªåªè¯»å˜é‡<code>readonly str</code>ã€‚åªè¯»å˜é‡ä¹‹å‰ä¹Ÿæ˜¯å¯ä»¥éšæ„æ›´æ”¹çš„ï¼Œåªæ˜¯åœ¨åé¢ç»™å®ƒåŠ ä¸Šäº†ä¸€ä¸ªåªè¯»å±æ€§è€Œå·²ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line"><span class="built_in">readonly</span> str</span><br><span class="line">str=<span class="string">"hey,world"</span></span><br><span class="line"><span class="built_in">echo</span> str</span><br></pre></td></tr></table></figure></p><p>å°±ä¼šæŠ¥é”™ï¼šâ€™./hello.sh: line 5: str: readonly variableâ€™</p><h2 id="åˆ é™¤å˜é‡"><a href="#åˆ é™¤å˜é‡" class="headerlink" title="åˆ é™¤å˜é‡"></a>åˆ é™¤å˜é‡</h2><p>å½“æˆ‘ä»¬ä¸å†ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠè¿™ä¸ªå˜é‡åˆ é™¤æ‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line"><span class="built_in">unset</span> str</span><br><span class="line"><span class="built_in">echo</span> str</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œä»€ä¹ˆéƒ½ä¸ä¼šè¾“å‡ºï¼Œå› ä¸ºå¹¶æ²¡æœ‰strè¿™ä¸ªå˜é‡ã€‚åœ¨Shellä¸­è¾“å‡ºä¸€ä¸ªå¹¶ä¸å­˜åœ¨çš„å˜é‡ä¸ä¼šæœ‰æç¤ºã€‚</p><h1 id="0X02-æ‰§è¡Œä¸€è¡Œå‘½ä»¤"><a href="#0X02-æ‰§è¡Œä¸€è¡Œå‘½ä»¤" class="headerlink" title="0X02 æ‰§è¡Œä¸€è¡Œå‘½ä»¤"></a>0X02 æ‰§è¡Œä¸€è¡Œå‘½ä»¤</h1><p>æ—¢ç„¶æ˜¯Shellç¼–ç¨‹ï¼Œé‚£ä¹ˆæ‰§è¡Œå‘½ä»¤æ˜¯æœ€é‡è¦çš„äº‹æƒ…äº†ã€‚æ‰€ä»¥åœ¨Shellç¼–ç¨‹é‡Œæ‰§è¡Œå‘½ä»¤ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œç›´æ¥æŠŠè¦æ‰§è¡Œçš„å‘½ä»¤å†™åˆ°è¿™é‡Œå°±è¡Œäº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">lscpu  <span class="comment">#è¿™ä¸ªå‘½ä»¤æ˜¯æŸ¥çœ‹CPUç›¸å…³ä¿¡æ¯çš„</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-å­—ç¬¦ä¸²"><a href="#0X03-å­—ç¬¦ä¸²" class="headerlink" title="0X03 å­—ç¬¦ä¸²"></a>0X03 å­—ç¬¦ä¸²</h1><p>å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·åŒ…èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨åŒå¼•å·åŒ…èµ·æ¥ã€‚å•å¼•å·åŒ…èµ·æ¥çš„å­—ç¬¦ä¸²ä¼šåŸå°ä¸åŠ¨ï¼Œä¼šå¿½ç•¥è½¬ä¹‰å­—ç¬¦å’Œå˜é‡ï¼›åŒå¼•å·åŒ…èµ·æ¥çš„å­—ç¬¦ä¸²ä¼šè¯†åˆ«è½¬ä¹‰å­—ç¬¦å’Œå˜é‡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=<span class="string">"hello"</span></span><br><span class="line">str1=<span class="string">'$a, world'</span>  <span class="comment">#å•å¼•å·å­—ç¬¦ä¸²</span></span><br><span class="line">str2=<span class="string">"<span class="variable">$a</span>, world"</span>  <span class="comment">#åŒå¼•å·å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str2</span></span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@mail shell]<span class="comment"># ./hello.sh</span></span><br><span class="line"><span class="variable">$a</span>, wrld        <span class="comment">#å¯ä»¥çœ‹åˆ°è¿™é‡Œæ²¡æœ‰è¯†åˆ«åˆ°å˜é‡</span></span><br><span class="line">hello, world    <span class="comment">#è¿™é‡Œæ˜¯è¯†åˆ«åˆ°äº†å˜é‡çš„</span></span><br></pre></td></tr></table></figure></p><h2 id="å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥"></a>å­—ç¬¦ä¸²æ‹¼æ¥</h2><p>Shellé‡Œæ‹¼æ¥å­—ç¬¦ä¸²çš„è¯­æ³•éå¸¸ç®€é™‹ï¼Œç›´æ¥æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²å˜é‡å†™åœ¨ä¸€èµ·å°±è¡Œäº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str1=<span class="string">"hello,"</span></span><br><span class="line">str2=<span class="string">"world"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str1</span><span class="variable">$str2</span>  <span class="comment">#å°±è¿™ä¹ˆç®€å•ç²—æš´</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å¯ä»¥è¾“å‡ºä¸€ä¸ªâ€™hello,worldâ€™äº†</p><h2 id="è·å–é•¿åº¦"><a href="#è·å–é•¿åº¦" class="headerlink" title="è·å–é•¿åº¦"></a>è·å–é•¿åº¦</h2><p>åœ¨Shellç¼–ç¨‹é‡Œè·å–å­—ç¬¦ä¸²é•¿åº¦ä¸æ˜¯é€šè¿‡ä¸€ä¸ªlenæ–¹æ³•æˆ–è€….lengthå±æ€§è·å–ï¼Œè€Œæ˜¯é€šè¿‡ä¸‹é¢è¿™ç§å¹¶ä¸ç›´è§‚çš„æ–¹å¼è·å–é•¿åº¦ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line">str_len=<span class="variable">$&#123;#str&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str_len</span></span><br></pre></td></tr></table></figure></p><h2 id="éƒ¨åˆ†æˆªå–"><a href="#éƒ¨åˆ†æˆªå–" class="headerlink" title="éƒ¨åˆ†æˆªå–"></a>éƒ¨åˆ†æˆªå–</h2><p>åœ¨Shellç¼–ç¨‹é‡Œæˆ‘ä»¬å¯ä»¥æˆªå–ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æŸä¸€æ®µï¼Œåªéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ¥æŒ‡å®šå¼€å§‹ä½ç½®ï¼Œä¸€ä¸ªæ¥æŒ‡å®šç»“æŸä½ç½®ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str:1:4&#125;</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·å¯ä»¥æˆªå–strå­—ç¬¦ä¸²ä»1åˆ°4çš„éƒ¨åˆ†ã€‚æ˜¯ä¸€ä¸ªé—­åŒºé—´ï¼Œä»0å¼€å§‹è®¡æ•°ã€‚</p><h2 id="æŸ¥æ‰¾ä½ç½®"><a href="#æŸ¥æ‰¾ä½ç½®" class="headerlink" title="æŸ¥æ‰¾ä½ç½®"></a>æŸ¥æ‰¾ä½ç½®</h2><p>æˆ‘ä»¬ç»å¸¸ä¼šéœ€è¦ä»ä¸€æ®µå­—ç¬¦ä¸²é‡Œæ‰¾åˆ°æŸä¸ªå­—ç¬¦å‡ºç°çš„ä½ç½®ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥æŸ¥æ‰¾ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello,world"</span></span><br><span class="line">index=`expr index <span class="string">"<span class="variable">$str</span>"</span> lo` <span class="comment">#æŸ¥æ‰¾læˆ–è€…oè¿™ä¸ªå­—ç¬¦é¦–æ¬¡å‡ºç°åœ¨å­—ç¬¦ä¸²çš„å“ªä¸ªä½ç½®</span></span><br></pre></td></tr></table></figure></p><h1 id="0X04-æä¸ªæ•°ç»„"><a href="#0X04-æä¸ªæ•°ç»„" class="headerlink" title="0X04 æä¸ªæ•°ç»„"></a>0X04 æä¸ªæ•°ç»„</h1><p>æ—¢ç„¶æ˜¯ç¼–ç¨‹ï¼Œé‚£ä¹ˆå½“ç„¶è¦æœ‰æ•°ç»„è¿™ä¸ªæœ€åŸºæœ¬çš„æ•°æ®ç»“æ„äº†ã€‚ä½†æ˜¯Shellåªæ”¯æŒä¸€ç»´æ•°ç»„ï¼Œå¹¶ä¸æ”¯æŒäºŒç»´å’Œå¤šç»´æ•°ç»„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">array_str=(<span class="string">"hello"</span> <span class="string">"hey"</span> <span class="string">"nihao"</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_str[2]&#125;</span> <span class="comment">#å®šä¹‰çš„æ—¶å€™ç”¨çš„æ˜¯å°æ‹¬å·ï¼Œè°ƒç”¨çš„æ—¶å€™æ˜¯å¤§æ‹¬å·</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array_str[@]&#125;</span> <span class="comment">#è¿™é‡Œçš„ä¸€ä¸ª@è¡¨ç¤ºæ•°ç»„é‡Œçš„æ‰€æœ‰å†…å®¹</span></span><br></pre></td></tr></table></figure><h2 id="è·å–æ•°ç»„çš„é•¿åº¦"><a href="#è·å–æ•°ç»„çš„é•¿åº¦" class="headerlink" title="è·å–æ•°ç»„çš„é•¿åº¦"></a>è·å–æ•°ç»„çš„é•¿åº¦</h2><p>è·å–æ•°ç»„é•¿åº¦çš„æ–¹å¼å’Œè·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ–¹å¼å·®ä¸å¤ªå¤šã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">array_str=(<span class="string">"hello"</span> <span class="string">"hey"</span> <span class="string">"nihao"</span>)</span><br><span class="line">length=<span class="variable">$&#123;#array_str[@]&#125;</span> <span class="comment">#è·å–æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$length</span></span><br><span class="line">length=<span class="variable">$&#123;#array_str[2]&#125;</span> <span class="comment">#è·å–æ•°ç»„ä¸­æŸä¸ªå…ƒç´ çš„é•¿åº¦</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$length</span></span><br></pre></td></tr></table></figure></p><h1 id="0X05-åˆ«å¿˜äº†æ³¨é‡Š"><a href="#0X05-åˆ«å¿˜äº†æ³¨é‡Š" class="headerlink" title="0X05 åˆ«å¿˜äº†æ³¨é‡Š"></a>0X05 åˆ«å¿˜äº†æ³¨é‡Š</h1><p>ç¼–ç¨‹çš„æ—¶å€™ç»™å…³é”®ä»£ç åŠ ä¸Šæ³¨é‡Šæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯ã€‚Shellç¼–ç¨‹é‡Œåªæ”¯æŒå•è¡Œæ³¨é‡Šï¼Œä¸æ”¯æŒå¤šè¡Œæ³¨é‡Šã€‚å•è¡Œæ³¨é‡Šæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">str=<span class="string">"hello"</span></span><br><span class="line"><span class="comment">#str="world"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ ·è¾“å‡ºçš„ç»“æœæ˜¯â€™helloâ€™è€Œä¸æ˜¯â€™worldâ€™å› ä¸ºå“ªä¸€è¡Œè¢«æ³¨é‡Šæ‰äº†ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œã€‚<br>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¤šè¡Œæ³¨é‡Šæ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªè¯¡å¼‚çš„æ–¹å¼æ¥å®ç°å¤šè¡Œæ³¨é‡Šï¼šæŠŠéœ€è¦æ³¨é‡Šæ‰çš„ä»£ç æ”¹å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œåªè¦æˆ‘ä»¬åœ¨åé¢ä¸å»è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¸å°±å’Œè¢«æ³¨é‡Šæ‰æ˜¯ä¸€æ ·çš„æ•ˆæœäº†å˜›ã€‚å…³äºå‡½æ•°çš„é—®é¢˜ä¸‹é¢ä¼šè¯´çš„ã€‚</p><h1 id="0X06-Shellå‚æ•°"><a href="#0X06-Shellå‚æ•°" class="headerlink" title="0X06 Shellå‚æ•°"></a>0X06 Shellå‚æ•°</h1><p>æˆ‘ä»¬çš„Shellè„šæœ¬ç»å¸¸æ˜¯éœ€è¦ä¼ å…¥å‚æ•°è¿›æ¥çš„ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆä¼ è¿›æ¥å‘¢ï¼Ÿæˆ‘ä»¬æœ‰ä¸‹é¢ä¸€æ®µä»£ç ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"1. <span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"2. <span class="variable">$2</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"3. <span class="variable">$3</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"all is <span class="variable">$#</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"pid is $$"</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç ï¼Œå¹¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@mail shell]<span class="comment"># ./hello.sh hello world</span></span><br><span class="line">1. hello</span><br><span class="line">2. world</span><br><span class="line">3.</span><br><span class="line">all is 2</span><br><span class="line">pid is 22017</span><br></pre></td></tr></table></figure></p><blockquote><p>$1 $2 $3 è¿™äº›å‚æ•°è¡¨ç¤ºï¼šä¼ å…¥çš„ç¬¬å‡ ä¸ªå‚æ•°<br>$# è¡¨ç¤ºä¼ å…¥çš„å‚æ•°æ€»æ•°<br>$$ è¡¨ç¤ºè¿™ä¸ªè„šæœ¬è¿è¡Œçš„PID  ï¼ˆè¿›ç¨‹å·ï¼‰</p></blockquote><h1 id="0X07-è¿ç®—ç¬¦"><a href="#0X07-è¿ç®—ç¬¦" class="headerlink" title="0X07 è¿ç®—ç¬¦"></a>0X07 è¿ç®—ç¬¦</h1><p>è¿ç®—ç¬¦ç¤ºä¾‹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">val=`expr 1 + 1` <span class="comment">#æ³¨æ„ç©ºæ ¼é—®é¢˜</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$val</span></span><br></pre></td></tr></table></figure></p><p>æœ€å¸¸è§çš„ <code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>=</code> <code>==</code> å…¨éƒ½æœ‰çš„ï¼Œä¸è¿‡æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿ç®—ç¬¦ä¸¤è¾¹ä¸€å®šè¦åŠ ç©ºæ ¼ï¼Œä¸€å®šã€‚</p><h2 id="boolå¸ƒå°”è¿ç®—"><a href="#boolå¸ƒå°”è¿ç®—" class="headerlink" title="boolå¸ƒå°”è¿ç®—"></a>boolå¸ƒå°”è¿ç®—</h2><p><code>!</code>  é<br><code>-o</code> æˆ–<br><code>-a</code> ä¸”<br>-eq æ˜¯â€˜åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™trueâ€™<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=1</span><br><span class="line">b=2</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$a</span> -eq <span class="variable">$b</span> -o <span class="variable">$a</span> == 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ok"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"not ok"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ®µä»£ç è¾“å‡ºçš„æ˜¯â€™okâ€™å› ä¸ºè™½ç„¶$aå’Œ$bå¹¶ä¸ç›¸ç­‰ï¼Œä½†æ˜¯åé¢çš„<code>-o</code>è¡¨ç¤ºæˆ–ï¼Œæˆ–åé¢çš„<code>$a == 1</code>æˆç«‹äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯è¾“å‡ºäº†ok</p><h2 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h2><p><code>&amp;&amp;</code> and<br><code>||</code> or<br>ä¸‹é¢è¿™æ®µDemoä»£ç å’Œä¸Šé¢çš„æ•ˆæœå‡ ä¹æ˜¯ä¸€æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=1</span><br><span class="line">b=2</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$a</span> -eq <span class="variable">$b</span> || <span class="variable">$a</span> == 1 ]] <span class="comment">#è¿™é‡Œæ¯”ä¸Šé¢å¤šäº†ä¸€ç»„ä¸­æ‹¬å·</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"ok"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"not ok"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p><h2 id="å­—ç¬¦ä¸²è¿ç®—ç¬¦"><a href="#å­—ç¬¦ä¸²è¿ç®—ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²è¿ç®—ç¬¦"></a>å­—ç¬¦ä¸²è¿ç®—ç¬¦</h2><p><code>=</code>  è¿™é‡Œä¸æ˜¯èµ‹å€¼ï¼Œæ˜¯åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰<br><code>!=</code> è¿™é‡Œæ˜¯åˆ¤æ–­ä¸ç›¸ç­‰<br><code>-n</code> æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸ä¸º0åˆ™è¿”å›true<br><code>-z</code> æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸º0åˆ™è¿”å›true<br><code>str</code> æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œè¿™é‡Œçš„strè¡¨ç¤ºä¸€åˆ‡å­—ç¬¦ä¸²æˆ–è€…å˜é‡</p><h2 id="è¿ç®—ç¬¦æ€»ç»“ï¼š"><a href="#è¿ç®—ç¬¦æ€»ç»“ï¼š" class="headerlink" title="è¿ç®—ç¬¦æ€»ç»“ï¼š"></a>è¿ç®—ç¬¦æ€»ç»“ï¼š</h2><h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¿ç®—ç¬¦è¯´æ˜                                        ä¸¾ä¾‹</span><br><span class="line">+     åŠ æ³•                                    `expr $a + $b` ç»“æœä¸º 30ã€‚</span><br><span class="line">-     å‡æ³•                                    `expr $a - $b` ç»“æœä¸º -10ã€‚</span><br><span class="line">*     ä¹˜æ³•                                    `expr $a \* $b` ç»“æœä¸º  200ã€‚</span><br><span class="line">/     é™¤æ³•                                    `expr $b / $a` ç»“æœä¸º 2ã€‚</span><br><span class="line">%     å–ä½™                                    `expr $b % $a` ç»“æœä¸º 0ã€‚</span><br><span class="line">=     èµ‹å€¼a=$b å°†æŠŠå˜é‡ b çš„å€¼èµ‹ç»™ aã€‚</span><br><span class="line">==     ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œç›¸åŒåˆ™è¿”å› trueã€‚[ $a == $b ] è¿”å› falseã€‚</span><br><span class="line">!=     ä¸ç›¸ç­‰ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ•°å­—ï¼Œä¸ç›¸åŒåˆ™è¿”å› trueã€‚[ $a != $b ] è¿”å› trueã€‚</span><br></pre></td></tr></table></figure><h3 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¿ç®—ç¬¦è¯´æ˜                                      ä¸¾ä¾‹</span><br><span class="line">-eq   æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚ [ $a -eq $b ] è¿”å› falseã€‚</span><br><span class="line">-ne   æ£€æµ‹ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚[ $a -ne $b ] è¿”å› trueã€‚</span><br><span class="line">-gt   æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ $a -gt $b ] è¿”å› falseã€‚</span><br><span class="line">-lt   æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ $a -lt $b ] è¿”å› trueã€‚</span><br><span class="line">-ge   æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å¤§ç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ $a -ge $b ] è¿”å› falseã€‚</span><br><span class="line">-le   æ£€æµ‹å·¦è¾¹çš„æ•°æ˜¯å¦å°äºç­‰äºå³è¾¹çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ $a -le $b ] è¿”å› trueã€‚</span><br></pre></td></tr></table></figure><h3 id="å¸ƒå°”è¿ç®—ç¬¦"><a href="#å¸ƒå°”è¿ç®—ç¬¦" class="headerlink" title="å¸ƒå°”è¿ç®—ç¬¦"></a>å¸ƒå°”è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¿ç®—ç¬¦è¯´æ˜                                             ä¸¾ä¾‹</span><br><span class="line">!     éè¿ç®—ï¼Œè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å› trueã€‚[ ! false ] è¿”å› trueã€‚</span><br><span class="line">-o    æˆ–è¿ç®—ï¼Œæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ä¸º true åˆ™è¿”å› trueã€‚          [ $a -lt 20 -o $b -gt 100 ] è¿”å› trueã€‚</span><br><span class="line">-a    ä¸è¿ç®—ï¼Œä¸¤ä¸ªè¡¨è¾¾å¼éƒ½ä¸º true æ‰è¿”å› trueã€‚         [ $a -lt 20 -a $b -gt 100 ] è¿”å› falseã€‚</span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿ç®—ç¬¦è¯´æ˜      ä¸¾ä¾‹</span><br><span class="line">&amp;&amp;    é€»è¾‘çš„ AND[[ $a -lt 100 &amp;&amp; $b -gt 100 ]] è¿”å› false</span><br><span class="line">||    é€»è¾‘çš„ OR [[ $a -lt 100 || $b -gt 100 ]] è¿”å› true</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²è¿ç®—ç¬¦-1"><a href="#å­—ç¬¦ä¸²è¿ç®—ç¬¦-1" class="headerlink" title="å­—ç¬¦ä¸²è¿ç®—ç¬¦"></a>å­—ç¬¦ä¸²è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¿ç®—ç¬¦è¯´æ˜                                   ä¸¾ä¾‹</span><br><span class="line">=     æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueã€‚  [ $a = $b ] è¿”å› falseã€‚</span><br><span class="line">!=    æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueã€‚[ $a != $b ] è¿”å› trueã€‚</span><br><span class="line">-z    æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸º0è¿”å› trueã€‚    [ -z $a ] è¿”å› falseã€‚</span><br><span class="line">-n    æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0è¿”å› trueã€‚  [ -n $a ] è¿”å› trueã€‚</span><br><span class="line">str   æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚   [ $a ] è¿”å› trueã€‚</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦"><a href="#æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦" class="headerlink" title="æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦"></a>æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">æ“ä½œç¬¦ è¯´æ˜                                             ä¸¾ä¾‹</span><br><span class="line">-b fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚   [ -b $file ] è¿”å› falseã€‚</span><br><span class="line">-c fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -c $file ] è¿”å› falseã€‚</span><br><span class="line">-d fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚         [ -d $file ] è¿”å› falseã€‚</span><br><span class="line">-f fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ï¼ˆæ—¢ä¸æ˜¯ç›®å½•ï¼Œä¹Ÿä¸æ˜¯è®¾å¤‡æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ -f $file ] è¿”å› trueã€‚</span><br><span class="line">-g fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -g $file ] è¿”å› falseã€‚</span><br><span class="line">-k fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½(Sticky Bit)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ -k $file ] è¿”å› falseã€‚</span><br><span class="line">-p fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å…·åç®¡é“ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚     [ -p $file ] è¿”å› falseã€‚</span><br><span class="line">-u fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -u $file ] è¿”å› falseã€‚</span><br><span class="line">-r fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚           [ -r $file ] è¿”å› trueã€‚</span><br><span class="line">-w fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚           [ -w $file ] è¿”å› trueã€‚</span><br><span class="line">-x fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚         [ -x $file ] è¿”å› trueã€‚</span><br><span class="line">-s fileæ£€æµ‹æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼ˆæ–‡ä»¶å¤§å°æ˜¯å¦å¤§äº0ï¼‰ï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚[ -s $file ] è¿”å› trueã€‚</span><br><span class="line">-e fileæ£€æµ‹æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚[ -e $file ] è¿”å› trueã€‚</span><br></pre></td></tr></table></figure><h1 id="0X08-æ¡ä»¶åˆ¤æ–­è¯­å¥"><a href="#0X08-æ¡ä»¶åˆ¤æ–­è¯­å¥" class="headerlink" title="0X08 æ¡ä»¶åˆ¤æ–­è¯­å¥"></a>0X08 æ¡ä»¶åˆ¤æ–­è¯­å¥</h1><h2 id="if-else"><a href="#if-else" class="headerlink" title="if-else"></a>if-else</h2><p>Shell ç¼–ç¨‹é‡Œçš„ifè¯­å¥å’Œå¹³æ—¶æ¥è§¦çš„ç¼–ç¨‹è¯­è¨€æœ‰ç‚¹åŒºåˆ«</p><ol><li>ifåé¢è¦åŠ ä¸€ä¸ªä¸­æ‹¬å·ï¼Œä¸­æ‹¬å·ä¹‹é—´æ˜¯æ¡ä»¶ï¼Œè€Œä¸”ä¸­æ‹¬å·å‰åéƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼›</li><li>ifè°ƒèŠ‚å†™å¥½ä¹‹åè¦å†™ä¸€ä¸ªthenè¡¨ç¤ºæ¥ä¸‹æ¥æ‰§è¡Œä»€ä¹ˆ</li><li>thenç»“æŸä¹‹åå¦‚æœæ²¡æœ‰åˆ«çš„æ¡ä»¶äº†çš„è¯å°±æ¥ä¸€ä¸ªifçš„é€†å­—ç¬¦ä¸²fiæ¥è¡¨ç¤ºifè¯­å¥ç»“æŸ</li><li>å¦‚æœè¿˜æœ‰å…¶ä»–æ¡ä»¶é‚£å°±ç”¨elifï¼Œç„¶åä¹Ÿæ˜¯ä¸€ä¸ªä¸­æ‹¬å·é‡Œå†™æ¡ä»¶ï¼Œthenåé¢æ¥è¦æ‰§è¡Œçš„è¯­å¥</li><li>æœ€åçš„elseå¯å†™å¯ä¸å†™ï¼Œè¡¨ç¤ºä¸Šé¢çš„æ¡ä»¶æ²¡è¾¾æˆçš„è¯è¦æ‰§è¡Œçš„è¯­å¥ã€‚</li><li>ifè¯­å¥çš„æœ€åä¸€å®šæ˜¯ä¸€ä¸ªfiï¼Œè¡¨ç¤ºifè¯­å¥çš„ç»“æŸ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">"1"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"input is 1"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> == <span class="string">"2"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"input is 2"</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="variable">$1</span> == <span class="string">"3"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"input is 3"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"input is big"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œèµ·æ¥æ˜¯è¿™æ ·çš„ï¼Œæ¯”å¦‚æˆ‘è¿è¡Œçš„å‚æ•°æ˜¯<code>./hello.sh 2</code>ï¼Œé‚£ä¹ˆå°±ä¼šè¾“å‡ºâ€™2â€™</p><h2 id="case"><a href="#case" class="headerlink" title="case"></a>case</h2><p>è·Ÿifä¸€èµ·çš„ä¸€èˆ¬è¿˜æœ‰ä¸€ä¸ªswitch-caseè¯­å¥ï¼Œä½†æ˜¯Shellé‡Œæ²¡æœ‰switchè¿™ä¸ªå…³é”®å­—ï¼Œä½†æ˜¯åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚<code>case $1 in</code>è¡¨ç¤ºçš„æ˜¯$1è¿™ä¸ªå˜é‡å»å¯¹æ¯”ä¸‹é¢çš„é€‰é¡¹ã€‚ä¸‹é¢çš„æ¯ä¸€ä¸ªé€‰é¡¹éƒ½è¦åŠ ä¸€ä¸ªå›æ‹¬å·ï¼Œç„¶åå†™ä¸Šè¦æ‰§è¡Œçš„è¯­å¥ï¼Œå†åŠ ä¸Šä¸¤ä¸ªè¿ç»­çš„åˆ†å·ï¼Œè¡¨ç¤ºè¿™ä¸€æ®µç»“æŸï¼Œæœ€åçš„<code>* )</code>è¡¨ç¤ºåŒ¹é…å…¶ä»–å…¨éƒ¨æ²¡æœ‰åŒ¹é…åˆ°çš„å¯èƒ½ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">"1"</span> )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"word is 1"</span></span><br><span class="line">        ;;</span><br><span class="line">    <span class="string">"2"</span> )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"word is 2"</span></span><br><span class="line">        ;;</span><br><span class="line">    * )</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"word is other"</span></span><br><span class="line">        ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p><h1 id="0X09-å‡ ç§å¾ªç¯"><a href="#0X09-å‡ ç§å¾ªç¯" class="headerlink" title="0X09 å‡ ç§å¾ªç¯"></a>0X09 å‡ ç§å¾ªç¯</h1><h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><p>åœ¨Shellç¼–ç¨‹é‡Œæœ‰æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„forå¾ªç¯ï¼Œä½†æ˜¯è¯­æ³•ä¸ªå…¶ä»–ç¼–ç¨‹è¯­è¨€è¿˜æ˜¯æœ‰ä¸€å®šçš„å‡ºå…¥ã€‚<br>åœ¨Shellé‡Œç”¨forå¾ªç¯çš„è¯ï¼Œè¦ç»™æ¯ä¸€æ®µå¾ªç¯ä½“åŠ ä¸Š<code>do...done</code>ï¼Œè¡¨ç¤ºè¿™ä¹‹é—´çš„ä»£ç æ˜¯å¾ªç¯ä½“ï¼Œæ³¨æ„forçš„ä¸€è¡Œåé¢æ²¡æœ‰å†’å·ï¼ŒåƒPythonçš„è¯å°±ä¼šæœ‰ä¸ªå†’å·ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> <span class="string">"hello,wrld"</span><span class="comment">#å¾ªç¯è¾“å‡ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> 1 2 3 4 5      <span class="comment">#å¾ªç¯è¾“å‡ºåˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$a</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p><code>in</code>å…³é”®å­—å‰é¢æ˜¯ä¸€ä¸ªaåé¢æ˜¯ä¸€å †æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£æˆæŠŠaä»åé¢çš„ä¸€å †æ•°æ®ä¸Šèµ°ä¸€éï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸å½“äºPythonä»£ç ä¸­è¿™æ ·<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="string">'123'</span>, <span class="string">'234'</span>, <span class="string">'345'</span>, <span class="string">'456'</span>]:</span><br><span class="line"><span class="keyword">print</span> i</span><br></pre></td></tr></table></figure></p><h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$1</span> == <span class="string">"2"</span> ]]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¦‚æœæˆ‘æ˜¯è¿™æ ·è¿è¡Œ<code>./hello.sh 2</code> é‚£ä¹ˆå› ä¸º<code>$1</code>æ˜¯2æ‰€ä»¥å°±ä¼šè¿›å…¥æ­»å¾ªç¯ï¼Œå¦åˆ™å°±ä»€ä¹ˆéƒ½ä¸ä¼šè¾“å‡ºã€‚<br>whileå¾ªç¯å°±æ˜¯è¯´ï¼Œå¦‚æœwhileåé¢çš„è¡¨è¾¾å¼æˆç«‹ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œä¸€æ¬¡å¾ªç¯ã€‚å› ä¸ºæˆ‘è¿™æ®µä»£ç æ²¡æœ‰æ”¹å˜$1çš„å€¼ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°è¦ä¹ˆæ— è¾“å‡ºè¦ä¹ˆæ­»å¾ªç¯çš„æƒ…å†µã€‚æˆ‘ä»¬æ”¹æˆä¸‹é¢è¿™ç§æƒ…å†µå°±å¥½äº†ï¼Œè¿™æ„æ€æ˜¯å½“æˆ‘è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå°±æ‰§è¡Œ10æ¬¡ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$a</span> -lt 10 ]]  <span class="comment">#è¿™é‡Œçš„ -lt çš„æ„æ€æ˜¯ 'å½“å·¦è¾¹çš„å€¼å°äºå³è¾¹çš„å€¼å°±è¿”å›true'</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    a=<span class="variable">$a</span>+1</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><h2 id="until"><a href="#until" class="headerlink" title="until"></a>until</h2><p>untilå¾ªç¯å°±ç›¸å½“äºCå’ŒJavaä¸­çš„do-whileå¾ªç¯ï¼Œè¡¨ç¤ºä¸€ä¸ªâ€˜ç›´åˆ°â€™çš„æ•ˆæœã€‚ä¸‹é¢å°±æ˜¯è¯´ï¼Œæ‰§è¡Œå¾ªç¯ä½“é‡Œçš„å†…å®¹ï¼Œä¸€ç›´åˆ°$açš„å˜é‡å¤§äºå³è¾¹çš„æ•°å€¼çš„æ—¶å€™æ‰åœæ­¢ï¼Œæ‰€ä»¥æ‰è¾“å‡ºäº†11æ¬¡â€™hello,worldâ€™<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line">until [[ <span class="variable">$a</span> -gt 10 ]];</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    a=<span class="variable">$a</span>+1</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><h1 id="0X0A-å†™ä¸ªå‡½æ•°"><a href="#0X0A-å†™ä¸ªå‡½æ•°" class="headerlink" title="0X0A å†™ä¸ªå‡½æ•°"></a>0X0A å†™ä¸ªå‡½æ•°</h1><p>Shellé‡Œçš„å‡½æ•°æœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="æ–¹æ¡ˆ1"><a href="#æ–¹æ¡ˆ1" class="headerlink" title="æ–¹æ¡ˆ1"></a>æ–¹æ¡ˆ1</h2><p>æ–¹æ¡ˆä¸€æ˜¯ç›´æ¥å†™å‡½æ•°åï¼Œåé¢æ¥ä¸€ä¸ªæ‹¬å·ï¼Œç„¶åå¤§æ‹¬å·é‡Œå†™ä¸Šå‡½æ•°ä½“å°±å¥½äº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">myFunction</span></span>()&#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="æ–¹æ¡ˆ2"><a href="#æ–¹æ¡ˆ2" class="headerlink" title="æ–¹æ¡ˆ2"></a>æ–¹æ¡ˆ2</h2><p>æ–¹æ¡ˆäºŒæ˜¯<code>function name()</code>è¿™æ ·å®šä¹‰ï¼Œå…ˆå£°æ˜è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå†™ä¸Šå‡½æ•°åï¼Œæœ€åä¹Ÿæ˜¯ä¸€å¯¹å°æ‹¬å·ï¼Œå¤§æ‹¬å·é‡Œå†™å‡½æ•°ä½“ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">name</span></span>()&#123;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"hello,world"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Shellçš„å‡½æ•°ä¹Ÿæ˜¯æœ‰è¿”å›å€¼çš„ï¼Œä¸è¿‡è¿”å›å€¼çš„ç±»å‹å¾ˆå°‘ä¸åƒJavaä¸­å¯ä»¥è¿”å›æ•°å­—å­—ç¬¦ä¸²ç”šè‡³è¿”å›å¯¹è±¡ï¼Œåœ¨Shellä¸­åªèƒ½è¿”å›æ•°å­—ï¼Œè¿˜åªèƒ½æ˜¯0~255çš„ã€‚å˜é‡åªæœ‰8ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå°±ç®—ä½ è¿”å›äº†ä¸€ä¸ª255ä»¥ä¸Šçš„æ•°å­—ä¹Ÿä¼šè¿”å›å‡ºæº¢å‡ºä¹‹åçš„æ•°å­—çš„ã€‚è¿”å›å€¼æ˜¯ä¸å¯ä»¥èµ‹å€¼çš„ï¼Œæƒ³ä½¿ç”¨å‡½æ•°çš„è¿”å›å€¼çš„è¯è¦ç”¨<code>$?</code>ï¼Œè¿™ä¸ªç¬¦å·ä»£è¡¨ä¸Šä¸€æ¬¡è°ƒç”¨çš„å‡½æ•°çš„è¿”å›å€¼ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">my</span></span>()&#123;</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my 1</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line">my 10</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line">my 256</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line">my -2</span><br><span class="line"><span class="built_in">echo</span> $?</span><br><span class="line">my 123.123</span><br><span class="line"><span class="built_in">echo</span> $?</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå‰ä¸¤ä¸ªå¯ä»¥æ­£å¸¸è¾“å‡ºï¼Œ256å› ä¸ºæº¢å‡ºäº†æ‰€ä»¥è¾“å‡ºä¸æ­£å¸¸ï¼Œè´Ÿæ•°å’Œæµ®ç‚¹æ•°ä¸æ”¯æŒã€‚</p><h1 id="0X0B-testæµ‹è¯•"><a href="#0X0B-testæµ‹è¯•" class="headerlink" title="0X0B testæµ‹è¯•"></a>0X0B testæµ‹è¯•</h1><p>testæµ‹è¯•å¯ä»¥æµ‹è¯•å„ç§æ•°æ®ï¼ŒåŒ…æ‹¬æ•°å­—ã€å­—ç¬¦ä¸²ã€æ–‡ä»¶ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> -e /etc/passwd <span class="comment">#åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ok"</span>  <span class="comment">#å­˜åœ¨åˆ™è¾“å‡ºok</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"no"</span>  <span class="comment">#ä¸å­˜åœ¨åˆ™è¾“å‡ºno</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p><h2 id="é’ˆå¯¹æ•°å­—çš„æµ‹è¯•"><a href="#é’ˆå¯¹æ•°å­—çš„æµ‹è¯•" class="headerlink" title="é’ˆå¯¹æ•°å­—çš„æµ‹è¯•"></a>é’ˆå¯¹æ•°å­—çš„æµ‹è¯•</h2><p>-eq    ç­‰äºåˆ™ä¸ºçœŸ<br>-ne    ä¸ç­‰äºåˆ™ä¸ºçœŸ<br>-gt    å¤§äºåˆ™ä¸ºçœŸ<br>-ge    å¤§äºç­‰äºåˆ™ä¸ºçœŸ<br>-lt    å°äºåˆ™ä¸ºçœŸ<br>-le    å°äºç­‰äºåˆ™ä¸ºçœŸ</p><h2 id="é’ˆå¯¹å­—ç¬¦ä¸²çš„æµ‹è¯•"><a href="#é’ˆå¯¹å­—ç¬¦ä¸²çš„æµ‹è¯•" class="headerlink" title="é’ˆå¯¹å­—ç¬¦ä¸²çš„æµ‹è¯•"></a>é’ˆå¯¹å­—ç¬¦ä¸²çš„æµ‹è¯•</h2><p>=    ç­‰äºåˆ™ä¸ºçœŸ<br>!=    ä¸ç›¸ç­‰åˆ™ä¸ºçœŸ<br>-z å­—ç¬¦ä¸²    å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ºé›¶åˆ™ä¸ºçœŸ<br>-n å­—ç¬¦ä¸²    å­—ç¬¦ä¸²çš„é•¿åº¦ä¸ä¸ºé›¶åˆ™ä¸ºçœŸ</p><h2 id="é’ˆå¯¹æ–‡ä»¶çš„æµ‹è¯•"><a href="#é’ˆå¯¹æ–‡ä»¶çš„æµ‹è¯•" class="headerlink" title="é’ˆå¯¹æ–‡ä»¶çš„æµ‹è¯•"></a>é’ˆå¯¹æ–‡ä»¶çš„æµ‹è¯•</h2><p>-e æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™ä¸ºçœŸ<br>-r æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»åˆ™ä¸ºçœŸ<br>-w æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯å†™åˆ™ä¸ºçœŸ<br>-x æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”å¯æ‰§è¡Œåˆ™ä¸ºçœŸ<br>-s æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦åˆ™ä¸ºçœŸ<br>-d æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºç›®å½•åˆ™ä¸ºçœŸ<br>-f æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºæ™®é€šæ–‡ä»¶åˆ™ä¸ºçœŸ<br>-c æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå­—ç¬¦å‹ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ<br>-b æ–‡ä»¶å    å¦‚æœæ–‡ä»¶å­˜åœ¨ä¸”ä¸ºå—ç‰¹æ®Šæ–‡ä»¶åˆ™ä¸ºçœŸ</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¹‹é¢å‘å¯¹è±¡</title>
      <link href="/2016/09/14/python-oop/"/>
      <url>/2016/09/14/python-oop/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-åˆ›å»ºä¸€ä¸ªç±»"><a href="#0X00-åˆ›å»ºä¸€ä¸ªç±»" class="headerlink" title="0X00 åˆ›å»ºä¸€ä¸ªç±»"></a>0X00 åˆ›å»ºä¸€ä¸ªç±»</h1><p>Pythonä¹Ÿæ˜¯ä¸€ä¸ªå’ŒC++ã€Javaä¸€æ ·çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥Pythoné‡Œä¹Ÿæœ‰ç±»å’Œå¯¹è±¡ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>   <span class="comment">#è¿™æ˜¯ä¸€ä¸ªç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span>     <span class="comment">#è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'hello,world'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setName</span><span class="params">(self, inputName)</span>:</span></span><br><span class="line">        self.name = inputName</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.getName()</span><br></pre></td></tr></table></figure></p><p>åœ¨ç±»ä¸­åˆ›å»ºçš„æ–¹æ³•ä½¿ç”¨defå…³é”®å­—å®šä¹‰ï¼Œæ¯ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œselftå°±æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡è‡ªå·±ã€‚éœ€è¦è¿”å›å€¼å°±returnä¸€ä¸ªï¼Œä¸éœ€è¦å°±å¯ä»¥ä¸å†™return</p><blockquote><p>Pythonçš„ç±»å’ŒJavaçš„ç±»è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«ï¼ŒJavaçš„ç±»é‡Œä¸»è¦å†™çš„æ˜¯å±æ€§å’Œæ–¹æ³•ï¼ŒPythoné‡Œä¸å†™å±æ€§ï¼Œå› ä¸ºJavaçš„å˜é‡éœ€è¦å®šä¹‰è€ŒPythonçš„å˜é‡å¹¶ä¸éœ€è¦å®šä¹‰ï¼Œæœ€å¤šä¹Ÿå°±æ˜¯åœ¨å‰é¢ä¸ªå„ä¸ªå±æ€§ä¸€ä¸ªå˜é‡åå¹¶èµ‹åˆå€¼</p></blockquote><h1 id="0X01-å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡"><a href="#0X01-å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="0X01 å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡"></a>0X01 å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</h1><p>ç±»æ˜¯ä¸€ä¸ªå¾ˆæŠ½è±¡çš„æ¦‚å¿µï¼Œå¯ä»¥ç”±ç±»å®ä¾‹åŒ–å¥½å¤šä¸ªå¯¹è±¡å‡ºæ¥ã€‚Javaä¸­æˆ‘ä»¬ä¹ æƒ¯è¯´æˆ newä¸€ä¸ªå¯¹è±¡ï¼Œè€ŒPythonä¸­å¹¶ä¸éœ€è¦new<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xiaoming = Person() <span class="comment">#å®ä¾‹åŒ–äº†ä¸€ä¸ªç±»</span></span><br><span class="line">xiaoming.setName(<span class="string">'xiaoming'</span>)  <span class="comment">#è°ƒç”¨ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="keyword">print</span> xiaoming.getName()</span><br><span class="line">xiaoming.sayHello()</span><br></pre></td></tr></table></figure></p><blockquote><p>æ­¤æ®µä»£ç æ¥ç€ä¸Šé¢çš„ç±»å£°æ˜</p></blockquote><a id="more"></a><h1 id="0X02-Pythonçš„ç§æœ‰"><a href="#0X02-Pythonçš„ç§æœ‰" class="headerlink" title="0X02 Pythonçš„ç§æœ‰"></a>0X02 Pythonçš„ç§æœ‰</h1><p>Javaå’Œå…¶ä»–å¥½å¤šé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­ä¼šæœ‰ä¸€ä¸ªprivateå…³é”®å­—ï¼Œå°†å±æ€§å’Œæ–¹æ³•çº¦æŸä¸ºç§æœ‰çš„ã€‚ç„¶è€ŒPythonå¹¶ä¸èƒ½ç›´æ¥æ”¯æŒprivateï¼Œé—´æ¥åœ°æ”¯æŒä¹Ÿä¸æ˜¯çœŸæ­£çš„privateã€‚åœ¨Pythonä¸­çš„privateç”±ä¸€ç§è¯¡å¼‚çš„æ–¹å¼æ¨¡æ‹Ÿï¼Œåœ¨æ–¹æ³•å‰åŠ ä¸Šè¿ç»­çš„ä¸¤ä¸ªä¸‹åˆ’çº¿<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'hello,world'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> self.__hello()</span><br><span class="line"></span><br><span class="line">xiaoming = Person()</span><br><span class="line">xiaoming.sayHello()</span><br><span class="line">xiaoming.__hello()</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œèµ·æ¥å°±æ˜¯è¿™æ ·çš„ï¼Œå‰é¢çš„<code>xiaoming.sayHello()</code>å› ä¸ºæ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨çš„ï¼Œç„¶ååœ¨æ–¹æ³•é‡Œè°ƒç”¨äº†ç§æœ‰çš„<code>__hello()</code>æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼›åé¢çš„<code>xiaoming.__hello()</code>å› ä¸ºä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hello,world</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"./hello.py"</span>, line 12, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    xiaoming.__hello()</span><br><span class="line">AttributeError: Person instance has no attribute <span class="string">'__hello'</span></span><br></pre></td></tr></table></figure></p><p>å…¶å®åœ¨æ–¹æ³•å‰é¢åŠ äº†ä¸¤ä¸ªä¸‹åˆ’çº¿å¹¶æ²¡æœ‰çœŸçš„æŠŠæ–¹æ³•æ”¹äº†ä¸ªåå­—è€Œå·²ï¼Œæ”¹æˆäº†<code>_Class__name</code>çš„ç±»å‹ï¼Œä¸€ä¸ªä¸‹åˆ’çº¿+ç±»å+ä¸¤ä¸ªä¸‹åˆ’çº¿+æ–¹æ³•åï¼Œå½“æˆ‘ä»¬çŸ¥é“äº†è¿™ä¸ªé—®é¢˜ä¹‹åå°±å¯ä»¥è¿™æ ·è°ƒç”¨â€˜ç§æœ‰â€™æ–¹æ³•äº†ï¼Œä½†æ˜¯æ—¢ç„¶æˆ‘ä»¬éƒ½å°†å…¶è®¾ä¸ºäº†â€™ç§æœ‰â€™å°±ä¸è¦è¿™ä¹ˆç”¨äº†ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>xiaoming = Person()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> xiaoming._Person__hello() <span class="comment">#ä¸è¦è¿™æ ·åšï¼Œè™½ç„¶å¯è¡Œ</span></span><br><span class="line">    hello,world</span><br></pre></td></tr></table></figure></p><h1 id="0X03-ç»§æ‰¿"><a href="#0X03-ç»§æ‰¿" class="headerlink" title="0X03 ç»§æ‰¿"></a>0X03 ç»§æ‰¿</h1><p>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§ä¹‹ä¸€ï¼šç»§æ‰¿ã€‚Pythonä¸­çš„ç»§æ‰¿å’ŒJavaçš„è¯­æ³•å·®å¼‚è¿˜æ˜¯æŒºå¤§çš„ï¼Œåƒä¸‹é¢è¿™æ ·å¯ä»¥å£°æ˜ä¸¤ä¸ªç±»ï¼Œè®© ä¸€ä¸ªç±»ç»§æ‰¿è‡ªå¦ä¸€ä¸ª<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"hello, I'm person"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jack</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"helo, I'm Jack"</span></span><br><span class="line"></span><br><span class="line">person = Person()</span><br><span class="line">jack   = Jack()</span><br><span class="line"></span><br><span class="line">person.sayHello()</span><br><span class="line">jack.sayHello()</span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºæ˜¯è¿™æ ·çš„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello, I<span class="string">'m person</span></span><br><span class="line"><span class="string">helo, I'</span>m Jack</span><br></pre></td></tr></table></figure></p><p>è¿™ä¹Ÿä½“ç°äº†é¢å‘å¯¹è±¡çš„è¦†ç›–çš„æ€æƒ³</p><h1 id="0X04-å¤šç»§æ‰¿"><a href="#0X04-å¤šç»§æ‰¿" class="headerlink" title="0X04 å¤šç»§æ‰¿"></a>0X04 å¤šç»§æ‰¿</h1><p>ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–å¥½å¤šä¸ªç±»ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span>  <span class="comment">#ä¸€ä¸ªçˆ¶ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">learn</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"i'can learn"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coder</span>:</span>    <span class="comment">#å¦ä¸€ä¸ªçˆ¶ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">programming</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"I'can programming"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jack</span><span class="params">(Student, Coder)</span>:</span> <span class="comment">#ç»§æ‰¿è‡ªä¸¤ä¸ªé›·çš„å­ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">jack = Jack()</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯ä»¥è°ƒç”¨ä¸¤ä¸ªçˆ¶ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line">jack.learn()</span><br><span class="line">jack.programming()</span><br></pre></td></tr></table></figure></p><blockquote><p>ä¹¦å†™å¤šç»§æ‰¿çš„æ—¶å€™è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæŸç±»ç»§æ‰¿è‡ªä¸¤ä¸ªç±»ï¼Œä¸”é‚£ä¸¤ä¸ªç±»æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆè¦†ç›–ï¼ˆé‡å†™ï¼‰<br>æ˜¯è¿™æ ·ä¸€ä¸ªæƒ…å†µï¼Œå¦‚æœæˆ‘ä¸Šé¢çš„Studentå’ŒCoderç±»éƒ½æœ‰ä¸€ä¸ªåä¸ºeatçš„æ–¹æ³•ï¼Œä½†æ˜¯Studentç±»é‡Œçš„eatæ–¹æ³•æ˜¯è¾“å‡ºâ€˜student can eatâ€™ä½†æ˜¯â€˜Coderâ€™ç±»ä¸­eatæ–¹æ³•æ˜¯è¾“å‡ºâ€™coder can eatâ€™ï¼Œé‚£ä¹ˆåœ¨å†™å­ç±»çš„æ—¶å€™å°±è¦æ ¼å¤–å°å¿ƒ<br>å¦‚æœå­ç±»è¿™æ ·å†™<code>class Jack(Student, Coder)</code>é‚£ä¹ˆè¿™ä¸ªå­ç±»çš„earæ–¹æ³•å°±ä¼šæ˜¯â€™Coderâ€˜â€™ä¸­çš„æ–¹æ³•ï¼Œè¾“å‡ºâ€˜Coder can eatâ€™ï¼Œå¦‚æœè¿™æ ·å†™<code>class Jack(Coder, Student)</code>çš„è¯ï¼Œè¾“å‡ºå°±æ˜¯â€™Student can eatâ€˜â€™</p></blockquote><h1 id="0X05-æ„é€ æ–¹æ³•"><a href="#0X05-æ„é€ æ–¹æ³•" class="headerlink" title="0X05 æ„é€ æ–¹æ³•"></a>0X05 æ„é€ æ–¹æ³•</h1><p>æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™æ˜¯è¿™æ ·åšçš„<code>xiaoming = Person()</code>å…¶å†…éƒ¨æ˜¯è°ƒç”¨äº†Personç±»çš„æ„é€ æ–¹æ³•å¹¶è¿”å›ç»™äº†xiaomingè¿™ä¸ªå˜é‡ã€‚åœ¨Javaä¸­åœ¨javaä¸­æ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªæ²¡æœ‰è¿”å›ç±»å‹çš„ä¸ç±»ååŒåçš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨Pythonä¸­æ‰€æœ‰æ„é€ æ–¹æ³•éƒ½å«<code>__init__()</code>ã€‚è‡ªå·±ä¸æ‰‹åŠ¨å†™æ„é€ æ–¹æ³•çš„è¯Pythonå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œè¿™ç‚¹å’ŒJavaç›¸åŒã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹å†™æ„é€ æ–¹æ³•<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'new a person'</span></span><br><span class="line"></span><br><span class="line">xiaoming = Person()</span><br></pre></td></tr></table></figure></p><p>ä¼šè¾“å‡ºä¸€ä¸ª<code>new a person</code> è¿™å°±èƒ½è¯æ˜ç¡®å®åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™å›å…ˆè°ƒç”¨è¿™ä¸ªç±»çš„æ„é€ æ–¹æ³•ã€‚æ„é€ æ–¹æ³•å¯ä»¥åŠ å‚æ•°ï¼Œå°±åƒä¸‹é¢è¿™æ ·<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, say=<span class="string">'new a person'</span>)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> say</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™è¿™ä¹ˆå†™<code>xiaoming = Person()</code>é‚£ä¹ˆå°±ä¼šè¾“å‡ºä¸€ä¸ªâ€™new a personâ€™çš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºæˆ‘æ²¡ä¼ å…¥å‚æ•°ï¼Œæ‰€ä»¥å°±ä½¿ç”¨äº†é»˜è®¤å€¼ï¼Œä½†æ˜¯å¦‚æœæˆ‘è¿™æ ·å®ä¾‹åŒ–å¯¹è±¡<code>xiaohong = Person(&#39;xiaohong&#39;)</code>å°±ä¼šè¾“å‡ºä¸€ä¸ªâ€™xiaohongâ€™çš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºæˆ‘ç»™æ„é€ æ–¹æ³•ä¼ å…¥å‚æ•°äº†ã€‚<br>åœ¨Pythonä¸­è¿˜æœ‰ä¸€ä¸ªå«ææ„æ–¹æ³•çš„<code>__del__</code>ä½†æ˜¯æˆ‘ä»¬æœ€å¥½ä¸è¦å»ç¢°å®ƒï¼Œå› ä¸ºPythoné‡Œæœ‰åƒJavaç±»ä¼¼çš„è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œæ‰€ä»¥å‡ ä¹ä¸ä¼šéœ€è¦æˆ‘ä»¬è‡ªå·±å»ææ„ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœçœŸçš„æœ‰éœ€è¦ï¼Œä¹Ÿå¯ä»¥åƒC++ä¸€æ ·æ‰‹åŠ¨ææ„</p><h1 id="0X06-æ–¹æ³•çš„é‡å†™"><a href="#0X06-æ–¹æ³•çš„é‡å†™" class="headerlink" title="0X06 æ–¹æ³•çš„é‡å†™"></a>0X06 æ–¹æ³•çš„é‡å†™</h1><p>å¦‚æœæœ‰ä¸€ä¸ªç±»Aï¼ŒAä¸­æœ‰ä¸€ä¸ªsayHelloçš„æ–¹æ³•ï¼Œç„¶åæœ‰ä¸€ä¸ªBç±»ç»§æ‰¿äº†Aç±»ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¹Ÿæœ‰äº†sayHelloçš„æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»™Bç±»å•ç‹¬è®¾å®šsayHelloæ–¹æ³•ä¼šæ€ä¹ˆæ ·å‘¢<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"i'm Person"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span><span class="params">(Person)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sayHello</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"i'm Man"</span></span><br><span class="line"></span><br><span class="line">xiaoming = Man()</span><br><span class="line">xiaoming.sayHello()</span><br></pre></td></tr></table></figure></p><p>è¾“å‡ºçš„æ˜¯â€iâ€™m Manâ€è€Œä¸æ˜¯â€iâ€™m Personâ€ã€‚è¿™å°±æ˜¯æ–¹æ³•çš„é‡å†™ï¼Œå­ç±»ä¸­å†™äº†ä¸€ä¸ªå’Œçˆ¶ç±»ä¸­ç›¸åŒåçš„æ–¹æ³•ï¼Œå°±ä¼šæŠŠå·²ç»ç»§æ‰¿è¿‡æ¥çš„æ–¹æ³•é‡å†™æ‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¹‹å­—å…¸</title>
      <link href="/2016/09/13/python-dict/"/>
      <url>/2016/09/13/python-dict/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯å­—å…¸"><a href="#0X00-ä»€ä¹ˆæ˜¯å­—å…¸" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯å­—å…¸"></a>0X00 ä»€ä¹ˆæ˜¯å­—å…¸</h1><p>å­—å…¸ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯é€šè¿‡ä¸€ä¸ªæ¡ä»¶å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„å€¼ï¼Œå­—å…¸ç”±Key-Valueç»„æˆã€‚åƒæ˜¯ä¸‹é¢è¿™æ ·åˆ›å»ºä¸€ä¸ªå­—å…¸<br>å­—å…¸ä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œä¸åƒåˆ—è¡¨ä¸€æ ·æœ‰é¡ºåºï¼Œåœ¨å­—å…¸ä¸­æ˜¯æ²¡æœ‰å›ºå®šé¡ºåºçš„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">'name'</span>:<span class="string">'xiaoming'</span>, <span class="string">'sex'</span>:<span class="string">'F'</span>, <span class="string">'age'</span>:<span class="number">22</span>&#125;  <span class="comment">#ç›´æ¥åˆ›å»ºä¸€ä¸ªå­—å…¸</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a</span><br><span class="line">    &#123;<span class="string">'age'</span>: <span class="number">22</span>, <span class="string">'name'</span>: <span class="string">'xiaoming'</span>, <span class="string">'sex'</span>: <span class="string">'F'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> a[<span class="string">'name'</span>]</span><br><span class="line">    xiaoming</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = dict(name=<span class="string">'xiaogang'</span>, sex=<span class="string">'M'</span>, age=<span class="number">23</span>) <span class="comment">#é€šè¿‡dictå‡½æ•°åˆ›å»ºä¸€ä¸ªå­—å…¸</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> b[<span class="string">'name'</span>]</span><br><span class="line">    xiaogang</span><br></pre></td></tr></table></figure></p><blockquote><p>ä¸‹æ–‡è¯´çš„Keyå°±æ˜¯é”®ï¼Œ Valueå°±æ˜¯å€¼<br>Key-Value å°±æ˜¯é”®å€¼å¯¹ï¼Œä¸€ä¸ªé”®å¯¹åº”ç€ä¸€ä¸ªå€¼<br>Keyçš„å€¼æ˜¯å¯ä»¥éšæ„æ”¹å˜çš„ï¼Œä½†æ˜¯Keyçš„ç±»å‹æ˜¯å›ºå®šçš„ä¸èƒ½æ”¹å˜<br>å¦‚æœä¸ºä¸€ä¸ªä¸å­˜åœ¨çš„é”®èµ‹å€¼ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨æ·»åŠ è¿™ä¸ªK-V</p></blockquote><a id="more"></a><h1 id="0X01-å­—å…¸æ“ä½œ"><a href="#0X01-å­—å…¸æ“ä½œ" class="headerlink" title="0X01 å­—å…¸æ“ä½œ"></a>0X01 å­—å…¸æ“ä½œ</h1><h2 id="len-æµ‹é‡é•¿åº¦"><a href="#len-æµ‹é‡é•¿åº¦" class="headerlink" title="len æµ‹é‡é•¿åº¦"></a>len æµ‹é‡é•¿åº¦</h2><p>æµ‹é‡è¿™ä¸ªå­—å…¸ä¸­æœ‰å¤šå°‘<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> len(d)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure></p><h2 id="d-k-è°ƒç”¨å­—å…¸"><a href="#d-k-è°ƒç”¨å­—å…¸" class="headerlink" title="d[k] è°ƒç”¨å­—å…¸"></a>d[k] è°ƒç”¨å­—å…¸</h2><p>æ ¹æ®å·²çŸ¥çš„Keyæ¥æŸ¥æ‰¾Keyæ‰€å¯¹åº”çš„Value<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d[<span class="string">'username'</span>]</span><br><span class="line">admin</span><br></pre></td></tr></table></figure></p><h2 id="d-k-v-å­—å…¸èµ‹å€¼"><a href="#d-k-v-å­—å…¸èµ‹å€¼" class="headerlink" title="d[k] = v    å­—å…¸èµ‹å€¼"></a>d[k] = v    å­—å…¸èµ‹å€¼</h2><p>ä¸ºæŸä¸ªç‰¹å®šçš„Keyèµ‹å€¼ï¼Œå¦‚æœè¿™ä¸ªKeyåœ¨å­—å…¸ä¸­ä¸å­˜åœ¨åˆ™åˆ›å»ºè¿™ä¸ªKey<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'password'</span>] = <span class="string">'2336666'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d[<span class="string">'password'</span>]</span><br><span class="line"><span class="number">2336666</span></span><br></pre></td></tr></table></figure></p><h2 id="del-d-k-åˆ é™¤Key-Value"><a href="#del-d-k-åˆ é™¤Key-Value" class="headerlink" title="del d[k] åˆ é™¤Key-Value"></a>del d[k] åˆ é™¤Key-Value</h2><p>åˆ é™¤ç›¸åº”çš„Keyå’ŒValue<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> d[<span class="string">'username'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d</span><br><span class="line">&#123;<span class="string">'password'</span>: <span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> d[<span class="string">'username'</span>]<span class="comment">#åˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„K-Vä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    Traceback (most recent call last):</span><br><span class="line">      File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    KeyError: <span class="string">'username'</span></span><br></pre></td></tr></table></figure></p><h2 id="k-in-d-æˆå‘˜æ£€æŸ¥"><a href="#k-in-d-æˆå‘˜æ£€æŸ¥" class="headerlink" title="k in d æˆå‘˜æ£€æŸ¥"></a>k in d æˆå‘˜æ£€æŸ¥</h2><p>æ£€æŸ¥æŸå­—å…¸ä¸­æ˜¯å¦å­˜åœ¨æŸKeyï¼Œæˆå‘˜æ£€æŸ¥æ—¶ç”¨çš„æ˜¯Keyè€Œä¸æ˜¯Value<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'username'</span> <span class="keyword">in</span> d</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'phonenumber'</span> <span class="keyword">in</span> d</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure></p><h1 id="0X02-å­—å…¸çš„é€’å½’"><a href="#0X02-å­—å…¸çš„é€’å½’" class="headerlink" title="0X02 å­—å…¸çš„é€’å½’"></a>0X02 å­—å…¸çš„é€’å½’</h1><p>å­—å…¸ä¸­æ˜¯Key-Valueï¼Œç„¶è€Œå­—å…¸çš„Valueæ˜¯å¯ä»¥æ˜¯å­—å…¸çš„ï¼Œä¹Ÿå°±æ˜¯Key-Valueçš„Valueæ˜¯å­—å…¸ï¼Œä¹Ÿå°±æ˜¯é€’å½’ã€‚<br>è¿™æ ·å°±å¯ä»¥å»ºç«‹ä¸€ä¸ªé€’å½’çš„å­—å…¸ï¼Œå­—å…¸é‡Œçš„å­—å…¸å¯ä»¥æ˜¯ä¸€å±‚ä¸€å±‚é€’å½’åŒ…æ‹¬ä¸‹å»<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>phones = &#123;</span><br><span class="line">        <span class="string">'xiaoming'</span>:&#123;</span><br><span class="line">        <span class="string">'num'</span>:<span class="string">'123'</span>,</span><br><span class="line">        <span class="string">'addr'</span>:<span class="string">'hebei'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'xiaohua'</span>:&#123;</span><br><span class="line">        <span class="string">'num'</span>:<span class="string">'456'</span>,</span><br><span class="line">        <span class="string">'addr'</span>:<span class="string">'sichuan'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> phones</span><br><span class="line">    &#123;<span class="string">'xiaoming'</span>: &#123;<span class="string">'num'</span>: <span class="string">'123'</span>, <span class="string">'addr'</span>: <span class="string">'hebei'</span>&#125;, <span class="string">'xiaohua'</span>: &#123;<span class="string">'num'</span>: <span class="string">'456'</span>, <span class="string">'addr'</span>: <span class="string">'sichuan'</span>&#125;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> phones[<span class="string">'xiaoming'</span>]</span><br><span class="line">    &#123;<span class="string">'num'</span>: <span class="string">'123'</span>, <span class="string">'addr'</span>: <span class="string">'hebei'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> phones[<span class="string">'xiaoming'</span>][<span class="string">'addr'</span>]</span><br><span class="line">    hebei</span><br></pre></td></tr></table></figure></p><h1 id="0X03-å­—å…¸æ–¹æ³•"><a href="#0X03-å­—å…¸æ–¹æ³•" class="headerlink" title="0X03 å­—å…¸æ–¹æ³•"></a>0X03 å­—å…¸æ–¹æ³•</h1><p>å­—å…¸æœ‰å¥½å¤šæ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œå¯¹å­—å…¸è¿›è¡Œæ“ä½œ</p><h2 id="clear-æ¸…é™¤"><a href="#clear-æ¸…é™¤" class="headerlink" title="clear æ¸…é™¤"></a>clear æ¸…é™¤</h2><p>clearå¯ä»¥æ¸…é™¤å­—å…¸æ‰€æœ‰é¡¹ï¼Œè¿™é¡¹æ“ä½œæ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—å…¸è€Œä¸æ˜¯ä¿®æ”¹å­—å…¸ç„¶åè¿”å›æ–°çš„å­—å…¸<br>ä¸‹é¢å±•ç¤ºä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„ç”¨å¤„<br>A<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="string">'key'</span>] = <span class="string">'value'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">&#123;<span class="string">'key'</span>: <span class="string">'value'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">&#123;<span class="string">'key'</span>: <span class="string">'value'</span>&#125;</span><br></pre></td></tr></table></figure></p><p>B<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="string">'key'</span>] = <span class="string">'value'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">&#123;<span class="string">'key'</span>: <span class="string">'value'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.clear()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure></p><p>å¯¹æ¯”Aå’ŒBè¿™ä¸¤ç§æƒ…å†µï¼Œå°±å¤§æ¦‚çŸ¥é“ä»€ä¹ˆæ—¶å€™clearæ–¹æ³•å¯ä»¥å‘æŒ¥ç”¨å¤„äº†</p><h2 id="copy-å¤åˆ¶"><a href="#copy-å¤åˆ¶" class="headerlink" title="copy å¤åˆ¶"></a>copy å¤åˆ¶</h2><p>å¯ä»¥å¤åˆ¶ä¸€ä¸ªå…¨æ–°çš„å­—å…¸å‡ºæ¥ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–°çš„å­—å…¸ã€‚å­—å…¸çš„å¤åˆ¶åˆ†ä¸ºæµ…åº¦å¤åˆ¶å’Œæ·±åº¦å¤åˆ¶<br>æµ…åº¦å¤åˆ¶<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'machines'</span>:[<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y[<span class="string">'username'</span>] = <span class="string">'mlh'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y[<span class="string">'machines'</span>].remove(<span class="string">'bar'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">    &#123;<span class="string">'username'</span>: <span class="string">'mlh'</span>, <span class="string">'machines'</span>: [<span class="string">'foo'</span>, <span class="string">'baz'</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">    &#123;<span class="string">'username'</span>: <span class="string">'admin'</span>, <span class="string">'machines'</span>: [<span class="string">'foo'</span>, <span class="string">'baz'</span>]&#125;</span><br></pre></td></tr></table></figure></p><p>æ·±åº¦å¤åˆ¶<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'names'</span>] = [<span class="string">'Alfred'</span>, <span class="string">'Bertrand'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = d.copy()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dc = deepcopy(d)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'names'</span>].append(<span class="string">'Clive'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">    &#123;<span class="string">'names'</span>: [<span class="string">'Alfred'</span>, <span class="string">'Bertrand'</span>, <span class="string">'Clive'</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dc</span><br><span class="line">    &#123;<span class="string">'names'</span>: [<span class="string">'Alfred'</span>, <span class="string">'Bertrand'</span>]&#125;</span><br></pre></td></tr></table></figure></p><h2 id="fromkeys-ç©ºå­—å…¸"><a href="#fromkeys-ç©ºå­—å…¸" class="headerlink" title="fromkeys ç©ºå­—å…¸"></a>fromkeys ç©ºå­—å…¸</h2><p>ä½¿ç”¨ç»™å®šçš„é”®æ¥å»ºç«‹ä¸€ä¸ªæ²¡æœ‰å€¼çš„å­—å…¸ï¼Œä¹Ÿå¯ä»¥ç»™ä¸€ä¸ªé»˜è®¤çš„å€¼è®©æ‰€æœ‰é”®çš„å€¼éƒ½æ˜¯è¿™ä¸ªé»˜è®¤å€¼<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict.fromkeys([<span class="string">'name'</span>, <span class="string">'age'</span>])<span class="comment">#ä¸€ä¸ªçº¯ç©ºçš„å­—å…¸</span></span><br><span class="line">    &#123;<span class="string">'name'</span>: <span class="literal">None</span>, <span class="string">'age'</span>:<span class="literal">None</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict.fromkeys([<span class="string">'name'</span>, <span class="string">'age'</span>], <span class="string">'unknow'</span>)   <span class="comment">#ç»™é”®åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼</span></span><br><span class="line">    &#123;<span class="string">'name'</span>:<span class="string">'unknow'</span>, <span class="string">'age'</span>:<span class="string">'unknow'</span>&#125;</span><br></pre></td></tr></table></figure></p><h2 id="get-è·å–"><a href="#get-è·å–" class="headerlink" title="get è·å–"></a>get è·å–</h2><p>æ¯”è¾ƒå®½æ¾çš„è·å–æ•°æ®ï¼Œä»¥å‰ç”¨d[k]çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå€¼çš„è¯ï¼Œå¦‚æœè¿™ä¸ªé”®ä¸å­˜åœ¨å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç”¨getè·å–å°±ä¸ä¼šè¿™æ ·<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> d.get(<span class="string">'name'</span>)  <span class="comment">#è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¾ç¤ºNone</span></span><br><span class="line">    <span class="literal">None</span></span><br></pre></td></tr></table></figure></p><h2 id="has-key-åˆ¤æ–­é”®"><a href="#has-key-åˆ¤æ–­é”®" class="headerlink" title="has_key åˆ¤æ–­é”®"></a>has_key åˆ¤æ–­é”®</h2><p>åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦æœ‰è¿™ä¸ªé”®ï¼Œè¿”å›Trueå’ŒFalse<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'name'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.has_key(<span class="string">'name'</span>)</span><br><span class="line">    <span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.has_key(<span class="string">'hehe'</span>)</span><br><span class="line">    <span class="literal">False</span></span><br></pre></td></tr></table></figure></p><h2 id="items-iteritems-è¿”å›å­—å…¸"><a href="#items-iteritems-è¿”å›å­—å…¸" class="headerlink" title="items iteritems è¿”å›å­—å…¸"></a>items iteritems è¿”å›å­—å…¸</h2><p>items å¯ä»¥å°†æ•´ä¸ªå­—å…¸è½¬åŒ–æˆåˆ—è¡¨å¹¶è¿”å›<br>iteritems å¯ä»¥å°†æ•´ä¸ªå­—å…¸è½¬åŒ–æˆè¿­ä»£å™¨è¿”å›<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.items()</span><br><span class="line">    [(<span class="string">'username'</span>, <span class="string">'admin'</span>), (<span class="string">'password'</span>, <span class="string">'123'</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.iteritems()</span><br><span class="line">    &lt;built-<span class="keyword">in</span> method iteritems of dict object at <span class="number">0x7f62ac08e6e0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(d.iteritems())</span><br><span class="line">    [(<span class="string">'username'</span>, <span class="string">'admin'</span>), (<span class="string">'password'</span>, <span class="string">'123'</span>)]</span><br></pre></td></tr></table></figure></p><h2 id="keys-iterkeys-è¿”å›é”®"><a href="#keys-iterkeys-è¿”å›é”®" class="headerlink" title="keys iterkeys è¿”å›é”®"></a>keys iterkeys è¿”å›é”®</h2><p>keys ä»¥åˆ—è¡¨çš„æ–¹å¼è¿”å›æ•´ä¸ªå­—å…¸ä¸­æ‰€æœ‰çš„key<br>iterkeys ä»¥è¿­ä»£å™¨çš„æ–¹å¼è¿”å›æ•´ä¸ªå­—å…¸ä¸­æ‰€æœ‰çš„key<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.keys()</span><br><span class="line">    [<span class="string">'username'</span>, <span class="string">'password'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.iterkeys()</span><br><span class="line">    &lt;dictionary-keyiterator object at <span class="number">0x7f62ac0972b8</span>&gt;</span><br></pre></td></tr></table></figure></p><h2 id="pop-å‡ºæ ˆ"><a href="#pop-å‡ºæ ˆ" class="headerlink" title="pop å‡ºæ ˆ"></a>pop å‡ºæ ˆ</h2><p>å› ä¸ºå­—å…¸ä¸­æ˜¯æ²¡æœ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å‡ºæ ˆçš„æ—¶å€™å¿…é¡»è‡ªå·±æŒ‡å®šä¸€ä¸ªKeyæ‰èƒ½å¼¹å‡ºè¿™ä¸ªK-Vï¼Œå¦‚æœäº†è§£â€œæ ˆâ€è¿™ä¸ªæ•°æ®ç»“æ„çš„è¯å°±èƒ½éå¸¸æ¸…æ™°è¿™ä¸ªæ–¹æ³•ã€‚ä½¿ç”¨popå¼¹å‡ºä¸€ä¸ªæ•°æ®çš„æ—¶å€™å›åœ¨åŸå­—å…¸ä¸­åˆ é™¤è¿™ä¸ªæ•°æ®å¹¶è¿”å›è¿™ä¸ªæ•°æ®ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.pop(<span class="string">'password'</span>)</span><br><span class="line">    <span class="string">'123'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">    &#123;<span class="string">'username'</span>: <span class="string">'admin'</span>&#125;</span><br></pre></td></tr></table></figure></p><h2 id="popitem-éšæœºå‡ºæ ˆ"><a href="#popitem-éšæœºå‡ºæ ˆ" class="headerlink" title="popitem éšæœºå‡ºæ ˆ"></a>popitem éšæœºå‡ºæ ˆ</h2><p>éšæœºä»å­—å…¸ä¸­å¼¹å‡ºä¸€ç»„K-V<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'one'</span>:<span class="string">'1'</span>, <span class="string">'two'</span>:<span class="string">'2'</span>, <span class="string">'three'</span>:<span class="string">'3'</span>, <span class="string">'four'</span>:<span class="string">'4'</span>, <span class="string">'five'</span>:<span class="string">'5'</span>, <span class="string">'six'</span>:<span class="string">'6'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'six'</span>, <span class="string">'6'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'three'</span>, <span class="string">'3'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'two'</span>, <span class="string">'2'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'four'</span>, <span class="string">'4'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'five'</span>, <span class="string">'5'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.popitem()</span><br><span class="line">    (<span class="string">'one'</span>, <span class="string">'1'</span>)</span><br></pre></td></tr></table></figure></p><h2 id="setdefault-è®¾ç½®é»˜è®¤"><a href="#setdefault-è®¾ç½®é»˜è®¤" class="headerlink" title="setdefault è®¾ç½®é»˜è®¤"></a>setdefault è®¾ç½®é»˜è®¤</h2><p>ç»™å­—å…¸ä¸­æŸä¸ªKeyè®¾å®šä¸€ä¸ªé»˜è®¤çš„Valueï¼Œå½“è¿™ä¸ªKeyæ²¡æœ‰Valueçš„æ—¶å€™å°±é»˜è®¤ä¸ºé‚£ä¸ªé»˜è®¤çš„Valueï¼Œå¦‚æœæœ‰æ•°æ®åˆ™é»˜è®¤Valueä¸ä¼šç”Ÿæ•ˆ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.setdefault(<span class="string">'name'</span>, <span class="string">'N/A'</span>)</span><br><span class="line">    <span class="string">'N/A'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">    &#123;<span class="string">'name'</span>: <span class="string">'N/A'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'name'</span>] = <span class="string">'admin'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.setdefault(<span class="string">'name'</span>, <span class="string">'N/A'</span>)</span><br><span class="line">    <span class="string">'admin'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">    &#123;<span class="string">'name'</span>: <span class="string">'admin'</span>&#125;</span><br></pre></td></tr></table></figure></p><h2 id="update-æ›´æ–°å­—å…¸"><a href="#update-æ›´æ–°å­—å…¸" class="headerlink" title="update æ›´æ–°å­—å…¸"></a>update æ›´æ–°å­—å…¸</h2><p>å¯ä»¥ç”¨ä¸€ä¸ªæ–°çš„å­—å…¸å»æ›´æ–°æ—§çš„å­—å…¸ï¼Œæ–°æ—§å­—å…¸ä¸­Keyé‡åˆçš„éƒ¨åˆ†ä»¥æ–°å­—å…¸ä¸ºå‡†ï¼Œæ—§å­—å…¸ä¸­æœ‰çš„Keyä¸”æ–°å­—å…¸ä¸­æ²¡æœ‰çš„è¯åˆ™ä¸å˜ï¼Œæ—§å­—å…¸ä¸­æ²¡æœ‰çš„Keyä¸”æ–°å­—å…¸ä¸­æœ‰çš„è¯åˆ™æ·»åŠ è¿™ä¸ªK-V<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = &#123;<span class="string">'username'</span>:<span class="string">'admin'</span>, <span class="string">'password'</span>:<span class="string">'123456'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = &#123;<span class="string">'password'</span>:<span class="string">'2336666'</span>, <span class="string">'sex'</span>:<span class="string">'F'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.update(b)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">    &#123;<span class="string">'username'</span>: <span class="string">'admin'</span>, <span class="string">'password'</span>: <span class="string">'2336666'</span>, <span class="string">'sex'</span>: <span class="string">'F'</span>&#125;</span><br></pre></td></tr></table></figure></p><h2 id="values-intervalues"><a href="#values-intervalues" class="headerlink" title="values intervalues"></a>values intervalues</h2><p>values è¿”å›å­—å…¸ä¸­æ‰€æœ‰çš„å€¼ç»„æˆçš„åˆ—è¡¨<br>intervalues è¿”å›å­—å…¸ä¸­æ‰€æœ‰çš„å€¼ç›¸åº”çš„è¿­ä»£å™¨</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Data Structure </tag>
            
            <tag> Dictionary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¹‹åºåˆ—ï¼šåˆ—è¡¨ã€å…ƒç»„</title>
      <link href="/2016/09/07/python-list-tumple/"/>
      <url>/2016/09/07/python-list-tumple/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-åˆ—è¡¨å’Œå…ƒç»„"><a href="#0X00-åˆ—è¡¨å’Œå…ƒç»„" class="headerlink" title="0X00 åˆ—è¡¨å’Œå…ƒç»„"></a>0X00 åˆ—è¡¨å’Œå…ƒç»„</h1><p>Pythoné‡Œæœ‰ä¸ªä¸œè¥¿å«åš<strong>åºåˆ—</strong>ï¼Œå¯ä»¥æƒ³è±¡æˆä¸€å †æ•°æ®ã€‚å¯ä»¥ç®€å•çš„é€šè¿‡åºåˆ—å®ç°æ•°ç»„ã€é“¾è¡¨ã€æ ˆå’Œé˜Ÿåˆ—ç­‰æ•°æ®ç»“æ„ã€‚<br>åºåˆ—æœ‰å‡ ç§ï¼Œå¸¸è§çš„æ˜¯åˆ—è¡¨å’Œå…ƒç»„ã€‚</p><h1 id="0X01-åºåˆ—åˆ†ç‰‡"><a href="#0X01-åºåˆ—åˆ†ç‰‡" class="headerlink" title="0X01 åºåˆ—åˆ†ç‰‡"></a>0X01 åºåˆ—åˆ†ç‰‡</h1><p>æˆ‘ä»¬å¯ä»¥ä»åºåˆ—ä¸­æˆªå–ä¸€éƒ¨åˆ†ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºåˆ†ç‰‡<br>åˆ†ç‰‡çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹©èµ·å§‹ç‚¹å’Œç»“æŸç‚¹ï¼Œè¿˜èƒ½é€‰æ‹©æ­¥é•¿ï¼Œç”šè‡³ä¹ƒèƒ½å€’åº<br>åˆ†ç‰‡ä½¿ç”¨<code>:</code>åˆ†éš”å¼€å‚æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæˆªå–ç¬¬ä¸€ä¸ªå‚æ•°åˆ°ç¬¬äºŒä¸ªå‚æ•°ï¼Œå·¦å¼€å³é—­<br>å¦‚æœå‚æ•°æ˜¯è´Ÿæ•°çš„è¯ï¼Œåˆ™è¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ª<br>ä½†æ˜¯å¯ä»¥æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºæ­¥é•¿ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯2é‚£ä¹ˆå°±æ˜¯æ¥ä¸€è·³ä¸€ã€‚<br>å¦‚æœå‚æ•°ä¸ºç©ºåˆ™è¡¨ç¤ºæé™ã€‚  å…·ä½“å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç <br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[<span class="number">4</span>:<span class="number">8</span>]<span class="comment">#æˆªå–ä»4åˆ°8ï¼Œå·¦å¼€å³é—­</span></span><br><span class="line">o,wo</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[<span class="number">4</span>:<span class="number">-2</span>]<span class="comment">#æˆªå–4åˆ°å€’æ•°ç¬¬4çš„å‚æ•°ï¼Œå¦‚æœæƒ³è¦åŒ…æ‹¬æœ€åä¸€ä¸ªæ˜¯ä¸èƒ½ç”¨-1çš„ï¼Œè¦ç”¨ä¸‹é¢çš„æ–¹å¼</span></span><br><span class="line">o,wor</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[<span class="number">2</span>:]<span class="comment">#æˆªå–åŒ…æ‹¬æœ€åä¸€ä¸ªçš„è¯ä¸èƒ½ç”¨-1ï¼Œå› ä¸º-1æ˜¯æœ€åä¸€ä¸ªï¼Œç„¶ååŒºé—´æ˜¯å·¦å¼€å³é—­ï¼Œæ‰€æœ‰å³è¾¹ç•™ç©ºå°±è¡¨ç¤ºæé™äº†</span></span><br><span class="line">llo,world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[:]<span class="comment">#ä¸¤å¤´å–æé™ï¼Œå°±æ˜¯å®Œæ•´çš„åºåˆ—</span></span><br><span class="line">hello,world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[<span class="number">1</span>:<span class="number">8</span>:<span class="number">2</span>]<span class="comment">#æ¼”ç¤ºæ­¥é•¿ï¼Œæ­¤å¤„æ­¥é•¿ä¸º2</span></span><br><span class="line">el,o</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username[<span class="number">8</span>:<span class="number">0</span>:<span class="number">-1</span>]<span class="comment">#å½“æ­¥é•¿ä¸º-1çš„æ—¶å€™ï¼Œå°±æ˜¯ä»åå‘å‰çš„</span></span><br><span class="line">row,olle</span><br></pre></td></tr></table></figure></p><a id="more"></a><h1 id="0X02-åºåˆ—æ‹¼æ¥"><a href="#0X02-åºåˆ—æ‹¼æ¥" class="headerlink" title="0X02 åºåˆ—æ‹¼æ¥"></a>0X02 åºåˆ—æ‹¼æ¥</h1><p>åºåˆ—æ‹¼æ¥å°±å’ŒJavaé‡Œçš„å­—ç¬¦ä¸²æ‹¼æ¥å·®ä¸å¤šï¼Œå¯ä»¥å•çº¯çš„ç”¨ä¸€ä¸ªåŠ å·è¿åœ¨ä¸€èµ·ã€‚å½“ç„¶Pythonæ¯”Javaæ–¹ä¾¿çš„ä¸€ç‚¹å°±æ˜¯ï¼Œä¸åªæ˜¯å­—ç¬¦ä¸²ï¼Œä»€ä¹ˆä¸œè¥¿åªè¦æ˜¯åœ¨åºåˆ—é‡Œå°±èƒ½ç”¨åºåˆ—æ‹¼æ¥åˆ°ä¸€èµ·ã€‚<br>Pythonä¸­ç”¨åŠ å·çš„æ–¹å¼æŠŠåºåˆ—æ‹¼æ¥åœ¨ä¸€èµ·æ˜¯<strong>è¿”å›ä¸€ä¸ªæ–°çš„åºåˆ—</strong>è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹å…¶ä¸­çš„ä¸€ä¸ªåºåˆ—ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>password = <span class="string">'world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username + <span class="string">','</span> + password</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure></p><p>åºåˆ—ä¸åªèƒ½åšåŠ æ³•ï¼Œè¿˜èƒ½åšä¹˜æ³•ã€‚åºåˆ—ä¹˜nä¹‹åè¿”å›ä¸€ä¸ªé‡å¤äº†næ¬¡çš„åºåˆ—<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username * <span class="number">3</span></span><br><span class="line">hello,worldhello,worldhello,world</span><br></pre></td></tr></table></figure></p><h1 id="0X03-ç©ºåºåˆ—"><a href="#0X03-ç©ºåºåˆ—" class="headerlink" title="0X03 ç©ºåºåˆ—"></a>0X03 ç©ºåºåˆ—</h1><p>ç©ºåºåˆ—æ˜¯ç©ºçš„ï¼Œè€Œä¸æ˜¯å€¼ä¸º0ã€‚ä¹Ÿè®¸ç°åœ¨ä¸çŸ¥é“è¿™ä¸œè¥¿å¹²å˜›ç”¨ï¼Œç­‰åˆ°æ—¶å€™ç”¨åˆ°äº†å°±è±ç„¶å¼€æœ—äº†<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username = [<span class="literal">None</span>] * <span class="number">10</span> <span class="comment">#è¿™æ ·å°±ç”Ÿæˆäº†ä¸€ä¸ªé•¿åº¦ä¸º10çš„ç©ºåºåˆ—</span></span><br></pre></td></tr></table></figure></p><h1 id="0X04-æˆå‘˜åˆ¤æ–­"><a href="#0X04-æˆå‘˜åˆ¤æ–­" class="headerlink" title="0X04 æˆå‘˜åˆ¤æ–­"></a>0X04 æˆå‘˜åˆ¤æ–­</h1><p>æˆå‘˜åˆ¤æ–­å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯å­˜åœ¨äºä¸€ä¸ªåºåˆ—é‡Œ<br>è¿™é‡Œè¿”å›çš„æ˜¯å¸ƒå°”å€¼ï¼ŒTrueæˆ–è€…False<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">','</span> <span class="keyword">in</span> username<span class="comment">#åˆ¤æ–­å…ƒç´ æ˜¯ä¸æ˜¯åœ¨åºåˆ—é‡Œ</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'hello'</span> <span class="keyword">in</span> username<span class="comment">#åˆ¤æ–­åºåˆ—æ˜¯ä¸æ˜¯åœ¨åºåˆ—é‡Œ</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="string">'hello'</span>, <span class="string">'world'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'hello'</span> <span class="keyword">in</span> username</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'hel'</span> <span class="keyword">in</span> username</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure></p><h1 id="0X05-é•¿åº¦-amp-ç»Ÿè®¡"><a href="#0X05-é•¿åº¦-amp-ç»Ÿè®¡" class="headerlink" title="0X05 é•¿åº¦&amp;ç»Ÿè®¡"></a>0X05 é•¿åº¦&amp;ç»Ÿè®¡</h1><p>å¯ä»¥ç»Ÿè®¡ä¸€ä¸ªåºåˆ—çš„é•¿åº¦ï¼Œè¿˜èƒ½è®¡ç®—å‡ºåºåˆ—æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å’Œæœ€å°<br>å…·ä½“çš„æ’åºæ–¹æ³•å¯ä»¥å»ç½‘ä¸Šæ‰¾æ‰¾æˆ–è€…è‡ªå·±å°è¯•ä¸€ä¸‹ï¼Œé’ˆå¯¹æ¯ç§ç±»å‹çš„æ’åºæ–¹å¼æ˜¯ä¸ä¸€æ ·çš„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span><span class="comment">#è·å–é•¿åº¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> len(username)</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>number = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> max(number)<span class="comment">#ç»Ÿè®¡æœ€å¤§</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> min(number)<span class="comment">#ç»Ÿè®¡å¹³å‡</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure></p><h1 id="0X06-åˆ—è¡¨èµ‹å€¼"><a href="#0X06-åˆ—è¡¨èµ‹å€¼" class="headerlink" title="0X06 åˆ—è¡¨èµ‹å€¼"></a>0X06 åˆ—è¡¨èµ‹å€¼</h1><p>å¯¹åˆ—è¡¨çš„èµ‹å€¼å’Œå¯¹å…¶ä»–ç¼–ç¨‹è¯­è¨€é‡Œçš„æ•°ç»„èµ‹å€¼å‡ ä¹æ˜¯ä¸€æ ·çš„<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username[<span class="number">3</span>] = <span class="number">33</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username[<span class="number">5</span>] = <span class="number">55</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">33</span>, <span class="number">4</span>, <span class="number">55</span>]</span><br></pre></td></tr></table></figure></p><h1 id="0X07-åˆ—è¡¨åˆ é™¤æ•°æ®"><a href="#0X07-åˆ—è¡¨åˆ é™¤æ•°æ®" class="headerlink" title="0X07 åˆ—è¡¨åˆ é™¤æ•°æ®"></a>0X07 åˆ—è¡¨åˆ é™¤æ•°æ®</h1><p>åˆ é™¤åˆ—è¡¨é‡Œçš„æ•°æ®ä¹Ÿéå¸¸æ˜“äºç†è§£<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">','</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> username[<span class="number">5</span>]<span class="comment">#åˆ é™¤ç´¢å¼•ä¸º5çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ç¬¬6ä¸ª</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username</span><br><span class="line">[<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>] <span class="comment">#å¤„åœ¨åŸæ¥5çš„ä½ç½®çš„é€—å·ä¸åœ¨äº†</span></span><br></pre></td></tr></table></figure></p><h1 id="0X08-åˆ—è¡¨åˆ†ç‰‡èµ‹å€¼"><a href="#0X08-åˆ—è¡¨åˆ†ç‰‡èµ‹å€¼" class="headerlink" title="0X08 åˆ—è¡¨åˆ†ç‰‡èµ‹å€¼"></a>0X08 åˆ—è¡¨åˆ†ç‰‡èµ‹å€¼</h1><p>åˆ†ç‰‡èµ‹å€¼ç›¸å½“äºæŠŠä»¥å‰çš„éƒ¨åˆ†æ•°æ®ç›–ä¸Šï¼Œå†™ä¸Šæ–°çš„æ•°æ®<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = list(<span class="string">'hello,world'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username[<span class="number">1</span>:<span class="number">5</span>] = list(<span class="string">'++++++'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username[<span class="number">2</span>:<span class="number">2</span>] = list(<span class="string">'------'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username<span class="comment">#æ•°æ®æ·»åŠ æˆåŠŸ</span></span><br><span class="line">[<span class="string">'h'</span>, <span class="string">'+'</span>, <span class="string">'-'</span>, <span class="string">'-'</span>, <span class="string">'-'</span>, <span class="string">'-'</span>, <span class="string">'-'</span>, <span class="string">'-'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>, <span class="string">'+'</span>, <span class="string">','</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username[<span class="number">3</span>:<span class="number">5</span>] = []  <span class="comment">#ç†è®ºä¸Šå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å»åˆ é™¤åˆ—è¡¨ä¸­çš„æ•°æ®ï¼Œä¸è¿‡éå¸¸ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæ²¡äººæ„¿æ„çœ‹è¿™ç§ä»£ç ï¼ŒåŒ…æ‹¬å‡ å¤©ä¹‹åçš„ä½ è‡ªå·±</span></span><br></pre></td></tr></table></figure></p><h1 id="0X09-åˆ—è¡¨å¸¸ç”¨æ–¹æ³•"><a href="#0X09-åˆ—è¡¨å¸¸ç”¨æ–¹æ³•" class="headerlink" title="0X09 åˆ—è¡¨å¸¸ç”¨æ–¹æ³•"></a>0X09 åˆ—è¡¨å¸¸ç”¨æ–¹æ³•</h1><h2 id="append-å’Œ-extend"><a href="#append-å’Œ-extend" class="headerlink" title="append å’Œ extend"></a>append å’Œ extend</h2><p>append()æ–¹æ³•æ˜¯ <strong>å‘åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ </strong>ï¼Œè€Œextend()åˆ™æ˜¯æ‰©å±•åŸæœ‰åˆ—è¡¨ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ä¿®æ”¹ä¹‹å‰çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">b = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]</span><br><span class="line"><span class="comment"># a.append(b)</span></span><br><span class="line">a.extend(b)</span><br><span class="line"><span class="keyword">print</span> a</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç•™ä¸‹append()æ–¹æ³•åè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å‘åŸæ¥çš„åˆ—è¡¨ä¸­åŠ å…¥äº†ä¸€ä¸ªå…ƒç´ <br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]]</span><br></pre></td></tr></table></figure></p><p>ç•™ä¸‹extend()æ–¹æ³•åè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å°†åˆ—è¡¨bä¸­çš„å…ƒç´ æ‰©å±•åˆ°äº†åˆ—è¡¨aä¸­<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]</span><br></pre></td></tr></table></figure></p><h2 id="count-ç»Ÿè®¡æ•°æ®"><a href="#count-ç»Ÿè®¡æ•°æ®" class="headerlink" title="count ç»Ÿè®¡æ•°æ®"></a>count ç»Ÿè®¡æ•°æ®</h2><p>è®¡æ•°ï¼Œç»Ÿè®¡ä¸€ä¸ªåˆ—è¡¨åœ¨å¦ä¸€ä¸ªåˆ—è¡¨é‡Œå‡ºç°äº†å¤šå°‘æ¬¡<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.count(<span class="string">'l'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="string">'hello'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'test'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.count(<span class="string">'hello'</span>)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure></p><h2 id="index-ç´¢å¼•æŸ¥æ‰¾"><a href="#index-ç´¢å¼•æŸ¥æ‰¾" class="headerlink" title="index ç´¢å¼•æŸ¥æ‰¾"></a>index ç´¢å¼•æŸ¥æ‰¾</h2><p>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ï¼Œå¹¶è¿”å›ç´¢å¼•ä½ç½®ã€‚å¦‚æœè¿”å›0åˆ™æ˜¯åœ¨0çš„ä½ç½®ä¸Šæ‰¾åˆ°äº†ï¼Œè€Œä¸æ˜¯æ²¡æ‰¾åˆ°ã€‚æ²¡æ‰¾åˆ°çš„è¯ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.index(<span class="string">'l'</span>)<span class="comment">#è¿”å›ä½ç½®</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.index(<span class="string">'h'</span>)<span class="comment">#è¿”å›0çš„ä½ç½®</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.index(<span class="string">'x'</span>) <span class="comment">#æ‰¾ä¸åˆ°ï¼ŒæŠ›å‡ºå¼‚å¸¸äº†</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: substring <span class="keyword">not</span> found</span><br></pre></td></tr></table></figure></p><h2 id="insert-æ’å…¥æ•°æ®-å‡†"><a href="#insert-æ’å…¥æ•°æ®-å‡†" class="headerlink" title="insert æ’å…¥æ•°æ®-å‡†"></a>insert æ’å…¥æ•°æ®-å‡†</h2><p>å‘åˆ—è¡¨ä¸­æ’å…¥æ•°æ®ï¼Œå¯é€‰å‚æ•°æœ‰æ’å…¥ä½ç½®å’Œæ’å…¥å†…å®¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.insert(<span class="number">3</span>, <span class="number">666</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username<span class="comment">#å‘3çš„ä½ç½®ä¸Šæ’å…¥666</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">666</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure></p><h2 id="pop-å¼¹å‡ºæ•°æ®-å‡ºæ ˆ"><a href="#pop-å¼¹å‡ºæ•°æ®-å‡ºæ ˆ" class="headerlink" title="pop å¼¹å‡ºæ•°æ®-å‡ºæ ˆ"></a>pop å¼¹å‡ºæ•°æ®-å‡ºæ ˆ</h2><p>å°†åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªæ•°æ®å¼¹å‡ºæ¥ï¼Œè¿”å›ä¸”åˆ é™¤å®ƒã€‚  å¦‚æœçŸ¥é“æ•°æ®ç»“æ„ä¸­çš„æ ˆçš„è¯ï¼Œå°±æ˜ç™½äº†ï¼Œå¯ä»¥æ¯”å–»æˆ  å‡ºæ ˆ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.pop()<span class="comment">#å‡ºæ ˆ</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.pop(<span class="number">2</span>)<span class="comment">#é€‰æ‹©åˆ é™¤</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></p><h2 id="remove-åŒ¹é…åˆ é™¤"><a href="#remove-åŒ¹é…åˆ é™¤" class="headerlink" title="remove åŒ¹é…åˆ é™¤"></a>remove åŒ¹é…åˆ é™¤</h2><p>ç§»é™¤åŒ¹é…åˆ°çš„ç¬¬ä¸€é¡¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.remove(<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure></p><h2 id="sort-æ’åºæ–¹æ³•"><a href="#sort-æ’åºæ–¹æ³•" class="headerlink" title="sort æ’åºæ–¹æ³•"></a>sort æ’åºæ–¹æ³•</h2><p>å¯ä»¥é€šè¿‡Pythonå†…ç½®ç®—æ³•æ’åºï¼Œç”šè‡³è¿˜å¯ä»¥è‡ªå®šä¹‰å‚æ•°<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">65</span>, <span class="number">23</span>, <span class="number">54675</span>, <span class="number">8</span>, <span class="number">34</span>, <span class="number">5568</span>, <span class="number">345</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">23</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">345</span>, <span class="number">5568</span>, <span class="number">54675</span>]</span><br></pre></td></tr></table></figure></p><h2 id="sorted-æ’åºå‡½æ•°"><a href="#sorted-æ’åºå‡½æ•°" class="headerlink" title="sorted æ’åºå‡½æ•°"></a>sorted æ’åºå‡½æ•°</h2><p>ç±»ä¼¼sortï¼Œä¸è¿‡è¿™ä¸ªæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">234</span>, <span class="number">3465</span>, <span class="number">234</span>, <span class="number">4657</span>, <span class="number">5</span>, <span class="number">65</span>, <span class="number">23</span>, <span class="number">54675</span>, <span class="number">8</span>, <span class="number">34</span>, <span class="number">5568</span>, <span class="number">345</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(username)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">23</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">234</span>, <span class="number">234</span>, <span class="number">345</span>, <span class="number">3465</span>, <span class="number">4657</span>, <span class="number">5568</span>, <span class="number">54675</span>]</span><br></pre></td></tr></table></figure></p><h2 id="list-reversed-x-åå‘æ’åº"><a href="#list-reversed-x-åå‘æ’åº" class="headerlink" title="list(reversed(x)) åå‘æ’åº"></a>list(reversed(x)) åå‘æ’åº</h2><p>é€†å‘<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">234</span>, <span class="number">3465</span>, <span class="number">234</span>, <span class="number">4657</span>, <span class="number">5</span>, <span class="number">65</span>, <span class="number">23</span>, <span class="number">54675</span>, <span class="number">8</span>, <span class="number">34</span>, <span class="number">5568</span>, <span class="number">345</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = sorted(username)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> username</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">23</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">234</span>, <span class="number">234</span>, <span class="number">345</span>, <span class="number">3465</span>, <span class="number">4657</span>, <span class="number">5568</span>, <span class="number">54675</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(username))</span><br><span class="line">[<span class="number">54675</span>, <span class="number">5568</span>, <span class="number">4657</span>, <span class="number">3465</span>, <span class="number">345</span>, <span class="number">234</span>, <span class="number">234</span>, <span class="number">65</span>, <span class="number">34</span>, <span class="number">23</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure></p><h1 id="0X0A-å…ƒç»„ç®€ä»‹"><a href="#0X0A-å…ƒç»„ç®€ä»‹" class="headerlink" title="0X0A å…ƒç»„ç®€ä»‹"></a>0X0A å…ƒç»„ç®€ä»‹</h1><ul><li>å…ƒç»„ä¸€èˆ¬ç”¨æ‹¬å·è¡¨ç¤º</li><li>å…ƒç»„å’Œåˆ—è¡¨ç›¸æ¯”ï¼Œåˆ—è¡¨å¯ä»¥ä¿®æ”¹è€Œå…ƒç»„ä¸èƒ½ä¿®æ”¹<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>username = (<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>, <span class="string">','</span>, <span class="string">'w'</span>, <span class="string">'o'</span>, <span class="string">'r'</span>, <span class="string">'l'</span>, <span class="string">'d'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>password = (<span class="string">'x'</span>, ) <span class="comment">#åˆ›å»ºä¸€ä¸ªåªåŒ…å«ä¸€ä¸ªæ•°æ®çš„å…ƒç»„</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Data Structure </tag>
            
            <tag> List </tag>
            
            <tag> Tuple </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¹‹å­—ç¬¦ä¸²</title>
      <link href="/2016/09/05/python-str/"/>
      <url>/2016/09/05/python-str/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å¦‚ä½•å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²"><a href="#0X00-å¦‚ä½•å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²" class="headerlink" title="0X00 å¦‚ä½•å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²"></a>0X00 å¦‚ä½•å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²</h1><p><strong> Pythonä¸éœ€è¦å®šä¹‰ </strong> å…¶å®å°±æ˜¯è¿™æ ·çš„ã€‚ã€‚åœ¨Pythonä¸­çš„å­—ç¬¦ä¸²é€šå¸¸è¿™ä¹ˆå†™<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">'hello,world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">"It's work"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3 = <span class="string">""" Jack:"oh shit" """</span></span><br></pre></td></tr></table></figure></p><p>str1 çš„å£°æ˜æ–¹å¼æ˜¯æœ€æ™®é€šçš„å£°æ˜æ–¹å¼<br>str2 çš„å£°æ˜æ–¹å¼å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­å­˜åœ¨å•å¼•å·â€˜<br>str3 çš„å£°æ˜æ–¹å¼å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­å­˜åœ¨åŒå¼•å· â€œ è¿˜èƒ½åœ¨å­—ç¬¦ä¸²ä¸­æ¢è¡Œ</p><h1 id="0X01-æ‹¼æ¥å­—ç¬¦ä¸²"><a href="#0X01-æ‹¼æ¥å­—ç¬¦ä¸²" class="headerlink" title="0X01 æ‹¼æ¥å­—ç¬¦ä¸²"></a>0X01 æ‹¼æ¥å­—ç¬¦ä¸²</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"hello"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">","</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3 = <span class="string">"world"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str1 + str2 + str3</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<br>è¿æ¥çš„æ—¶å€™åŠ å·å·¦å³éƒ½è¦æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²åŠ æ•°å­—å°±ä¸è¡Œäº†ã€‚é™¤éæŠŠæ•°å­—è½¬æˆå­—ç¬¦ä¸²æ ¼å¼</p><a id="more"></a><h1 id="0X02-è¾“å…¥å­—ç¬¦ä¸²"><a href="#0X02-è¾“å…¥å­—ç¬¦ä¸²" class="headerlink" title="0X02 è¾“å…¥å­—ç¬¦ä¸²"></a>0X02 è¾“å…¥å­—ç¬¦ä¸²</h1><p>æ ‡å‡†è¾“å…¥å°±æ˜¯ç›´æ¥æŠŠä½ è¾“å…¥çš„ä¸œè¥¿å†™åˆ°ä»£ç é‡Œï¼Œç”šè‡³å¯ä»¥ç”¨å˜é‡å<br>åŸå§‹è¾“å…¥å°±æ˜¯ç›´æ¥è¾“å…¥å­—ç¬¦ä¸²ï¼Œçº¯å­—ç¬¦ä¸²<br>å…·ä½“æƒ…å†µå¯ä»¥ä»ä¸‹é¢çš„Demoä¸­çœ‹åˆ°æ•ˆæœ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>hello = <span class="string">"hello,world"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = input(<span class="string">"what's your name:"</span>)   <span class="comment">#è·å–æ ‡å‡†è¾“å…¥</span></span><br><span class="line">hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = raw_input(<span class="string">"what's your name:"</span>)<span class="comment">#è·å–åŸå§‹è¾“å…¥</span></span><br><span class="line"><span class="string">"hello"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str1</span><br><span class="line">hello,world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">hello</span><br></pre></td></tr></table></figure></p><h1 id="0X03-å­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#0X03-å­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="0X03 å­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>0X03 å­—ç¬¦ä¸²æ ¼å¼åŒ–</h1><p>å­¦è¿‡Cçš„èƒ½è¿…é€Ÿçš„ç†è§£Pythoné‡Œçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼Œæ²¡å­¦è¿‡Cçš„å¯ä»¥å¿«é€Ÿçš„ç†è§£Pythoné‡Œçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–  +_+<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> string <span class="keyword">import</span> Template</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = Template(<span class="string">"1---$a  2---$b   3---$c   4---$$"</span>)<span class="comment"># $a $b $c éƒ½æ˜¯å­—ç¬¦ä¸²å ä½ç¬¦ï¼Œå…ˆå†™å¥½åèµ‹å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text.substitute(a=<span class="string">"hello,"</span>, b=<span class="string">"world"</span>, c=<span class="string">"wow"</span>)</span><br><span class="line"><span class="string">'1---hello,  2---world   3---wow   4---$'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  %s  æ˜¯å­—ç¬¦ä¸²å ä½ç¬¦ï¼Œå°†åé¢çš„å­—ç¬¦ä¸²åŠ åˆ°å‰é¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"hello, %s"</span> % (<span class="string">"world"</span>)</span><br><span class="line">hello, world</span><br><span class="line"></span><br><span class="line"><span class="comment"># %15s  æ˜¯å°†å­—ç¬¦ä¸²å‘å‰æ‰©å……æ‰“15ä½</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"hello, %15s"</span> % (<span class="string">"world"</span>)</span><br><span class="line">hello,           world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"%15s, world"</span> % (<span class="string">"hello"</span>)</span><br><span class="line">    hello, world</span><br><span class="line"></span><br><span class="line"><span class="comment"># %-15s æ˜¯å°†å­—ç¬¦ä¸²å‘åæ‰©å……åˆ°15ä½</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">"%-15s, world"</span> % (<span class="string">"hello"</span>)</span><br><span class="line">hello          , world</span><br></pre></td></tr></table></figure></p><h1 id="0X04-å­—ç¬¦ä¸²å¤„ç†å‡½æ•°"><a href="#0X04-å­—ç¬¦ä¸²å¤„ç†å‡½æ•°" class="headerlink" title="0X04 å­—ç¬¦ä¸²å¤„ç†å‡½æ•°"></a>0X04 å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</h1><h2 id="find-å­—ç¬¦ä¸²æŸ¥æ‰¾"><a href="#find-å­—ç¬¦ä¸²æŸ¥æ‰¾" class="headerlink" title="find å­—ç¬¦ä¸²æŸ¥æ‰¾"></a>find å­—ç¬¦ä¸²æŸ¥æ‰¾</h2><p>ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›æœ€å·¦ç«¯ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°å°±è¿”å› -1<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"hello,world"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str.find(<span class="string">","</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str = <span class="string">"hello,hello,world,world"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str.find(<span class="string">","</span>, <span class="number">8</span>, <span class="number">12</span>)</span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure></p><blockquote><p>å¦‚æœfindå‡½æ•°è¿”å›äº†0ï¼Œå¹¶ä¸æ˜¯æ²¡æ‰¾åˆ°ï¼Œè€Œæ˜¯åœ¨0çš„ä½ç½®æ‰¾åˆ°äº†ã€‚æ¯•ç«Ÿç¨‹åºå‘˜çš„ä¸–ç•Œä»æ¥éƒ½æ˜¯ä»0å¼€å§‹æ•°æ•°çš„</p></blockquote><h2 id="join-è¿æ¥"><a href="#join-è¿æ¥" class="headerlink" title="join è¿æ¥"></a>join è¿æ¥</h2><p>è¿æ¥åºåˆ—ä¸­çš„å…ƒç´ <br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = [<span class="string">'hello'</span>, <span class="string">'world'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">"---"</span>.join(str1)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">hello---world</span><br></pre></td></tr></table></figure></p><blockquote><p>æ³¨æ„è¿™é‡Œæ˜¯  str.join(list)  è€Œä¸æ˜¯  list.join(str)</p></blockquote><h2 id="lower-æˆ‘è¦å°å†™"><a href="#lower-æˆ‘è¦å°å†™" class="headerlink" title="lower æˆ‘è¦å°å†™"></a>lower æˆ‘è¦å°å†™</h2><p>è¿”å›å­—ç¬¦ä¸²çš„å…¨å°å†™ç‰ˆ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"HELLO,WORLD"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = str1.lower()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure></p><h2 id="replace-æŸ¥æ‰¾å¹¶æ›¿æ¢"><a href="#replace-æŸ¥æ‰¾å¹¶æ›¿æ¢" class="headerlink" title="replace æŸ¥æ‰¾å¹¶æ›¿æ¢"></a>replace æŸ¥æ‰¾å¹¶æ›¿æ¢</h2><p>æŸ¥æ‰¾å¹¶æ›¿æ¢å…¨éƒ¨<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"my world, my house, my phone"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = str1.replace(<span class="string">"my"</span>, <span class="string">"your"</span>)<span class="comment">#æˆ‘å°±è¿™ä¹ˆæŠŠæ‰€æœ‰ä¸œè¥¿è¿‡æˆ·ç»™äº†ä½ +_+</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">your world, your house, your phone</span><br></pre></td></tr></table></figure></p><h2 id="split-åˆ†å‰²"><a href="#split-åˆ†å‰²" class="headerlink" title="split åˆ†å‰²"></a>split åˆ†å‰²</h2><p>åˆ†å‰²å­—ç¬¦ä¸²<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"hello,world"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = str1.split(<span class="string">","</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">[<span class="string">'hello'</span>, <span class="string">'world'</span>]<span class="comment">#è¿”å›äº†ä¸€ä¸ªåˆ—è¡¨</span></span><br></pre></td></tr></table></figure></p><h2 id="strip-æ¸…ç†å­—ç¬¦ä¸²"><a href="#strip-æ¸…ç†å­—ç¬¦ä¸²" class="headerlink" title="strip æ¸…ç†å­—ç¬¦ä¸²"></a>strip æ¸…ç†å­—ç¬¦ä¸²</h2><p>å»é™¤ä¸¤ä¾§çš„ä¸œè¥¿<br>stripé»˜è®¤å»é™¤ä¸¤ä¾§çš„ç©ºæ ¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åŠ å‚æ•°<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;str1 = <span class="string">"  hello,world  "</span></span><br><span class="line">&gt;&gt;&gt;str2 = str1.strip()<span class="comment">#é»˜è®¤å»é™¤ç©ºæ ¼</span></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">print</span> str2</span><br><span class="line">hello,world</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">"aaahello,worldaaa"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = str1.srtip(<span class="string">"a"</span>)  <span class="comment">#åŠ äº†å‚æ•°å°±åˆ é™¤ä¸¤ä¾§çš„å‚æ•°é‡Œçš„å†…å®¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> str2</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Shadowsocks å¦‚ä½•ç§‘å­¦ä¸Šç½‘ æ­æ¢¯å­ ç®€æ˜æ•™ç¨‹</title>
      <link href="/2016/07/23/shadowsocks-build/"/>
      <url>/2016/07/23/shadowsocks-build/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-å‡†å¤‡å·¥ä½œ"><a href="#0X00-å‡†å¤‡å·¥ä½œ" class="headerlink" title="0X00 å‡†å¤‡å·¥ä½œ"></a>0X00 å‡†å¤‡å·¥ä½œ</h1><p>1.ä¸€å°æµ·å¤–æˆ–è€…é¦™æ¸¯çš„æœåŠ¡å™¨/è™šæ‹Ÿä¸»æœºï¼ˆåé¢ç»Ÿç§°VPSï¼‰ï¼Œè¦æœ‰ç‹¬ç«‹IP<br>2.VPSçš„å¸¦å®½å’Œæµé‡ä¸èƒ½å¤ªå°<br>3.ä¸€ä¸ªè¿æ¥VPSçš„è½¯ä»¶ï¼ŒLInux/Macå¯ä»¥ç”¨ç»ˆç«¯ï¼ŒWindowsç”¨æˆ·å¯ä»¥ç”¨XShellæˆ–è€…putty<br>4.VPSè¦ä½¿ç”¨Linuxç³»ç»Ÿï¼ŒDebian/Ubuntu/CentOSéƒ½è¡Œ</p><blockquote><p>å¼€å·¥ä¹‹å‰æœ€å¥½æœ‰Linuxé€‚ç”¨åŸºç¡€<br>æ²¡æœ‰VPSçš„æ¨èä¸€ä¸ªè´­ä¹°åœ°å€ï¼Œä¾¿å®œå¥½ç”¨<span class="exturl" data-url="aHR0cDovL2JhbndhZ29uZy5jbi9nb25nbHVlLmh0bWw=" title="http://banwagong.cn/gonglue.html">banwagong<i class="fa fa-external-link"></i></span><br>è¿™ä¸ªç½‘ç«™ä¸æ˜¯å®˜ç½‘ï¼Œä½†æ˜¯èµ·åˆ°äº†ç±»ä¼¼ä¸­æ–‡å®˜ç½‘çš„ä½œç”¨ï¼Œå¯ä»¥æŒ‰ç…§é‡Œé¢çš„æ¨èå’Œæ•™ç¨‹å»è´­ä¹°é€‚åˆè‡ªå·±çš„VPS<br>VPSä¹°å›æ¥ä¸æ­¢å¯ä»¥å¹²è¿™ä¸ªã€é…ç½®é«˜ä¸€ç‚¹çš„è¯è¿˜å¯ä»¥æ­å»ºä¸€ä¸ªç‹¬ç«‹åšå®¢å’Œä¸€äº›å…¶ä»–çš„æœåŠ¡</p></blockquote><h1 id="0X01-ç®€è¿°å·¥ä½œåŸç†"><a href="#0X01-ç®€è¿°å·¥ä½œåŸç†" class="headerlink" title="0X01 ç®€è¿°å·¥ä½œåŸç†"></a>0X01 ç®€è¿°å·¥ä½œåŸç†</h1><p><strong> ä¸é€šè¿‡ä¼Ÿå¤§é˜²ç«å¢™æ—¶ </strong> æˆ‘ä»¬è®¿é—®æŸç½‘ç«™ï¼Œæµé‡ä»æˆ‘ä»¬çš„æœºå™¨ä¸€è·¯è·‘åˆ°ç½‘ç«™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨å“åº”æ•°æ®å†ä¸€è·¯è·‘å›æ¥ã€‚<br>ç°åœ¨ <strong> æœ‰äº†ä¼Ÿå¤§çš„é˜²ç«å¢™ </strong> ä¸è®©æˆ‘ä»¬å’ŒæŸäº›ç½‘ç«™äº¤æµäº†ï¼Œæˆ‘ä»¬å¯ä»¥æ­ä¸€ä¸ª <strong> æ¢¯å­ </strong> ï¼Œè®©æµé‡é€šè¿‡æ¢¯å­ã€‚å…¶å®ç”¨ <strong> é•œå­ </strong> æ¯”å–»ä¼šæ›´å¥½ä¸€ç‚¹ã€‚<br><strong> æœ‰äº†é•œå­ </strong> ä¹‹åï¼Œæˆ‘ä»¬çš„æµé‡ä¸€è·¯è·‘åˆ°é•œå­é‚£é‡Œï¼Œé•œå­æ›¿æˆ‘ä»¬å°†æµé‡ä¸€è·¯è·‘åˆ°ç½‘ç«™æœåŠ¡å™¨ï¼Œç„¶åç½‘ç«™æœåŠ¡å™¨å°†æ•°æ®ä¸€è·¯å‘é€åˆ°é•œå­ï¼Œé•œå­å†è½¬å‘ç»™æˆ‘ä»¬ã€‚<br>æ‰€ä»¥é€ æˆä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š<br>1.ä½ ç»ˆç«¯ï¼ˆç”µè„‘ã€æ‰‹æœºç­‰è®¾å¤‡ï¼‰äº§ç”Ÿçš„æ•°æ®æµé‡ï¼ˆä»£ç†æµé‡ï¼‰éƒ½è¦ä»æ¢¯å­é‚£é‡Œç»è¿‡ï¼Œæ‰€ä»¥æ¢¯å­ä¹Ÿè¦èµ°ä¸€ä»½æµé‡ã€‚<br>2.ä½ çš„ç½‘é€ŸåŒæ—¶å–å†³äº ä½ çš„é€Ÿåº¦ã€VPSçš„é€Ÿåº¦ã€ç½‘ç«™æœåŠ¡å™¨çš„é€Ÿåº¦<br>3.ä½ çš„å»¶è¿ŸåŒæ—¶å–å†³äº ä½ åˆ°VPSçš„å»¶è¿Ÿï¼ŒVPSåˆ°ç½‘ç«™æœåŠ¡å™¨çš„å»¶è¿Ÿ</p><a id="more"></a><h1 id="0X02-å®‰è£…è½¯ä»¶"><a href="#0X02-å®‰è£…è½¯ä»¶" class="headerlink" title="0X02 å®‰è£…è½¯ä»¶"></a>0X02 å®‰è£…è½¯ä»¶</h1><p>Debian/Ubuntu<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update<span class="comment">#æ›´æ–°ç³»ç»Ÿ</span></span><br><span class="line">sudo apt-get install python-pip <span class="comment">#å®‰è£…Python-pip</span></span><br><span class="line">sudo pip install shadowsocks <span class="comment">#å®‰è£…shadowsocks</span></span><br></pre></td></tr></table></figure></p><p>CentOS<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update<span class="comment">#æ›´æ–°ç³»ç»Ÿ</span></span><br><span class="line">sudo yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">sudo pip install shadowsocks<span class="comment">#å®‰è£…shadowsocks</span></span><br></pre></td></tr></table></figure></p><h1 id="0X03-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#0X03-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="0X03 ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>0X03 ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p>é…ç½®æ–‡ä»¶é»˜è®¤ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ç›´æ¥åˆ›å»ºä¸€ä¸ªå°±è¡Œ<code>vim /etc/shadowsocks.json</code><br>è¿™é‡Œé…ç½®æ–‡ä»¶ä½¿ç”¨Jsonè§£æï¼Œçœ‹èµ·æ¥å¾ˆæ¸…æ™°ï¼Œä¾¿äºè¯†åˆ«ä¿®æ”¹<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"my_server_ip"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"mypassword"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>server ä¿®æ”¹æˆä½ VPSçš„å¤–ç½‘ip<br>server_port æ˜¯æœåŠ¡ç«¯ç”¨çš„ç«¯å£ï¼Œæ²¡æœ‰ç‰¹æ®Šéœ€è¦å°±ä¸ç”¨æ”¹äº†<br>local_address æœ¬åœ°åœ°å€ï¼Œä½¿ç”¨é»˜è®¤çš„127.0.0.1å°±è¡Œ<br>local_port å®¢æˆ·æœºç«¯å£ï¼Œä½¿ç”¨é»˜è®¤çš„1080å°±è¡Œ<br>password è®¾ç½®å¯†ç <br>timeout è¶…æ—¶æ—¶é—´ï¼Œä½¿ç”¨é»˜è®¤å³å¯<br>method åŠ å¯†ç®—æ³•ï¼Œä½¿ç”¨é»˜è®¤aes-256-cfbå³å¯ï¼Œæ”¹ç”¨rc4-md5ä¹Ÿè¡Œï¼Œä¸è¿‡å®¢æˆ·ç«¯ä¹Ÿè¦è·Ÿç€æ”¹<br>fast_open é»˜è®¤å³å¯</p></blockquote><h1 id="0X04-å¦‚ä½•å¼€å¯å…³é—­æœåŠ¡"><a href="#0X04-å¦‚ä½•å¼€å¯å…³é—­æœåŠ¡" class="headerlink" title="0X04 å¦‚ä½•å¼€å¯å…³é—­æœåŠ¡"></a>0X04 å¦‚ä½•å¼€å¯å…³é—­æœåŠ¡</h1><p>è¿™æ ·å¼€å¯æœåŠ¡<code>ssserver -c /etc/shadowsocks.json -d start</code><br>è¿™æ ·å…³é—­æœåŠ¡<code>ssserver -c /etc/shadowsocks.json -d stop</code><br>è¿™æ ·é‡å¯æœåŠ¡<code>å…³äº†å†å¼€å°±æ˜¯é‡å¯+_+</code></p><h3 id="0X04-ä¸‹è½½å®¢æˆ·ç«¯"><a href="#0X04-ä¸‹è½½å®¢æˆ·ç«¯" class="headerlink" title="0X04 ä¸‹è½½å®¢æˆ·ç«¯"></a>0X04 ä¸‹è½½å®¢æˆ·ç«¯</h3><p><span class="exturl" data-url="aHR0cDovL283Ym43dnFwdC5ia3QuY2xvdWRkbi5jb20vJTJGZG93bmxvYWQlMkZzaGFkb3dzb2Nrcy13aW5kb3dzLjd6" title="http://o7bn7vqpt.bkt.clouddn.com/%2Fdownload%2Fshadowsocks-windows.7z">ç‚¹å‡»ä¸‹è½½WIndowsç¯å¢ƒä¸‹çš„Shadowsockså®¢æˆ·ç«¯<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cDovL283Ym43dnFwdC5ia3QuY2xvdWRkbi5jb20vJTJGZG93bmxvYWQlMkZzaGFkb3dzb2Nrcy1hbmRyb2lkLjd6" title="http://o7bn7vqpt.bkt.clouddn.com/%2Fdownload%2Fshadowsocks-android.7z">ç‚¹å‡»ä¸‹è½½Androidç¯å¢ƒä¸‹çš„Shadowsockså®¢æˆ·ç«¯<i class="fa fa-external-link"></i></span><br>IOSç‰ˆæœ¬çš„å®¢æˆ·ç«¯åœ¨AppStoreé‡Œæœ‰ï¼Œä¸è¿‡è¦æ”¶è´¹ã€‚ä¹Ÿæœ‰å…è´¹çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºä¸ç”¨IOSæ‰€ä»¥ä¸æ¸…æ¥šï¼Œè‡ªå·±å»æ‰¾æ‰¾å§ã€‚</p><h1 id="0X05-ä¼˜åŒ–é€Ÿåº¦"><a href="#0X05-ä¼˜åŒ–é€Ÿåº¦" class="headerlink" title="0X05 ä¼˜åŒ–é€Ÿåº¦"></a>0X05 ä¼˜åŒ–é€Ÿåº¦</h1><p><strong>æ³¨æ„ï¼š</strong><br>1.å‰ææ˜¯ä½ çš„VPSé™åˆ¶æµé‡ä½†ä¸é™åˆ¶å¸¦å®½ä¸”ä½ æœ‰è¶³å¤Ÿçš„æµé‡<br>2.æ‰€è°“é€Ÿåº¦ä¼˜åŒ–åªé’ˆå¯¹å¤§æ–‡ä»¶ä¸‹è½½å’Œåœ¨çº¿è§†é¢‘æœ‰æ˜æ˜¾æ•ˆæœ<br>3.é€Ÿåº¦ä¼˜åŒ–ä¹‹åä¼šåŒå€æµé‡å‘é€ï¼Œæ‰€ä»¥åªæœ‰æµé‡å……è¶³çš„ç”¨æˆ·é€‚ç”¨</p><p>Debian/Ubuntu:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://raw.githubusercontent.com/tennfy/debian_netspeeder_tennfy/master/debian_netspeeder_tennfy.sh</span><br><span class="line">chmod a+x debian_netspeeder_tennfy.sh</span><br><span class="line">bash debian_netspeeder_tennfy.sh</span><br></pre></td></tr></table></figure></p><p>CentOS:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://gist.github.com/LazyZhu/dc3f2f84c336a08fd6a5/raw/d8aa4bcf955409e28a262ccf52921a65fe49da99/net_speeder_lazyinstall.sh</span><br><span class="line">sudo sh net_speeder_lazyinstall.sh</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨åŠ é€Ÿ<code>nohup /usr/local/net_speeder/net_speeder venet0 &quot;ip&quot; &gt;/dev/null 2&gt;&amp;1 &amp;</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> VPS </tag>
            
            <tag> Proxy </tag>
            
            <tag> Shadowsocks </tag>
            
            <tag> GFW </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä½¿ç”¨MD5å’ŒBASE64</title>
      <link href="/2016/07/17/java-md5-base64/"/>
      <url>/2016/07/17/java-md5-base64/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ç®€ä»‹"><a href="#0X00-ç®€ä»‹" class="headerlink" title="0X00 ç®€ä»‹"></a>0X00 ç®€ä»‹</h1><p>æœ€è¿‘ç»å¸¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨åˆ°BASE64ç¼–ç å’ŒMD5ï¼Œæ‰€ä»¥æŠŠç¬”è®°è´´åœ¨è¿™é‡Œæ–¹ä¾¿è‡ªå·±æŸ¥æ‰¾ã€‚<br>åœ¨é…ç½®postfixé‚®ä»¶æœåŠ¡å™¨çš„æ—¶å€™å‘ç°ï¼Œæ”¶åˆ°çš„é‚®ä»¶æ­£æ–‡éƒ½æ˜¯ä½¿ç”¨BASE64ç¼–ç è¿‡çš„ï¼Œæ‰€ä»¥æ‰äº†è§£äº†ä¸€ä¸‹è¿™ç§ç¼–ç ã€‚<br>MD5ä¸ç®—åŠ å¯†ç®—æ³•ï¼Œä½†æ˜¯å¯ä»¥ç”¨ä½œæ‘˜è¦è®¡ç®—ã€‚</p><a id="more"></a><h1 id="0X01-BASE64ç¼–ç "><a href="#0X01-BASE64ç¼–ç " class="headerlink" title="0X01 BASE64ç¼–ç "></a>0X01 BASE64ç¼–ç </h1><blockquote><p>Base64æ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ã€‚ç”±äº2çš„6æ¬¡æ–¹ç­‰äº64ï¼Œæ‰€ä»¥æ¯6ä¸ªæ¯”ç‰¹ä¸ºä¸€ä¸ªå•å…ƒï¼Œå¯¹åº”æŸä¸ªå¯æ‰“å°å­—ç¬¦ã€‚ä¸‰ä¸ªå­—èŠ‚æœ‰24ä¸ªæ¯”ç‰¹ï¼Œå¯¹åº”äº4ä¸ªBase64å•å…ƒï¼Œå³3ä¸ªå­—èŠ‚éœ€è¦ç”¨4ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºã€‚å®ƒå¯ç”¨æ¥ä½œä¸ºç”µå­é‚®ä»¶çš„ä¼ è¾“ç¼–ç ã€‚åœ¨Base64ä¸­çš„å¯æ‰“å°å­—ç¬¦åŒ…æ‹¬å­—æ¯A-Zã€a-zã€æ•°å­—0-9ï¼Œè¿™æ ·å…±æœ‰62ä¸ªå­—ç¬¦ï¼Œæ­¤å¤–ä¸¤ä¸ªå¯æ‰“å°ç¬¦å·åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­è€Œä¸åŒã€‚ä¸€äº›å¦‚uuencodeçš„å…¶ä»–ç¼–ç æ–¹æ³•ï¼Œå’Œä¹‹åbinhexçš„ç‰ˆæœ¬ä½¿ç”¨ä¸åŒçš„64å­—ç¬¦é›†æ¥ä»£è¡¨6ä¸ªäºŒè¿›åˆ¶æ•°å­—ï¼Œä½†æ˜¯å®ƒä»¬ä¸å«Base64ã€‚  â€”â€”â€”â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>ä»£ç éœ€è¦ <code>import sun.misc.BASE64Encoder;</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">encodeing</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line"><span class="keyword">byte</span>[] b = <span class="keyword">null</span>;</span><br><span class="line">    String s = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        b = str.getBytes(<span class="string">"utf-8"</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (b != <span class="keyword">null</span>)&#123;</span><br><span class="line">        s = <span class="keyword">new</span> BASE64Encoder().encode(b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="0X02-BASE64è§£ç "><a href="#0X02-BASE64è§£ç " class="headerlink" title="0X02 BASE64è§£ç "></a>0X02 BASE64è§£ç </h1><p>ä»£ç éœ€è¦<code>import sun.misc.BASE64Decoder;</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">decoding</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">null</span>;</span><br><span class="line">        String result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (str != <span class="keyword">null</span>)&#123;</span><br><span class="line">            BASE64Decoder decoder = <span class="keyword">new</span> BASE64Decoder();</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                b = decoder.decodeBuffer(str);</span><br><span class="line">                result = <span class="keyword">new</span> String(b, <span class="string">"utf-8"</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h1 id="0X03-MD5"><a href="#0X03-MD5" class="headerlink" title="0X03 MD5"></a>0X03 MD5</h1><blockquote><p>MD5æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ˆè‹±è¯­ï¼šMD5 Message-Digest Algorithmï¼‰ï¼Œä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§ç”Ÿå‡ºä¸€ä¸ª128ä½ï¼ˆ16å­—èŠ‚ï¼‰çš„æ•£åˆ—å€¼ï¼ˆhash valueï¼‰ï¼Œç”¨äºç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ã€‚MD5ç”±ç½—çº³å¾·Â·æç»´æ–¯ç‰¹è®¾è®¡ï¼Œäº1992å¹´å…¬å¼€ï¼Œç”¨ä»¥æ›¿æ¢MD4ç®—æ³•ã€‚è¿™å¥—ç®—æ³•çš„ç¨‹åºåœ¨ RFC 1321 ä¸­è¢«åŠ ä»¥è§„èŒƒã€‚<br>å°†æ•°æ®ï¼ˆå¦‚ä¸€æ®µæ–‡å­—ï¼‰è¿ç®—å˜ä¸ºå¦ä¸€å›ºå®šé•¿åº¦å€¼ï¼Œæ˜¯æ•£åˆ—ç®—æ³•çš„åŸºç¡€åŸç†ã€‚<br>1996å¹´åè¢«è¯å®å­˜åœ¨å¼±ç‚¹ï¼Œå¯ä»¥è¢«åŠ ä»¥ç ´è§£ï¼Œå¯¹äºéœ€è¦é«˜åº¦å®‰å…¨æ€§çš„æ•°æ®ï¼Œä¸“å®¶ä¸€èˆ¬å»ºè®®æ”¹ç”¨å…¶ä»–ç®—æ³•ï¼Œå¦‚SHA-1ã€‚2004å¹´ï¼Œè¯å®MD5ç®—æ³•æ— æ³•é˜²æ­¢ç¢°æ’ï¼Œå› æ­¤æ— æ³•é€‚ç”¨äºå®‰å…¨æ€§è®¤è¯ï¼Œå¦‚SSLå…¬å¼€å¯†é’¥è®¤è¯æˆ–æ˜¯æ•°å­—ç­¾åç­‰ç”¨é€”ã€‚     â€”â€”â€”â€“ç»´åŸºç™¾ç§‘</p></blockquote><p>è™½è¯´MD5å·²ç»è¢«è¯æ˜ä¸å®‰å…¨ï¼Œä¸è¿‡ç”¨ä½œå®éªŒæ€§çš„ç™»é™†éªŒè¯è¿˜æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ï¼ˆå…¶å®å¥½å¤šå¥½å¤šç½‘ç«™çš„å¯†ç éƒ½æ˜¯MD5çš„ï¼Œä¸ä¿¡å¯ä»¥å»ç¤¾å·¥åº“é‡Œçœ‹çœ‹ï¼‰</p><p>ä»£ç éœ€è¦<code>import java.security.MessageDigest;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getMd5</span><span class="params">(String text)</span></span>&#123;</span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           MessageDigest md = MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">           md.update(text.getBytes());</span><br><span class="line">           <span class="keyword">byte</span> b[] = md.digest();</span><br><span class="line">           <span class="keyword">int</span> i;</span><br><span class="line">           StringBuffer buf = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">           <span class="keyword">for</span> (<span class="keyword">int</span> offset = <span class="number">0</span>; offset &lt; b.length; offset++)&#123;</span><br><span class="line">               i = b[offset];</span><br><span class="line">               <span class="keyword">if</span> (i &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                   i += <span class="number">256</span>;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (i &lt; <span class="number">16</span>)&#123;</span><br><span class="line">                   buf.append(<span class="string">"0"</span>);</span><br><span class="line">               &#125;</span><br><span class="line">               buf.append(Integer.toHexString(i));</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">return</span> buf.toString();                      <span class="comment">// 32ä½</span></span><br><span class="line">           <span class="comment">//return buf.toString().substring(8, 24);   // 16ä½</span></span><br><span class="line">       &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> MD5 </tag>
            
            <tag> BASE64 </tag>
            
            <tag> Encryption </tag>
            
            <tag> Decryption </tag>
            
            <tag> Encoding </tag>
            
            <tag> Decoding </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NFS ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ å®‰è£… é…ç½® æŒ‚è½½ å¸è½½</title>
      <link href="/2016/06/12/linux-nfs/"/>
      <url>/2016/06/12/linux-nfs/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-NFSç®€ä»‹"><a href="#0X00-NFSç®€ä»‹" class="headerlink" title="0X00 NFSç®€ä»‹"></a>0X00 NFSç®€ä»‹</h1><p>NFSçš„å…¨ç§°æ˜¯Net-File-Systemä¹Ÿå°±æ˜¯ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚è¿™å’ŒSambaä¸FTPä¸åŒï¼ŒFTPçš„ä¸»è¦ç”¨é€”æ˜¯ç”¨æ¥ä¸Šä¼ å’Œä¸‹è½½æ–‡ä»¶ï¼ŒSambaçš„ä¸»è¦åŠŸèƒ½æ˜¯å…±äº«æ–‡ä»¶ï¼Œè€ŒNFSçš„ä¸»è¦åŠŸèƒ½æ˜¯ç”¨ä½œæ–‡ä»¶ç³»ç»Ÿã€‚ä¹Ÿå°±æ˜¯è¯´å’ŒNTFSã€FAT32ã€EXT4ç­‰æ˜¯ç±»ä¼¼çš„æ€§è´¨ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªNFSå½“åšä¸€ä¸ªç£ç›˜åˆ†åŒºæŒ‚è½½åˆ°è‡ªå·±çš„æ“ä½œç³»ç»Ÿä¸Šï¼Œåƒæ“ä½œè‡ªå·±çš„åˆ†åŒºä¸€æ ·ï¼Œç”šè‡³å¯ä»¥ä»NFSå¯åŠ¨æ“ä½œç³»ç»Ÿã€‚</p><blockquote><p>å®éªŒç¯å¢ƒï¼šä¸¤å°è™šæ‹ŸæœºCentOS7.x<br>åŒå¤„åœ¨ä¸€ä¸ªå†…ç½‘ç¯å¢ƒä¸‹</p></blockquote><a id="more"></a><h1 id="0X01-å®‰è£…NFSè½¯ä»¶å’ŒæœåŠ¡"><a href="#0X01-å®‰è£…NFSè½¯ä»¶å’ŒæœåŠ¡" class="headerlink" title="0X01 å®‰è£…NFSè½¯ä»¶å’ŒæœåŠ¡"></a>0X01 å®‰è£…NFSè½¯ä»¶å’ŒæœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…è½¯ä»¶</span></span><br><span class="line">yum install rpcbind</span><br><span class="line">yum install nfs-utils</span><br></pre></td></tr></table></figure><h1 id="0X02-åˆ›å»ºæµ‹è¯•ç›®å½•å¹¶ä¿®æ”¹æƒé™"><a href="#0X02-åˆ›å»ºæµ‹è¯•ç›®å½•å¹¶ä¿®æ”¹æƒé™" class="headerlink" title="0X02 åˆ›å»ºæµ‹è¯•ç›®å½•å¹¶ä¿®æ”¹æƒé™"></a>0X02 åˆ›å»ºæµ‹è¯•ç›®å½•å¹¶ä¿®æ”¹æƒé™</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæµ‹è¯•ç”¨çš„ç›®å½•</span></span><br><span class="line">mkdir /home/share</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæµ‹è¯•ç”¨çš„æ–‡ä»¶(è®©æ–‡ä»¶é‡Œæœ‰å†…å®¹ï¼Œæ–¹ä¾¿åæ¥åˆ¤æ–­æ˜¯å¦æ­å»ºæˆåŠŸ)</span></span><br><span class="line">ls / &gt; /home/share/test1</span><br><span class="line">ls /etc/ &gt; /home/share/test2</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæŒ‚è½½ç‚¹ã€ä»¥åå°±æŠŠNFSæŒ‚è½½åˆ°è¿™é‡Œ</span></span><br><span class="line">mkdir /home/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è¿™ä¸ªæµ‹è¯•ç›®å½•è®¾ç½®ä¸º777çš„æƒé™</span></span><br><span class="line">chmod 777 /home/share</span><br></pre></td></tr></table></figure><h1 id="0X03-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#0X03-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="0X03 ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>0X03 ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><p>é…ç½®æ–‡ä»¶æ˜¯<code>/etc/exports</code>  ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€é…ç½®æ–‡ä»¶å¹¶è¿›è¡Œä¿®æ”¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹é…ç½®  192.168.123.132æ˜¯å®¢æˆ·ç«¯IP</span></span><br><span class="line">/home/share/ 192.168.123.132(rw, sync) *(ro)</span><br></pre></td></tr></table></figure></p><p><code>/home/share/</code>è¡¨ç¤ºNFSçš„è·¯å¾„<br><code>192.168.123.132(rw, sync)</code>è¡¨ç¤º192.168.123.132è®¿é—®æ­¤NFSæ—¶ä½¿ç”¨åé¢çš„é…ç½®ã€å…·æœ‰rwæƒé™ï¼ˆè¯»å†™ï¼‰ã€syncåŒæ­¥æ¨¡å¼ï¼Œè¡¨ç¤ºå†…å­˜ä¸­çš„æ•°æ®å®æ—¶å†™å…¥ç£ç›˜<br><code>*(ro)</code>è¡¨ç¤ºæ‰€æœ‰IPè®¿é—®æ—¶ä½¿ç”¨åé¢çš„é…ç½®ã€roè¡¨ç¤ºread onlyåªè¯»</p><blockquote><p>æ¯ä¸ªè·¯å¾„ä¸‹é¢å¯ä»¥æ¥å¥½å¤šä¸ªè®¿é—®é¡¹ï¼Œå°±æ˜¯<code>192.168.123.132(rw, sync)</code>æˆ–è€…<code>*(ro)</code>ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†å¼€</p></blockquote><h1 id="0X04-å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥NFSé…ç½®"><a href="#0X04-å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥NFSé…ç½®" class="headerlink" title="0X04 å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥NFSé…ç½®"></a>0X04 å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥NFSé…ç½®</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl start portmap</span><br><span class="line">systemctl start nfs</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å®¢æˆ·ç«¯æ£€æŸ¥ 192.168.123.123æ˜¯æœåŠ¡ç«¯</span></span><br><span class="line">showmount -e 192.168.123.123</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœè¾“å‡ºæˆå¦‚ä¸‹è¿™æ ·å°±æ˜¯æ­£ç¡®äº†</span></span><br><span class="line">Export List <span class="keyword">for</span> 192.168.123.123:</span><br><span class="line">/home/share *</span><br></pre></td></tr></table></figure><h1 id="0X05-æŒ‚è½½å’Œå¸è½½"><a href="#0X05-æŒ‚è½½å’Œå¸è½½" class="headerlink" title="0X05 æŒ‚è½½å’Œå¸è½½"></a>0X05 æŒ‚è½½å’Œå¸è½½</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‚è½½</span></span><br><span class="line">mount -t nfs 192.168.123.123:/home /home/<span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">umount /home/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> File System </tag>
            
            <tag> NFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxäº¤æ¢åˆ†åŒº Swap è™šæ‹Ÿå†…å­˜ ç†è§£è™šæ‹Ÿå†…å­˜</title>
      <link href="/2016/05/28/linux-swap-virtualmemery/"/>
      <url>/2016/05/28/linux-swap-virtualmemery/</url>
      
        <content type="html"><![CDATA[<p>SWAPåˆ†åŒºæ˜¯Linuxçš„äº¤æ¢åˆ†åŒºã€‚äº¤æ¢åˆ†åŒºå®é™…å­˜åœ¨äºç£ç›˜ä¸­ï¼Œä¸è¿‡Linuxç³»ç»Ÿå¯ä»¥å°†å®ƒå½“ä½œå†…å­˜ä½¿ç”¨ï¼Œå½“ç‰©ç†çœŸå®å†…å­˜ä¸è¶³çš„æ—¶å€™äº¤æ¢åˆ†åŒºå°±å¯ä»¥å’ŒçœŸå®å†…å­˜è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ç®€å•åœ°è¯´å°±æ˜¯ä»ç£ç›˜é‡Œæ‹¿å‡ºä¸€å—ç©ºé—´å½“ä½œå†…å­˜çš„å‚¨å¤‡åŒºã€‚è™½è¯´ç£ç›˜è¢«æ‹¿æ¥å½“ä½œå†…å­˜ä½¿ç”¨ï¼Œä½†æ˜¯é€Ÿåº¦è¿˜æ˜¯ç£ç›˜çš„é€Ÿåº¦ã€‚å¯ä»¥æƒ³è±¡ä¸‹é¢ä¸€ç§æ—¥å¸¸ç”Ÿæ´»çš„åœºæ™¯ï¼š</p><blockquote><p>å½“ä½ å·¥ä½œçš„æ—¶å€™ä¸€å®šæ˜¯æŠŠæ¡Œæ´é‡Œçš„ä¸œè¥¿æ‹¿å‡ºæ¥æ”¾åˆ°æ¡Œé¢ä¸Šï¼Œå¹¶ä¸”æ‰‹é‡Œæ‹¿ç€ä¸€éƒ¨åˆ†ä¸œè¥¿åœ¨æ“ä½œï¼Œç„¶åæ¡Œé¢å’Œæ¡Œæ´é‡Œçš„ä¸œè¥¿åœ¨ä¸æ–­çš„äº¤æ¢ä½ æ‰‹é‡Œçš„ä¸œè¥¿å’Œæ¡Œé¢ä¸Šçš„ä¸œè¥¿ä¹Ÿä¸€ç›´åœ¨äº¤æ¢ã€‚<br>å¯ä»¥è¿™ä¹ˆæƒ³ï¼šä½ ä»æ¡Œæ´é‡Œæ‹¿å‡ºæ¥äº†ä¸€æœ¬ã€Š5å¹´é«˜è€ƒ3å¹´æ¨¡æ‹Ÿâ€”â€”ç†ç»¼ã€‹æ”¾åˆ°æ¡Œé¢ä¸Šï¼Œç„¶åæ‹¿èµ·ç¬”å¼€å§‹åˆ·é¢˜ã€‚åæ¥ä½ åˆä»æ¡Œæ´é‡Œæ‹¿å‡ºæ¥äº†ä¸€æœ¬ã€Š5å¹´é«˜è€ƒ3å¹´æ¨¡æ‹Ÿâ€”â€”æ•°å­¦ã€‹æ”¾åˆ°æ¡Œé¢ä¸Šï¼Œå‡†å¤‡ä¸¤æœ¬ä¸€èµ·å†™ï¼ˆå°±æ˜¯è¿™ä¹ˆå±Œï¼‰ï¼Œå†™ä¸€é¢˜ç†ç»¼å†™ä¸€é¢˜æ•°å­¦ã€‚å†åæ¥ä½ åˆæƒ³åŒæ—¶å†™è¯­æ–‡ï¼Œä½†æ˜¯ä½ å‘ç°ä½ çš„æ¡Œé¢ä¸Šå·²ç»æ²¡æœ‰äº†é‚£ä¹ˆå¤§çš„ç©ºé—´ï¼Œå°±åªèƒ½æŠŠè¯­æ–‡æ”¾åˆ°æ¡Œæ´é‡Œï¼Œæ¯æ¬¡æ‹¿å‡ºæ¥è¯­æ–‡å°±è¦æŠŠæ•°å­¦æˆ–æ˜¯ç†ç»¼æ”¾åˆ°æ¡Œæ´ä¸­ã€‚<br>è®¡ç®—æœºå®é™…ä¸Šæ˜¯è¿™æ ·ã€‚ä»ç£ç›˜ä¸­æ‰“å¼€äº†ä¸€ä¸ªç¨‹åºï¼ˆä¸€æœ¬ä¹¦ï¼‰ï¼Œæ“ä½œç³»ç»Ÿå°±ï¼ˆå¦ä¸€ä¸ªäººï¼‰æŠŠè¿™ä¸ªç¨‹åºè¿è¡Œèµ·æ¥æ”¾åˆ°å†…å­˜ä¸­ï¼ˆæ”¾åˆ°æ¡Œé¢ä¸Šï¼‰ï¼ŒCPUå°†ï¼ˆéƒ¨åˆ†ï¼‰ç¨‹åºåŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼ˆæ‹¿èµ·ç¬”å¼€å§‹åšé¢˜ï¼‰ã€‚ç„¶ååˆè¿è¡Œäº†ä¸€ä¸ªç¨‹åºï¼ŒCPUå°±åœ¨è¿™ä¸¤ä¸ªç¨‹åºä¹‹é—´åˆ‡æ¢ï¼ˆåšå®Œä¸€é¢˜æ•°å­¦å°±æ¢ä¸€é¢˜ç†ç»¼ï¼‰ã€‚å†è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œå‘ç°å†…å­˜ä¸è¶³ï¼ˆæ¡Œé¢ä¸å¤Ÿç”¨äº†ï¼‰å°±å°†å†…å­˜å’Œç£ç›˜ä¸­çš„äº¤æ¢åˆ†åŒºå¼€å§‹äº¤æ¢ï¼ˆæŠŠè¯­æ–‡æ”¾åˆ°æ¡Œæ´é‡Œï¼Œæ¯æ¬¡æ‹¿å‡ºæ¥è¯­æ–‡å°±è¦æŠŠæ•°å­¦æˆ–æ˜¯ç†ç»¼æ”¾åˆ°æ¡Œæ´ä¸­ï¼‰</p></blockquote><a id="more"></a><h1 id="0X00-åˆ›å»ºä¸€ä¸ªåˆ†åŒº-åˆ›å»ºä¸€å—æ–‡ä»¶"><a href="#0X00-åˆ›å»ºä¸€ä¸ªåˆ†åŒº-åˆ›å»ºä¸€å—æ–‡ä»¶" class="headerlink" title="0X00 åˆ›å»ºä¸€ä¸ªåˆ†åŒº || åˆ›å»ºä¸€å—æ–‡ä»¶"></a>0X00 åˆ›å»ºä¸€ä¸ªåˆ†åŒº || åˆ›å»ºä¸€å—æ–‡ä»¶</h1><p> è¦æƒ³åˆ›å»ºswapåˆ†åŒºå¯ä»¥æœ‰ä¸¤ç§åˆ†é…ç©ºé—´çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥ä»ç£ç›˜ä¸­åˆ†å‡ºæ¥ä¸€å—ç”¨æ¥å½“åšswapåˆ†åŒºï¼Œç„¶åæ ¼å¼åŒ–ä¸ºswapæ ¼å¼<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹ç£ç›˜sdbè¿›è¡Œåˆ†åŒº</span></span><br><span class="line">fdisk /dev/sdb</span><br></pre></td></tr></table></figure></p><p>åœ¨æç¤ºç¬¦ä¸‹è¾“å…¥n ç„¶åä¼šæç¤ºp æˆ– eçš„é€‰é¡¹ï¼ŒPå°±æ˜¯ä¸»åˆ†åŒºï¼Œåªèƒ½åˆ›å»º4ä¸ªï¼Œ eå°±æ˜¯é€»è¾‘åˆ†åŒºï¼Œä¸é™ä¸ªæ•°ã€‚<br>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé€»è¾‘åˆ†åŒºå°±è¡Œã€‚ç„¶åä¼šæç¤ºæ–°åˆ†åŒºçš„èµ·å§‹æ‰‡åŒºï¼Œä½¿ç”¨é»˜è®¤çš„å°±å¥½ï¼Œç›´æ¥å›è½¦<br>æ¥ä¸‹æ¥æ˜¯ç»ˆæ­¢æ‰‡åŒºï¼Œè¿™é‡Œæ”¯æŒç›´æ¥è¾“å…¥æ‰‡åŒºå·å’Œè¾“å…¥å¤§å°ä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ™®éç›´æ¥è¾“å…¥åˆ†åŒºå¤§å°<br>è¾“å…¥ +512M æŒ‰ä¸‹å›è½¦ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª512Mçš„åˆ†åŒºã€‚ç°åœ¨fdiskåˆå›åˆ°äº†å¼€å§‹çš„æç¤ºç¬¦ï¼Œå¦‚æœä¹‹å‰çš„æ“ä½œæœ‰é”™è¯¯å¯ä»¥ç›´æ¥è¾“å…¥qé€€å‡ºï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜å°±å¯ä»¥è¾“å…¥wä¿å­˜å¹¶é€€å‡ºã€‚<br>æ ¹æ®ä½ çš„å‘½ä»¤ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªåä¸ºsdb*çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯åˆ†åŒºæ–‡ä»¶ã€‚</p><p> å¦ä¸€ç§æ–¹å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†è¿™å—æ–‡ä»¶æ ¼å¼åŒ–ä¸ºswapæ ¼å¼<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ª512Mçš„æ•°æ®ç±»å‹æ–‡ä»¶</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=swapfile bs=1024 count=523288</span><br><span class="line"><span class="comment"># if -&gt; input_fileè¾“å…¥æ–‡ä»¶   of -&gt; output_fileè¾“å‡ºæ–‡ä»¶   bs -&gt; block_sizeå—å¤§å°   count -&gt; è®¡æ•°</span></span><br></pre></td></tr></table></figure></p><p>è§£é‡Šä¸€ä¸‹ç‰¹æ®Šæ–‡ä»¶/dev/zero</p><blockquote><p>/dev/zero è¿™ä¸ªæ–‡ä»¶æ”¾åœ¨Linuxå­˜æ”¾è®¾å¤‡çš„ç›®å½•ä¸‹ï¼Œå¦‚æœä»¥ä»–ä¸ºè¾“å‡ºæºï¼Œè¾“å‡ºçš„å…¨éƒ¨éƒ½æ˜¯äºŒè¿›åˆ¶0<br>cat /dev/zero &gt; test  è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªtestæ–‡ä»¶å¹¶ä¸æ–­çš„å‘è¯¥æ–‡ä»¶ä¸­è¾“å…¥äºŒè¿›åˆ¶0</p></blockquote><h1 id="0X01-æ ¼å¼åŒ–-amp-amp-æ¿€æ´»-amp-amp-æŒ‚è½½swapåˆ†åŒº"><a href="#0X01-æ ¼å¼åŒ–-amp-amp-æ¿€æ´»-amp-amp-æŒ‚è½½swapåˆ†åŒº" class="headerlink" title="0X01 æ ¼å¼åŒ–&amp;&amp;æ¿€æ´»&amp;&amp;æŒ‚è½½swapåˆ†åŒº"></a>0X01 æ ¼å¼åŒ–&amp;&amp;æ¿€æ´»&amp;&amp;æŒ‚è½½swapåˆ†åŒº</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼åŒ–åˆšæ‰çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># æ ¹æ®åˆ›å»ºçš„æ–¹å¼é€‰æ‹©å‘½ä»¤</span></span><br><span class="line">mkswap /dev/sdb*</span><br><span class="line">mkswap swapfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¿€æ´»swapåˆ†åŒº ç›¸ç­‰äºæŒ‚è½½</span></span><br><span class="line"><span class="comment"># æ ¹æ®åˆ›å»ºçš„æ–¹å¼é€‰æ‹©å‘½ä»¤</span></span><br><span class="line">swapon /dev/sdb*</span><br><span class="line">swapon swapfile</span><br></pre></td></tr></table></figure><h1 id="0X02-è®¾ç½®è‡ªåŠ¨æŒ‚è½½"><a href="#0X02-è®¾ç½®è‡ªåŠ¨æŒ‚è½½" class="headerlink" title="0X02 è®¾ç½®è‡ªåŠ¨æŒ‚è½½"></a>0X02 è®¾ç½®è‡ªåŠ¨æŒ‚è½½</h1><p>å¤§å®¶éƒ½æ˜¯æ‡’äººï¼Œè°æƒ³æ¯æ¬¡å¼€æœºéƒ½æ‰‹åŠ¨æŒ‚è½½ä¸€æ¬¡åˆ†åŒºå‘¢ï¼Ÿæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸€åŠ³æ°¸é€¸ï¼Œå°†æŒ‚è½½è®¾ä¸ºè‡ªåŠ¨<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è¿™æ ·ä¸€è¡Œ</span></span><br><span class="line"><span class="comment"># æ ¹æ®åˆ›å»ºçš„æ–¹å¼é€‰æ‹©å‘½ä»¤</span></span><br><span class="line">/dev/sdb*          swap     swap     defaults     0     0</span><br><span class="line">/home/swapfile     swap     swap     defaults     0     0</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢è§£é‡Šè¿™ä¸ªé…ç½®æ–‡ä»¶çš„æ¯ä¸€åˆ—</p><ol><li>ç¬¬ä¸€åˆ—æ˜¯æ•°æ®å—æ–‡ä»¶çš„ä½ç½®</li><li>ç¬¬äºŒåˆ—æ˜¯æŒ‚è½½ç‚¹</li><li>ç¬¬ä¸‰åˆ—æ˜¯åˆ†åŒºç±»å‹</li><li>ç¬¬å››åˆ—æ˜¯æŒ‚è½½å‚æ•°   é€šå¸¸é»˜è®¤</li><li>ç¬¬äº”åˆ—æ˜¯å¤‡ä»½é€‰é¡¹   0ä»£è¡¨ä¸å¤‡ä»½ 1ä»£è¡¨å¤‡ä»½  é€šå¸¸ä¸º0</li><li>ç¬¬å…­åˆ—æ˜¯è‡ªæ£€é¡ºåº   0ä»£è¡¨ä¸è‡ªæ£€ 1å’Œ2ä»£è¡¨è‡ªæ£€  å¦‚æœæ˜¯æ ¹åˆ†åŒºè¦è®¾ä¸º1ï¼Œå…¶ä»–åˆ†åŒºåªèƒ½æ˜¯2   é€šå¸¸ä¸º0</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Operation System </tag>
            
            <tag> swap </tag>
            
            <tag> Swap Partition </tag>
            
            <tag> Virtual Memerry </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxçš„LVM é€»è¾‘å·ç®¡ç† åˆ†åŒº åˆ’åˆ† é‡åˆ’</title>
      <link href="/2016/05/17/linux-lvm/"/>
      <url>/2016/05/17/linux-lvm/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-LVMæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨"><a href="#0X00-LVMæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨" class="headerlink" title="0X00 LVMæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨"></a>0X00 LVMæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨</h1><p>LVMçš„å…¨ç§°æ˜¯Logical Volume Managerï¼ˆé€»è¾‘å·ç®¡ç†ï¼‰ã€‚æ˜¯Linuxä¸‹çš„ä¸€ç§ç£ç›˜åˆ†åŒºç®¡ç†æœºåˆ¶ï¼Œæ–¹ä¾¿ç»™åˆ†åŒºï¼ˆé€»è¾‘åˆ†åŒºï¼‰æ‰©å®¹å’Œå‹ç¼©ã€‚æœ€ç®€å•çš„å¯ä»¥ç†è§£æˆåŸå§‹çš„ç£ç›˜åˆ†åŒºç®¡ç†æ˜¯å•çº¯çš„ç»™æ¯ä¸ªç‹¬ç«‹çš„ç£ç›˜è¿›è¡Œåˆ†åŒºï¼Œç„¶åå¯¹æ¯ä¸ªåˆ†åŒºè¿›è¡Œç®¡ç†ï¼Œè¿™æ ·çš„è¯æ¯æ¬¡æ‰©å®¹å’Œå‹ç¼©ç©ºé—´éƒ½ä¼šå¾ˆéº»çƒ¦ã€‚LVMå°±ç›¸å½“äºæŠŠæ‰€æœ‰ç£ç›˜çš„åˆ†åŒºéƒ½æ‰åˆ°ä¸€èµ·ï¼Œæ‰æˆä¸€ä¸ªå¤§ç£ç›˜æˆ–è€…è¯´æ˜¯å¤§åˆ†åŒºï¼Œç„¶åä»å¤§çš„ä¸­åˆ†å‡ºå°çš„ï¼Œè¿™æ ·çš„è¯æ‰©å®¹å’Œå‹ç¼©éƒ½ä¼šå˜å¾—æ–¹ä¾¿ã€‚<br><img src="http://o7bn7vqpt.bkt.clouddn.com//article/image/lvm.jpg" alt="test"><br><strong>ç‰ˆæƒå£°æ˜ï¼šå›¾ç‰‡æ¥è‡ª<span class="exturl" data-url="aHR0cHM6Ly9saW51eC5jbi9hcnRpY2xlLTMyMTgtMi5odG1s" title="https://linux.cn/article-3218-2.html">Linux.cn<i class="fa fa-external-link"></i></span></strong></p><a id="more"></a><h1 id="0X01-åŸºç¡€æœ¯è¯­è§£é‡Š"><a href="#0X01-åŸºç¡€æœ¯è¯­è§£é‡Š" class="headerlink" title="0X01 åŸºç¡€æœ¯è¯­è§£é‡Š"></a>0X01 åŸºç¡€æœ¯è¯­è§£é‡Š</h1><p>PV æ˜¯<em>Physical Volume</em> <strong>ç‰©ç†å·</strong>â€”ä¹Ÿå°±æ˜¯çœŸå®çš„ç£ç›˜åˆ†åŒº<br>VG æ˜¯<em>Volume Group</em> <strong>å·ç»„</strong>â€”ä¹Ÿå°±æ˜¯å¥½å¤šPVç»„æˆçš„ä¸€ä¸ªç»„<br>LV æ˜¯<em>Logical Volume</em> <strong>é€»è¾‘å·</strong>â€”å°±æ˜¯ä»VGä¸­åˆ†å‡ºæ¥çš„åˆ†åŒº<br>PE æ˜¯<em>Physical Extent</em> <strong>ç‰©ç†åŒºåŸŸ</strong>â€”æ˜¯PVä¸­æœ€å°çš„å­˜å‚¨å•å…ƒ<br>LE æ˜¯<em>Logical Extent</em> <strong>é€»è¾‘åŒºåŸŸ</strong>â€”æ˜¯LVä¸­åšå°çš„å­˜å‚¨å•å…ƒ</p><h1 id="0X02-æµ‹è¯•ç¯å¢ƒ"><a href="#0X02-æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="0X02 æµ‹è¯•ç¯å¢ƒ"></a>0X02 æµ‹è¯•ç¯å¢ƒ</h1><p>V-Box ä¸­çš„ CentOS 7.x 64bit<br>æœ‰ä¸¤å—æˆ–è€…ä»¥ä¸Šæ•°é‡çš„è™šæ‹Ÿç£ç›˜<br>ç£ç›˜å¤§å°åœ¨1GBä»¥ä¸Š<br>æˆ‘è¿™é‡Œ/dev/sdbå’Œ/dev/sdcæ˜¯åˆšåˆšæ·»åŠ çš„ç£ç›˜<br>rootç”¨æˆ·çš„~/lvm-mountç”¨æ¥æŒ‚è½½é€»è¾‘å·<br>ä½¿ç”¨rootç™»é™†(å•çº¯çš„å› ä¸ºæ¯æ¬¡sudoå¤ªéº»çƒ¦)</p><h1 id="0X03-å‡†å¤‡åˆ†åŒº"><a href="#0X03-å‡†å¤‡åˆ†åŒº" class="headerlink" title="0X03 å‡†å¤‡åˆ†åŒº"></a>0X03 å‡†å¤‡åˆ†åŒº</h1><p>ä½¿ç”¨fdiskä¸ºç£ç›˜åˆ†åŒº<br><strong>ä¸ä¼šä½¿ç”¨fdiskçš„å¯ä»¥ç›´æ¥æŒ‰ç€æˆ‘è¯´çš„æ•²</strong><br><strong>è¿˜æ˜¯å»ºè®®å­¦LVMä¹‹å‰æŒæ¡æœ€åŸºç¡€çš„fdiskåˆ†åŒºå’Œæ ¼å¼åŒ–</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb <span class="comment"># ä½¿ç”¨fdiskç»™/dev/sdbåˆ†åŒº</span></span><br><span class="line">æŒ‰n å›è½¦ æ–°å»ºä¸€ä¸ªåˆ†åŒº</span><br><span class="line">æŒ‰p å›è½¦ é€‰æ‹©æ–°å»ºåˆ†åŒºä¸ºä¸»åˆ†åŒº</span><br><span class="line">æŒ‰ å›è½¦ é€‰æ‹©é»˜è®¤åˆ†åŒºå·</span><br><span class="line">æŒ‰ å›è½¦ é»˜è®¤é€‰æ‹©å¼€å§‹ä½ç½®</span><br><span class="line">è¾“å…¥ +100M å›è½¦ é€‰æ‹©ä½¿ç”¨100Mä¸ºæ–°åˆ†åŒºçš„å¤§å°</span><br><span class="line">è¾“å…¥ t å›è½¦ è®¾ç½®åˆ†åŒºç±»å‹</span><br><span class="line">æŒ‰ å›è½¦ é»˜è®¤é€‰æ‹©åˆšæ‰åˆ›å»ºçš„åˆ†åŒº</span><br><span class="line">è¾“å…¥ 8e è®¾ç½®åˆšæ‰åˆ›å»ºçš„åˆ†åŒºä¸º LVM ç±»å‹</span><br></pre></td></tr></table></figure></p><p>é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç»™/dev/sdbåˆ†å‡ºæ¥ä¸‰ä¸ªåŒº</p><h1 id="0X04-åˆ›å»ºç‰©ç†å·-PV"><a href="#0X04-åˆ›å»ºç‰©ç†å·-PV" class="headerlink" title="0X04 åˆ›å»ºç‰©ç†å· PV"></a>0X04 åˆ›å»ºç‰©ç†å· PV</h1><p>åˆ›å»ºç‰©ç†å·çš„æ—¶å€™ï¼Œå¯ä»¥å¤§å°ä¸åŒï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒç£ç›˜çš„åˆ†åŒºï¼Œåªè¦æ˜¯ 8e ç±»å‹çš„åˆ†åŒºéƒ½æ˜¯å¯ä»¥åˆ›å»ºåˆ°ç‰©ç†å·ä¸­çš„ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†åšç¤ºèŒƒ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">pvcreate /dev/sdb1</span><br><span class="line">pvcreate /dev/sdb2</span><br><span class="line">pvcreate /dev/ddb3</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line">pvdisplay</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ (è¿™æ­¥ä¸è¦è·Ÿç€åš)</span></span><br><span class="line">pvremove /dev/sdb1</span><br></pre></td></tr></table></figure></p><h1 id="0X05-å‡†å¤‡å·ç»„-VG"><a href="#0X05-å‡†å¤‡å·ç»„-VG" class="headerlink" title="0X05 å‡†å¤‡å·ç»„ VG"></a>0X05 å‡†å¤‡å·ç»„ VG</h1><p>åˆ›å»ºä¸€ä¸ªåŒ…æ‹¬/dev/sdb1 /dev/sdb2 /dev/sdb3 ç‰©ç†å·çš„å·ç»„<br>å‘½åä¸º volme-group1<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">vgcreate volume-group1 /dev/sdb1 /dev/sdb2 /dev/sdb3</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line">vgdisplay</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ (è¿™æ­¥ä¸è¦è·Ÿç€åš)</span></span><br><span class="line">vgremove volume-group1</span><br></pre></td></tr></table></figure></p><h1 id="0X06-åˆ›å»ºé€»è¾‘å·-LV"><a href="#0X06-åˆ›å»ºé€»è¾‘å·-LV" class="headerlink" title="0X06 åˆ›å»ºé€»è¾‘å· LV"></a>0X06 åˆ›å»ºé€»è¾‘å· LV</h1><p>åˆ›å»ºé€»è¾‘å·çš„æ—¶å€™è¦æŒ‡å®šåç§°ã€å¤§å°å’Œæ‰€å±VG<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»º</span></span><br><span class="line">lvcreate -L 100M -n LV1 volume-group1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line">lvdisplay</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ– æ ¼å¼åŒ–æˆext4ç±»å‹</span></span><br><span class="line">mkfs.ext4 /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‚è½½</span></span><br><span class="line">mkdir ~/lvm-mount <span class="comment">#è®¾ç½®ä¸€ä¸ªæŒ‚è½½ç‚¹</span></span><br><span class="line">mount /dev/volume-group1/LV1 ~/lvm-mount <span class="comment"># æŒ‚è½½</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">lvremove /dev/volume-group1/LV1</span><br></pre></td></tr></table></figure></p><h1 id="0X07-æ‰©å±•LVMé€»è¾‘å·"><a href="#0X07-æ‰©å±•LVMé€»è¾‘å·" class="headerlink" title="0X07 æ‰©å±•LVMé€»è¾‘å·"></a>0X07 æ‰©å±•LVMé€»è¾‘å·</h1><p>è°ƒæ•´é€»è¾‘å·å¤§å°æ˜¯LVMæœ€é‡è¦æœ€æœ‰ç”¨çš„åŠŸèƒ½ã€‚<br>æ¯”å¦‚ä¹‹å‰åˆ›å»ºçš„100MBçš„åˆ†åŒºä¸å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰©å±•ä¸€ä¸‹é‚£ä¸ªåˆ†åŒºçš„å¤§å°ã€‚è™½ç„¶LVMå¾ˆå¼ºå¤§ï¼Œä½†æ˜¯æ‰©å±•çš„æ—¶å€™è¿˜æ˜¯éœ€è¦å¸è½½LV<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸è½½LV</span></span><br><span class="line">umount ~/lvm-mount/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒæ•´å¤§å°</span></span><br><span class="line">lvresize -L 200M /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç£ç›˜é”™è¯¯ï¼ˆéå¿…é¡»ï¼‰</span></span><br><span class="line">e2fsck -f /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰©å±•æ–‡ä»¶ç³»ç»Ÿ</span></span><br><span class="line">resize2fs /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯</span></span><br><span class="line">lvdisplay</span><br></pre></td></tr></table></figure></p><h1 id="0X08-å‹ç¼©LVMé€»è¾‘å·"><a href="#0X08-å‹ç¼©LVMé€»è¾‘å·" class="headerlink" title="0X08 å‹ç¼©LVMé€»è¾‘å·"></a>0X08 å‹ç¼©LVMé€»è¾‘å·</h1><p>æ¯”å¦‚ä½ å‘ç°æœ‰ä¸€ä¸ªåˆ†åŒºç»™äº†å¾ˆå¤§ï¼Œä½†æ˜¯å®Œå…¨ç”¨ä¸åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‹ç¼©å®ƒçš„ç©ºé—´ï¼ŒæŠŠç©ºä½™çš„ç©ºé—´ç”¨åœ¨æœ‰ç”¨çš„åœ°æ–¹ã€‚<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŒæ ·ï¼Œå…ˆå¸è½½</span></span><br><span class="line">umount /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é”™è¯¯</span></span><br><span class="line">e2fsck -f /dev/volume-group1/LV1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°æ–‡ä»¶ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">resize2fs /dev/volume-group1/LV1 100M</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‹ç¼©ç©ºé—´</span></span><br><span class="line">lvresize -L 100M /dev/volume-group1/LV1</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œä¼šå¼¹å‡ºè­¦å‘Šï¼Œå‘Šè¯‰ä½ è¿™é¡¹æ“ä½œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå½“ç„¶ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰é—®é¢˜çš„</p><h1 id="0X09-æ‰©å±•å·ç»„"><a href="#0X09-æ‰©å±•å·ç»„" class="headerlink" title="0X09 æ‰©å±•å·ç»„"></a>0X09 æ‰©å±•å·ç»„</h1><p>æœ‰ä¸€å¤©æœåŠ¡å™¨çš„ç£ç›˜å¡æ»¡äº†ï¼Œä½ å°±æ–°ä¹°äº†ä¸€å—3TBçš„ç¡¬ç›˜æ’åˆ°äº†ç”µè„‘ä¸Šï¼Œé‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ª3TBå’Œä¹‹å‰çš„ç©ºé—´ä¸€èµ·å·¥ä½œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç£ç›˜åˆ†åŒºç„¶åä¹Ÿæ”¾åˆ°ä¹‹å‰çš„VGï¼ˆå·ç»„ï¼‰ä¸­ï¼Œè¿™æ ·é€šè¿‡ä¹‹å‰çš„æ‰©å®¹åŠŸèƒ½å°±å¯ä»¥è®©æ–°çš„3TBè¿ç”¨åˆ°ç³»ç»Ÿä¸­äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆç»™æ–°ç£ç›˜åˆ†åŒºï¼ˆå‚è€ƒ0X03æ­¥éª¤ï¼‰</span></span><br><span class="line">fdisk /dev/sdc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶ååˆ›å»ºPV(ç‰©ç†å·)</span></span><br><span class="line">pvcreate /dev/sdc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ–°PVæ·»åŠ åˆ°VG</span></span><br><span class="line">vgextend volume-group1 /dev/sdc1</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯ä¸€ä¸‹</span></span><br><span class="line">vgdisplay</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> LVM </tag>
            
            <tag> Partition </tag>
            
            <tag> Format </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxé…ç½®DHCPæœåŠ¡å™¨ ç®€æ˜æ•™ç¨‹</title>
      <link href="/2016/05/12/linux-dhcp-server/"/>
      <url>/2016/05/12/linux-dhcp-server/</url>
      
        <content type="html"><![CDATA[<h1 id="DHCPä»‹ç»"><a href="#DHCPä»‹ç»" class="headerlink" title="DHCPä»‹ç»"></a>DHCPä»‹ç»</h1><h2 id="åŠŸèƒ½ç®€ä»‹"><a href="#åŠŸèƒ½ç®€ä»‹" class="headerlink" title="åŠŸèƒ½ç®€ä»‹"></a>åŠŸèƒ½ç®€ä»‹</h2><p>DHCPæ˜¯ä¸€ä¸ªåŸºäºUDPçš„å·¥ä½œåœ¨åº”ç”¨å±‚çš„åè®®ï¼Œç”¨æ¥è‡ªåŠ¨åˆ†é…IPåœ°å€ã€‚<br>åº”ç”¨å®ä¾‹ï¼šä¸€ä¸ªåŠå…¬å®¤æœ‰åä¸ªäººï¼Œæ¯ä¸ªäººæ¯å¤©ä¸Šä¸‹ç­éƒ½è¦å¸¦ç€è‡ªå·±çš„ç¬”è®°æœ¬ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨é…ç½®IPåœ°å€ï¼Œè¿™æ ·ç®€ç›´å°±ä¸æ˜¯è®¡ç®—æœºè¯¥å¹²çš„äº‹æƒ…æ˜¯å§ã€‚ã€‚æ‰€ä»¥DHCPåº”è¿è€Œç”Ÿï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®æœåŠ¡ç«¯çš„é…ç½®ç»™è¿æ¥åˆ°ç½‘ç»œçš„å®¢æˆ·æœºè‡ªåŠ¨åˆ†é…IPåœ°å€ã€‚</p><a id="more"></a><h2 id="æä¾›çš„æœåŠ¡"><a href="#æä¾›çš„æœåŠ¡" class="headerlink" title="æä¾›çš„æœåŠ¡"></a>æä¾›çš„æœåŠ¡</h2><p>1.æä¾›IPåœ°å€å’Œå­ç½‘æ©ç <br>2.æä¾›IPåœ°å€å¯¹åº”çš„ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€<br>3.é»˜è®¤ç½‘å…³åœ°å€<br>4.DNSæœåŠ¡å™¨åœ°å€</p><h2 id="é€šä¿—çš„è§£é‡Š"><a href="#é€šä¿—çš„è§£é‡Š" class="headerlink" title="é€šä¿—çš„è§£é‡Š"></a>é€šä¿—çš„è§£é‡Š</h2><p>ä½ ä»¬å¯å®¤é‡Œæœ‰å…­ä¸ªäººï¼ˆå¯¹åº”åˆ°å®¢æˆ·æœºï¼‰ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦ç”¨åºŠï¼ˆå¯¹åº”åˆ°IPåœ°å€ï¼‰ç¡è§‰ï¼Œæ‰€ä»¥æ¯ä¸ªäººå›åˆ°å¯å®¤éƒ½ä¼šéœ€è¦ä¸€å¼ åºŠã€‚è¿™æ ·çš„è¯æ¯ä¸ªäººæ¯æ¬¡å›åˆ°å¯å®¤çš„æ—¶å€™éƒ½éœ€è¦å®¿ç®¡ï¼ˆå¯¹åº”åˆ°ç½‘ç»œç®¡ç†å‘˜ï¼‰éƒ½éœ€è¦ç»™ä»–åˆ†é…ä¸€ä¸ªåºŠä½ï¼Œè¿™æ ·å°±å¾ˆéº»çƒ¦ã€‚<br>ç°åœ¨æœ‰ä¸€ä¸ªâ€œåŠ¨æ€åºŠä½åˆ†é…ç³»ç»Ÿâ€ï¼ˆå¯¹åº”åˆ°DHCPæœåŠ¡å™¨ï¼‰ï¼Œä½ ä»¬æ¯ä¸ªäººå›åˆ°å¯å®¤çš„æ—¶å€™éƒ½ä¼šæ”¶åˆ°ä¸€å¼ çº¸æ¡ï¼Œçº¸æ¡ä¸Šå†™äº†ä½ å¯ä»¥ä½¿ç”¨å“ªä¸ªåºŠä½ï¼Œè¿™å°±ç®€å•å¤šäº†ã€‚<br>å†ç„¶åå¯èƒ½å°æ˜ï¼ˆå¯¹åº”åˆ°ä¸€ä¸ªç‰¹å®šçš„å®¢æˆ·æœºï¼‰æœ‰æ´ç™–ï¼Œä»–éœ€è¦ä¸€ä¸ªå›ºå®šçš„åºŠä½ï¼ˆå¯¹åº”åˆ°ä¸€ä¸ªéœ€è¦å›ºå®šIPçš„è®¾å¤‡ï¼Œæ¯”å¦‚æ‰“å°æœºæˆ–è€…æä¾›æŸäº›æœåŠ¡çš„æœåŠ¡å™¨ï¼‰ã€‚æ‰€ä»¥â€œåŠ¨æ€åºŠä½åˆ†é…ç³»ç»Ÿâ€å¯ä»¥æ·»åŠ ä¸€æ¡è§„åˆ™â€œå«å°æ˜çš„äººæ¥äº†å°±åˆ†é…ç»™ä»–ä¸‰å·åºŠä½â€ï¼Œå°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="ç§Ÿçº¦æ—¶é—´"><a href="#ç§Ÿçº¦æ—¶é—´" class="headerlink" title="ç§Ÿçº¦æ—¶é—´"></a>ç§Ÿçº¦æ—¶é—´</h2><p>DHCPåˆ†é…ç»™å®¢æˆ·çš„IPæ˜¯ä»¥<strong>ç§Ÿçº¦</strong>å½¢å¼åˆ†é…çš„ã€‚å½“å®¢æˆ·æ¥å…¥åˆ°ç½‘ç»œä¸­ï¼ŒDHCPä¾¿ä¼šåˆ†é…ä¸€ä¸ªIPç»™å®¢æˆ·æœºï¼Œå½“ç§Ÿçº¦æ—¶é—´åˆ°çš„æ—¶å€™å¦‚æœå®¢æˆ·æœºè¿˜åœ¨ä½¿ç”¨è¿™ä¸ªIPé‚£ä¹ˆå°±å¯ä»¥ç»­çº¦ï¼Œç»§ç»­ä½¿ç”¨å½“å‰IPè€Œä¸æ˜¯ä»æ–°åˆ†é…ä¸€ä¸ªã€‚</p><h1 id="åœ¨CentOS-7-x-ä¸‹æ­å»ºDHCPæœåŠ¡"><a href="#åœ¨CentOS-7-x-ä¸‹æ­å»ºDHCPæœåŠ¡" class="headerlink" title="åœ¨CentOS 7.x ä¸‹æ­å»ºDHCPæœåŠ¡"></a>åœ¨CentOS 7.x ä¸‹æ­å»ºDHCPæœåŠ¡</h1><h2 id="0X00-å®‰è£…DHCPæœåŠ¡"><a href="#0X00-å®‰è£…DHCPæœåŠ¡" class="headerlink" title="0X00 å®‰è£…DHCPæœåŠ¡"></a>0X00 å®‰è£…DHCPæœåŠ¡</h2><p>ä½¿ç”¨yumã€rpmã€æºç ç­‰æ–¹å¼è¿›è¡Œå®‰è£…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dhcpd</span><br></pre></td></tr></table></figure></p><h2 id="0X01-é…ç½®æœåŠ¡å™¨ç½‘ç»œæœåŠ¡"><a href="#0X01-é…ç½®æœåŠ¡å™¨ç½‘ç»œæœåŠ¡" class="headerlink" title="0X01 é…ç½®æœåŠ¡å™¨ç½‘ç»œæœåŠ¡"></a>0X01 é…ç½®æœåŠ¡å™¨ç½‘ç»œæœåŠ¡</h2><p>é¦–å…ˆæˆ‘ä»¬è¦å°†æœ¬åœ°çš„ç½‘ç»œé…ç½®æˆé™æ€åœ°å€ï¼Œå¹¶é‡å¯ç½‘ç»œæœåŠ¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/enp0s3</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„<code>enp0s3</code>æ˜¯æˆ‘çš„ç½‘å¡ï¼Œä½ éœ€è¦å°†è¿™é‡Œä¿®æ”¹æˆä½ çš„ç½‘å¡ï¼Œå¦å¤–åœ¨CentOS 7.x ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„æ˜¯<code>ethx</code>çš„å‘½åæ–¹å¼ã€‚<br>ä¿®æ”¹å¦‚ä¸‹é€‰é¡¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static <span class="comment">#ä¹‹å‰å¾ˆæœ‰å¯èƒ½æ˜¯dhcpï¼Œç°åœ¨æˆ‘ä»¬ä¿®æ”¹å®ƒä¸ºé™æ€</span></span><br><span class="line">ONBOOT=yes <span class="comment">#ä»¥å‰å¯èƒ½æ˜¯noï¼Œæ”¹ä¸ºyesã€å°±æ˜¯æ‰“å¼€ç½‘ç»œæœåŠ¡çš„æ—¶å€™å¯åŠ¨è¿™ä¸ªç½‘å¡</span></span><br><span class="line">IPADDR=192.168.233.1 <span class="comment">#é…ç½®æ–‡ä»¶ä¸­å¯èƒ½æ²¡æœ‰è¿™ä¸ªï¼Œæ²¡æœ‰çš„è¯å°±è‡ªå·±æ·»åŠ è¿™è¡Œ</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„IPåœ°å€å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸è¿‡æœ€åä¸€ä½æœ€å¥½æ˜¯1ï¼Œè¿™æ ·ä¾¿äºè¯†åˆ«</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åé‡å¯ç½‘ç»œæœåŠ¡ï¼Œå¦‚æœé…ç½®æ–‡ä»¶æ²¡æœ‰é”™è¯¯çš„è¯ï¼Œå°±å¯ä»¥æ­£å¸¸å¯åŠ¨äº†<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network.service</span><br></pre></td></tr></table></figure></p><p>è¿™æ—¶å€™æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹IPæ˜¯ä¸æ˜¯å·²ç»å˜æˆæˆ‘ä»¬è®¾ç½®çš„é™æ€IPäº†<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig enp0s3</span><br></pre></td></tr></table></figure></p><h2 id="0X02-é…ç½®DHCPæœåŠ¡"><a href="#0X02-é…ç½®DHCPæœåŠ¡" class="headerlink" title="0X02 é…ç½®DHCPæœåŠ¡"></a>0X02 é…ç½®DHCPæœåŠ¡</h2><p>é…ç½®æ–‡ä»¶åœ¨è¿™é‡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/dhcp/dhcpd.conf</span><br></pre></td></tr></table></figure></p><p>æ‰“å¼€ä¹‹åä¼šæœ‰ä¸‰è¡Œæ³¨é‡Šï¼Œæˆ‘ä»¬åˆæ¬¡å­¦ä¹ é…ç½®çš„æ—¶å€™å¯ä»¥å…ˆä¸ç®¡å®ƒï¼Œåªæœ‰æœåŠ¡çœŸçš„è·‘èµ·æ¥å¹¶ç”Ÿæ•ˆäº†æˆ‘ä»¬æ‰ä¼šè¿›ä¸€æ­¥å­¦ä¹ æ˜¯å§ã€‚</p><p>åœ¨é…ç½®æ–‡ä»¶æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®DHCPäºDNSæœåŠ¡å™¨çš„åŠ¨æ€ä¿¡æ¯æ›´æ–°æ¨¡å¼ã€‚åˆå­¦æ—¶å®Œå…¨å¯ä»¥ä¸ç†è¿™ä¸ªé€‰é¡¹ï¼Œä½†æ˜¯å…¨å±€è®¾ç½®ä¸­ä¸€å®šè¦æœ‰è¿™ä¸ªé€‰é¡¹ï¼Œå¦åˆ™DHCPæœåŠ¡ä¸èƒ½æˆåŠŸå¯åŠ¨ã€‚</span></span><br><span class="line">ddns-update-style interim;</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‹é¢å¼€å§‹åˆ†é…å­ç½‘ï¼Œç½‘æ®µæ˜¯192.168.233.0 å­ç½‘æ©ç æ˜¯ 255.255.255.0</span></span><br><span class="line"><span class="comment">#ä¸èƒ½ç†è§£ç½‘æ®µå’Œå­ç½‘æ©ç çš„å¯ä»¥å»ç½‘ä¸ŠæŸ¥ä¸€ä¸‹ã€‚ç®€å•çš„è¯´ç½‘æ®µè§„å®šäº†åˆ†é…IPçš„æ®µï¼ˆåˆ†é…å“ªä¸€æ®µIPç»™å®¢æˆ·æœºï¼‰ï¼Œå­ç½‘æ©ç è§„å®šäº†ç½‘æ®µçš„å¤§å°</span></span><br><span class="line">subnet 192.168.233.0 netmask 255.255.255.0 &#123;</span><br><span class="line">range 192.168.233.100 192.168.233.199; <span class="comment">#åˆ†é…ç»™å®¢æˆ·æœºçš„IPä»192.168.233.100å¼€å§‹åˆ°192.168.233.199</span></span><br><span class="line">    option routers 192.168.233.2; <span class="comment">#è®¾ç½®ç½‘å…³</span></span><br><span class="line">    default-lease-time 600; <span class="comment">#é»˜è®¤ç§Ÿçº¦æ—¶é—´</span></span><br><span class="line">    max-lease-time 7200; <span class="comment">#æœ€å¤§ç§Ÿçº¦æ—¶é—´</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="0X03-ç»™ç‰¹å®šå®¢æˆ·åˆ†é…ç‰¹å®šåœ°å€"><a href="#0X03-ç»™ç‰¹å®šå®¢æˆ·åˆ†é…ç‰¹å®šåœ°å€" class="headerlink" title="0X03 ç»™ç‰¹å®šå®¢æˆ·åˆ†é…ç‰¹å®šåœ°å€"></a>0X03 ç»™ç‰¹å®šå®¢æˆ·åˆ†é…ç‰¹å®šåœ°å€</h2><p>ä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œå¦‚æœåŒä¸€ç½‘ç»œå†…æœ‰éœ€è¦å›ºå®šIPçš„è®¾å¤‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡DHCPæ¥ç»™ä»–åˆ†é…å›ºå®šçš„IPã€‚ï¼ˆå°±æ¯”å¦‚è¯´é‚£ä¸ªæœ‰æ´ç™–çš„åŒå­¦ï¼‰<br>é¦–å…ˆè¦è¯´ä¸€ä¸‹DHCPè¯†åˆ«ä¸»æœºçš„æ–¹å¼ï¼š<br>DHCPé€šè¿‡æ¥å…¥å®¢æˆ·çš„ç½‘å¡çš„MACåœ°å€æ¥åˆ¤æ–­å®¢æˆ·ï¼Œæ‰€ä»¥å¦‚æœä½ çš„æœºå™¨æœ‰ä¸¤å—ç½‘å¡ï¼Œå¹¶ä¸”ä¸¤å—ç½‘å¡åŒæ—¶æ¥å…¥äº†ç½‘ç»œï¼Œé‚£ä¹ˆDHCPå°±ä¼šè®¤ä¸ºæœ‰ä¸¤ä¸ªè®¾å¤‡æ¥å…¥äº†ç½‘ç»œï¼Œå¹¶ç»™ä½ çš„æœºå™¨åˆ†é…ä¸¤ä¸ªIP</p><blockquote><p>MACåœ°å€å¹¶ä¸æ˜¯â€œè‹¹æœåœ°å€â€ã€‚ã€‚ã€‚<br>MACåœ°å€æ˜¯â€œç‰©ç†åœ°å€â€ï¼Œæ¯å—ç½‘å¡åœ¨å‡ºå‚çš„æ—¶å€™éƒ½ä¼šæœ‰ä¸€ä¸ªå…¨çƒç‹¬ä¸€æ— äºŒçš„MACåœ°å€ï¼ŒMACåœ°å€æ˜¯ä¸€ä¸ª48ä½2è¿›åˆ¶çš„æ•°å­—ï¼Œé€šå¸¸è¡¨è¾¾ä¸ºå…­æ®µä¸¤ä½åå…­è¿›åˆ¶ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬ç»§ç»­ä¿®æ”¹DHCPé…ç½®æ–‡ä»¶ï¼Œåœ¨åˆšæ‰çš„é…ç½®åé¢è¿½åŠ ä¸‹é¢çš„å†…å®¹<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">host Client_C &#123; <span class="comment">#æœ‰ä¸€ä¸ªä¸»æœºï¼Œå«Client_C</span></span><br><span class="line">hardware ethernet 08:00:27:5e:04:27; <span class="comment">#MACåœ°å€æ˜¯08:...:27çš„ç½‘å¡</span></span><br><span class="line">    fixed-address 192.168.233.123; <span class="comment">#åˆ†é…ç»™å®ƒ192.168.233.123çš„IP</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·é…ç½®çš„è¯ï¼Œä¸ç®¡ä½•æ—¶ï¼Œåªè¦è¿™ä¸ªCLient_Cæ¥å…¥åˆ°äº†è¿™ä¸ªç½‘ç»œä¸­ï¼Œé‚£ä¹ˆå®ƒè·å–çš„IPå°±æ˜¯å›ºå®šçš„è¿™ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šå˜<br>ç„¶åé‡å¯ä¸€ä¸‹DHCPæœåŠ¡å°±å¥½äº†<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart dhcpd.service</span><br></pre></td></tr></table></figure></p><h1 id="å¥½äº†ï¼Œè‡³æ­¤DHCPçš„åŸºç¡€é…ç½®å°±æå®šäº†"><a href="#å¥½äº†ï¼Œè‡³æ­¤DHCPçš„åŸºç¡€é…ç½®å°±æå®šäº†" class="headerlink" title="å¥½äº†ï¼Œè‡³æ­¤DHCPçš„åŸºç¡€é…ç½®å°±æå®šäº†"></a>å¥½äº†ï¼Œè‡³æ­¤DHCPçš„åŸºç¡€é…ç½®å°±æå®šäº†</h1>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> DHCP </tag>
            
            <tag> Service Configure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux è½¯é“¾æ¥(ç¬¦å·é“¾æ¥)/ç¡¬é“¾æ¥ ç†è§£Linuxé“¾æ¥</title>
      <link href="/2016/05/11/linux-ln/"/>
      <url>/2016/05/11/linux-ln/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ä»€ä¹ˆæ˜¯é“¾æ¥æ–‡ä»¶"><a href="#0X00-ä»€ä¹ˆæ˜¯é“¾æ¥æ–‡ä»¶" class="headerlink" title="0X00 ä»€ä¹ˆæ˜¯é“¾æ¥æ–‡ä»¶"></a>0X00 ä»€ä¹ˆæ˜¯é“¾æ¥æ–‡ä»¶</h1><p>Linuxä¸­çš„é“¾æ¥æ–‡ä»¶å°±ç›¸å½“äºæ˜¯Windowsä¸­çš„å¿«æ·æ–¹å¼ï¼Œé€šè¿‡é“¾æ¥æ–‡ä»¶å¯ä»¥è®¿é—®åˆ°é“¾æ¥æŒ‡å‘çš„æºæ–‡ä»¶ã€‚ä½†æ˜¯Linuxä¸‹çš„é“¾æ¥æ–‡ä»¶å’ŒWindowsä¸­çš„å¿«æ·æ–¹å¼è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ã€‚Linuxä¸­æœ‰ä¸¤ç§é“¾æ¥æ–‡ä»¶<strong>ç¡¬é“¾æ¥</strong>å’Œ<strong>è½¯è¿æ¥</strong>ä¹Ÿç§°ä¸º<strong>ç¬¦å·é“¾æ¥</strong><br>åœ¨ä»‹ç»é“¾æ¥æ–‡ä»¶ä¹‹å‰å…ˆè¦ä»‹ç»ä¸€ä¸‹Linuxæ–‡ä»¶ç³»ç»Ÿä¸­çš„inode</p><blockquote><p>inodeæ˜¯Linuxæ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶çš„å”¯ä¸€å®šä½å™¨ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªinodeï¼Œä¹Ÿæ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸€ä¸ªinodeå”¯ä¸€å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ã€‚</p></blockquote><p>è¿˜è¦ç†Ÿæ‚‰ä¸€ä¸‹æŒ‡é’ˆçš„é—®é¢˜ï¼Œå¦‚æœå­¦ä¹ è¿‡C/C++çš„è¯ç†è§£èµ·æ¥ä¼šå¾ˆè½»æ¾</p><blockquote><p>è®¡ç®—æœºä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨ç£ç›˜é‡Œçš„ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šè¯»å–åˆ°å†…å­˜ä¸­ï¼Œè€Œç£ç›˜å’Œå†…å­˜éƒ½æ˜¯ä¸€å—ä¸€å—çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ç”¨åœ°å€æ¥æ‰¾åˆ°æ•°æ®çš„å…·ä½“å­˜æ”¾ä½ç½®ã€‚ä¿å­˜äº†æ–‡ä»¶æˆ–è€…æ•°æ®å­˜æ”¾åœ°å€çš„ç‰©ä½“ï¼ˆé€šå¸¸æ˜¯å˜é‡ï¼‰å°±ç§°ä¸ºæŒ‡é’ˆã€‚<br>æˆ‘ä»¬åœ¨Linuxçš„æ“ä½œç•Œé¢çœ‹åˆ°çš„æ–‡ä»¶ï¼Œéƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä»–ä»¬æŒ‡å‘ç£ç›˜çš„æŸä¸ªå…·ä½“ä½ç½®ã€‚è¿™æ ·æˆ‘ä»¬æ¯æ¬¡ç‚¹å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±å¯ä»¥åœ¨ç£ç›˜å¯¹åº”çš„ä½ç½®æ‰“å¼€æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ã€‚</p></blockquote><a id="more"></a><h1 id="0X01-ç¡¬é“¾æ¥"><a href="#0X01-ç¡¬é“¾æ¥" class="headerlink" title="0X01 ç¡¬é“¾æ¥"></a>0X01 ç¡¬é“¾æ¥</h1><p><strong>ç¡¬é“¾æ¥å°±æ˜¯æŒ‡å‘ç£ç›˜ä¸­å…·ä½“ä½ç½®çš„æŒ‡é’ˆã€‚</strong>å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ç£ç›˜ä¸­åˆ†é…ä¸€å—ä½ç½®ç”¨æ¥å­˜å‚¨è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆæ–¹ä¾¿æˆ‘ä»¬æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¿™ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥ï¼Œå°±ç›¸å½“äºåˆåˆ›å»ºäº†ä¸€ä¸ª<strong>æŒ‡å‘ç£ç›˜ä¸­å­˜æ”¾æ–‡ä»¶çš„ä½ç½®çš„æŒ‡é’ˆ</strong>ï¼Œæ‰€ä»¥å°±ç®—æˆ‘ä»¬åˆ é™¤äº†ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰ï¼Œæ–‡ä»¶æœ¬èº«ä¹Ÿä¸ä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºè¿˜æ˜¯æœ‰ä¸€ä¸ªæŒ‡é’ˆæ˜¯æŒ‡å‘æ–‡ä»¶å­˜å‚¨ä½ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡åæ¥åˆ›å»ºçš„ç¡¬é“¾æ¥æ¥è®¿é—®åˆ°åŸæ¥çš„æ–‡ä»¶ã€‚</p><h1 id="0X02-è½¯é“¾æ¥â€”â€”ç¬¦å·é“¾æ¥"><a href="#0X02-è½¯é“¾æ¥â€”â€”ç¬¦å·é“¾æ¥" class="headerlink" title="0X02 è½¯é“¾æ¥â€”â€”ç¬¦å·é“¾æ¥"></a>0X02 è½¯é“¾æ¥â€”â€”ç¬¦å·é“¾æ¥</h1><p><strong>è½¯è¿æ¥å¯ä»¥å¤§è‡´ç†è§£æˆæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆã€‚</strong>å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶çš„ä¸€ä¸ªè½¯è¿æ¥ï¼Œé‚£ä¹ˆå¦‚æœåˆ é™¤äº†åŸæ¥çš„æ–‡ä»¶ï¼Œé‚£è¿™ä¸ªæ–‡ä»¶å°±çœŸçš„æ‰¾ä¸åˆ°äº†ã€‚å› ä¸ºè½¯è¿æ¥åªæ˜¯æŒ‡å‘ä¹‹å‰ï¼ˆæŒ‡å‘å…·ä½“æ–‡ä»¶ä½ç½®ï¼‰çš„æŒ‡é’ˆï¼Œæ‰€ä»¥é‚£ä¸ªè½¯è¿æ¥å°±æŒ‡å‘ä¸€ç‰‡ç©ºç™½åŒºåŸŸäº†ï¼Œä»¥å‰å­˜åœ¨çš„æ–‡ä»¶ä¹Ÿæ‰¾ä¸åˆ°äº†ã€‚å°±å¥½åƒæˆ‘ä»¬åœ¨Windowsä¸­å¸è½½äº†ä¸€ä¸ªè½¯ä»¶ï¼Œä½†æ˜¯æ¡Œé¢ä¸Šçš„å¿«æ·æ–¹å¼è¿˜å¯èƒ½å­˜åœ¨ï¼Œç°åœ¨æˆ‘ä»¬æ‰“å¼€é‚£ä¸ªå¿«æ·æ–¹å¼æ˜¯ä¸èƒ½è®¿é—®åˆ°è½¯ä»¶çš„ï¼Œå› ä¸ºå·²ç»è¢«æˆ‘ä»¬åˆ é™¤äº†ã€‚</p><h1 id="0X03-æ“ä½œæ¼”ç¤º"><a href="#0X03-æ“ä½œæ¼”ç¤º" class="headerlink" title="0X03 æ“ä½œæ¼”ç¤º"></a>0X03 æ“ä½œæ¼”ç¤º</h1><p>é¦–å…ˆæˆ‘è¿™é‡Œæœ‰ä¸€ä¸ª<code>hehe.tar.gz</code>çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹å®ƒçš„inodeæ˜¯33515290ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥åä¸º<code>heihei.tar.gz</code>ï¼Œå†æŸ¥çœ‹è¿™ä¸¤ä¸ªæ–‡ä»¶çš„inodeï¼Œå‘ç°ä¸¤ä¸ªæ–‡ä»¶çš„inodeæ˜¯ä¸€æ ·çš„ã€‚å†åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥åä¸º<code>haha.tar.gz</code>ï¼Œç»§ç»­æŸ¥çœ‹æ–‡ä»¶inodeã€‚å¯ä»¥çœ‹åˆ°ç³»ç»Ÿç»™<code>haha.tar.gz</code>åˆ†é…äº†ä¸€ä¸ªæ–°çš„inodeï¼Œå¹¶ä¸”lsçš„æ—¶å€™æœ‰ä¸ªç®­å¤´æ˜¾ç¤ºäº†æŒ‡å‘ä»€ä¹ˆæ–‡ä»¶ã€‚</p><blockquote><p>ls -i å¯ä»¥æ˜¾ç¤ºæ–‡ä»¶çš„inode</p></blockquote><p><img src="http://o6sowsew8.bkt.clouddn.com/VirtualBox_CentOS_Study_16_05_2016_20_10_26.png" alt="alt text"></p><h1 id="0X04-è½¯ç¡¬é“¾æ¥å¯¹æ¯”"><a href="#0X04-è½¯ç¡¬é“¾æ¥å¯¹æ¯”" class="headerlink" title="0X04 è½¯ç¡¬é“¾æ¥å¯¹æ¯”"></a>0X04 è½¯ç¡¬é“¾æ¥å¯¹æ¯”</h1><h2 id="ç¡¬é“¾æ¥ï¼š"><a href="#ç¡¬é“¾æ¥ï¼š" class="headerlink" title="ç¡¬é“¾æ¥ï¼š"></a>ç¡¬é“¾æ¥ï¼š</h2><p>ä¸åˆ†é…æ–°çš„inode<br>ä¸å¯ä»¥åœ¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿä¹‹é—´é“¾æ¥<br>åªæœ‰rootæ‰èƒ½åˆ›å»ºç›®å½•çš„ç¡¬é“¾æ¥<br>åªèƒ½æºäºå­˜åœ¨çš„æ–‡ä»¶</p><h2 id="è½¯é“¾æ¥ï¼š"><a href="#è½¯é“¾æ¥ï¼š" class="headerlink" title="è½¯é“¾æ¥ï¼š"></a>è½¯é“¾æ¥ï¼š</h2><p>åˆ†é…æ–°çš„inode<br>ä¸å—æ–‡ä»¶ç³»ç»Ÿçš„é™åˆ¶<br>æŒ‡å‘æºæ–‡ä»¶ä½ç½®çš„æ ‡è¯†<br>å¯ä»¥é“¾å‘ä¸å­˜åœ¨çš„æ–‡ä»¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Soft Link </tag>
            
            <tag> Hard Link </tag>
            
            <tag> Link </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apacheé…ç½®è™šæ‹Ÿä¸»æœº VirtualHost å¤šç«™ç‚¹</title>
      <link href="/2016/05/08/apache-vhost/"/>
      <url>/2016/05/08/apache-vhost/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœæˆ‘ä»¬åªæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œåº”è¯¥æ€ä¹ˆå®ç°è®©è¿™å°æœåŠ¡å™¨åŒæ—¶å¤„ç†PHPå’ŒJSPçš„è¯·æ±‚ï¼Ÿ<br>è¿™é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡Apacheçš„è™šæ‹Ÿä¸»æœºï¼ˆvhostï¼‰æ¥è¿›è¡Œç«¯å£è½¬å‘ã€‚<br>Apacheä¼šé€šè¿‡è®¿é—®æœåŠ¡å™¨çš„åŸŸåå°†è¯·æ±‚è½¬å‘è‡³ä¸åŒçš„ç«¯å£æˆ–è€…ä¸åŒçš„æœåŠ¡å™¨ã€‚</p><a id="more"></a><h1 id="0X00-å‰æ-amp-ç›®çš„"><a href="#0X00-å‰æ-amp-ç›®çš„" class="headerlink" title="0X00 å‰æ&amp;ç›®çš„"></a>0X00 å‰æ&amp;ç›®çš„</h1><p>å‰æï¼š<br>ã€€ã€€æ‹¥æœ‰ä¸€ä¸ªåŸŸåï¼Œå¹¶æœ‰ä¸¤ä¸ªAè§£æï¼ŒåŒæ—¶è§£æåˆ°è¿™å°æœåŠ¡å™¨çš„IP<br>ã€€ã€€åˆ†åˆ«æ‹¥æœ‰ä¸€ä¸ªJSPå’ŒPHPçš„é¡µé¢ï¼ˆç½‘ç«™ï¼‰<br>ç›®çš„ï¼š<br>ã€€ã€€ä½¿ç”¨php.test.comè®¿é—®çš„æ—¶å€™è§£æåˆ°PHPçš„ç½‘ç«™ä¸Š<br>ã€€ã€€ä½¿ç”¨jsp.test.comè®¿é—®çš„æ—¶å€™è§£æåˆ°JSPçš„ç½‘ç«™ä¸Š<br>æ“ä½œç³»ç»Ÿï¼š<br>    Centos 7.x å¦‚æœæ˜¯ä¹‹å‰çš„ç‰ˆæœ¬æˆ–æ˜¯å…¶ä»–ç³»ç»Ÿå¯èƒ½å‡ºç°ä¸åŒçš„æƒ…å†µ</p><h1 id="0X01-å®‰è£…httpd-Apache"><a href="#0X01-å®‰è£…httpd-Apache" class="headerlink" title="0X01 å®‰è£…httpd  (Apache)"></a>0X01 å®‰è£…httpd  (Apache)</h1><p>å®‰è£…å¹¶å¯åŠ¨æœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install httpd</span><br><span class="line">systemctl start httpd.service</span><br></pre></td></tr></table></figure></p><h1 id="0X02-å®‰è£…PHP"><a href="#0X02-å®‰è£…PHP" class="headerlink" title="0X02 å®‰è£…PHP"></a>0X02 å®‰è£…PHP</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install php</span><br></pre></td></tr></table></figure><h1 id="0X03-å®‰è£…JDKç”¨æ¥é…åˆJSP"><a href="#0X03-å®‰è£…JDKç”¨æ¥é…åˆJSP" class="headerlink" title="0X03 å®‰è£…JDKç”¨æ¥é…åˆJSP"></a>0X03 å®‰è£…JDKç”¨æ¥é…åˆJSP</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk</span><br></pre></td></tr></table></figure><h1 id="0X04-å®‰è£…tomcatç”¨äºè§£æJSPé¡µé¢"><a href="#0X04-å®‰è£…tomcatç”¨äºè§£æJSPé¡µé¢" class="headerlink" title="0X04 å®‰è£…tomcatç”¨äºè§£æJSPé¡µé¢"></a>0X04 å®‰è£…tomcatç”¨äºè§£æJSPé¡µé¢</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install tomcat tomcat-webapps tomcat-admin-webapps</span><br><span class="line">systemctl start tomcat.service</span><br></pre></td></tr></table></figure><h1 id="0X05-é…ç½®httpdç”¨äºåŒæ—¶æ”¯æŒPHPå’ŒJSP"><a href="#0X05-é…ç½®httpdç”¨äºåŒæ—¶æ”¯æŒPHPå’ŒJSP" class="headerlink" title="0X05 é…ç½®httpdç”¨äºåŒæ—¶æ”¯æŒPHPå’ŒJSP"></a>0X05 é…ç½®httpdç”¨äºåŒæ—¶æ”¯æŒPHPå’ŒJSP</h1><p>æ‰“å¼€é…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure></p><p>åœ¨é…ç½®æ–‡ä»¶çš„æœ€å‰ç«¯æ·»åŠ å¦‚ä¸‹å†…å®¹<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">NameVirtualHost *:80</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:80</span>&gt;</span></span><br><span class="line">        ServerName php.test.com #æŒ‡å®šä¸€ä¸ªåŸŸå</span><br><span class="line">        DocumentRoot /var/www/html #PHPç½‘ç«™çš„ä½ç½®</span><br><span class="line">        ErrorLog logs/php.test.com-error.log #æ—¥å¿—ä½ç½®</span><br><span class="line">        CustomLog logs/php.test.com-access.log common #æ—¥å¿—ä½ç½®</span><br><span class="line"><span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">VirtualHost</span> *<span class="attr">:80</span>&gt;</span></span><br><span class="line">        ServerName jsp.test.com #æŒ‡å®šå¦ä¸€ä¸ªåŸŸå</span><br><span class="line">        DocumentRoot /var/lib/tomcat/webapps/ROOT #JSPç½‘ç«™çš„ä½ç½®</span><br><span class="line">        ErrorLog logs/jsp.test.com-error.log  #æ—¥å¿—ä½ç½®</span><br><span class="line">        CustomLog logs/jsp.test.com-access.log common #æ—¥å¿—ä½ç½®</span><br><span class="line">        ProxyPass / http://127.0.0.1:8080/ #è½¬å‘ä½ç½®</span><br><span class="line">        ProxyPassReverse / http://127.0.0.1:8080/ #è½¬å‘ä½ç½®</span><br><span class="line"><span class="tag">&lt;/<span class="name">VirtualHost</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h1 id="0X06-æœ€å"><a href="#0X06-æœ€å" class="headerlink" title="0X06 æœ€å"></a>0X06 æœ€å</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd.service</span><br><span class="line">systemctl restart tomcat.service</span><br></pre></td></tr></table></figure><p>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨php.test.com å’Œ jsp.test.comåˆ†åˆ«è®¿é—®åˆ°PHPå’ŒJSPçš„é¡µé¢äº†</p>]]></content>
      
      
      
        <tags>
            
            <tag> Apache </tag>
            
            <tag> Web Server </tag>
            
            <tag> VPS </tag>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mariadb/MySQL å¢åˆ æŸ¥æ”¹ æ•°æ®åº“æ“ä½œ å»ºè¡¨ å»ºæ•°æ®åº“</title>
      <link href="/2016/03/15/mysql-crud/"/>
      <url>/2016/03/15/mysql-crud/</url>
      
        <content type="html"><![CDATA[<p>é¦–å…ˆéœ€è¦å®‰è£…å¥½MySQL/Mariadbçš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œå¹¶ä¸”èƒ½è¿æ¥åˆ°æœåŠ¡ç«¯</p><blockquote><p>å‘½ä»¤ä¸­çš„å¤§å†™å­—æ¯æ˜¯SQLçš„å…³é”®å­—ï¼Œå°å†™å­—æ¯æ˜¯è‡ªå·±çš„ç›¸å…³å±æ€§å’Œæ•°æ®</p></blockquote><h1 id="0X00-è¿æ¥åˆ°æ•°æ®åº“"><a href="#0X00-è¿æ¥åˆ°æ•°æ®åº“" class="headerlink" title="0X00 è¿æ¥åˆ°æ•°æ®åº“"></a>0X00 è¿æ¥åˆ°æ•°æ®åº“</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨mysqlè¿æ¥åˆ°127.0.0.1å¹¶ç”¨rootç”¨æˆ·ç™»é™†ï¼Œå¯†ç ç­‰å¾…è¾“å…¥</span><br><span class="line">mysql -h 127.0.0.1 -u root -p</span><br></pre></td></tr></table></figure><h1 id="0X01-åˆ›å»ºæ•°æ®åº“"><a href="#0X01-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="0X01 åˆ›å»ºæ•°æ®åº“"></a>0X01 åˆ›å»ºæ•°æ®åº“</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºä¸€ä¸ªåä¸ºschoolçš„æ•°æ®åº“</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> school;</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="0X02-å»ºç«‹ä¸€ä¸ªè¡¨"><a href="#0X02-å»ºç«‹ä¸€ä¸ªè¡¨" class="headerlink" title="0X02 å»ºç«‹ä¸€ä¸ªè¡¨"></a>0X02 å»ºç«‹ä¸€ä¸ªè¡¨</h1><p>å»ºç«‹ä¸€ä¸ªåä¸ºstudentçš„è¡¨<br>ç´¢å¼•ï¼š<br>10ä¸ªå­—ç¬¦é•¿åº¦çš„name   ä¸èƒ½ä¸ºç©º<br>11ä¸ªå­—ç¬¦é•¿åº¦çš„number ä¸èƒ½ä¸ºç©º<br>intç±»å‹çš„age        ä¸èƒ½ä¸ºç©º<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> school;</span><br><span class="line">ä½¿ç”¨schoolè¿™ä¸ªæ•°æ®åº“</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="built_in">number</span> <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">age <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="built_in">number</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><h1 id="0X03-æŸ¥è¯¢æ•°æ®åº“å’Œè¡¨"><a href="#0X03-æŸ¥è¯¢æ•°æ®åº“å’Œè¡¨" class="headerlink" title="0X03 æŸ¥è¯¢æ•°æ®åº“å’Œè¡¨"></a>0X03 æŸ¥è¯¢æ•°æ®åº“å’Œè¡¨</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span>;</span><br><span class="line">æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> BALES;</span><br><span class="line">æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ä¸­çš„è¡¨</span><br></pre></td></tr></table></figure><h1 id="0X04-æ’å…¥æ•°æ®"><a href="#0X04-æ’å…¥æ•°æ®" class="headerlink" title="0X04 æ’å…¥æ•°æ®"></a>0X04 æ’å…¥æ•°æ®</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student <span class="keyword">VALUES</span>(<span class="string">'lilei'</span>,<span class="string">'666'</span>,<span class="number">15</span>);</span><br><span class="line">æ’å…¥æ–°çš„æ•°æ®ï¼ŒæŒ‰ç…§é¡ºåºå†™</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (<span class="keyword">name</span>)<span class="keyword">VALUES</span>(<span class="string">'hanmeimei'</span>);</span><br><span class="line">è‡ªå®šä¹‰é¡ºåºå†™å…¥</span><br></pre></td></tr></table></figure><h1 id="0X05-æŸ¥è¯¢æ•°æ®"><a href="#0X05-æŸ¥è¯¢æ•°æ®" class="headerlink" title="0X05 æŸ¥è¯¢æ•°æ®"></a>0X05 æŸ¥è¯¢æ•°æ®</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> student;</span><br><span class="line">æŸ¥è¯¢studentè¡¨ä¸­çš„æ‰€æœ‰name</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="built_in">number</span>=<span class="number">0002</span>;</span><br><span class="line">æŸ¥è¯¢studentè¡¨ä¸­numberä¸º0002çš„name</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">30</span>;</span><br><span class="line">æŸ¥è¯¢studentè¡¨ä¸­ageåœ¨20åˆ°30ä¹‹é—´çš„name</span><br></pre></td></tr></table></figure><h1 id="0X06-æ›´æ–°æ•°æ®"><a href="#0X06-æ›´æ–°æ•°æ®" class="headerlink" title="0X06 æ›´æ–°æ•°æ®"></a>0X06 æ›´æ–°æ•°æ®</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> <span class="keyword">name</span>=<span class="string">'xiaohei'</span> <span class="keyword">WHERE</span> <span class="built_in">number</span>=<span class="string">'0002'</span>;</span><br><span class="line">æŠŠæ‰€æœ‰numberä¸º0002çš„nameæ›´æ–°ä¸ºxiaohei</span><br></pre></td></tr></table></figure><h1 id="0X07-åˆ é™¤æ•°æ®"><a href="#0X07-åˆ é™¤æ•°æ®" class="headerlink" title="0X07 åˆ é™¤æ•°æ®"></a>0X07 åˆ é™¤æ•°æ®</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="built_in">number</span>=<span class="string">'0002'</span></span><br><span class="line">åˆ é™¤æ‰€æœ‰<span class="built_in">number</span>ä¸º<span class="number">0002</span>çš„æ•°æ®</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> MySQL </tag>
            
            <tag> MariaDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java æŠ½è±¡ç±»å’Œæ¥å£ ç†è§£æŠ½è±¡ç±»å’Œæ¥å£</title>
      <link href="/2015/11/21/java-class-interface/"/>
      <url>/2015/11/21/java-class-interface/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00æŠ½è±¡ç±»-amp-æ¥å£ç®€ä»‹"><a href="#0X00æŠ½è±¡ç±»-amp-æ¥å£ç®€ä»‹" class="headerlink" title="0X00æŠ½è±¡ç±»&amp;æ¥å£ç®€ä»‹"></a>0X00æŠ½è±¡ç±»&amp;æ¥å£ç®€ä»‹</h1><p>æŠ½è±¡ç±»</p><ol><li>abstract æŠ½è±¡ä¿®é¥°ç¬¦â€”â€”æŠ½è±¡å°±æ˜¯ä¸ºäº†è®©å­ç±»é›†æˆçš„ï¼Œå¹¶ä¸èƒ½ç›´æ¥å®ç°ä¸€ä¸ªå¯¹è±¡</li><li>æŠ½è±¡ç±»ä¸­æ‰€æœ‰æŠ½è±¡æ–¹æ³•éƒ½è¦åœ¨å­ç±»ä¸­å®ç°</li><li>æ‹¥æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»</li><li>æŠ½è±¡ç±»å¯ä»¥æœ‰éæŠ½è±¡çš„æ–¹æ³•</li></ol><p>æ¥å£</p><ol><li>interface æ¥å£ä¿®é¥°ç¬¦â€”â€”æ¥å£æ˜¯ä¸ºäº†è®©ç±»å®ç°çš„</li><li>å˜é‡é»˜è®¤æ˜¯public static finalå¹¶ä¸”ä¸èƒ½æ”¹å˜</li><li>æ–¹æ³•é»˜è®¤æ˜¯public abstractå¹¶ä¸”ä¸èƒ½æ”¹å˜</li><li>æ¥å£ä¸å®ç°æ–¹æ³•</li></ol><a id="more"></a><h1 id="0X01æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"><a href="#0X01æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«" class="headerlink" title="0X01æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«"></a>0X01æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«</h1><ol><li>æŠ½è±¡ç±»å¯ä»¥å®ç°æ–¹æ³•ç»†èŠ‚ï¼Œæ¥å£ä¸èƒ½</li><li>æŠ½è±¡ç±»çš„å˜é‡å¯ä»¥æ˜¯å„ç§ç±»å‹çš„ï¼Œæ¥å£ä¸èƒ½</li><li>æŠ½è±¡ç±»å¯ä»¥æœ‰é™æ€ä»£ç å—å’Œé™æ€æ–¹æ³•ï¼Œæ¥å£ä¸èƒ½</li><li>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œè€Œåªèƒ½ç»§æ‰¿è‡ªä¸€ä¸ªæŠ½è±¡ç±»</li><li>ç»§æ‰¿å¯ä»¥ç†è§£æˆâ€œæ˜¯ä¸æ˜¯â€ï¼Œæ¥å£å¯ä»¥ç†è§£æˆâ€œæœ‰æ²¡æœ‰â€</li></ol><h1 id="0X02ä¸¾ä¸ªä¾‹å­"><a href="#0X02ä¸¾ä¸ªä¾‹å­" class="headerlink" title="0X02ä¸¾ä¸ªä¾‹å­"></a>0X02ä¸¾ä¸ªä¾‹å­</h1><p>æœ‰ä¸€ä¸ªæ¥å£CanFly<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CanFly</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€ä¸ªæŠ½è±¡ç±»Bird<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"I can eat insect~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€ä¸ªSparrowç±»ç»§æ‰¿è‡ªBird<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sparrow</span> <span class="keyword">extends</span> <span class="title">Bird</span> <span class="keyword">implements</span> <span class="title">CanFly</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"I can fly"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€ä¸ªæŠ½è±¡ç±»Airplane<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Airplane</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> price;<span class="comment">//ä»·æ ¼</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Crash</span><span class="params">()</span></span>&#123;   <span class="comment">//å æ¯</span></span><br><span class="line">        System.out.println(<span class="string">"This airplane is crashed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€ä¸ªJian_10ç±»ç»§æ‰¿è‡ªAirplane<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Jian_10</span> <span class="keyword">extends</span> <span class="title">Airplane</span> <span class="keyword">implements</span> <span class="title">CanFly</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"I can fly"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€ä¸ªåŒ…å«ä¸»æ–¹æ³•çš„ç±»æ¥æµ‹è¯•<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jian_10 A_0 = <span class="keyword">new</span> Jian_10();<span class="comment">//å®ä¾‹åŒ–A_0å·æˆ˜æœº</span></span><br><span class="line">        Sparrow xiaoMing = <span class="keyword">new</span> Sparrow();<span class="comment">//æ²¡é”™ï¼Œè¿™åªéº»é›€å«å°æ˜</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬éƒ½èƒ½é£</span></span><br><span class="line">        A_0.fly();</span><br><span class="line">        xiaoMing.fly();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°æ˜åƒé¥­äº†</span></span><br><span class="line">        xiaoMing.eat();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆ˜æœºå æ¯äº†</span></span><br><span class="line">        A_0.Crash();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è¿è¡Œç»“æœæ˜¯è¿™æ ·çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">I can fly</span><br><span class="line">I can fly</span><br><span class="line">I can eat insect~</span><br><span class="line">This airplane is crashed!</span><br></pre></td></tr></table></figure></p><h1 id="0X03ç²—ç•¥è§£é‡Š"><a href="#0X03ç²—ç•¥è§£é‡Š" class="headerlink" title="0X03ç²—ç•¥è§£é‡Š"></a>0X03ç²—ç•¥è§£é‡Š</h1><p>å¤§æ¦‚æ˜¯è¿™ä¹ˆå›äº‹ï¼š<br>Airplaneå’ŒBirdæ˜¯ä¸¤ä¸ªæŠ½è±¡ç±»ï¼ŒJian_10å’ŒSparrowåˆ†åˆ«ç»§æ‰¿è‡ªä»–ä»¬ï¼Œæ‰€ä»¥å­ç±»å¯ä»¥ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚ä¸”Jian_10å’ŒSparrowè¿˜æœ‰æ¥å£CanFly ã€‚ç„¶åJian_10å’ŒSparrowå®ç°äº†æ¥å£CanFlyä¸­å£°æ˜çš„flyæ–¹æ³•ï¼ˆå¿…é¡»å®ç°ï¼‰ã€‚<br>å¦‚æœä»¥åæƒ³è¦ä¿®æ”¹Airplaneå’ŒBirdä¸¤ä¸ªçˆ¶ç±»çš„æ–¹æ³•çš„æ—¶å€™ï¼Œæ¯”å¦‚æˆ‘ä¸æƒ³è®©Birdåƒä¸œè¥¿äº†æˆ–è€…Airplaneä¸ä¼šå æ¯äº†ï¼Œå°±åªéœ€è¦ä¿®æ”¹Airplaneå’ŒBirdä¸­ç›¸åº”çš„æ–¹æ³•ã€‚</p><blockquote><p>ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªä¸€ä¸ªç±»&amp;æŠ½è±¡ç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£</p></blockquote><p>æ¯”å¦‚ï¼ŒAirplaneå’ŒBirdæœ‰å¾ˆå¤šç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯å®ç°ä¸å°½ç›¸åŒï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™äº›æ–¹æ³•æ”¾åˆ°ä¸€ä¸ªæ¥å£ä¸­ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> OOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€ æ¨ç®±å­ Gccç¼–è¯‘é€šè¿‡</title>
      <link href="/2015/10/19/c-push-box/"/>
      <url>/2015/10/19/c-push-box/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-ç¼–è¯‘ç¯å¢ƒ"><a href="#0X00-ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="0X00 ç¼–è¯‘ç¯å¢ƒ"></a>0X00 ç¼–è¯‘ç¯å¢ƒ</h1><p>Ubuntu 14.04 + GNU/gcc<br>å¦‚æœè¦åœ¨Windowsä¸‹ç¼–è¯‘çš„è¯ï¼Œ<em> å¯èƒ½ </em> éœ€è¦æ³¨é‡Šæ‰16-18çš„ç¼–è¯‘é¢„å¤„ç†ï¼Œè¿˜ <em> å¯èƒ½ </em> è¦æ³¨é‡Šæ‰getch()çš„å‡½æ•°å£°æ˜åŠå®šä¹‰ï¼Œæœ€ååœ¨åŠ ä¸Šconio.hçš„å¤´æ–‡ä»¶ã€‚</p><h1 id="0X01-é‡åˆ°çš„é—®é¢˜"><a href="#0X01-é‡åˆ°çš„é—®é¢˜" class="headerlink" title="0X01 é‡åˆ°çš„é—®é¢˜"></a>0X01 é‡åˆ°çš„é—®é¢˜</h1><p>Windowsä¸­èƒ½ä½¿ç”¨getch()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä»¥è¾“å…¥æµçš„æ–¹å¼è¾“å…¥ã€‚ï¼ˆç®€å•åœ°è¯´å°±æ˜¯æŒ‰ä¸‹å»ä¸€ä¸ªæŒ‰é”®å°±èƒ½æœ‰ååº”ï¼Œè€Œä¸ç”¨ç‚¹å‡»å›è½¦ï¼‰ã€‚ä½†æ˜¯åœ¨Linuxç¯å¢ƒä¸‹æ²¡æœ‰è¿™ä¸ªå‡½æ•°ä¹Ÿæ²¡æœ‰connio.hçš„å¤´æ–‡ä»¶ã€‚ä½†æ˜¯æ¯æ¬¡æŒ‰ä¸€ä¸‹è¿˜è¦æŒ‰å›è½¦è¿˜æ˜¯æŒºé€†å¤©çš„ã€‚ä¸è¿‡æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†æ›¿ä»£å“ï¼ˆæ„Ÿè°¢<em>å¹½é¬¼</em>ï¼‰</p><blockquote><p><span class="exturl" data-url="aHR0cDovL215Lm9zY2hpbmEubmV0L3lvdWd1aS9ibG9nLzExMTM0NQ==" title="http://my.oschina.net/yougui/blog/111345">http://my.oschina.net/yougui/blog/111345<i class="fa fa-external-link"></i></span></p></blockquote><a id="more"></a><h1 id="0X02-ä»£ç å®ç°"><a href="#0X02-ä»£ç å®ç°" class="headerlink" title="0X02 ä»£ç å®ç°"></a>0X02 ä»£ç å®ç°</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*******************************************************************</span></span><br><span class="line"><span class="comment"> * Project name     : push the boxs</span></span><br><span class="line"><span class="comment"> * Create date      : 2015.10.17</span></span><br><span class="line"><span class="comment"> * Last modify date : 2015.10.19</span></span><br><span class="line"><span class="comment"> * Auther name      : mouse_ts</span></span><br><span class="line"><span class="comment"> * E-mail address   : michaelhaozi@hotmail.com</span></span><br><span class="line"><span class="comment"> * Description      : this is game, you control a boy push the boxs</span></span><br><span class="line"><span class="comment"> * to the destination. but you can't push the stone and two boxs.</span></span><br><span class="line"><span class="comment"> * if you'r box touch the wall , you can't pull it.</span></span><br><span class="line"><span class="comment"> * ****************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;termios.h&gt;//using getch()</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//this is constant</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TRUE   1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FALSE  0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX    10</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> WALL   6</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PLAYER 7</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOX    8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BLANK  5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DES    9</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> W      <span class="meta-string">'w'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A      <span class="meta-string">'a'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S      <span class="meta-string">'s'</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> D      <span class="meta-string">'d'</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//this is game map</span></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAX][MAX];</span><br><span class="line"><span class="keyword">int</span> ok = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//player</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">player</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;player;</span><br><span class="line"></span><br><span class="line"><span class="comment">//boxs</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">box</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;box_1, box_2, box_3;</span><br><span class="line"></span><br><span class="line"><span class="comment">//des</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">des</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;des_1, des_2, des_3;</span><br><span class="line"></span><br><span class="line"><span class="comment">//statement function</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initMap</span><span class="params">()</span></span>;         <span class="comment">//init the map</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initPlayer</span><span class="params">()</span></span>;      <span class="comment">//init the player</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initBox</span><span class="params">()</span></span>;         <span class="comment">//init the boxs</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initDes</span><span class="params">()</span></span>;         <span class="comment">//init the des</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">()</span></span>;        <span class="comment">//print the map</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMap</span><span class="params">()</span></span>;          <span class="comment">//set the player, boxs, des</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">getch</span><span class="params">()</span></span>;           <span class="comment">//getch()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUP</span><span class="params">()</span></span>;            <span class="comment">//go up</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goDown</span><span class="params">()</span></span>;          <span class="comment">//go down</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goLeft</span><span class="params">()</span></span>;          <span class="comment">//go left</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goRight</span><span class="params">()</span></span>;         <span class="comment">//go right</span></span><br><span class="line"><span class="function"><span class="keyword">int</span>  <span class="title">computingSuccess</span><span class="params">()</span></span>;<span class="comment">//computing how many box seccessd</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> ch;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"clear"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//init the game</span></span><br><span class="line">    initMap();</span><br><span class="line">    initPlayer();</span><br><span class="line">    initBox();</span><br><span class="line">    setMap();</span><br><span class="line">    printMap();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//control the boy</span></span><br><span class="line">    <span class="keyword">while</span> (ch = getch())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span>(ch)<span class="comment">//where is the boy move</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> W:</span><br><span class="line">                goUP();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> A:</span><br><span class="line">                goLeft();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> S:</span><br><span class="line">                goDown();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> D:</span><br><span class="line">                goRight();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            defualt:</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">"You should press w, a, s, d to control the boy to move\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        setMap();</span><br><span class="line">        system(<span class="string">"clear"</span>);</span><br><span class="line">        printMap();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (computingSuccess() == <span class="number">3</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"clear"</span>);</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"\n\n\n\n\n\n\n             You win the game!\n"</span>);</span><br><span class="line">    getch();</span><br><span class="line">    system(<span class="string">"clear"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//getch()   by.YouGui   http://my.oschina.net/yougui/blog/111345</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">getch</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">termios</span> <span class="title">org_opts</span>, <span class="title">new_opts</span>;</span></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    res = tcgetattr(STDIN_FILENO, &amp;org_opts);</span><br><span class="line">    assert(res == <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">memcpy</span>(&amp;new_opts, &amp;org_opts, <span class="keyword">sizeof</span>(new_opts));</span><br><span class="line">    new_opts.c_lflag &amp;= ~(ICANON | ECHO | ECHOE | ECHOK | ECHONL | ECHOPRT | ECHOKE | ICRNL);</span><br><span class="line">    tcsetattr(STDIN_FILENO, TCSANOW, &amp;new_opts);</span><br><span class="line">    c = getchar();</span><br><span class="line">    res = tcsetattr(STDIN_FILENO, TCSANOW, &amp;org_opts);</span><br><span class="line">    assert(res == <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//init this map</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initMap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; MAX; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">map</span>[i][j] = WALL;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">2</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">2</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">3</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">5</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">6</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">7</span>] = BLANK;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">map</span>[<span class="number">5</span>][<span class="number">4</span>] = BLANK;</span><br><span class="line"></span><br><span class="line">    initDes();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//print map</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printMap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"This is a game !\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; MAX; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; MAX; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == WALL)</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">" # "</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == BOX)</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">" @ "</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == PLAYER)</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">" X "</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == BLANK)</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">"   "</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == DES)</span><br><span class="line">                <span class="built_in">printf</span> (<span class="string">" O "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span> (<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//init the player</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initPlayer</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    player.x = <span class="number">2</span>;</span><br><span class="line">    player.y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//init the boxs</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initBox</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    box_1.x = <span class="number">3</span>;</span><br><span class="line">    box_1.y = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    box_2.x = <span class="number">4</span>;</span><br><span class="line">    box_2.y = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    box_3.x = <span class="number">6</span>;</span><br><span class="line">    box_3.y = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//init the des</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initDes</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    des_1.x = <span class="number">5</span>;</span><br><span class="line">    des_1.y = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">    des_2.x = <span class="number">6</span>;</span><br><span class="line">    des_2.y = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">    des_3.x = <span class="number">7</span>;</span><br><span class="line">    des_3.y = <span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//set map</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//set blank</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">2</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">2</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">3</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">5</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">6</span>] = BLANK;</span><br><span class="line">        <span class="built_in">map</span>[i][<span class="number">7</span>] = BLANK;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">map</span>[<span class="number">5</span>][<span class="number">4</span>] = BLANK;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//set des</span></span><br><span class="line">    <span class="built_in">map</span>[des_1.x][des_1.y] = DES;</span><br><span class="line">    <span class="built_in">map</span>[des_2.x][des_2.y] = DES;</span><br><span class="line">    <span class="built_in">map</span>[des_3.x][des_3.y] = DES;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//set player</span></span><br><span class="line">    <span class="built_in">map</span>[player.x][player.y] = PLAYER;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//set box</span></span><br><span class="line">    <span class="built_in">map</span>[box_1.x][box_1.y] = BOX;</span><br><span class="line">    <span class="built_in">map</span>[box_2.x][box_2.y] = BOX;</span><br><span class="line">    <span class="built_in">map</span>[box_3.x][box_3.y] = BOX;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//computing the success move the box to the des</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">computingSuccess</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[des_1.x][des_1.y] == BOX)</span><br><span class="line">        num++;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[des_2.x][des_2.y] == BOX)</span><br><span class="line">        num++;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[des_3.x][des_3.y] == BOX)</span><br><span class="line">        num++;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * after this is control your boy to move up down left and right</span></span><br><span class="line"><span class="comment"> * all of the  functions to control the boy to move</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//control the boy go up</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUP</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[player.x - <span class="number">1</span>][player.y] == BLANK ||</span><br><span class="line">        <span class="built_in">map</span>[player.x - <span class="number">1</span>][player.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        player.x--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (player.x - <span class="number">1</span> == box_1.x &amp;&amp; player.y == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x - <span class="number">1</span>][box_1.y] == BLANK ||</span><br><span class="line">        player.x - <span class="number">1</span> == box_1.x &amp;&amp; player.y == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x - <span class="number">1</span>][box_1.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_1.x--;</span><br><span class="line">        player.x--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x - <span class="number">1</span> == box_2.x &amp;&amp; player.y == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x - <span class="number">1</span>][box_2.y] == BLANK ||</span><br><span class="line">             player.x - <span class="number">1</span> == box_2.x &amp;&amp; player.y == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x - <span class="number">1</span>][box_2.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_2.x--;</span><br><span class="line">        player.x--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x - <span class="number">1</span> == box_3.x &amp;&amp; player.y == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x - <span class="number">1</span>][box_3.y] == BLANK ||</span><br><span class="line">             player.x - <span class="number">1</span> == box_3.x &amp;&amp; player.y == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x - <span class="number">1</span>][box_3.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_3.x--;</span><br><span class="line">        player.x--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//control the boy go down</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goDown</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[player.x + <span class="number">1</span>][player.y] == BLANK ||</span><br><span class="line">        <span class="built_in">map</span>[player.x + <span class="number">1</span>][player.y] == DES)</span><br><span class="line">        player.x++;</span><br><span class="line">    <span class="keyword">if</span> (player.x + <span class="number">1</span> == box_1.x &amp;&amp; player.y == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x + <span class="number">1</span>][box_1.y] == BLANK ||</span><br><span class="line">        player.x + <span class="number">1</span> == box_1.x &amp;&amp; player.y == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x + <span class="number">1</span>][box_1.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_1.x++;</span><br><span class="line">        player.x++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x + <span class="number">1</span> == box_2.x &amp;&amp; player.y == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x + <span class="number">1</span>][box_2.y] == BLANK ||</span><br><span class="line">             player.x + <span class="number">1</span> == box_2.x &amp;&amp; player.y == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x + <span class="number">1</span>][box_2.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_2.x++;</span><br><span class="line">        player.x++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x + <span class="number">1</span> == box_3.x &amp;&amp; player.y == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x + <span class="number">1</span>][box_3.y] == BLANK ||</span><br><span class="line">             player.x + <span class="number">1</span> == box_3.x &amp;&amp; player.y == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x + <span class="number">1</span>][box_3.y] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_3.x++;</span><br><span class="line">        player.x++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//control the boy go left</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goLeft</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[player.x][player.y - <span class="number">1</span>] == BLANK ||</span><br><span class="line">        <span class="built_in">map</span>[player.x][player.y - <span class="number">1</span>] == DES)</span><br><span class="line">        player.y--;</span><br><span class="line">    <span class="keyword">if</span> (player.x == box_1.x &amp;&amp; player.y - <span class="number">1</span> == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x][box_1.y - <span class="number">1</span>] == BLANK ||</span><br><span class="line">        player.x == box_1.x &amp;&amp; player.y - <span class="number">1</span> == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x][box_1.y - <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_1.y--;</span><br><span class="line">        player.y--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x == box_2.x &amp;&amp; player.y - <span class="number">1</span> == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x][box_2.y - <span class="number">1</span>] == BLANK ||</span><br><span class="line">             player.x == box_2.x &amp;&amp; player.y - <span class="number">1</span> == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x][box_2.y - <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_2.y--;</span><br><span class="line">        player.y--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x == box_3.x &amp;&amp; player.y - <span class="number">1</span> == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x][box_3.y - <span class="number">1</span>] == BLANK ||</span><br><span class="line">             player.x == box_3.x &amp;&amp; player.y - <span class="number">1</span> == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x][box_3.y - <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_3.y--;</span><br><span class="line">        player.y--;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//control the boy go right</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goRight</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">map</span>[player.x][player.y + <span class="number">1</span>] == BLANK ||</span><br><span class="line">        <span class="built_in">map</span>[player.x][player.y + <span class="number">1</span>] == DES)</span><br><span class="line">        player.y++;</span><br><span class="line">    <span class="keyword">if</span> (player.x == box_1.x &amp;&amp; player.y + <span class="number">1</span> == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x][box_1.y + <span class="number">1</span>] == BLANK ||</span><br><span class="line">        player.x == box_1.x &amp;&amp; player.y + <span class="number">1</span> == box_1.y &amp;&amp;</span><br><span class="line">        <span class="built_in">map</span>[box_1.x][box_1.y + <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_1.y++;</span><br><span class="line">        player.y++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x == box_2.x &amp;&amp; player.y + <span class="number">1</span> == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x][box_2.y + <span class="number">1</span>] == BLANK ||</span><br><span class="line">             player.x == box_2.x &amp;&amp; player.y + <span class="number">1</span> == box_2.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_2.x][box_2.y + <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_2.y++;</span><br><span class="line">        player.y++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (player.x == box_3.x &amp;&amp; player.y + <span class="number">1</span> == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x][box_3.y + <span class="number">1</span>] == BLANK ||</span><br><span class="line">             player.x == box_3.x &amp;&amp; player.y + <span class="number">1</span> == box_3.y &amp;&amp;</span><br><span class="line">             <span class="built_in">map</span>[box_3.x][box_3.y + <span class="number">1</span>] == DES)</span><br><span class="line">    &#123;</span><br><span class="line">        box_3.y++;</span><br><span class="line">        player.y++;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> C Programing Lanuage </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå‘½ä»¤è¡Œæ—¥å† è·å–æ—¶é—´ æ ¼å¼åŒ–è¾“å‡º</title>
      <link href="/2015/07/07/python-cal/"/>
      <url>/2015/07/07/python-cal/</url>
      
        <content type="html"><![CDATA[<p>å®ç°ç®€å•æ—¥å†</p><blockquote><p>è¯»å–å½“å‰æ—¶é—´å¹¶æ˜¾ç¤ºæœ¬æœˆæ—¥å†<br>è¾“å‡ºæ ¼å¼åŒ–</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#It's my first Python program</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#get date è·å–å½“å‰æ—¥æœŸ</span></span><br><span class="line">year  = time.strftime(<span class="string">'%Y'</span>, time.localtime(time.time()))</span><br><span class="line">year = (int)(year)</span><br><span class="line">month = time.strftime(<span class="string">'%m'</span>, time.localtime(time.time()))</span><br><span class="line">day   = time.strftime(<span class="string">'%d'</span>, time.localtime(time.time()))</span><br><span class="line">day = (int)(day)</span><br><span class="line">week  = time.strftime(<span class="string">'%w'</span>, time.localtime(time.time()))</span><br><span class="line"></span><br><span class="line">week = (int)(week)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, day - <span class="number">1</span>):</span><br><span class="line">    week = week - <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> week == <span class="number">-1</span>:</span><br><span class="line">        week = <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#judge leap åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´</span></span><br><span class="line"><span class="keyword">if</span> year % <span class="number">4</span> == <span class="number">0</span> <span class="keyword">and</span> year % <span class="number">400</span> != <span class="number">0</span> <span class="keyword">or</span> year % <span class="number">400</span> == <span class="number">0</span> :</span><br><span class="line">    isLeap = <span class="literal">True</span></span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    isLeap = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#all Dayè¿™ä¸ªæœˆä¸€å…±æœ‰å¤šå°‘å¤©</span></span><br><span class="line"><span class="keyword">if</span> month == <span class="string">'01'</span> <span class="keyword">or</span> month == <span class="string">'03'</span> <span class="keyword">or</span> month == <span class="string">'05'</span> <span class="keyword">or</span> month == <span class="string">'07'</span> <span class="keyword">or</span> month == <span class="string">'08'</span> <span class="keyword">or</span> month == <span class="string">'10'</span> <span class="keyword">or</span> month == <span class="string">'12'</span> :</span><br><span class="line">    allDay = <span class="number">31</span></span><br><span class="line"><span class="keyword">elif</span> month == <span class="string">'02'</span> <span class="keyword">and</span> isLeap :</span><br><span class="line">    allDay = <span class="number">29</span></span><br><span class="line"><span class="keyword">elif</span> month == <span class="string">'02'</span> <span class="keyword">and</span> <span class="keyword">not</span> isLeap :</span><br><span class="line">    allDay = <span class="number">28</span></span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    allDay = <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#print CAL  è¾“å‡ºè¿™ä¸ªæœˆçš„æ—¥å†</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'            '</span> + str(year) + <span class="string">'   '</span> + str(month)</span><br><span class="line"><span class="keyword">print</span> <span class="string">''</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'Sun  Mon  Tue  Wed  Thu  Fri  Sat'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(week) :   <span class="comment">#print space   è¾“å‡ºç©ºç™½éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'    '</span>,</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, allDay + <span class="number">1</span>) :   <span class="comment">#print everday  è¾“å‡ºæ—¥æœŸ</span></span><br><span class="line">    x = str(i)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'%-4s'</span> % x,</span><br><span class="line">    week = week + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> week == <span class="number">7</span> :</span><br><span class="line">        week = <span class="number">0</span></span><br><span class="line">        <span class="keyword">print</span></span><br><span class="line"></span><br><span class="line">raw_input()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux ç›®å½•ç»“æ„ ç†è§£Linuxç›®å½•æ ‘</title>
      <link href="/2015/06/09/linux-dirtree/"/>
      <url>/2015/06/09/linux-dirtree/</url>
      
        <content type="html"><![CDATA[<h1 id="0X00-Linuxæ–‡ä»¶ç›®å½•ç»“æ„"><a href="#0X00-Linuxæ–‡ä»¶ç›®å½•ç»“æ„" class="headerlink" title="0X00 Linuxæ–‡ä»¶ç›®å½•ç»“æ„"></a>0X00 Linuxæ–‡ä»¶ç›®å½•ç»“æ„</h1><p>ã€€ã€€æˆ‘ä»¬åœ¨Windowsç¯å¢ƒä¸‹çš„æ–‡ä»¶ç›®å½•ç»“æ„å¤§æ¦‚æ˜¯å‡ ä¸ªç›˜ç¬¦ï¼ŒCç›˜Dç›˜Eç›˜â€¦ä½†æ˜¯åœ¨Linuxä¸‹æ˜¯æ ‘çŠ¶å›¾ï¼ˆå…¶å®Windowså†…éƒ¨ä¹Ÿæ˜¯æ ‘çŠ¶å›¾ï¼‰ã€‚Linuxä¸‹ä¸€ä¸ªä¸»è¦ç›®å½•æ˜¯<code>/</code>æ ¹ç›®å½•ï¼Œå…¶ä»–æ‰€æœ‰ç›®å½•éƒ½åœ¨æ ¹ç›®å½•ä¸‹ï¼Œå…¶ä»–çš„ç£ç›˜æˆ–è€…åˆ†åŒºä¹Ÿéƒ½æŒ‚è½½åœ¨æ ¹ç›®å½•ä¸‹ã€‚</p><p>ã€€ã€€æŒ‚è½½ï¼šæ¯”å¦‚æˆ‘çš„<code>/media/shawn/new_disk</code>æ˜¯ä¸€ä¸ªç©ºçš„ç›®å½•ï¼Œé‚£æˆ‘å°±å¯ä»¥æŠŠä¸€ä¸ªåˆ†åŒºæŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå°±ç›¸å½“äºä½ æŒ‚äº†ä¸€ä¸ªç“¶å­åœ¨æŸä¸ªæ ‘æˆä¸Šï¼Œè¿™æ ·ä½ åœ¨ç“¶å­ï¼ˆåˆ†åŒºï¼‰è£…çš„æ–‡ä»¶å°±åªå ç”¨ä½ çš„ç“¶å­ï¼ˆåˆ†åŒºï¼‰ç©ºé—´ï¼Œå¹¶ä¸ä¼šå æ®æ ‘ä¸Šçš„ç©ºé—´ã€‚</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">            |------------- bin     æ˜¯binaryçš„ç®€å†™ï¼Œä¿å­˜å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ­¤å¤„çš„éƒ½äºŒè¿›åˆ¶æ–‡ä»¶æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æ‰§è¡Œæƒé™</span><br><span class="line">            |------------- boot    å¼•å¯¼ç›®å½•ï¼Œè´Ÿè´£å¼•å¯¼å¯åŠ¨ç³»ç»Ÿã€‚ç›®å½•ä¸­çš„vmlinuxæ˜¯å†…æ ¸æ–‡ä»¶</span><br><span class="line">            |------------- dev     æ˜¯Deviceçš„ç®€å†™ï¼Œä¿å­˜è®¾å¤‡æ–‡ä»¶ã€‚Uinuxå“²å­¦ä¸­â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œè®¾å¤‡è¢«æŠ½è±¡æˆæ–‡ä»¶</span><br><span class="line">            |------------- home    ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·é»˜è®¤åœ¨æ­¤æœ‰ä¸€ä¸ªè‡ªå·±çš„ä¸»ç›®å½•ã€‚rootç”¨æˆ·çš„ä¸»ç›®å½•åœ¨æ ¹ç›®å½•ä¸‹`/root`</span><br><span class="line">            |------------- lib     ä¿å­˜åº“æ–‡ä»¶</span><br><span class="line">            |------------- media   æŒ‚è½½é©±åŠ¨å™¨ï¼ˆUç›˜æˆ–è€…ç£ç›˜åˆ†åŒºç­‰ï¼‰ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å‘è¡Œç‰ˆæœ¬éƒ½æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹</span><br><span class="line">            |------------- mnt     å’Œmediaçš„åŠŸèƒ½å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œè¯¥ç›®å½•æ‰€æœ‰å‘è¡Œç‰ˆæœ¬éƒ½æœ‰</span><br><span class="line">           / ------------- opt     æ˜¯optionçš„ç®€å†™ï¼Œç”¨æ¥å®‰è£…å„ç§å¤§å‹è½¯ä»¶</span><br><span class="line">/   ------</span><br><span class="line">           \</span><br><span class="line">            |------------- proc    æ˜¯processçš„ç®€å†™ï¼Œä¸æ˜¯ä¸€ä¸ªçœŸå®å­˜åœ¨çš„ç›®å½•ï¼Œå¯ä»¥æŸ¥çœ‹ç›®å½•çš„ä¿¡æ¯åˆ¤æ–­ã€‚ç”¨æ¥ä¿å­˜ç³»ç»Ÿå®æ—¶ä¿¡æ¯ï¼Œå„ä¸ªè¿›ç¨‹çš„å’Œå†…å­˜ä¿¡æ¯</span><br><span class="line">            |------------- sbin    æ˜¯super binaryçš„ç®€å†™ï¼Œä¿å­˜å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ­¤å¤„çš„æ–‡ä»¶æ˜¯åªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨çš„</span><br><span class="line">            |------------- selinux ä¿å­˜SELinuxçš„ç›¸å…³å†…å®¹ï¼ˆSELinuxæ˜¯ç¾å›½å›½å®‰å±€å¼€å‘çš„å®‰å…¨ç³»ç»Ÿï¼Œå¼€æºå¹¶æ•´åˆåˆ°äº†Linuxå†…æ ¸ä¸­ï¼‰</span><br><span class="line">            |------------- sys     ä¿å­˜ç³»ç»Ÿåº•å±‚ä¿¡æ¯ï¼Œç¡¬ä»¶ä¿¡æ¯</span><br><span class="line">            |------------- temp    ä¸´æ—¶ç›®å½•ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ é™¤æ¸…ç†</span><br><span class="line">            |------------- usr     åº”ç”¨è½¯ä»¶çš„é»˜è®¤å®‰è£…ä½ç½®</span><br><span class="line">            |------------- var     æ˜¯variableçš„ç®€å†™ï¼Œç”¨æ¥ä¿å­˜ç»å¸¸å˜åŠ¨çš„æ–‡ä»¶æ¯”å¦‚æ—¥å¿—ä¿¡æ¯å’Œé‚®ä»¶ç­‰</span><br></pre></td></tr></table></figure><h1 id="0X01-Procæ–‡ä»¶ä»‹ç»"><a href="#0X01-Procæ–‡ä»¶ä»‹ç»" class="headerlink" title="0X01 Procæ–‡ä»¶ä»‹ç»"></a>0X01 Procæ–‡ä»¶ä»‹ç»</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cpuconf    CPUçš„å®æ—¶ä¿¡æ¯</span><br><span class="line">memconf    å†…å­˜çš„å®æ—¶ä¿¡æ¯</span><br><span class="line">iomem      I/Oä¿¡æ¯</span><br><span class="line">interrupts ä¸­æ–­ä¿¡æ¯</span><br><span class="line">uptime     å¯åŠ¨æ—¶é—´</span><br><span class="line">acpi       ç”µæºä¿¡æ¯</span><br><span class="line">å‡Œä¹±çš„æ•°å­—   å¯ä»¥ç†è§£æˆæ¯ä¸ªç›®å½•éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œç›®å½•é‡Œæ˜¯è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Diiectory Tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€ä¸­çš„Boolç±»å‹</title>
      <link href="/2015/03/17/c-language-bool-type/"/>
      <url>/2015/03/17/c-language-bool-type/</url>
      
        <content type="html"><![CDATA[<p>ã€€ã€€æœ€è¿‘åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰çš„è¯´æ³•é‡Œæ˜¯æ²¡æœ‰boolç±»å‹çš„ï¼Œä¸è¿‡ä»¥å‰åœ¨ä¹¦ä¸Šå¥½åƒçœ‹åˆ°è¿‡ç›¸å…³çš„ä»‹ç»ï¼Œå°±ç‰¹æ„æ‰¾å‡ºæ¥äº†é‚£æœ¬ä¹¦ã€ŠC Primer Plusã€‹ï¼Œç¡®å®šäº†Cè¯­è¨€é‡Œç¡®å®å­˜åœ¨boolç±»å‹ã€‚Cè¯­è¨€æ˜¯åœ¨C99æ ‡å‡†ä¸­æ·»åŠ çš„boolç±»å‹ã€‚</p><blockquote><p>boolç±»å‹æ˜¯ä»¥è‹±å›½æ•°å­¦å®¶ <em> George Boole </em> å‘½åçš„ï¼Œæ˜¯ä»–å¼€å‘äº†ç”¨çº¿æ€§ä»£æ•°è¡¨ç¤ºå¹¶è§£å†³é€»è¾‘é—®é¢˜çš„ç³»ç»Ÿã€‚</p></blockquote><p>ã€€ã€€åœ¨Cè¯­è¨€ä¸­æˆ‘ä»¬ä½¿ç”¨ _Bool æ¥å®šä¹‰boolç±»å‹çš„å˜é‡</p><p>ã€€ã€€ä¸‹é¢å®šä¹‰äº†ä¸€ä¸ª_Boolç±»å‹çš„å˜é‡ï¼Œå¹¶æŠŠ(1 == 3)çš„è®¡ç®—å€¼èµ‹å€¼ç»™test</p><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">_Bool</span> test;</span><br><span class="line">    test = (<span class="number">1</span> == <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ã€€ã€€ä¸‹é¢èƒ½è¯æ˜boolç±»å‹å˜é‡çš„ç‰¹ç‚¹<br>ã€€ã€€ã€€ã€€åªæœ‰0å’Œ1ä¸¤ä¸ªå€¼<br>ã€€ã€€ã€€ã€€åªæœ‰0èµ‹å€¼ç»™boolç±»å‹æ—¶ï¼Œboolæ‰ä¸º0<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">_Bool</span> test;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">-10</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        test = i;</span><br><span class="line">        <span class="keyword">if</span> (test)</span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">"true\n"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> (<span class="string">"false\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p> ã€€ã€€æœ€åæˆ‘ä»¬è¯æ˜ä¸€ä¸‹boolç±»å‹æ¯”intç±»å‹å çš„å†…å­˜è¦å°‘</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> myint;</span><br><span class="line">    <span class="built_in">_Bool</span> mybool;</span><br><span class="line">    <span class="keyword">int</span> memint;</span><br><span class="line">    <span class="keyword">int</span> membool;</span><br><span class="line"></span><br><span class="line">    memint = <span class="keyword">sizeof</span>(myint);</span><br><span class="line">    membool = <span class="keyword">sizeof</span>(mybool);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"int   = %d\n"</span>, memint);</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"_Bool = %d\n"</span>, membool);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> C Programing Lanuage </tag>
            
            <tag> Bool </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
